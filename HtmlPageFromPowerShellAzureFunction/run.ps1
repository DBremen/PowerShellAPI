Function Get-DataTableHtml {
	function ql {$args}
	$base64DemoPageCSS = 'IC8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICAqIEdlbmVyYWwgcGFnZSBzZXR1cCAgKi8gI2R0X2V4YW1wbGUgeyAJZm9udDogODAlLzEuNDVlbSAiTHVjaWRhIEdyYW5kZSIsIFZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7IAltYXJnaW46IDA7IAlwYWRkaW5nOiAwOyAJY29sb3I6ICMzMzM7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOyB9ICAgI2R0X2V4YW1wbGUgI2NvbnRhaW5lciB7IAl3aWR0aDogODAwcHg7IAltYXJnaW46IDMwcHggYXV0bzsgCXBhZGRpbmc6IDA7IH0gICAjZHRfZXhhbXBsZSAjZm9vdGVyIHsgCW1hcmdpbjogNTBweCBhdXRvIDAgYXV0bzsgCXBhZGRpbmc6IDA7IH0gICNkdF9leGFtcGxlICNkZW1vIHsgCW1hcmdpbjogMzBweCBhdXRvIDAgYXV0bzsgfSAgI2R0X2V4YW1wbGUgLmRlbW9fanVpIHsgCW1hcmdpbjogMzBweCBhdXRvIDAgYXV0bzsgfSAgI2R0X2V4YW1wbGUgLmJpZyB7IAlmb250LXNpemU6IDEuM2VtOyAJZm9udC13ZWlnaHQ6IGJvbGQ7IAlsaW5lLWhlaWdodDogMS42ZW07IAljb2xvcjogIzRFNkNBMzsgfSAgI2R0X2V4YW1wbGUgLnNwYWNlciB7IAloZWlnaHQ6IDIwcHg7IAljbGVhcjogYm90aDsgfSAgI2R0X2V4YW1wbGUgLmNsZWFyIHsgCWNsZWFyOiBib3RoOyB9ICAjZHRfZXhhbXBsZSBwcmUgeyAJcGFkZGluZzogMTVweDsgCWJhY2tncm91bmQtY29sb3I6ICNGNUY1RjU7IAlib3JkZXI6IDFweCBzb2xpZCAjQ0NDQ0NDOyB9ICAjZHRfZXhhbXBsZSBoMSB7IAltYXJnaW4tdG9wOiAyZW07IAlmb250LXNpemU6IDEuM2VtOyAJZm9udC13ZWlnaHQ6IG5vcm1hbDsgCWxpbmUtaGVpZ2h0OiAxLjZlbTsgCWNvbG9yOiAjNEU2Q0EzOyAJYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNCMEJFRDk7IAljbGVhcjogYm90aDsgfSAgI2R0X2V4YW1wbGUgaDIgeyAJZm9udC1zaXplOiAxLjJlbTsgCWZvbnQtd2VpZ2h0OiBub3JtYWw7IAlsaW5lLWhlaWdodDogMS42ZW07IAljb2xvcjogIzRFNkNBMzsgCWNsZWFyOiBib3RoOyB9ICAjZHRfZXhhbXBsZSBhIHsgCWNvbG9yOiAjMDA2M0RDOyAJdGV4dC1kZWNvcmF0aW9uOiBub25lOyB9ICAjZHRfZXhhbXBsZSBhOmhvdmVyIHsgCXRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyB9ICAjZHRfZXhhbXBsZSB1bCB7IAljb2xvcjogIzRFNkNBMzsgfSAgLmNzc19yaWdodCB7IAlmbG9hdDogcmlnaHQ7IH0gIC5jc3NfbGVmdCB7IAlmbG9hdDogbGVmdDsgfQ=='
	$base64DemoTableCSS='LyogICogIEZpbGU6ICAgICAgICAgZGVtb190YWJsZS5jc3MgICogIENWUzogICAgICAgICAgJElkJCAgKiAgRGVzY3JpcHRpb246ICBDU1MgZGVzY3JpcHRpb25zIGZvciBEYXRhVGFibGVzIGRlbW8gcGFnZXMgICogIEF1dGhvcjogICAgICAgQWxsYW4gSmFyZGluZSAgKiAgQ3JlYXRlZDogICAgICBUdWUgTWF5IDEyIDA2OjQ3OjIyIEJTVCAyMDA5ICAqICBNb2RpZmllZDogICAgICREYXRlJCBieSAkQXV0aG9yJCAgKiAgTGFuZ3VhZ2U6ICAgICBDU1MgICogIFByb2plY3Q6ICAgICAgRGF0YVRhYmxlcyAgKiAgKiAgQ29weXJpZ2h0IDIwMDkgQWxsYW4gSmFyZGluZS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4gICogICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICAqIERFU0NSSVBUSU9OICAqICAqIFRoZSBzdHlsZXMgZ2l2ZW4gaGVyZSBhcmUgc3VpdGFibGUgZm9yIHRoZSBkZW1vcyB0aGF0IGFyZSB1c2VkIHdpdGggdGhlIHN0YW5kYXJkIERhdGFUYWJsZXMgICogZGlzdHJpYnV0aW9uIChzZWUgd3d3LmRhdGF0YWJsZXMubmV0KS4gWW91IHdpbGwgbW9zdCBsaWtlbHkgd2lzaCB0byBtb2RpZnkgdGhlc2Ugc3R5bGVzIHRvICAqIG1lZXQgdGhlIGxheW91dCByZXF1aXJlbWVudHMgb2YgeW91ciBzaXRlLiAgKiAgKiBDb21tb24gaXNzdWVzOiAgKiAgICdmdWxsX251bWJlcnMnIHBhZ2luYXRpb24gLSBJIHVzZSBhbiBleHRyYSBzZWxlY3RvciBvbiB0aGUgYm9keSB0YWcgdG8gZW5zdXJlIHRoYXQgdGhlcmUgaXMgICogICAgIG5vIGNvbmZsaWN0IGJldHdlZW4gdGhlIHR3byBwYWdpbmF0aW9uIHR5cGVzLiBJZiB5b3Ugd2FudCB0byB1c2UgZnVsbF9udW1iZXJzIHBhZ2luYXRpb24gICogICAgIGVuc3VyZSB0aGF0IHlvdSBlaXRoZXIgaGF2ZSAiZXhhbXBsZV9hbHRfcGFnaW5hdGlvbiIgYXMgYSBib2R5IGNsYXNzIG5hbWUsIG9yIGJldHRlciB5ZXQsICAqICAgICBtb2RpZnkgdGhhdCBzZWxlY3Rvci4gICogICBOb3RlIHRoYXQgdGhlIHBhdGggdXNlZCBmb3IgSW1hZ2VzIGlzIHJlbGF0aXZlLiBBbGwgaW1hZ2VzIGFyZSBieSBkZWZhdWx0IGxvY2F0ZWQgaW4gICogICAgIC4uL2ltYWdlcy8gLSByZWxhdGl2ZSB0byB0aGlzIENTUyBmaWxlLiAgKi8gIC8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICAqIERhdGFUYWJsZXMgZmVhdHVyZXMgICovICAuZGF0YVRhYmxlc193cmFwcGVyIHsgCXBvc2l0aW9uOiByZWxhdGl2ZTsgCW1pbi1oZWlnaHQ6IDMwMnB4OyAJY2xlYXI6IGJvdGg7IAlfaGVpZ2h0OiAzMDJweDsgCXpvb206IDE7IC8qIEZlZWxpbmcgc29ycnkgZm9yIElFICovIH0gIC5kYXRhVGFibGVzX3Byb2Nlc3NpbmcgeyAJcG9zaXRpb246IGFic29sdXRlOyAJdG9wOiA1MCU7IAlsZWZ0OiA1MCU7IAl3aWR0aDogMjUwcHg7IAloZWlnaHQ6IDMwcHg7IAltYXJnaW4tbGVmdDogLTEyNXB4OyAJbWFyZ2luLXRvcDogLTE1cHg7IAlwYWRkaW5nOiAxNHB4IDAgMnB4IDA7IAlib3JkZXI6IDFweCBzb2xpZCAjZGRkOyAJdGV4dC1hbGlnbjogY2VudGVyOyAJY29sb3I6ICM5OTk7IAlmb250LXNpemU6IDE0cHg7IAliYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgfSAgLmRhdGFUYWJsZXNfbGVuZ3RoIHsgCXdpZHRoOiA0MCU7IAlmbG9hdDogbGVmdDsgfSAgLmRhdGFUYWJsZXNfZmlsdGVyIHsgCXdpZHRoOiA1MCU7IAlmbG9hdDogcmlnaHQ7IAl0ZXh0LWFsaWduOiByaWdodDsgfSAgLmRhdGFUYWJsZXNfaW5mbyB7IAl3aWR0aDogNjAlOyAJZmxvYXQ6IGxlZnQ7IH0gIC5kYXRhVGFibGVzX3BhZ2luYXRlIHsgCXdpZHRoOiA0NHB4OyAJKiB3aWR0aDogNTBweDsgCWZsb2F0OiByaWdodDsgCXRleHQtYWxpZ246IHJpZ2h0OyB9ICAvKiBQYWdpbmF0aW9uIG5lc3RlZCAqLyAucGFnaW5hdGVfZGlzYWJsZWRfcHJldmlvdXMsIC5wYWdpbmF0ZV9lbmFibGVkX3ByZXZpb3VzLCAucGFnaW5hdGVfZGlzYWJsZWRfbmV4dCwgLnBhZ2luYXRlX2VuYWJsZWRfbmV4dCB7IAloZWlnaHQ6IDE5cHg7IAl3aWR0aDogMTlweDsgCW1hcmdpbi1sZWZ0OiAzcHg7IAlmbG9hdDogbGVmdDsgfSAgLnBhZ2luYXRlX2Rpc2FibGVkX3ByZXZpb3VzIHsgCWJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vaW1hZ2VzL2JhY2tfZGlzYWJsZWQuanBnJyk7IH0gIC5wYWdpbmF0ZV9lbmFibGVkX3ByZXZpb3VzIHsgCWJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vaW1hZ2VzL2JhY2tfZW5hYmxlZC5qcGcnKTsgfSAgLnBhZ2luYXRlX2Rpc2FibGVkX25leHQgeyAJYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi9pbWFnZXMvZm9yd2FyZF9kaXNhYmxlZC5qcGcnKTsgfSAgLnBhZ2luYXRlX2VuYWJsZWRfbmV4dCB7IAliYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uL2ltYWdlcy9mb3J3YXJkX2VuYWJsZWQuanBnJyk7IH0gICAgLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogICogRGF0YVRhYmxlcyBkaXNwbGF5ICAqLyB0YWJsZS5kaXNwbGF5IHsgCW1hcmdpbjogMCBhdXRvOyAJY2xlYXI6IGJvdGg7IAl3aWR0aDogMTAwJTsgCSAJLyogTm90ZSBGaXJlZm94IDMuNSBhbmQgYmVmb3JlIGhhdmUgYSBidWcgd2l0aCBib3JkZXItY29sbGFwc2UgCSAqICggaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93JTVGYnVnLmNnaT9pZD0xNTU5NTUgKSAgCSAqIGJvcmRlci1zcGFjaW5nOiAwOyBpcyBvbmUgcG9zc2libGUgb3B0aW9uLiBDb25kaXRpb25hbC1jc3MuY29tIGlzIAkgKiB1c2VmdWwgZm9yIHRoaXMga2luZCBvZiB0aGluZyAJICogCSAqIEZ1cnRoZXIgbm90ZSBJRSA2LzcgaGFzIHByb2JsZW1zIHdoZW4gY2FsY3VsYXRpbmcgd2lkdGhzIHdpdGggYm9yZGVyIHdpZHRoLiAJICogSXQgc3VidHJhY3RzIG9uZSBweCByZWxhdGl2ZSB0byB0aGUgb3RoZXIgYnJvd3NlcnMgZnJvbSB0aGUgZmlyc3QgY29sdW1uLCBhbmQgCSAqIGFkZHMgb25lIHRvIHRoZSBlbmQuLi4gCSAqIAkgKiBJZiB5b3Ugd2FudCB0aGF0IGVmZmVjdCBJJ2Qgc3VnZ2VzdCBzZXR0aW5nIGEgYm9yZGVyLXRvcC9sZWZ0IG9uIHRoL3RkJ3MgYW5kICAJICogdGhlbiBmaWxsaW5nIGluIHRoZSBnYXBzIHdpdGggb3RoZXIgYm9yZGVycy4gCSAqLyB9ICB0YWJsZS5kaXNwbGF5IHRoZWFkIHRoIHsgCXBhZGRpbmc6IDNweCAxOHB4IDNweCAxMHB4OyAJYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGJsYWNrOyAJZm9udC13ZWlnaHQ6IGJvbGQ7IAljdXJzb3I6IHBvaW50ZXI7IAkqIGN1cnNvcjogaGFuZDsgfSAgdGFibGUuZGlzcGxheSB0Zm9vdCB0aCB7IAlwYWRkaW5nOiAzcHggMThweCAzcHggMTBweDsgCWJvcmRlci10b3A6IDFweCBzb2xpZCBibGFjazsgCWZvbnQtd2VpZ2h0OiBib2xkOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmhlYWRpbmcyIHRkIHsgCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjYWFhOyB9ICB0YWJsZS5kaXNwbGF5IHRkIHsgCXBhZGRpbmc6IDNweCAxMHB4OyB9ICB0YWJsZS5kaXNwbGF5IHRkLmNlbnRlciB7IAl0ZXh0LWFsaWduOiBjZW50ZXI7IH0gICAgLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogICogRGF0YVRhYmxlcyBzb3J0aW5nICAqLyAgLnNvcnRpbmdfYXNjIHsgCWJhY2tncm91bmQ6IHVybCgnLi4vaW1hZ2VzL3NvcnRfYXNjLnBuZycpIG5vLXJlcGVhdCBjZW50ZXIgcmlnaHQ7IH0gIC5zb3J0aW5nX2Rlc2MgeyAJYmFja2dyb3VuZDogdXJsKCcuLi9pbWFnZXMvc29ydF9kZXNjLnBuZycpIG5vLXJlcGVhdCBjZW50ZXIgcmlnaHQ7IH0gIC5zb3J0aW5nIHsgCWJhY2tncm91bmQ6IHVybCgnLi4vaW1hZ2VzL3NvcnRfYm90aC5wbmcnKSBuby1yZXBlYXQgY2VudGVyIHJpZ2h0OyB9ICAuc29ydGluZ19hc2NfZGlzYWJsZWQgeyAJYmFja2dyb3VuZDogdXJsKCcuLi9pbWFnZXMvc29ydF9hc2NfZGlzYWJsZWQucG5nJykgbm8tcmVwZWF0IGNlbnRlciByaWdodDsgfSAgLnNvcnRpbmdfZGVzY19kaXNhYmxlZCB7IAliYWNrZ3JvdW5kOiB1cmwoJy4uL2ltYWdlcy9zb3J0X2Rlc2NfZGlzYWJsZWQucG5nJykgbm8tcmVwZWF0IGNlbnRlciByaWdodDsgfSAgICAgIC8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICAqIERhdGFUYWJsZXMgcm93IGNsYXNzZXMgICovIHRhYmxlLmRpc3BsYXkgdHIub2RkLmdyYWRlQSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZGRmZmRkOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmV2ZW4uZ3JhZGVBIHsgCWJhY2tncm91bmQtY29sb3I6ICNlZWZmZWU7IH0gIHRhYmxlLmRpc3BsYXkgdHIub2RkLmdyYWRlQyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZGRkZGZmOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmV2ZW4uZ3JhZGVDIHsgCWJhY2tncm91bmQtY29sb3I6ICNlZWVlZmY7IH0gIHRhYmxlLmRpc3BsYXkgdHIub2RkLmdyYWRlWCB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZmZkZGRkOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmV2ZW4uZ3JhZGVYIHsgCWJhY2tncm91bmQtY29sb3I6ICNmZmVlZWU7IH0gIHRhYmxlLmRpc3BsYXkgdHIub2RkLmdyYWRlVSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZGRkOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmV2ZW4uZ3JhZGVVIHsgCWJhY2tncm91bmQtY29sb3I6ICNlZWU7IH0gICB0ci5vZGQgeyAJYmFja2dyb3VuZC1jb2xvcjogI0UyRTRGRjsgfSAgdHIuZXZlbiB7IAliYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgfSAgICAgIC8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICAqIE1pc2MgICovIC5kYXRhVGFibGVzX3Njcm9sbCB7IAljbGVhcjogYm90aDsgfSAgLmRhdGFUYWJsZXNfc2Nyb2xsQm9keSB7IAkqbWFyZ2luLXRvcDogLTFweDsgfSAgLnRvcCwgLmJvdHRvbSB7IAlwYWRkaW5nOiAxNXB4OyAJYmFja2dyb3VuZC1jb2xvcjogI0Y1RjVGNTsgCWJvcmRlcjogMXB4IHNvbGlkICNDQ0NDQ0M7IH0gIC50b3AgLmRhdGFUYWJsZXNfaW5mbyB7IAlmbG9hdDogbm9uZTsgfSAgLmNsZWFyIHsgCWNsZWFyOiBib3RoOyB9ICAuZGF0YVRhYmxlc19lbXB0eSB7IAl0ZXh0LWFsaWduOiBjZW50ZXI7IH0gIHRmb290IGlucHV0IHsgCW1hcmdpbjogMC41ZW0gMDsgCXdpZHRoOiAxMDAlOyAJY29sb3I6ICM0NDQ7IH0gIHRmb290IGlucHV0LnNlYXJjaF9pbml0IHsgCWNvbG9yOiAjOTk5OyB9ICB0ZC5ncm91cCB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZDFjZmQwOyAJYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNBMTlCOUU7IAlib3JkZXItdG9wOiAycHggc29saWQgI0ExOUI5RTsgfSAgdGQuZGV0YWlscyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZDFjZmQwOyAJYm9yZGVyOiAycHggc29saWQgI0ExOUI5RTsgfSAgIC5leGFtcGxlX2FsdF9wYWdpbmF0aW9uIGRpdi5kYXRhVGFibGVzX2luZm8geyAJd2lkdGg6IDQwJTsgfSAgLnBhZ2luZ19mdWxsX251bWJlcnMgeyAJd2lkdGg6IDQwMHB4OyAJaGVpZ2h0OiAyMnB4OyAJbGluZS1oZWlnaHQ6IDIycHg7IH0gIC5wYWdpbmdfZnVsbF9udW1iZXJzIHNwYW4ucGFnaW5hdGVfYnV0dG9uLCAgCS5wYWdpbmdfZnVsbF9udW1iZXJzIHNwYW4ucGFnaW5hdGVfYWN0aXZlIHsgCWJvcmRlcjogMXB4IHNvbGlkICNhYWE7IAktd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDsgCS1tb3otYm9yZGVyLXJhZGl1czogNXB4OyAJcGFkZGluZzogMnB4IDVweDsgCW1hcmdpbjogMCAzcHg7IAljdXJzb3I6IHBvaW50ZXI7IAkqY3Vyc29yOiBoYW5kOyB9ICAucGFnaW5nX2Z1bGxfbnVtYmVycyBzcGFuLnBhZ2luYXRlX2J1dHRvbiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZGRkOyB9ICAucGFnaW5nX2Z1bGxfbnVtYmVycyBzcGFuLnBhZ2luYXRlX2J1dHRvbjpob3ZlciB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjY2NjOyB9ICAucGFnaW5nX2Z1bGxfbnVtYmVycyBzcGFuLnBhZ2luYXRlX2FjdGl2ZSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjOTlCM0ZGOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmV2ZW4ucm93X3NlbGVjdGVkIHRkIHsgCWJhY2tncm91bmQtY29sb3I6ICNCMEJFRDk7IH0gIHRhYmxlLmRpc3BsYXkgdHIub2RkLnJvd19zZWxlY3RlZCB0ZCB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjOUZBRkQxOyB9ICAgLyogICogU29ydGluZyBjbGFzc2VzIGZvciBjb2x1bW5zICAqLyAvKiBGb3IgdGhlIHN0YW5kYXJkIG9kZC9ldmVuICovIHRyLm9kZCB0ZC5zb3J0aW5nXzEgeyAJYmFja2dyb3VuZC1jb2xvcjogI0QzRDZGRjsgfSAgdHIub2RkIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjREFEQ0ZGOyB9ICB0ci5vZGQgdGQuc29ydGluZ18zIHsgCWJhY2tncm91bmQtY29sb3I6ICNFMEUyRkY7IH0gIHRyLmV2ZW4gdGQuc29ydGluZ18xIHsgCWJhY2tncm91bmQtY29sb3I6ICNFQUVCRkY7IH0gIHRyLmV2ZW4gdGQuc29ydGluZ18yIHsgCWJhY2tncm91bmQtY29sb3I6ICNGMkYzRkY7IH0gIHRyLmV2ZW4gdGQuc29ydGluZ18zIHsgCWJhY2tncm91bmQtY29sb3I6ICNGOUY5RkY7IH0gICAvKiBGb3IgdGhlIENvbmRpdGlvbmFsLUNTUyBncmFkaW5nIHJvd3MgKi8gLyogIAlDb2xvdXIgY2FsY3VsYXRpb25zIChiYXNlZCBvZmYgdGhlIG1haW4gcm93IGNvbG91cnMpICAgTGV2ZWwgMTogCQlkZCA+IGM0IAkJZWUgPiBkNSAJTGV2ZWwgMjogCSAgZGQgPiBkMSAJICBlZSA+IGUyICAqLyB0ci5vZGQuZ3JhZGVBIHRkLnNvcnRpbmdfMSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjYzRmZmM0OyB9ICB0ci5vZGQuZ3JhZGVBIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZDFmZmQxOyB9ICB0ci5vZGQuZ3JhZGVBIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZDFmZmQxOyB9ICB0ci5ldmVuLmdyYWRlQSB0ZC5zb3J0aW5nXzEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2Q1ZmZkNTsgfSAgdHIuZXZlbi5ncmFkZUEgdGQuc29ydGluZ18yIHsgCWJhY2tncm91bmQtY29sb3I6ICNlMmZmZTI7IH0gIHRyLmV2ZW4uZ3JhZGVBIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZTJmZmUyOyB9ICB0ci5vZGQuZ3JhZGVDIHRkLnNvcnRpbmdfMSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjYzRjNGZmOyB9ICB0ci5vZGQuZ3JhZGVDIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZDFkMWZmOyB9ICB0ci5vZGQuZ3JhZGVDIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZDFkMWZmOyB9ICB0ci5ldmVuLmdyYWRlQyB0ZC5zb3J0aW5nXzEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2Q1ZDVmZjsgfSAgdHIuZXZlbi5ncmFkZUMgdGQuc29ydGluZ18yIHsgCWJhY2tncm91bmQtY29sb3I6ICNlMmUyZmY7IH0gIHRyLmV2ZW4uZ3JhZGVDIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZTJlMmZmOyB9ICB0ci5vZGQuZ3JhZGVYIHRkLnNvcnRpbmdfMSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZmZjNGM0OyB9ICB0ci5vZGQuZ3JhZGVYIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZmZkMWQxOyB9ICB0ci5vZGQuZ3JhZGVYIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZmZkMWQxOyB9ICB0ci5ldmVuLmdyYWRlWCB0ZC5zb3J0aW5nXzEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2ZmZDVkNTsgfSAgdHIuZXZlbi5ncmFkZVggdGQuc29ydGluZ18yIHsgCWJhY2tncm91bmQtY29sb3I6ICNmZmUyZTI7IH0gIHRyLmV2ZW4uZ3JhZGVYIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZmZlMmUyOyB9ICB0ci5vZGQuZ3JhZGVVIHRkLnNvcnRpbmdfMSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjYzRjNGM0OyB9ICB0ci5vZGQuZ3JhZGVVIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZDFkMWQxOyB9ICB0ci5vZGQuZ3JhZGVVIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZDFkMWQxOyB9ICB0ci5ldmVuLmdyYWRlVSB0ZC5zb3J0aW5nXzEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2Q1ZDVkNTsgfSAgdHIuZXZlbi5ncmFkZVUgdGQuc29ydGluZ18yIHsgCWJhY2tncm91bmQtY29sb3I6ICNlMmUyZTI7IH0gIHRyLmV2ZW4uZ3JhZGVVIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZTJlMmUyOyB9ICAgLyogICogUm93IGhpZ2hsaWdodGluZyBleGFtcGxlICAqLyAuZXhfaGlnaGxpZ2h0ICNleGFtcGxlIHRib2R5IHRyLmV2ZW46aG92ZXIsICNleGFtcGxlIHRib2R5IHRyLmV2ZW4gdGQuaGlnaGxpZ2h0ZWQgeyAJYmFja2dyb3VuZC1jb2xvcjogI0VDRkZCMzsgfSAgLmV4X2hpZ2hsaWdodCAjZXhhbXBsZSB0Ym9keSB0ci5vZGQ6aG92ZXIsICNleGFtcGxlIHRib2R5IHRyLm9kZCB0ZC5oaWdobGlnaHRlZCB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjRTZGRjk5OyB9ICAuZXhfaGlnaGxpZ2h0X3JvdyAjZXhhbXBsZSB0ci5ldmVuOmhvdmVyIHsgCWJhY2tncm91bmQtY29sb3I6ICNFQ0ZGQjM7IH0gIC5leF9oaWdobGlnaHRfcm93ICNleGFtcGxlIHRyLmV2ZW46aG92ZXIgdGQuc29ydGluZ18xIHsgCWJhY2tncm91bmQtY29sb3I6ICNEREZGNzU7IH0gIC5leF9oaWdobGlnaHRfcm93ICNleGFtcGxlIHRyLmV2ZW46aG92ZXIgdGQuc29ydGluZ18yIHsgCWJhY2tncm91bmQtY29sb3I6ICNFN0ZGOUU7IH0gIC5leF9oaWdobGlnaHRfcm93ICNleGFtcGxlIHRyLmV2ZW46aG92ZXIgdGQuc29ydGluZ18zIHsgCWJhY2tncm91bmQtY29sb3I6ICNFMkZGODk7IH0gIC5leF9oaWdobGlnaHRfcm93ICNleGFtcGxlIHRyLm9kZDpob3ZlciB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjRTZGRjk5OyB9ICAuZXhfaGlnaGxpZ2h0X3JvdyAjZXhhbXBsZSB0ci5vZGQ6aG92ZXIgdGQuc29ydGluZ18xIHsgCWJhY2tncm91bmQtY29sb3I6ICNENkZGNUM7IH0gIC5leF9oaWdobGlnaHRfcm93ICNleGFtcGxlIHRyLm9kZDpob3ZlciB0ZC5zb3J0aW5nXzIgeyAJYmFja2dyb3VuZC1jb2xvcjogI0UwRkY4NDsgfSAgLmV4X2hpZ2hsaWdodF9yb3cgI2V4YW1wbGUgdHIub2RkOmhvdmVyIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjREJGRjcwOyB9ICAgLyogICogS2V5VGFibGUgICovIHRhYmxlLktleVRhYmxlIHRkIHsgCWJvcmRlcjogM3B4IHNvbGlkIHRyYW5zcGFyZW50OyB9ICB0YWJsZS5LZXlUYWJsZSB0ZC5mb2N1cyB7IAlib3JkZXI6IDNweCBzb2xpZCAjMzM2NkZGOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmdyYWRlQSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZWVmZmVlOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmdyYWRlQyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZGRkZGZmOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmdyYWRlWCB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZmZkZGRkOyB9ICB0YWJsZS5kaXNwbGF5IHRyLmdyYWRlVSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZGRkOyB9ICBkaXYuYm94IHsgCWhlaWdodDogMTAwcHg7IAlwYWRkaW5nOiAxMHB4OyAJb3ZlcmZsb3c6IGF1dG87IAlib3JkZXI6IDFweCBzb2xpZCAjODA4MEZGOyAJYmFja2dyb3VuZC1jb2xvcjogI0U1RTVGRjsgfQ=='	
	$base64DemoTableJUICSS='LyogICogIEZpbGU6ICAgICAgICAgZGVtb190YWJsZV9qdWkuY3NzICAqICBDVlM6ICAgICAgICAgICRJZCQgICogIERlc2NyaXB0aW9uOiAgQ1NTIGRlc2NyaXB0aW9ucyBmb3IgRGF0YVRhYmxlcyBkZW1vIHBhZ2VzICAqICBBdXRob3I6ICAgICAgIEFsbGFuIEphcmRpbmUgICogIENyZWF0ZWQ6ICAgICAgVHVlIE1heSAxMiAwNjo0NzoyMiBCU1QgMjAwOSAgKiAgTW9kaWZpZWQ6ICAgICAkRGF0ZSQgYnkgJEF1dGhvciQgICogIExhbmd1YWdlOiAgICAgQ1NTICAqICBQcm9qZWN0OiAgICAgIERhdGFUYWJsZXMgICogICogIENvcHlyaWdodCAyMDA5IEFsbGFuIEphcmRpbmUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuICAqICAqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAgKiBERVNDUklQVElPTiAgKiAgKiBUaGUgc3R5bGVzIGdpdmVuIGhlcmUgYXJlIHN1aXRhYmxlIGZvciB0aGUgZGVtb3MgdGhhdCBhcmUgdXNlZCB3aXRoIHRoZSBzdGFuZGFyZCBEYXRhVGFibGVzICAqIGRpc3RyaWJ1dGlvbiAoc2VlIHd3dy5kYXRhdGFibGVzLm5ldCkuIFlvdSB3aWxsIG1vc3QgbGlrZWx5IHdpc2ggdG8gbW9kaWZ5IHRoZXNlIHN0eWxlcyB0byAgKiBtZWV0IHRoZSBsYXlvdXQgcmVxdWlyZW1lbnRzIG9mIHlvdXIgc2l0ZS4gICogICogQ29tbW9uIGlzc3VlczogICogICAnZnVsbF9udW1iZXJzJyBwYWdpbmF0aW9uIC0gSSB1c2UgYW4gZXh0cmEgc2VsZWN0b3Igb24gdGhlIGJvZHkgdGFnIHRvIGVuc3VyZSB0aGF0IHRoZXJlIGlzICAqICAgICBubyBjb25mbGljdCBiZXR3ZWVuIHRoZSB0d28gcGFnaW5hdGlvbiB0eXBlcy4gSWYgeW91IHdhbnQgdG8gdXNlIGZ1bGxfbnVtYmVycyBwYWdpbmF0aW9uICAqICAgICBlbnN1cmUgdGhhdCB5b3UgZWl0aGVyIGhhdmUgImV4YW1wbGVfYWx0X3BhZ2luYXRpb24iIGFzIGEgYm9keSBjbGFzcyBuYW1lLCBvciBiZXR0ZXIgeWV0LCAgKiAgICAgbW9kaWZ5IHRoYXQgc2VsZWN0b3IuICAqICAgTm90ZSB0aGF0IHRoZSBwYXRoIHVzZWQgZm9yIEltYWdlcyBpcyByZWxhdGl2ZS4gQWxsIGltYWdlcyBhcmUgYnkgZGVmYXVsdCBsb2NhdGVkIGluICAqICAgICAuLi9pbWFnZXMvIC0gcmVsYXRpdmUgdG8gdGhpcyBDU1MgZmlsZS4gICovICAgLyogICogalF1ZXJ5IFVJIHNwZWNpZmljIHN0eWxpbmcgICovICAucGFnaW5nX3R3b19idXR0b24gLnVpLWJ1dHRvbiB7IAlmbG9hdDogbGVmdDsgCWN1cnNvcjogcG9pbnRlcjsgCSogY3Vyc29yOiBoYW5kOyB9ICAucGFnaW5nX2Z1bGxfbnVtYmVycyAudWktYnV0dG9uIHsgCXBhZGRpbmc6IDJweCA2cHg7IAltYXJnaW46IDA7IAljdXJzb3I6IHBvaW50ZXI7IAkqIGN1cnNvcjogaGFuZDsgfSAgLnVpLWJ1dHRvbnNldCAudWktYnV0dG9uIHsgCW1hcmdpbi1yaWdodDogLTAuMWVtICFpbXBvcnRhbnQ7IH0gIC5wYWdpbmdfZnVsbF9udW1iZXJzIHsgCXdpZHRoOiAzNTBweCAhaW1wb3J0YW50OyB9ICAudWktdG9vbGJhciB7IAlwYWRkaW5nOiA1cHg7IH0gIC5kYXRhVGFibGVzX3BhZ2luYXRlIHsgCXdpZHRoOiBhdXRvOyB9ICAuZGF0YVRhYmxlc19pbmZvIHsgCXBhZGRpbmctdG9wOiAzcHg7IH0gIHRhYmxlLmRpc3BsYXkgdGhlYWQgdGggeyAJcGFkZGluZzogM3B4IDBweCAzcHggMTBweDsgCWN1cnNvcjogcG9pbnRlcjsgCSogY3Vyc29yOiBoYW5kOyB9ICBkaXYuZGF0YVRhYmxlc193cmFwcGVyIC51aS13aWRnZXQtaGVhZGVyIHsgCWZvbnQtd2VpZ2h0OiBub3JtYWw7IH0gICAvKiAgKiBTb3J0IGFycm93IGljb24gcG9zaXRpb25pbmcgICovIHRhYmxlLmRpc3BsYXkgdGhlYWQgdGggZGl2LkRhdGFUYWJsZXNfc29ydF93cmFwcGVyIHsgCXBvc2l0aW9uOiByZWxhdGl2ZTsgCXBhZGRpbmctcmlnaHQ6IDIwcHg7IAlwYWRkaW5nLXJpZ2h0OiAyMHB4OyB9ICB0YWJsZS5kaXNwbGF5IHRoZWFkIHRoIGRpdi5EYXRhVGFibGVzX3NvcnRfd3JhcHBlciBzcGFuIHsgCXBvc2l0aW9uOiBhYnNvbHV0ZTsgCXRvcDogNTAlOyAJbWFyZ2luLXRvcDogLThweDsgCXJpZ2h0OiAwOyB9ICAgICAvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAgKiAgKiBFdmVyeXRoaW5nIGJlbG93IHRoaXMgbGluZSBpcyB0aGUgc2FtZSBhcyBkZW1vX3RhYmxlLmNzcy4gVGhpcyBmaWxlIGlzICAqIHJlcXVpcmVkIGZvciAnY2xlYW5saW5lc3MnIG9mIHRoZSBtYXJrdXAgICogICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovICAgIC8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICAqIERhdGFUYWJsZXMgZmVhdHVyZXMgICovICAuZGF0YVRhYmxlc193cmFwcGVyIHsgCXBvc2l0aW9uOiByZWxhdGl2ZTsgCW1pbi1oZWlnaHQ6IDMwMnB4OyAJX2hlaWdodDogMzAycHg7IAljbGVhcjogYm90aDsgfSAgLmRhdGFUYWJsZXNfcHJvY2Vzc2luZyB7IAlwb3NpdGlvbjogYWJzb2x1dGU7IAl0b3A6IDBweDsgCWxlZnQ6IDUwJTsgCXdpZHRoOiAyNTBweDsgCW1hcmdpbi1sZWZ0OiAtMTI1cHg7IAlib3JkZXI6IDFweCBzb2xpZCAjZGRkOyAJdGV4dC1hbGlnbjogY2VudGVyOyAJY29sb3I6ICM5OTk7IAlmb250LXNpemU6IDExcHg7IAlwYWRkaW5nOiAycHggMDsgfSAgLmRhdGFUYWJsZXNfbGVuZ3RoIHsgCXdpZHRoOiA0MCU7IAlmbG9hdDogbGVmdDsgfSAgLmRhdGFUYWJsZXNfZmlsdGVyIHsgCXdpZHRoOiA1MCU7IAlmbG9hdDogcmlnaHQ7IAl0ZXh0LWFsaWduOiByaWdodDsgfSAgLmRhdGFUYWJsZXNfaW5mbyB7IAl3aWR0aDogNTAlOyAJZmxvYXQ6IGxlZnQ7IH0gIC5kYXRhVGFibGVzX3BhZ2luYXRlIHsgCWZsb2F0OiByaWdodDsgCXRleHQtYWxpZ246IHJpZ2h0OyB9ICAvKiBQYWdpbmF0aW9uIG5lc3RlZCAqLyAucGFnaW5hdGVfZGlzYWJsZWRfcHJldmlvdXMsIC5wYWdpbmF0ZV9lbmFibGVkX3ByZXZpb3VzLCAucGFnaW5hdGVfZGlzYWJsZWRfbmV4dCwgLnBhZ2luYXRlX2VuYWJsZWRfbmV4dCB7IAloZWlnaHQ6IDE5cHg7IAl3aWR0aDogMTlweDsgCW1hcmdpbi1sZWZ0OiAzcHg7IAlmbG9hdDogbGVmdDsgfSAgLnBhZ2luYXRlX2Rpc2FibGVkX3ByZXZpb3VzIHsgCWJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vaW1hZ2VzL2JhY2tfZGlzYWJsZWQuanBnJyk7IH0gIC5wYWdpbmF0ZV9lbmFibGVkX3ByZXZpb3VzIHsgCWJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vaW1hZ2VzL2JhY2tfZW5hYmxlZC5qcGcnKTsgfSAgLnBhZ2luYXRlX2Rpc2FibGVkX25leHQgeyAJYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi9pbWFnZXMvZm9yd2FyZF9kaXNhYmxlZC5qcGcnKTsgfSAgLnBhZ2luYXRlX2VuYWJsZWRfbmV4dCB7IAliYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uL2ltYWdlcy9mb3J3YXJkX2VuYWJsZWQuanBnJyk7IH0gICAgLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogICogRGF0YVRhYmxlcyBkaXNwbGF5ICAqLyB0YWJsZS5kaXNwbGF5IHsgCW1hcmdpbjogMCBhdXRvOyAJd2lkdGg6IDEwMCU7IAljbGVhcjogYm90aDsgCWJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IH0gIHRhYmxlLmRpc3BsYXkgdGZvb3QgdGggeyAJcGFkZGluZzogM3B4IDBweCAzcHggMTBweDsgCWZvbnQtd2VpZ2h0OiBib2xkOyAJZm9udC13ZWlnaHQ6IG5vcm1hbDsgfSAgdGFibGUuZGlzcGxheSB0ci5oZWFkaW5nMiB0ZCB7IAlib3JkZXItYm90dG9tOiAxcHggc29saWQgI2FhYTsgfSAgdGFibGUuZGlzcGxheSB0ZCB7IAlwYWRkaW5nOiAzcHggMTBweDsgfSAgdGFibGUuZGlzcGxheSB0ZC5jZW50ZXIgeyAJdGV4dC1hbGlnbjogY2VudGVyOyB9ICAgIC8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICAqIERhdGFUYWJsZXMgc29ydGluZyAgKi8gIC5zb3J0aW5nX2FzYyB7IAliYWNrZ3JvdW5kOiB1cmwoJy4uL2ltYWdlcy9zb3J0X2FzYy5qcGcnKSBuby1yZXBlYXQgY2VudGVyIHJpZ2h0OyB9ICAuc29ydGluZ19kZXNjIHsgCWJhY2tncm91bmQ6IHVybCgnLi4vaW1hZ2VzL3NvcnRfZGVzYy5qcGcnKSBuby1yZXBlYXQgY2VudGVyIHJpZ2h0OyB9ICAuc29ydGluZyB7IAliYWNrZ3JvdW5kOiB1cmwoJy4uL2ltYWdlcy9zb3J0X2JvdGguanBnJykgbm8tcmVwZWF0IGNlbnRlciByaWdodDsgfSAgICAgLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogICogRGF0YVRhYmxlcyByb3cgY2xhc3NlcyAgKi8gdGFibGUuZGlzcGxheSB0ci5vZGQuZ3JhZGVBIHsgCWJhY2tncm91bmQtY29sb3I6ICNkZGZmZGQ7IH0gIHRhYmxlLmRpc3BsYXkgdHIuZXZlbi5ncmFkZUEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2VlZmZlZTsgfSAgICAgdGFibGUuZGlzcGxheSB0ci5vZGQuZ3JhZGVBIHsgCWJhY2tncm91bmQtY29sb3I6ICNkZGZmZGQ7IH0gIHRhYmxlLmRpc3BsYXkgdHIuZXZlbi5ncmFkZUEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2VlZmZlZTsgfSAgdGFibGUuZGlzcGxheSB0ci5vZGQuZ3JhZGVDIHsgCWJhY2tncm91bmQtY29sb3I6ICNkZGRkZmY7IH0gIHRhYmxlLmRpc3BsYXkgdHIuZXZlbi5ncmFkZUMgeyAJYmFja2dyb3VuZC1jb2xvcjogI2VlZWVmZjsgfSAgdGFibGUuZGlzcGxheSB0ci5vZGQuZ3JhZGVYIHsgCWJhY2tncm91bmQtY29sb3I6ICNmZmRkZGQ7IH0gIHRhYmxlLmRpc3BsYXkgdHIuZXZlbi5ncmFkZVggeyAJYmFja2dyb3VuZC1jb2xvcjogI2ZmZWVlZTsgfSAgdGFibGUuZGlzcGxheSB0ci5vZGQuZ3JhZGVVIHsgCWJhY2tncm91bmQtY29sb3I6ICNkZGQ7IH0gIHRhYmxlLmRpc3BsYXkgdHIuZXZlbi5ncmFkZVUgeyAJYmFja2dyb3VuZC1jb2xvcjogI2VlZTsgfSAgIHRyLm9kZCB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjRTJFNEZGOyB9ICB0ci5ldmVuIHsgCWJhY2tncm91bmQtY29sb3I6IHdoaXRlOyB9ICAgICAgLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogICogTWlzYyAgKi8gLmRhdGFUYWJsZXNfc2Nyb2xsIHsgCWNsZWFyOiBib3RoOyB9ICAudG9wLCAuYm90dG9tIHsgCXBhZGRpbmc6IDE1cHg7IAliYWNrZ3JvdW5kLWNvbG9yOiAjRjVGNUY1OyAJYm9yZGVyOiAxcHggc29saWQgI0NDQ0NDQzsgfSAgLnRvcCAuZGF0YVRhYmxlc19pbmZvIHsgCWZsb2F0OiBub25lOyB9ICAuY2xlYXIgeyAJY2xlYXI6IGJvdGg7IH0gIC5kYXRhVGFibGVzX2VtcHR5IHsgCXRleHQtYWxpZ246IGNlbnRlcjsgfSAgdGZvb3QgaW5wdXQgeyAJbWFyZ2luOiAwLjVlbSAwOyAJd2lkdGg6IDEwMCU7IAljb2xvcjogIzQ0NDsgfSAgdGZvb3QgaW5wdXQuc2VhcmNoX2luaXQgeyAJY29sb3I6ICM5OTk7IH0gIHRkLmdyb3VwIHsgCWJhY2tncm91bmQtY29sb3I6ICNkMWNmZDA7IAlib3JkZXItYm90dG9tOiAycHggc29saWQgI0ExOUI5RTsgCWJvcmRlci10b3A6IDJweCBzb2xpZCAjQTE5QjlFOyB9ICB0ZC5kZXRhaWxzIHsgCWJhY2tncm91bmQtY29sb3I6ICNkMWNmZDA7IAlib3JkZXI6IDJweCBzb2xpZCAjQTE5QjlFOyB9ICAgLmV4YW1wbGVfYWx0X3BhZ2luYXRpb24gZGl2LmRhdGFUYWJsZXNfaW5mbyB7IAl3aWR0aDogNDAlOyB9ICAucGFnaW5nX2Z1bGxfbnVtYmVycyBzcGFuLnBhZ2luYXRlX2J1dHRvbiwgIAkucGFnaW5nX2Z1bGxfbnVtYmVycyBzcGFuLnBhZ2luYXRlX2FjdGl2ZSB7IAlib3JkZXI6IDFweCBzb2xpZCAjYWFhOyAJLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7IAktbW96LWJvcmRlci1yYWRpdXM6IDVweDsgCXBhZGRpbmc6IDJweCA1cHg7IAltYXJnaW46IDAgM3B4OyAJY3Vyc29yOiBwb2ludGVyOyAJKmN1cnNvcjogaGFuZDsgfSAgLnBhZ2luZ19mdWxsX251bWJlcnMgc3Bhbi5wYWdpbmF0ZV9idXR0b24geyAJYmFja2dyb3VuZC1jb2xvcjogI2RkZDsgfSAgLnBhZ2luZ19mdWxsX251bWJlcnMgc3Bhbi5wYWdpbmF0ZV9idXR0b246aG92ZXIgeyAJYmFja2dyb3VuZC1jb2xvcjogI2NjYzsgfSAgLnBhZ2luZ19mdWxsX251bWJlcnMgc3Bhbi5wYWdpbmF0ZV9hY3RpdmUgeyAJYmFja2dyb3VuZC1jb2xvcjogIzk5QjNGRjsgfSAgdGFibGUuZGlzcGxheSB0ci5ldmVuLnJvd19zZWxlY3RlZCB0ZCB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjQjBCRUQ5OyB9ICB0YWJsZS5kaXNwbGF5IHRyLm9kZC5yb3dfc2VsZWN0ZWQgdGQgeyAJYmFja2dyb3VuZC1jb2xvcjogIzlGQUZEMTsgfSAgIC8qICAqIFNvcnRpbmcgY2xhc3NlcyBmb3IgY29sdW1ucyAgKi8gLyogRm9yIHRoZSBzdGFuZGFyZCBvZGQvZXZlbiAqLyB0ci5vZGQgdGQuc29ydGluZ18xIHsgCWJhY2tncm91bmQtY29sb3I6ICNEM0Q2RkY7IH0gIHRyLm9kZCB0ZC5zb3J0aW5nXzIgeyAJYmFja2dyb3VuZC1jb2xvcjogI0RBRENGRjsgfSAgdHIub2RkIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjRTBFMkZGOyB9ICB0ci5ldmVuIHRkLnNvcnRpbmdfMSB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjRUFFQkZGOyB9ICB0ci5ldmVuIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjRjJGM0ZGOyB9ICB0ci5ldmVuIHRkLnNvcnRpbmdfMyB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjRjlGOUZGOyB9ICAgLyogRm9yIHRoZSBDb25kaXRpb25hbC1DU1MgZ3JhZGluZyByb3dzICovIC8qICAJQ29sb3VyIGNhbGN1bGF0aW9ucyAoYmFzZWQgb2ZmIHRoZSBtYWluIHJvdyBjb2xvdXJzKSAgIExldmVsIDE6IAkJZGQgPiBjNCAJCWVlID4gZDUgCUxldmVsIDI6IAkgIGRkID4gZDEgCSAgZWUgPiBlMiAgKi8gdHIub2RkLmdyYWRlQSB0ZC5zb3J0aW5nXzEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2M0ZmZjNDsgfSAgdHIub2RkLmdyYWRlQSB0ZC5zb3J0aW5nXzIgeyAJYmFja2dyb3VuZC1jb2xvcjogI2QxZmZkMTsgfSAgdHIub2RkLmdyYWRlQSB0ZC5zb3J0aW5nXzMgeyAJYmFja2dyb3VuZC1jb2xvcjogI2QxZmZkMTsgfSAgdHIuZXZlbi5ncmFkZUEgdGQuc29ydGluZ18xIHsgCWJhY2tncm91bmQtY29sb3I6ICNkNWZmZDU7IH0gIHRyLmV2ZW4uZ3JhZGVBIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZTJmZmUyOyB9ICB0ci5ldmVuLmdyYWRlQSB0ZC5zb3J0aW5nXzMgeyAJYmFja2dyb3VuZC1jb2xvcjogI2UyZmZlMjsgfSAgdHIub2RkLmdyYWRlQyB0ZC5zb3J0aW5nXzEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2M0YzRmZjsgfSAgdHIub2RkLmdyYWRlQyB0ZC5zb3J0aW5nXzIgeyAJYmFja2dyb3VuZC1jb2xvcjogI2QxZDFmZjsgfSAgdHIub2RkLmdyYWRlQyB0ZC5zb3J0aW5nXzMgeyAJYmFja2dyb3VuZC1jb2xvcjogI2QxZDFmZjsgfSAgdHIuZXZlbi5ncmFkZUMgdGQuc29ydGluZ18xIHsgCWJhY2tncm91bmQtY29sb3I6ICNkNWQ1ZmY7IH0gIHRyLmV2ZW4uZ3JhZGVDIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZTJlMmZmOyB9ICB0ci5ldmVuLmdyYWRlQyB0ZC5zb3J0aW5nXzMgeyAJYmFja2dyb3VuZC1jb2xvcjogI2UyZTJmZjsgfSAgdHIub2RkLmdyYWRlWCB0ZC5zb3J0aW5nXzEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2ZmYzRjNDsgfSAgdHIub2RkLmdyYWRlWCB0ZC5zb3J0aW5nXzIgeyAJYmFja2dyb3VuZC1jb2xvcjogI2ZmZDFkMTsgfSAgdHIub2RkLmdyYWRlWCB0ZC5zb3J0aW5nXzMgeyAJYmFja2dyb3VuZC1jb2xvcjogI2ZmZDFkMTsgfSAgdHIuZXZlbi5ncmFkZVggdGQuc29ydGluZ18xIHsgCWJhY2tncm91bmQtY29sb3I6ICNmZmQ1ZDU7IH0gIHRyLmV2ZW4uZ3JhZGVYIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZmZlMmUyOyB9ICB0ci5ldmVuLmdyYWRlWCB0ZC5zb3J0aW5nXzMgeyAJYmFja2dyb3VuZC1jb2xvcjogI2ZmZTJlMjsgfSAgdHIub2RkLmdyYWRlVSB0ZC5zb3J0aW5nXzEgeyAJYmFja2dyb3VuZC1jb2xvcjogI2M0YzRjNDsgfSAgdHIub2RkLmdyYWRlVSB0ZC5zb3J0aW5nXzIgeyAJYmFja2dyb3VuZC1jb2xvcjogI2QxZDFkMTsgfSAgdHIub2RkLmdyYWRlVSB0ZC5zb3J0aW5nXzMgeyAJYmFja2dyb3VuZC1jb2xvcjogI2QxZDFkMTsgfSAgdHIuZXZlbi5ncmFkZVUgdGQuc29ydGluZ18xIHsgCWJhY2tncm91bmQtY29sb3I6ICNkNWQ1ZDU7IH0gIHRyLmV2ZW4uZ3JhZGVVIHRkLnNvcnRpbmdfMiB7IAliYWNrZ3JvdW5kLWNvbG9yOiAjZTJlMmUyOyB9ICB0ci5ldmVuLmdyYWRlVSB0ZC5zb3J0aW5nXzMgeyAJYmFja2dyb3VuZC1jb2xvcjogI2UyZTJlMjsgfSAgIC8qICAqIFJvdyBoaWdobGlnaHRpbmcgZXhhbXBsZSAgKi8gLmV4X2hpZ2hsaWdodCAjZXhhbXBsZSB0Ym9keSB0ci5ldmVuOmhvdmVyLCAjZXhhbXBsZSB0Ym9keSB0ci5ldmVuIHRkLmhpZ2hsaWdodGVkIHsgCWJhY2tncm91bmQtY29sb3I6ICNFQ0ZGQjM7IH0gIC5leF9oaWdobGlnaHQgI2V4YW1wbGUgdGJvZHkgdHIub2RkOmhvdmVyLCAjZXhhbXBsZSB0Ym9keSB0ci5vZGQgdGQuaGlnaGxpZ2h0ZWQgeyAJYmFja2dyb3VuZC1jb2xvcjogI0U2RkY5OTsgfQ=='
	$base64JQueryUICustom='LyogICogalF1ZXJ5IFVJIENTUyBGcmFtZXdvcmsgQFZFUlNJT04gICogICogQ29weXJpZ2h0IDIwMTAsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KSAgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4gICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZSAgKiAgKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL1RoZW1pbmcvQVBJICAqLyAgLyogTGF5b3V0IGhlbHBlcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovIC51aS1oZWxwZXItaGlkZGVuIHsgZGlzcGxheTogbm9uZTsgfSAudWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIHsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAtOTk5OTk5OTlweDsgfSAudWktaGVscGVyLXJlc2V0IHsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBib3JkZXI6IDA7IG91dGxpbmU6IDA7IGxpbmUtaGVpZ2h0OiAxLjM7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgZm9udC1zaXplOiAxMDAlOyBsaXN0LXN0eWxlOiBub25lOyB9IC51aS1oZWxwZXItY2xlYXJmaXg6YWZ0ZXIgeyBjb250ZW50OiAiLiI7IGRpc3BsYXk6IGJsb2NrOyBoZWlnaHQ6IDA7IGNsZWFyOiBib3RoOyB2aXNpYmlsaXR5OiBoaWRkZW47IH0gLnVpLWhlbHBlci1jbGVhcmZpeCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgfSAvKiByZXF1aXJlZCBjb21tZW50IGZvciBjbGVhcmZpeCB0byB3b3JrIGluIE9wZXJhIFwqLyAqIGh0bWwgLnVpLWhlbHBlci1jbGVhcmZpeCB7IGhlaWdodDoxJTsgfSAudWktaGVscGVyLWNsZWFyZml4IHsgZGlzcGxheTpibG9jazsgfSAvKiBlbmQgY2xlYXJmaXggKi8gLnVpLWhlbHBlci16Zml4IHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgdG9wOiAwOyBsZWZ0OiAwOyBwb3NpdGlvbjogYWJzb2x1dGU7IG9wYWNpdHk6IDA7IGZpbHRlcjpBbHBoYShPcGFjaXR5PTApOyB9ICAgLyogSW50ZXJhY3Rpb24gQ3VlcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8gLnVpLXN0YXRlLWRpc2FibGVkIHsgY3Vyc29yOiBkZWZhdWx0ICFpbXBvcnRhbnQ7IH0gICAvKiBJY29ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8gIC8qIHN0YXRlcyBhbmQgaW1hZ2VzICovIC51aS1pY29uIHsgZGlzcGxheTogYmxvY2s7IHRleHQtaW5kZW50OiAtOTk5OTlweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsgfSAgIC8qIE1pc2MgdmlzdWFscyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8gIC8qIE92ZXJsYXlzICovIC51aS13aWRnZXQtb3ZlcmxheSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyB9ICAgLyogICogalF1ZXJ5IFVJIENTUyBGcmFtZXdvcmsgQFZFUlNJT04gICogICogQ29weXJpZ2h0IDIwMTAsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KSAgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4gICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZSAgKiAgKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL1RoZW1pbmcvQVBJICAqICAqIFRvIHZpZXcgYW5kIG1vZGlmeSB0aGlzIHRoZW1lLCB2aXNpdCBodHRwOi8vanF1ZXJ5dWkuY29tL3RoZW1lcm9sbGVyLz9mZkRlZmF1bHQ9VmVyZGFuYSxBcmlhbCxzYW5zLXNlcmlmJmZ3RGVmYXVsdD1ub3JtYWwmZnNEZWZhdWx0PTEuMWVtJmNvcm5lclJhZGl1cz00cHgmYmdDb2xvckhlYWRlcj1jY2NjY2MmYmdUZXh0dXJlSGVhZGVyPTAzX2hpZ2hsaWdodF9zb2Z0LnBuZyZiZ0ltZ09wYWNpdHlIZWFkZXI9NzUmYm9yZGVyQ29sb3JIZWFkZXI9YWFhYWFhJmZjSGVhZGVyPTIyMjIyMiZpY29uQ29sb3JIZWFkZXI9MjIyMjIyJmJnQ29sb3JDb250ZW50PWZmZmZmZiZiZ1RleHR1cmVDb250ZW50PTAxX2ZsYXQucG5nJmJnSW1nT3BhY2l0eUNvbnRlbnQ9NzUmYm9yZGVyQ29sb3JDb250ZW50PWFhYWFhYSZmY0NvbnRlbnQ9MjIyMjIyJmljb25Db2xvckNvbnRlbnQ9MjIyMjIyJmJnQ29sb3JEZWZhdWx0PWU2ZTZlNiZiZ1RleHR1cmVEZWZhdWx0PTAyX2dsYXNzLnBuZyZiZ0ltZ09wYWNpdHlEZWZhdWx0PTc1JmJvcmRlckNvbG9yRGVmYXVsdD1kM2QzZDMmZmNEZWZhdWx0PTU1NTU1NSZpY29uQ29sb3JEZWZhdWx0PTg4ODg4OCZiZ0NvbG9ySG92ZXI9ZGFkYWRhJmJnVGV4dHVyZUhvdmVyPTAyX2dsYXNzLnBuZyZiZ0ltZ09wYWNpdHlIb3Zlcj03NSZib3JkZXJDb2xvckhvdmVyPTk5OTk5OSZmY0hvdmVyPTIxMjEyMSZpY29uQ29sb3JIb3Zlcj00NTQ1NDUmYmdDb2xvckFjdGl2ZT1mZmZmZmYmYmdUZXh0dXJlQWN0aXZlPTAyX2dsYXNzLnBuZyZiZ0ltZ09wYWNpdHlBY3RpdmU9NjUmYm9yZGVyQ29sb3JBY3RpdmU9YWFhYWFhJmZjQWN0aXZlPTIxMjEyMSZpY29uQ29sb3JBY3RpdmU9NDU0NTQ1JmJnQ29sb3JIaWdobGlnaHQ9ZmJmOWVlJmJnVGV4dHVyZUhpZ2hsaWdodD0wMl9nbGFzcy5wbmcmYmdJbWdPcGFjaXR5SGlnaGxpZ2h0PTU1JmJvcmRlckNvbG9ySGlnaGxpZ2h0PWZjZWZhMSZmY0hpZ2hsaWdodD0zNjM2MzYmaWNvbkNvbG9ySGlnaGxpZ2h0PTJlODNmZiZiZ0NvbG9yRXJyb3I9ZmVmMWVjJmJnVGV4dHVyZUVycm9yPTAyX2dsYXNzLnBuZyZiZ0ltZ09wYWNpdHlFcnJvcj05NSZib3JkZXJDb2xvckVycm9yPWNkMGEwYSZmY0Vycm9yPWNkMGEwYSZpY29uQ29sb3JFcnJvcj1jZDBhMGEmYmdDb2xvck92ZXJsYXk9YWFhYWFhJmJnVGV4dHVyZU92ZXJsYXk9MDFfZmxhdC5wbmcmYmdJbWdPcGFjaXR5T3ZlcmxheT0wJm9wYWNpdHlPdmVybGF5PTMwJmJnQ29sb3JTaGFkb3c9YWFhYWFhJmJnVGV4dHVyZVNoYWRvdz0wMV9mbGF0LnBuZyZiZ0ltZ09wYWNpdHlTaGFkb3c9MCZvcGFjaXR5U2hhZG93PTMwJnRoaWNrbmVzc1NoYWRvdz04cHgmb2Zmc2V0VG9wU2hhZG93PS04cHgmb2Zmc2V0TGVmdFNoYWRvdz0tOHB4JmNvcm5lclJhZGl1c1NoYWRvdz04cHggICovICAgLyogQ29tcG9uZW50IGNvbnRhaW5lcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovIC51aS13aWRnZXQgeyBmb250LWZhbWlseTogVmVyZGFuYSxBcmlhbCxzYW5zLXNlcmlmOyBmb250LXNpemU6IDEuMWVtOyB9IC51aS13aWRnZXQgLnVpLXdpZGdldCB7IGZvbnQtc2l6ZTogMWVtOyB9IC51aS13aWRnZXQgaW5wdXQsIC51aS13aWRnZXQgc2VsZWN0LCAudWktd2lkZ2V0IHRleHRhcmVhLCAudWktd2lkZ2V0IGJ1dHRvbiB7IGZvbnQtZmFtaWx5OiBWZXJkYW5hLEFyaWFsLHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogMWVtOyB9IC51aS13aWRnZXQtY29udGVudCB7IGJvcmRlcjogMXB4IHNvbGlkICNhYWFhYWE7IGJhY2tncm91bmQ6ICNmZmZmZmYgdXJsKGltYWdlcy91aS1iZ19mbGF0Xzc1X2ZmZmZmZl80MHgxMDAucG5nKSA1MCUgNTAlIHJlcGVhdC14OyBjb2xvcjogIzIyMjIyMjsgfSAudWktd2lkZ2V0LWNvbnRlbnQgYSB7IGNvbG9yOiAjMjIyMjIyOyB9IC51aS13aWRnZXQtaGVhZGVyIHsgYm9yZGVyOiAxcHggc29saWQgI2FhYWFhYTsgYmFja2dyb3VuZDogI2NjY2NjYyB1cmwoaW1hZ2VzL3VpLWJnX2hpZ2hsaWdodC1zb2Z0Xzc1X2NjY2NjY18xeDEwMC5wbmcpIDUwJSA1MCUgcmVwZWF0LXg7IGNvbG9yOiAjMjIyMjIyOyBmb250LXdlaWdodDogYm9sZDsgfSAudWktd2lkZ2V0LWhlYWRlciBhIHsgY29sb3I6ICMyMjIyMjI7IH0gIC8qIEludGVyYWN0aW9uIHN0YXRlcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8gLnVpLXN0YXRlLWRlZmF1bHQsIC51aS13aWRnZXQtY29udGVudCAudWktc3RhdGUtZGVmYXVsdCwgLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWRlZmF1bHQgeyBib3JkZXI6IDFweCBzb2xpZCAjZDNkM2QzOyBiYWNrZ3JvdW5kOiAjZTZlNmU2IHVybChpbWFnZXMvdWktYmdfZ2xhc3NfNzVfZTZlNmU2XzF4NDAwLnBuZykgNTAlIDUwJSByZXBlYXQteDsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgY29sb3I6ICM1NTU1NTU7IH0gLnVpLXN0YXRlLWRlZmF1bHQgYSwgLnVpLXN0YXRlLWRlZmF1bHQgYTpsaW5rLCAudWktc3RhdGUtZGVmYXVsdCBhOnZpc2l0ZWQgeyBjb2xvcjogIzU1NTU1NTsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyB9IC51aS1zdGF0ZS1ob3ZlciwgLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1ob3ZlciwgLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWhvdmVyLCAudWktc3RhdGUtZm9jdXMsIC51aS13aWRnZXQtY29udGVudCAudWktc3RhdGUtZm9jdXMsIC51aS13aWRnZXQtaGVhZGVyIC51aS1zdGF0ZS1mb2N1cyB7IGJvcmRlcjogMXB4IHNvbGlkICM5OTk5OTk7IGJhY2tncm91bmQ6ICNkYWRhZGEgdXJsKGltYWdlcy91aS1iZ19nbGFzc183NV9kYWRhZGFfMXg0MDAucG5nKSA1MCUgNTAlIHJlcGVhdC14OyBmb250LXdlaWdodDogbm9ybWFsOyBjb2xvcjogIzIxMjEyMTsgfSAudWktc3RhdGUtaG92ZXIgYSwgLnVpLXN0YXRlLWhvdmVyIGE6aG92ZXIgeyBjb2xvcjogIzIxMjEyMTsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyB9IC51aS1zdGF0ZS1hY3RpdmUsIC51aS13aWRnZXQtY29udGVudCAudWktc3RhdGUtYWN0aXZlLCAudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtYWN0aXZlIHsgYm9yZGVyOiAxcHggc29saWQgI2FhYWFhYTsgYmFja2dyb3VuZDogI2ZmZmZmZiB1cmwoaW1hZ2VzL3VpLWJnX2dsYXNzXzY1X2ZmZmZmZl8xeDQwMC5wbmcpIDUwJSA1MCUgcmVwZWF0LXg7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IGNvbG9yOiAjMjEyMTIxOyB9IC51aS1zdGF0ZS1hY3RpdmUgYSwgLnVpLXN0YXRlLWFjdGl2ZSBhOmxpbmssIC51aS1zdGF0ZS1hY3RpdmUgYTp2aXNpdGVkIHsgY29sb3I6ICMyMTIxMjE7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgfSAudWktd2lkZ2V0IDphY3RpdmUgeyBvdXRsaW5lOiBub25lOyB9ICAvKiBJbnRlcmFjdGlvbiBDdWVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLyAudWktc3RhdGUtaGlnaGxpZ2h0LCAudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXN0YXRlLWhpZ2hsaWdodCwgLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWhpZ2hsaWdodCAge2JvcmRlcjogMXB4IHNvbGlkICNmY2VmYTE7IGJhY2tncm91bmQ6ICNmYmY5ZWUgdXJsKGltYWdlcy91aS1iZ19nbGFzc181NV9mYmY5ZWVfMXg0MDAucG5nKSA1MCUgNTAlIHJlcGVhdC14OyBjb2xvcjogIzM2MzYzNjsgfSAudWktc3RhdGUtaGlnaGxpZ2h0IGEsIC51aS13aWRnZXQtY29udGVudCAudWktc3RhdGUtaGlnaGxpZ2h0IGEsLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWhpZ2hsaWdodCBhIHsgY29sb3I6ICMzNjM2MzY7IH0gLnVpLXN0YXRlLWVycm9yLCAudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXN0YXRlLWVycm9yLCAudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtZXJyb3Ige2JvcmRlcjogMXB4IHNvbGlkICNjZDBhMGE7IGJhY2tncm91bmQ6ICNmZWYxZWMgdXJsKGltYWdlcy91aS1iZ19nbGFzc185NV9mZWYxZWNfMXg0MDAucG5nKSA1MCUgNTAlIHJlcGVhdC14OyBjb2xvcjogI2NkMGEwYTsgfSAudWktc3RhdGUtZXJyb3IgYSwgLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1lcnJvciBhLCAudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtZXJyb3IgYSB7IGNvbG9yOiAjY2QwYTBhOyB9IC51aS1zdGF0ZS1lcnJvci10ZXh0LCAudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXN0YXRlLWVycm9yLXRleHQsIC51aS13aWRnZXQtaGVhZGVyIC51aS1zdGF0ZS1lcnJvci10ZXh0IHsgY29sb3I6ICNjZDBhMGE7IH0gLnVpLXByaW9yaXR5LXByaW1hcnksIC51aS13aWRnZXQtY29udGVudCAudWktcHJpb3JpdHktcHJpbWFyeSwgLnVpLXdpZGdldC1oZWFkZXIgLnVpLXByaW9yaXR5LXByaW1hcnkgeyBmb250LXdlaWdodDogYm9sZDsgfSAudWktcHJpb3JpdHktc2Vjb25kYXJ5LCAudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXByaW9yaXR5LXNlY29uZGFyeSwgIC51aS13aWRnZXQtaGVhZGVyIC51aS1wcmlvcml0eS1zZWNvbmRhcnkgeyBvcGFjaXR5OiAuNzsgZmlsdGVyOkFscGhhKE9wYWNpdHk9NzApOyBmb250LXdlaWdodDogbm9ybWFsOyB9IC51aS1zdGF0ZS1kaXNhYmxlZCwgLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1kaXNhYmxlZCwgLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWRpc2FibGVkIHsgb3BhY2l0eTogLjM1OyBmaWx0ZXI6QWxwaGEoT3BhY2l0eT0zNSk7IGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7IH0gIC8qIEljb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLyAgLyogc3RhdGVzIGFuZCBpbWFnZXMgKi8gLnVpLWljb24geyB3aWR0aDogMTZweDsgaGVpZ2h0OiAxNnB4OyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoaW1hZ2VzL3VpLWljb25zXzIyMjIyMl8yNTZ4MjQwLnBuZyk7IH0gLnVpLXdpZGdldC1jb250ZW50IC51aS1pY29uIHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoaW1hZ2VzL3VpLWljb25zXzIyMjIyMl8yNTZ4MjQwLnBuZyk7IH0gLnVpLXdpZGdldC1oZWFkZXIgLnVpLWljb24ge2JhY2tncm91bmQtaW1hZ2U6IHVybChpbWFnZXMvdWktaWNvbnNfMjIyMjIyXzI1NngyNDAucG5nKTsgfSAudWktc3RhdGUtZGVmYXVsdCAudWktaWNvbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybChpbWFnZXMvdWktaWNvbnNfODg4ODg4XzI1NngyNDAucG5nKTsgfSAudWktc3RhdGUtaG92ZXIgLnVpLWljb24sIC51aS1zdGF0ZS1mb2N1cyAudWktaWNvbiB7YmFja2dyb3VuZC1pbWFnZTogdXJsKGltYWdlcy91aS1pY29uc180NTQ1NDVfMjU2eDI0MC5wbmcpOyB9IC51aS1zdGF0ZS1hY3RpdmUgLnVpLWljb24ge2JhY2tncm91bmQtaW1hZ2U6IHVybChpbWFnZXMvdWktaWNvbnNfNDU0NTQ1XzI1NngyNDAucG5nKTsgfSAudWktc3RhdGUtaGlnaGxpZ2h0IC51aS1pY29uIHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoaW1hZ2VzL3VpLWljb25zXzJlODNmZl8yNTZ4MjQwLnBuZyk7IH0gLnVpLXN0YXRlLWVycm9yIC51aS1pY29uLCAudWktc3RhdGUtZXJyb3ItdGV4dCAudWktaWNvbiB7YmFja2dyb3VuZC1pbWFnZTogdXJsKGltYWdlcy91aS1pY29uc19jZDBhMGFfMjU2eDI0MC5wbmcpOyB9ICAvKiBwb3NpdGlvbmluZyAqLyAudWktaWNvbi1jYXJhdC0xLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDA7IH0gLnVpLWljb24tY2FyYXQtMS1uZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IDA7IH0gLnVpLWljb24tY2FyYXQtMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggMDsgfSAudWktaWNvbi1jYXJhdC0xLXNlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggMDsgfSAudWktaWNvbi1jYXJhdC0xLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAwOyB9IC51aS1pY29uLWNhcmF0LTEtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAwOyB9IC51aS1pY29uLWNhcmF0LTEtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IDA7IH0gLnVpLWljb24tY2FyYXQtMS1udyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAwOyB9IC51aS1pY29uLWNhcmF0LTItbi1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IDA7IH0gLnVpLWljb24tY2FyYXQtMi1lLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggMDsgfSAudWktaWNvbi10cmlhbmdsZS0xLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xNnB4OyB9IC51aS1pY29uLXRyaWFuZ2xlLTEtbmUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTZweDsgfSAudWktaWNvbi10cmlhbmdsZS0xLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMTZweDsgfSAudWktaWNvbi10cmlhbmdsZS0xLXNlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTE2cHg7IH0gLnVpLWljb24tdHJpYW5nbGUtMS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTE2cHg7IH0gLnVpLWljb24tdHJpYW5nbGUtMS1zdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xNnB4OyB9IC51aS1pY29uLXRyaWFuZ2xlLTEtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC0xNnB4OyB9IC51aS1pY29uLXRyaWFuZ2xlLTEtbncgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTE2cHg7IH0gLnVpLWljb24tdHJpYW5nbGUtMi1uLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTE2cHg7IH0gLnVpLWljb24tdHJpYW5nbGUtMi1lLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTE2cHg7IH0gLnVpLWljb24tYXJyb3ctMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMzJweDsgfSAudWktaWNvbi1hcnJvdy0xLW5lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTMycHg7IH0gLnVpLWljb24tYXJyb3ctMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTMycHg7IH0gLnVpLWljb24tYXJyb3ctMS1zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0zMnB4OyB9IC51aS1pY29uLWFycm93LTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC0zMnB4OyB9IC51aS1pY29uLWFycm93LTEtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtMzJweDsgfSAudWktaWNvbi1hcnJvdy0xLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMzJweDsgfSAudWktaWNvbi1hcnJvdy0xLW53IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC0zMnB4OyB9IC51aS1pY29uLWFycm93LTItbi1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC0zMnB4OyB9IC51aS1pY29uLWFycm93LTItbmUtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTMycHg7IH0gLnVpLWljb24tYXJyb3ctMi1lLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTYwcHggLTMycHg7IH0gLnVpLWljb24tYXJyb3ctMi1zZS1udyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNzZweCAtMzJweDsgfSAudWktaWNvbi1hcnJvd3N0b3AtMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC0zMnB4OyB9IC51aS1pY29uLWFycm93c3RvcC0xLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjA4cHggLTMycHg7IH0gLnVpLWljb24tYXJyb3dzdG9wLTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMjRweCAtMzJweDsgfSAudWktaWNvbi1hcnJvd3N0b3AtMS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC0zMnB4OyB9IC51aS1pY29uLWFycm93dGhpY2stMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtNDhweDsgfSAudWktaWNvbi1hcnJvd3RoaWNrLTEtbmUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtNDhweDsgfSAudWktaWNvbi1hcnJvd3RoaWNrLTEtZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC00OHB4OyB9IC51aS1pY29uLWFycm93dGhpY2stMS1zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC00OHB4OyB9IC51aS1pY29uLWFycm93dGhpY2stMS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTQ4cHg7IH0gLnVpLWljb24tYXJyb3d0aGljay0xLXN3IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTQ4cHg7IH0gLnVpLWljb24tYXJyb3d0aGljay0xLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtNDhweDsgfSAudWktaWNvbi1hcnJvd3RoaWNrLTEtbncgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTQ4cHg7IH0gLnVpLWljb24tYXJyb3d0aGljay0yLW4tcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtNDhweDsgfSAudWktaWNvbi1hcnJvd3RoaWNrLTItbmUtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTQ4cHg7IH0gLnVpLWljb24tYXJyb3d0aGljay0yLWUtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNjBweCAtNDhweDsgfSAudWktaWNvbi1hcnJvd3RoaWNrLTItc2UtbncgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTc2cHggLTQ4cHg7IH0gLnVpLWljb24tYXJyb3d0aGlja3N0b3AtMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC00OHB4OyB9IC51aS1pY29uLWFycm93dGhpY2tzdG9wLTEtZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMDhweCAtNDhweDsgfSAudWktaWNvbi1hcnJvd3RoaWNrc3RvcC0xLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjI0cHggLTQ4cHg7IH0gLnVpLWljb24tYXJyb3d0aGlja3N0b3AtMS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC00OHB4OyB9IC51aS1pY29uLWFycm93cmV0dXJudGhpY2stMS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtNjRweDsgfSAudWktaWNvbi1hcnJvd3JldHVybnRoaWNrLTEtbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC02NHB4OyB9IC51aS1pY29uLWFycm93cmV0dXJudGhpY2stMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTY0cHg7IH0gLnVpLWljb24tYXJyb3dyZXR1cm50aGljay0xLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtNjRweDsgfSAudWktaWNvbi1hcnJvd3JldHVybi0xLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtNjRweDsgfSAudWktaWNvbi1hcnJvd3JldHVybi0xLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtNjRweDsgfSAudWktaWNvbi1hcnJvd3JldHVybi0xLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtNjRweDsgfSAudWktaWNvbi1hcnJvd3JldHVybi0xLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTY0cHg7IH0gLnVpLWljb24tYXJyb3dyZWZyZXNoLTEtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtNjRweDsgfSAudWktaWNvbi1hcnJvd3JlZnJlc2gtMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC02NHB4OyB9IC51aS1pY29uLWFycm93cmVmcmVzaC0xLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTYwcHggLTY0cHg7IH0gLnVpLWljb24tYXJyb3dyZWZyZXNoLTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNzZweCAtNjRweDsgfSAudWktaWNvbi1hcnJvdy00IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtODBweDsgfSAudWktaWNvbi1hcnJvdy00LWRpYWcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtODBweDsgfSAudWktaWNvbi1leHRsaW5rIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTgwcHg7IH0gLnVpLWljb24tbmV3d2luIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTgwcHg7IH0gLnVpLWljb24tcmVmcmVzaCB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC04MHB4OyB9IC51aS1pY29uLXNodWZmbGUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtODBweDsgfSAudWktaWNvbi10cmFuc2Zlci1lLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtODBweDsgfSAudWktaWNvbi10cmFuc2ZlcnRoaWNrLWUtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtODBweDsgfSAudWktaWNvbi1mb2xkZXItY29sbGFwc2VkIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtOTZweDsgfSAudWktaWNvbi1mb2xkZXItb3BlbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC05NnB4OyB9IC51aS1pY29uLWRvY3VtZW50IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTk2cHg7IH0gLnVpLWljb24tZG9jdW1lbnQtYiB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC05NnB4OyB9IC51aS1pY29uLW5vdGUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtOTZweDsgfSAudWktaWNvbi1tYWlsLWNsb3NlZCB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC05NnB4OyB9IC51aS1pY29uLW1haWwtb3BlbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC05NnB4OyB9IC51aS1pY29uLXN1aXRjYXNlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC05NnB4OyB9IC51aS1pY29uLWNvbW1lbnQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTk2cHg7IH0gLnVpLWljb24tcGVyc29uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC05NnB4OyB9IC51aS1pY29uLXByaW50IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2MHB4IC05NnB4OyB9IC51aS1pY29uLXRyYXNoIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE3NnB4IC05NnB4OyB9IC51aS1pY29uLWxvY2tlZCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xOTJweCAtOTZweDsgfSAudWktaWNvbi11bmxvY2tlZCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMDhweCAtOTZweDsgfSAudWktaWNvbi1ib29rbWFyayB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMjRweCAtOTZweDsgfSAudWktaWNvbi10YWcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjQwcHggLTk2cHg7IH0gLnVpLWljb24taG9tZSB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTExMnB4OyB9IC51aS1pY29uLWZsYWcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTEycHg7IH0gLnVpLWljb24tY2FsZW5kYXIgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMTEycHg7IH0gLnVpLWljb24tY2FydCB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0xMTJweDsgfSAudWktaWNvbi1wZW5jaWwgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtMTEycHg7IH0gLnVpLWljb24tY2xvY2sgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtMTEycHg7IH0gLnVpLWljb24tZGlzayB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC0xMTJweDsgfSAudWktaWNvbi1jYWxjdWxhdG9yIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC0xMTJweDsgfSAudWktaWNvbi16b29taW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTExMnB4OyB9IC51aS1pY29uLXpvb21vdXQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTExMnB4OyB9IC51aS1pY29uLXNlYXJjaCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNjBweCAtMTEycHg7IH0gLnVpLWljb24td3JlbmNoIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE3NnB4IC0xMTJweDsgfSAudWktaWNvbi1nZWFyIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC0xMTJweDsgfSAudWktaWNvbi1oZWFydCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMDhweCAtMTEycHg7IH0gLnVpLWljb24tc3RhciB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMjRweCAtMTEycHg7IH0gLnVpLWljb24tbGluayB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yNDBweCAtMTEycHg7IH0gLnVpLWljb24tY2FuY2VsIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMTI4cHg7IH0gLnVpLWljb24tcGx1cyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0xMjhweDsgfSAudWktaWNvbi1wbHVzdGhpY2sgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMTI4cHg7IH0gLnVpLWljb24tbWludXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMTI4cHg7IH0gLnVpLWljb24tbWludXN0aGljayB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC0xMjhweDsgfSAudWktaWNvbi1jbG9zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xMjhweDsgfSAudWktaWNvbi1jbG9zZXRoaWNrIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTEyOHB4OyB9IC51aS1pY29uLWtleSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtMTI4cHg7IH0gLnVpLWljb24tbGlnaHRidWxiIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC0xMjhweDsgfSAudWktaWNvbi1zY2lzc29ycyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtMTI4cHg7IH0gLnVpLWljb24tY2xpcGJvYXJkIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2MHB4IC0xMjhweDsgfSAudWktaWNvbi1jb3B5IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE3NnB4IC0xMjhweDsgfSAudWktaWNvbi1jb250YWN0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC0xMjhweDsgfSAudWktaWNvbi1pbWFnZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMDhweCAtMTI4cHg7IH0gLnVpLWljb24tdmlkZW8geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjI0cHggLTEyOHB4OyB9IC51aS1pY29uLXNjcmlwdCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yNDBweCAtMTI4cHg7IH0gLnVpLWljb24tYWxlcnQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xNDRweDsgfSAudWktaWNvbi1pbmZvIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTE0NHB4OyB9IC51aS1pY29uLW5vdGljZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0xNDRweDsgfSAudWktaWNvbi1oZWxwIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTE0NHB4OyB9IC51aS1pY29uLWNoZWNrIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTE0NHB4OyB9IC51aS1pY29uLWJ1bGxldCB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xNDRweDsgfSAudWktaWNvbi1yYWRpby1vZmYgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMTQ0cHg7IH0gLnVpLWljb24tcmFkaW8tb24geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTE0NHB4OyB9IC51aS1pY29uLXBpbi13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC0xNDRweDsgfSAudWktaWNvbi1waW4tcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtMTQ0cHg7IH0gLnVpLWljb24tcGxheSB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTE2MHB4OyB9IC51aS1pY29uLXBhdXNlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTE2MHB4OyB9IC51aS1pY29uLXNlZWstbmV4dCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0xNjBweDsgfSAudWktaWNvbi1zZWVrLXByZXYgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMTYwcHg7IH0gLnVpLWljb24tc2Vlay1lbmQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtMTYwcHg7IH0gLnVpLWljb24tc2Vlay1zdGFydCB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xNjBweDsgfSAvKiB1aS1pY29uLXNlZWstZmlyc3QgaXMgZGVwcmVjYXRlZCwgdXNlIHVpLWljb24tc2Vlay1zdGFydCBpbnN0ZWFkICovIC51aS1pY29uLXNlZWstZmlyc3QgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtMTYwcHg7IH0gLnVpLWljb24tc3RvcCB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC0xNjBweDsgfSAudWktaWNvbi1lamVjdCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtMTYwcHg7IH0gLnVpLWljb24tdm9sdW1lLW9mZiB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtMTYwcHg7IH0gLnVpLWljb24tdm9sdW1lLW9uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC0xNjBweDsgfSAudWktaWNvbi1wb3dlciB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTE3NnB4OyB9IC51aS1pY29uLXNpZ25hbC1kaWFnIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTE3NnB4OyB9IC51aS1pY29uLXNpZ25hbCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0xNzZweDsgfSAudWktaWNvbi1iYXR0ZXJ5LTAgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMTc2cHg7IH0gLnVpLWljb24tYmF0dGVyeS0xIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTE3NnB4OyB9IC51aS1pY29uLWJhdHRlcnktMiB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xNzZweDsgfSAudWktaWNvbi1iYXR0ZXJ5LTMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMTc2cHg7IH0gLnVpLWljb24tY2lyY2xlLXBsdXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xOTJweDsgfSAudWktaWNvbi1jaXJjbGUtbWludXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTkycHg7IH0gLnVpLWljb24tY2lyY2xlLWNsb3NlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTE5MnB4OyB9IC51aS1pY29uLWNpcmNsZS10cmlhbmdsZS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTE5MnB4OyB9IC51aS1pY29uLWNpcmNsZS10cmlhbmdsZS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTE5MnB4OyB9IC51aS1pY29uLWNpcmNsZS10cmlhbmdsZS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTE5MnB4OyB9IC51aS1pY29uLWNpcmNsZS10cmlhbmdsZS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTE5MnB4OyB9IC51aS1pY29uLWNpcmNsZS1hcnJvdy1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC0xOTJweDsgfSAudWktaWNvbi1jaXJjbGUtYXJyb3ctcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtMTkycHg7IH0gLnVpLWljb24tY2lyY2xlLWFycm93LXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTE5MnB4OyB9IC51aS1pY29uLWNpcmNsZS1hcnJvdy1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2MHB4IC0xOTJweDsgfSAudWktaWNvbi1jaXJjbGUtem9vbWluIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE3NnB4IC0xOTJweDsgfSAudWktaWNvbi1jaXJjbGUtem9vbW91dCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xOTJweCAtMTkycHg7IH0gLnVpLWljb24tY2lyY2xlLWNoZWNrIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwOHB4IC0xOTJweDsgfSAudWktaWNvbi1jaXJjbGVzbWFsbC1wbHVzIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMjA4cHg7IH0gLnVpLWljb24tY2lyY2xlc21hbGwtbWludXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMjA4cHg7IH0gLnVpLWljb24tY2lyY2xlc21hbGwtY2xvc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMjA4cHg7IH0gLnVpLWljb24tc3F1YXJlc21hbGwtcGx1cyB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0yMDhweDsgfSAudWktaWNvbi1zcXVhcmVzbWFsbC1taW51cyB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC0yMDhweDsgfSAudWktaWNvbi1zcXVhcmVzbWFsbC1jbG9zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0yMDhweDsgfSAudWktaWNvbi1ncmlwLWRvdHRlZC12ZXJ0aWNhbCB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTIyNHB4OyB9IC51aS1pY29uLWdyaXAtZG90dGVkLWhvcml6b250YWwgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMjI0cHg7IH0gLnVpLWljb24tZ3JpcC1zb2xpZC12ZXJ0aWNhbCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0yMjRweDsgfSAudWktaWNvbi1ncmlwLXNvbGlkLWhvcml6b250YWwgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMjI0cHg7IH0gLnVpLWljb24tZ3JpcHNtYWxsLWRpYWdvbmFsLXNlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTIyNHB4OyB9IC51aS1pY29uLWdyaXAtZGlhZ29uYWwtc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtMjI0cHg7IH0gICAvKiBNaXNjIHZpc3VhbHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovICAvKiBDb3JuZXIgcmFkaXVzICovIC51aS1jb3JuZXItdGwgeyAtbW96LWJvcmRlci1yYWRpdXMtdG9wbGVmdDogNHB4OyAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNHB4OyB9IC51aS1jb3JuZXItdHIgeyAtbW96LWJvcmRlci1yYWRpdXMtdG9wcmlnaHQ6IDRweDsgLXdlYmtpdC1ib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OyBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OyB9IC51aS1jb3JuZXItYmwgeyAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tbGVmdDogNHB4OyAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNHB4OyB9IC51aS1jb3JuZXItYnIgeyAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tcmlnaHQ6IDRweDsgLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4OyBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4OyB9IC51aS1jb3JuZXItdG9wIHsgLW1vei1ib3JkZXItcmFkaXVzLXRvcGxlZnQ6IDRweDsgLXdlYmtpdC1ib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7IGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsgLW1vei1ib3JkZXItcmFkaXVzLXRvcHJpZ2h0OiA0cHg7IC13ZWJraXQtYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDRweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDRweDsgfSAudWktY29ybmVyLWJvdHRvbSB7IC1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21sZWZ0OiA0cHg7IC13ZWJraXQtYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNHB4OyBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA0cHg7IC1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21yaWdodDogNHB4OyAtd2Via2l0LWJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7IH0gLnVpLWNvcm5lci1yaWdodCB7ICAtbW96LWJvcmRlci1yYWRpdXMtdG9wcmlnaHQ6IDRweDsgLXdlYmtpdC1ib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OyBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OyAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tcmlnaHQ6IDRweDsgLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4OyBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4OyB9IC51aS1jb3JuZXItbGVmdCB7IC1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0OiA0cHg7IC13ZWJraXQtYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNHB4OyBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7IC1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21sZWZ0OiA0cHg7IC13ZWJraXQtYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNHB4OyBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA0cHg7IH0gLnVpLWNvcm5lci1hbGwgeyAtbW96LWJvcmRlci1yYWRpdXM6IDRweDsgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgfSAgLyogT3ZlcmxheXMgKi8gLnVpLXdpZGdldC1vdmVybGF5IHsgYmFja2dyb3VuZDogI2FhYWFhYSB1cmwoaW1hZ2VzL3VpLWJnX2ZsYXRfMF9hYWFhYWFfNDB4MTAwLnBuZykgNTAlIDUwJSByZXBlYXQteDsgb3BhY2l0eTogLjMwO2ZpbHRlcjpBbHBoYShPcGFjaXR5PTMwKTsgfSAudWktd2lkZ2V0LXNoYWRvdyB7IG1hcmdpbjogLThweCAwIDAgLThweDsgcGFkZGluZzogOHB4OyBiYWNrZ3JvdW5kOiAjYWFhYWFhIHVybChpbWFnZXMvdWktYmdfZmxhdF8wX2FhYWFhYV80MHgxMDAucG5nKSA1MCUgNTAlIHJlcGVhdC14OyBvcGFjaXR5OiAuMzA7ZmlsdGVyOkFscGhhKE9wYWNpdHk9MzApOyAtbW96LWJvcmRlci1yYWRpdXM6IDhweDsgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA4cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgfS8qICAqIGpRdWVyeSBVSSBSZXNpemFibGUgQFZFUlNJT04gICogICogQ29weXJpZ2h0IDIwMTAsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KSAgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4gICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZSAgKiAgKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL1Jlc2l6YWJsZSN0aGVtaW5nICAqLyAudWktcmVzaXphYmxlIHsgcG9zaXRpb246IHJlbGF0aXZlO30gLnVpLXJlc2l6YWJsZS1oYW5kbGUgeyBwb3NpdGlvbjogYWJzb2x1dGU7Zm9udC1zaXplOiAwLjFweDt6LWluZGV4OiA5OTk5OTsgZGlzcGxheTogYmxvY2s7fSAudWktcmVzaXphYmxlLWRpc2FibGVkIC51aS1yZXNpemFibGUtaGFuZGxlLCAudWktcmVzaXphYmxlLWF1dG9oaWRlIC51aS1yZXNpemFibGUtaGFuZGxlIHsgZGlzcGxheTogbm9uZTsgfSAudWktcmVzaXphYmxlLW4geyBjdXJzb3I6IG4tcmVzaXplOyBoZWlnaHQ6IDdweDsgd2lkdGg6IDEwMCU7IHRvcDogLTVweDsgbGVmdDogMDsgfSAudWktcmVzaXphYmxlLXMgeyBjdXJzb3I6IHMtcmVzaXplOyBoZWlnaHQ6IDdweDsgd2lkdGg6IDEwMCU7IGJvdHRvbTogLTVweDsgbGVmdDogMDsgfSAudWktcmVzaXphYmxlLWUgeyBjdXJzb3I6IGUtcmVzaXplOyB3aWR0aDogN3B4OyByaWdodDogLTVweDsgdG9wOiAwOyBoZWlnaHQ6IDEwMCU7IH0gLnVpLXJlc2l6YWJsZS13IHsgY3Vyc29yOiB3LXJlc2l6ZTsgd2lkdGg6IDdweDsgbGVmdDogLTVweDsgdG9wOiAwOyBoZWlnaHQ6IDEwMCU7IH0gLnVpLXJlc2l6YWJsZS1zZSB7IGN1cnNvcjogc2UtcmVzaXplOyB3aWR0aDogMTJweDsgaGVpZ2h0OiAxMnB4OyByaWdodDogMXB4OyBib3R0b206IDFweDsgfSAudWktcmVzaXphYmxlLXN3IHsgY3Vyc29yOiBzdy1yZXNpemU7IHdpZHRoOiA5cHg7IGhlaWdodDogOXB4OyBsZWZ0OiAtNXB4OyBib3R0b206IC01cHg7IH0gLnVpLXJlc2l6YWJsZS1udyB7IGN1cnNvcjogbnctcmVzaXplOyB3aWR0aDogOXB4OyBoZWlnaHQ6IDlweDsgbGVmdDogLTVweDsgdG9wOiAtNXB4OyB9IC51aS1yZXNpemFibGUtbmUgeyBjdXJzb3I6IG5lLXJlc2l6ZTsgd2lkdGg6IDlweDsgaGVpZ2h0OiA5cHg7IHJpZ2h0OiAtNXB4OyB0b3A6IC01cHg7fS8qICAqIGpRdWVyeSBVSSBTZWxlY3RhYmxlIEBWRVJTSU9OICAqICAqIENvcHlyaWdodCAyMDEwLCBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkgICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuICAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UgICogICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9TZWxlY3RhYmxlI3RoZW1pbmcgICovIC51aS1zZWxlY3RhYmxlLWhlbHBlciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgei1pbmRleDogMTAwOyBib3JkZXI6MXB4IGRvdHRlZCBibGFjazsgfSAvKiAgKiBqUXVlcnkgVUkgQWNjb3JkaW9uIEBWRVJTSU9OICAqICAqIENvcHlyaWdodCAyMDEwLCBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkgICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuICAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UgICogICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9BY2NvcmRpb24jdGhlbWluZyAgKi8gLyogSUUvV2luIC0gRml4IGFuaW1hdGlvbiBidWcgLSAjNDYxNSAqLyAudWktYWNjb3JkaW9uIHsgd2lkdGg6IDEwMCU7IH0gLnVpLWFjY29yZGlvbiAudWktYWNjb3JkaW9uLWhlYWRlciB7IGN1cnNvcjogcG9pbnRlcjsgcG9zaXRpb246IHJlbGF0aXZlOyBtYXJnaW4tdG9wOiAxcHg7IHpvb206IDE7IH0gLnVpLWFjY29yZGlvbiAudWktYWNjb3JkaW9uLWxpLWZpeCB7IGRpc3BsYXk6IGlubGluZTsgfSAudWktYWNjb3JkaW9uIC51aS1hY2NvcmRpb24taGVhZGVyLWFjdGl2ZSB7IGJvcmRlci1ib3R0b206IDAgIWltcG9ydGFudDsgfSAudWktYWNjb3JkaW9uIC51aS1hY2NvcmRpb24taGVhZGVyIGEgeyBkaXNwbGF5OiBibG9jazsgZm9udC1zaXplOiAxZW07IHBhZGRpbmc6IC41ZW0gLjVlbSAuNWVtIC43ZW07IH0gLnVpLWFjY29yZGlvbi1pY29ucyAudWktYWNjb3JkaW9uLWhlYWRlciBhIHsgcGFkZGluZy1sZWZ0OiAyLjJlbTsgfSAudWktYWNjb3JkaW9uIC51aS1hY2NvcmRpb24taGVhZGVyIC51aS1pY29uIHsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAuNWVtOyB0b3A6IDUwJTsgbWFyZ2luLXRvcDogLThweDsgfSAudWktYWNjb3JkaW9uIC51aS1hY2NvcmRpb24tY29udGVudCB7IHBhZGRpbmc6IDFlbSAyLjJlbTsgYm9yZGVyLXRvcDogMDsgbWFyZ2luLXRvcDogLTJweDsgcG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDFweDsgbWFyZ2luLWJvdHRvbTogMnB4OyBvdmVyZmxvdzogYXV0bzsgZGlzcGxheTogbm9uZTsgem9vbTogMTsgfSAudWktYWNjb3JkaW9uIC51aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUgeyBkaXNwbGF5OiBibG9jazsgfS8qICAqIGpRdWVyeSBVSSBBdXRvY29tcGxldGUgQFZFUlNJT04gICogICogQ29weXJpZ2h0IDIwMTAsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KSAgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4gICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZSAgKiAgKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL0F1dG9jb21wbGV0ZSN0aGVtaW5nICAqLyAudWktYXV0b2NvbXBsZXRlIHsgcG9zaXRpb246IGFic29sdXRlOyBjdXJzb3I6IGRlZmF1bHQ7IH0JICAvKiB3b3JrYXJvdW5kcyAqLyAqIGh0bWwgLnVpLWF1dG9jb21wbGV0ZSB7IHdpZHRoOjFweDsgfSAvKiB3aXRob3V0IHRoaXMsIHRoZSBtZW51IGV4cGFuZHMgdG8gMTAwJSBpbiBJRTYgKi8gIC8qICAqIGpRdWVyeSBVSSBNZW51IEBWRVJTSU9OICAqICAqIENvcHlyaWdodCAyMDEwLCBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkgICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuICAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UgICogICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9NZW51I3RoZW1pbmcgICovIC51aS1tZW51IHsgCWxpc3Qtc3R5bGU6bm9uZTsgCXBhZGRpbmc6IDJweDsgCW1hcmdpbjogMDsgCWRpc3BsYXk6YmxvY2s7IAlmbG9hdDogbGVmdDsgfSAudWktbWVudSAudWktbWVudSB7IAltYXJnaW4tdG9wOiAtM3B4OyB9IC51aS1tZW51IC51aS1tZW51LWl0ZW0geyAJbWFyZ2luOjA7IAlwYWRkaW5nOiAwOyAJem9vbTogMTsgCWZsb2F0OiBsZWZ0OyAJY2xlYXI6IGxlZnQ7IAl3aWR0aDogMTAwJTsgfSAudWktbWVudSAudWktbWVudS1pdGVtIGEgeyAJdGV4dC1kZWNvcmF0aW9uOm5vbmU7IAlkaXNwbGF5OmJsb2NrOyAJcGFkZGluZzouMmVtIC40ZW07IAlsaW5lLWhlaWdodDoxLjU7IAl6b29tOjE7IH0gLnVpLW1lbnUgLnVpLW1lbnUtaXRlbSBhLnVpLXN0YXRlLWhvdmVyLCAudWktbWVudSAudWktbWVudS1pdGVtIGEudWktc3RhdGUtYWN0aXZlIHsgCWZvbnQtd2VpZ2h0OiBub3JtYWw7IAltYXJnaW46IC0xcHg7IH0gLyogICogalF1ZXJ5IFVJIEJ1dHRvbiBAVkVSU0lPTiAgKiAgKiBDb3B5cmlnaHQgMjAxMCwgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpICAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLiAgKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlICAqICAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvQnV0dG9uI3RoZW1pbmcgICovIC51aS1idXR0b24geyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBvc2l0aW9uOiByZWxhdGl2ZTsgcGFkZGluZzogMDsgbWFyZ2luLXJpZ2h0OiAuMWVtOyB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsgY3Vyc29yOiBwb2ludGVyOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHpvb206IDE7IG92ZXJmbG93OiB2aXNpYmxlOyB9IC8qIHRoZSBvdmVyZmxvdyBwcm9wZXJ0eSByZW1vdmVzIGV4dHJhIHdpZHRoIGluIElFICovIC51aS1idXR0b24taWNvbi1vbmx5IHsgd2lkdGg6IDIuMmVtOyB9IC8qIHRvIG1ha2Ugcm9vbSBmb3IgdGhlIGljb24sIGEgd2lkdGggbmVlZHMgdG8gYmUgc2V0IGhlcmUgKi8gYnV0dG9uLnVpLWJ1dHRvbi1pY29uLW9ubHkgeyB3aWR0aDogMi40ZW07IH0gLyogYnV0dG9uIGVsZW1lbnRzIHNlZW0gdG8gbmVlZCBhIGxpdHRsZSBtb3JlIHdpZHRoICovIC51aS1idXR0b24taWNvbnMtb25seSB7IHdpZHRoOiAzLjRlbTsgfSAgYnV0dG9uLnVpLWJ1dHRvbi1pY29ucy1vbmx5IHsgd2lkdGg6IDMuN2VtOyB9ICAgLypidXR0b24gdGV4dCBlbGVtZW50ICovIC51aS1idXR0b24gLnVpLWJ1dHRvbi10ZXh0IHsgZGlzcGxheTogYmxvY2s7IGxpbmUtaGVpZ2h0OiAxLjQ7ICB9IC51aS1idXR0b24tdGV4dC1vbmx5IC51aS1idXR0b24tdGV4dCB7IHBhZGRpbmc6IC40ZW0gMWVtOyB9IC51aS1idXR0b24taWNvbi1vbmx5IC51aS1idXR0b24tdGV4dCwgLnVpLWJ1dHRvbi1pY29ucy1vbmx5IC51aS1idXR0b24tdGV4dCB7IHBhZGRpbmc6IC40ZW07IHRleHQtaW5kZW50OiAtOTk5OTk5OXB4OyB9IC51aS1idXR0b24tdGV4dC1pY29uLXByaW1hcnkgLnVpLWJ1dHRvbi10ZXh0LCAudWktYnV0dG9uLXRleHQtaWNvbnMgLnVpLWJ1dHRvbi10ZXh0IHsgcGFkZGluZzogLjRlbSAxZW0gLjRlbSAyLjFlbTsgfSAudWktYnV0dG9uLXRleHQtaWNvbi1zZWNvbmRhcnkgLnVpLWJ1dHRvbi10ZXh0LCAudWktYnV0dG9uLXRleHQtaWNvbnMgLnVpLWJ1dHRvbi10ZXh0IHsgcGFkZGluZzogLjRlbSAyLjFlbSAuNGVtIDFlbTsgfSAudWktYnV0dG9uLXRleHQtaWNvbnMgLnVpLWJ1dHRvbi10ZXh0IHsgcGFkZGluZy1sZWZ0OiAyLjFlbTsgcGFkZGluZy1yaWdodDogMi4xZW07IH0gLyogbm8gaWNvbiBzdXBwb3J0IGZvciBpbnB1dCBlbGVtZW50cywgcHJvdmlkZSBwYWRkaW5nIGJ5IGRlZmF1bHQgKi8gaW5wdXQudWktYnV0dG9uIHsgcGFkZGluZzogLjRlbSAxZW07IH0gIC8qYnV0dG9uIGljb24gZWxlbWVudChzKSAqLyAudWktYnV0dG9uLWljb24tb25seSAudWktaWNvbiwgLnVpLWJ1dHRvbi10ZXh0LWljb24tcHJpbWFyeSAudWktaWNvbiwgLnVpLWJ1dHRvbi10ZXh0LWljb24tc2Vjb25kYXJ5IC51aS1pY29uLCAudWktYnV0dG9uLXRleHQtaWNvbnMgLnVpLWljb24sIC51aS1idXR0b24taWNvbnMtb25seSAudWktaWNvbiB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1MCU7IG1hcmdpbi10b3A6IC04cHg7IH0gLnVpLWJ1dHRvbi1pY29uLW9ubHkgLnVpLWljb24geyBsZWZ0OiA1MCU7IG1hcmdpbi1sZWZ0OiAtOHB4OyB9IC51aS1idXR0b24tdGV4dC1pY29uLXByaW1hcnkgLnVpLWJ1dHRvbi1pY29uLXByaW1hcnksIC51aS1idXR0b24tdGV4dC1pY29ucyAudWktYnV0dG9uLWljb24tcHJpbWFyeSwgLnVpLWJ1dHRvbi1pY29ucy1vbmx5IC51aS1idXR0b24taWNvbi1wcmltYXJ5IHsgbGVmdDogLjVlbTsgfSAudWktYnV0dG9uLXRleHQtaWNvbi1zZWNvbmRhcnkgLnVpLWJ1dHRvbi1pY29uLXNlY29uZGFyeSwgLnVpLWJ1dHRvbi10ZXh0LWljb25zIC51aS1idXR0b24taWNvbi1zZWNvbmRhcnksIC51aS1idXR0b24taWNvbnMtb25seSAudWktYnV0dG9uLWljb24tc2Vjb25kYXJ5IHsgcmlnaHQ6IC41ZW07IH0gLnVpLWJ1dHRvbi10ZXh0LWljb25zIC51aS1idXR0b24taWNvbi1zZWNvbmRhcnksIC51aS1idXR0b24taWNvbnMtb25seSAudWktYnV0dG9uLWljb24tc2Vjb25kYXJ5IHsgcmlnaHQ6IC41ZW07IH0gIC8qYnV0dG9uIHNldHMqLyAudWktYnV0dG9uc2V0IHsgbWFyZ2luLXJpZ2h0OiA3cHg7IH0gLnVpLWJ1dHRvbnNldCAudWktYnV0dG9uIHsgbWFyZ2luLWxlZnQ6IDA7IG1hcmdpbi1yaWdodDogLS4zZW07IH0gIC8qIHdvcmthcm91bmRzICovIGJ1dHRvbi51aS1idXR0b246Oi1tb3otZm9jdXMtaW5uZXIgeyBib3JkZXI6IDA7IHBhZGRpbmc6IDA7IH0gLyogcmVzZXQgZXh0cmEgcGFkZGluZyBpbiBGaXJlZm94ICovIC8qICAqIGpRdWVyeSBVSSBEaWFsb2cgQFZFUlNJT04gICogICogQ29weXJpZ2h0IDIwMTAsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KSAgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4gICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZSAgKiAgKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL0RpYWxvZyN0aGVtaW5nICAqLyAudWktZGlhbG9nIHsgcG9zaXRpb246IGFic29sdXRlOyBwYWRkaW5nOiAuMmVtOyB3aWR0aDogMzAwcHg7IG92ZXJmbG93OiBoaWRkZW47IH0gLnVpLWRpYWxvZyAudWktZGlhbG9nLXRpdGxlYmFyIHsgcGFkZGluZzogLjVlbSAxZW0gLjNlbTsgcG9zaXRpb246IHJlbGF0aXZlOyAgfSAudWktZGlhbG9nIC51aS1kaWFsb2ctdGl0bGUgeyBmbG9hdDogbGVmdDsgbWFyZ2luOiAuMWVtIDE2cHggLjJlbSAwOyB9ICAudWktZGlhbG9nIC51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiAuM2VtOyB0b3A6IDUwJTsgd2lkdGg6IDE5cHg7IG1hcmdpbjogLTEwcHggMCAwIDA7IHBhZGRpbmc6IDFweDsgaGVpZ2h0OiAxOHB4OyB9IC51aS1kaWFsb2cgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZSBzcGFuIHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogMXB4OyB9IC51aS1kaWFsb2cgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZTpob3ZlciwgLnVpLWRpYWxvZyAudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlOmZvY3VzIHsgcGFkZGluZzogMDsgfSAudWktZGlhbG9nIC51aS1kaWFsb2ctY29udGVudCB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYm9yZGVyOiAwOyBwYWRkaW5nOiAuNWVtIDFlbTsgYmFja2dyb3VuZDogbm9uZTsgb3ZlcmZsb3c6IGF1dG87IHpvb206IDE7IH0gLnVpLWRpYWxvZyAudWktZGlhbG9nLWJ1dHRvbnBhbmUgeyB0ZXh0LWFsaWduOiBsZWZ0OyBib3JkZXItd2lkdGg6IDFweCAwIDAgMDsgYmFja2dyb3VuZC1pbWFnZTogbm9uZTsgbWFyZ2luOiAuNWVtIDAgMCAwOyBwYWRkaW5nOiAuM2VtIDFlbSAuNWVtIC40ZW07IH0gLnVpLWRpYWxvZyAudWktZGlhbG9nLWJ1dHRvbnBhbmUgLnVpLWRpYWxvZy1idXR0b25zZXQgeyBmbG9hdDogcmlnaHQ7IH0gLnVpLWRpYWxvZyAudWktZGlhbG9nLWJ1dHRvbnBhbmUgYnV0dG9uIHsgbWFyZ2luOiAuNWVtIC40ZW0gLjVlbSAwOyBjdXJzb3I6IHBvaW50ZXI7IH0gLnVpLWRpYWxvZyAudWktcmVzaXphYmxlLXNlIHsgd2lkdGg6IDE0cHg7IGhlaWdodDogMTRweDsgcmlnaHQ6IDNweDsgYm90dG9tOiAzcHg7IH0gLnVpLWRyYWdnYWJsZSAudWktZGlhbG9nLXRpdGxlYmFyIHsgY3Vyc29yOiBtb3ZlOyB9IC8qICAqIGpRdWVyeSBVSSBTbGlkZXIgQFZFUlNJT04gICogICogQ29weXJpZ2h0IDIwMTAsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KSAgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4gICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZSAgKiAgKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL1NsaWRlciN0aGVtaW5nICAqLyAudWktc2xpZGVyIHsgcG9zaXRpb246IHJlbGF0aXZlOyB0ZXh0LWFsaWduOiBsZWZ0OyB9IC51aS1zbGlkZXIgLnVpLXNsaWRlci1oYW5kbGUgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHotaW5kZXg6IDI7IHdpZHRoOiAxLjJlbTsgaGVpZ2h0OiAxLjJlbTsgY3Vyc29yOiBkZWZhdWx0OyB9IC51aS1zbGlkZXIgLnVpLXNsaWRlci1yYW5nZSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgei1pbmRleDogMTsgZm9udC1zaXplOiAuN2VtOyBkaXNwbGF5OiBibG9jazsgYm9yZGVyOiAwOyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDA7IH0gIC51aS1zbGlkZXItaG9yaXpvbnRhbCB7IGhlaWdodDogLjhlbTsgfSAudWktc2xpZGVyLWhvcml6b250YWwgLnVpLXNsaWRlci1oYW5kbGUgeyB0b3A6IC0uM2VtOyBtYXJnaW4tbGVmdDogLS42ZW07IH0gLnVpLXNsaWRlci1ob3Jpem9udGFsIC51aS1zbGlkZXItcmFuZ2UgeyB0b3A6IDA7IGhlaWdodDogMTAwJTsgfSAudWktc2xpZGVyLWhvcml6b250YWwgLnVpLXNsaWRlci1yYW5nZS1taW4geyBsZWZ0OiAwOyB9IC51aS1zbGlkZXItaG9yaXpvbnRhbCAudWktc2xpZGVyLXJhbmdlLW1heCB7IHJpZ2h0OiAwOyB9ICAudWktc2xpZGVyLXZlcnRpY2FsIHsgd2lkdGg6IC44ZW07IGhlaWdodDogMTAwcHg7IH0gLnVpLXNsaWRlci12ZXJ0aWNhbCAudWktc2xpZGVyLWhhbmRsZSB7IGxlZnQ6IC0uM2VtOyBtYXJnaW4tbGVmdDogMDsgbWFyZ2luLWJvdHRvbTogLS42ZW07IH0gLnVpLXNsaWRlci12ZXJ0aWNhbCAudWktc2xpZGVyLXJhbmdlIHsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IH0gLnVpLXNsaWRlci12ZXJ0aWNhbCAudWktc2xpZGVyLXJhbmdlLW1pbiB7IGJvdHRvbTogMDsgfSAudWktc2xpZGVyLXZlcnRpY2FsIC51aS1zbGlkZXItcmFuZ2UtbWF4IHsgdG9wOiAwOyB9LyogICogalF1ZXJ5IFVJIFRhYnMgQFZFUlNJT04gICogICogQ29weXJpZ2h0IDIwMTAsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KSAgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4gICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZSAgKiAgKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL1RhYnMjdGhlbWluZyAgKi8gLnVpLXRhYnMgeyBwb3NpdGlvbjogcmVsYXRpdmU7IHBhZGRpbmc6IC4yZW07IHpvb206IDE7IH0gLyogcG9zaXRpb246IHJlbGF0aXZlIHByZXZlbnRzIElFIHNjcm9sbCBidWcgKGVsZW1lbnQgd2l0aCBwb3NpdGlvbjogcmVsYXRpdmUgaW5zaWRlIGNvbnRhaW5lciB3aXRoIG92ZXJmbG93OiBhdXRvIGFwcGVhciBhcyAiZml4ZWQiKSAqLyAudWktdGFicyAudWktdGFicy1uYXYgeyBtYXJnaW46IDA7IHBhZGRpbmc6IC4yZW0gLjJlbSAwOyB9IC51aS10YWJzIC51aS10YWJzLW5hdiBsaSB7IGxpc3Qtc3R5bGU6IG5vbmU7IGZsb2F0OiBsZWZ0OyBwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogMXB4OyBtYXJnaW46IDAgLjJlbSAxcHggMDsgYm9yZGVyLWJvdHRvbTogMCAhaW1wb3J0YW50OyBwYWRkaW5nOiAwOyB3aGl0ZS1zcGFjZTogbm93cmFwOyB9IC51aS10YWJzIC51aS10YWJzLW5hdiBsaSBhIHsgZmxvYXQ6IGxlZnQ7IHBhZGRpbmc6IC41ZW0gMWVtOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH0gLnVpLXRhYnMgLnVpLXRhYnMtbmF2IGxpLnVpLXRhYnMtc2VsZWN0ZWQgeyBtYXJnaW4tYm90dG9tOiAwOyBwYWRkaW5nLWJvdHRvbTogMXB4OyB9IC51aS10YWJzIC51aS10YWJzLW5hdiBsaS51aS10YWJzLXNlbGVjdGVkIGEsIC51aS10YWJzIC51aS10YWJzLW5hdiBsaS51aS1zdGF0ZS1kaXNhYmxlZCBhLCAudWktdGFicyAudWktdGFicy1uYXYgbGkudWktc3RhdGUtcHJvY2Vzc2luZyBhIHsgY3Vyc29yOiB0ZXh0OyB9IC51aS10YWJzIC51aS10YWJzLW5hdiBsaSBhLCAudWktdGFicy51aS10YWJzLWNvbGxhcHNpYmxlIC51aS10YWJzLW5hdiBsaS51aS10YWJzLXNlbGVjdGVkIGEgeyBjdXJzb3I6IHBvaW50ZXI7IH0gLyogZmlyc3Qgc2VsZWN0b3IgaW4gZ3JvdXAgc2VlbXMgb2Jzb2xldGUsIGJ1dCByZXF1aXJlZCB0byBvdmVyY29tZSBidWcgaW4gT3BlcmEgYXBwbHlpbmcgY3Vyc29yOiB0ZXh0IG92ZXJhbGwgaWYgZGVmaW5lZCBlbHNld2hlcmUuLi4gKi8gLnVpLXRhYnMgLnVpLXRhYnMtcGFuZWwgeyBkaXNwbGF5OiBibG9jazsgYm9yZGVyLXdpZHRoOiAwOyBwYWRkaW5nOiAxZW0gMS40ZW07IGJhY2tncm91bmQ6IG5vbmU7IH0gLnVpLXRhYnMgLnVpLXRhYnMtaGlkZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfSAvKiAgKiBqUXVlcnkgVUkgRGF0ZXBpY2tlciBAVkVSU0lPTiAgKiAgKiBDb3B5cmlnaHQgMjAxMCwgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpICAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLiAgKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlICAqICAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvRGF0ZXBpY2tlciN0aGVtaW5nICAqLyAudWktZGF0ZXBpY2tlciB7IHdpZHRoOiAxN2VtOyBwYWRkaW5nOiAuMmVtIC4yZW0gMDsgfSAudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1oZWFkZXIgeyBwb3NpdGlvbjpyZWxhdGl2ZTsgcGFkZGluZzouMmVtIDA7IH0gLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItcHJldiwgLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItbmV4dCB7IHBvc2l0aW9uOmFic29sdXRlOyB0b3A6IDJweDsgd2lkdGg6IDEuOGVtOyBoZWlnaHQ6IDEuOGVtOyB9IC51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLXByZXYtaG92ZXIsIC51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLW5leHQtaG92ZXIgeyB0b3A6IDFweDsgfSAudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1wcmV2IHsgbGVmdDoycHg7IH0gLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItbmV4dCB7IHJpZ2h0OjJweDsgfSAudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIHsgbGVmdDoxcHg7IH0gLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlciB7IHJpZ2h0OjFweDsgfSAudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1wcmV2IHNwYW4sIC51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLW5leHQgc3BhbiB7IGRpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDUwJTsgbWFyZ2luLWxlZnQ6IC04cHg7IHRvcDogNTAlOyBtYXJnaW4tdG9wOiAtOHB4OyAgfSAudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci10aXRsZSB7IG1hcmdpbjogMCAyLjNlbTsgbGluZS1oZWlnaHQ6IDEuOGVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0gLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItdGl0bGUgc2VsZWN0IHsgZm9udC1zaXplOjFlbTsgbWFyZ2luOjFweCAwOyB9IC51aS1kYXRlcGlja2VyIHNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLXllYXIge3dpZHRoOiAxMDAlO30gLnVpLWRhdGVwaWNrZXIgc2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsICAudWktZGF0ZXBpY2tlciBzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyIHsgd2lkdGg6IDQ5JTt9IC51aS1kYXRlcGlja2VyIHRhYmxlIHt3aWR0aDogMTAwJTsgZm9udC1zaXplOiAuOWVtOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW46MCAwIC40ZW07IH0gLnVpLWRhdGVwaWNrZXIgdGggeyBwYWRkaW5nOiAuN2VtIC4zZW07IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJvcmRlcjogMDsgIH0gLnVpLWRhdGVwaWNrZXIgdGQgeyBib3JkZXI6IDA7IHBhZGRpbmc6IDFweDsgfSAudWktZGF0ZXBpY2tlciB0ZCBzcGFuLCAudWktZGF0ZXBpY2tlciB0ZCBhIHsgZGlzcGxheTogYmxvY2s7IHBhZGRpbmc6IC4yZW07IHRleHQtYWxpZ246IHJpZ2h0OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH0gLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSB7IGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7IG1hcmdpbjogLjdlbSAwIDAgMDsgcGFkZGluZzowIC4yZW07IGJvcmRlci1sZWZ0OiAwOyBib3JkZXItcmlnaHQ6IDA7IGJvcmRlci1ib3R0b206IDA7IH0gLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSBidXR0b24geyBmbG9hdDogcmlnaHQ7IG1hcmdpbjogLjVlbSAuMmVtIC40ZW07IGN1cnNvcjogcG9pbnRlcjsgcGFkZGluZzogLjJlbSAuNmVtIC4zZW0gLjZlbTsgd2lkdGg6YXV0bzsgb3ZlcmZsb3c6dmlzaWJsZTsgfSAudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1idXR0b25wYW5lIGJ1dHRvbi51aS1kYXRlcGlja2VyLWN1cnJlbnQgeyBmbG9hdDpsZWZ0OyB9ICAvKiB3aXRoIG11bHRpcGxlIGNhbGVuZGFycyAqLyAudWktZGF0ZXBpY2tlci51aS1kYXRlcGlja2VyLW11bHRpIHsgd2lkdGg6YXV0bzsgfSAudWktZGF0ZXBpY2tlci1tdWx0aSAudWktZGF0ZXBpY2tlci1ncm91cCB7IGZsb2F0OmxlZnQ7IH0gLnVpLWRhdGVwaWNrZXItbXVsdGkgLnVpLWRhdGVwaWNrZXItZ3JvdXAgdGFibGUgeyB3aWR0aDo5NSU7IG1hcmdpbjowIGF1dG8gLjRlbTsgfSAudWktZGF0ZXBpY2tlci1tdWx0aS0yIC51aS1kYXRlcGlja2VyLWdyb3VwIHsgd2lkdGg6NTAlOyB9IC51aS1kYXRlcGlja2VyLW11bHRpLTMgLnVpLWRhdGVwaWNrZXItZ3JvdXAgeyB3aWR0aDozMy4zJTsgfSAudWktZGF0ZXBpY2tlci1tdWx0aS00IC51aS1kYXRlcGlja2VyLWdyb3VwIHsgd2lkdGg6MjUlOyB9IC51aS1kYXRlcGlja2VyLW11bHRpIC51aS1kYXRlcGlja2VyLWdyb3VwLWxhc3QgLnVpLWRhdGVwaWNrZXItaGVhZGVyIHsgYm9yZGVyLWxlZnQtd2lkdGg6MDsgfSAudWktZGF0ZXBpY2tlci1tdWx0aSAudWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGUgLnVpLWRhdGVwaWNrZXItaGVhZGVyIHsgYm9yZGVyLWxlZnQtd2lkdGg6MDsgfSAudWktZGF0ZXBpY2tlci1tdWx0aSAudWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHsgY2xlYXI6bGVmdDsgfSAudWktZGF0ZXBpY2tlci1yb3ctYnJlYWsgeyBjbGVhcjpib3RoOyB3aWR0aDoxMDAlOyB9ICAvKiBSVEwgc3VwcG9ydCAqLyAudWktZGF0ZXBpY2tlci1ydGwgeyBkaXJlY3Rpb246IHJ0bDsgfSAudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItcHJldiB7IHJpZ2h0OiAycHg7IGxlZnQ6IGF1dG87IH0gLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLW5leHQgeyBsZWZ0OiAycHg7IHJpZ2h0OiBhdXRvOyB9IC51aS1kYXRlcGlja2VyLXJ0bCAudWktZGF0ZXBpY2tlci1wcmV2OmhvdmVyIHsgcmlnaHQ6IDFweDsgbGVmdDogYXV0bzsgfSAudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItbmV4dDpob3ZlciB7IGxlZnQ6IDFweDsgcmlnaHQ6IGF1dG87IH0gLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgeyBjbGVhcjpyaWdodDsgfSAudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSBidXR0b24geyBmbG9hdDogbGVmdDsgfSAudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSBidXR0b24udWktZGF0ZXBpY2tlci1jdXJyZW50IHsgZmxvYXQ6cmlnaHQ7IH0gLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLWdyb3VwIHsgZmxvYXQ6cmlnaHQ7IH0gLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLWdyb3VwLWxhc3QgLnVpLWRhdGVwaWNrZXItaGVhZGVyIHsgYm9yZGVyLXJpZ2h0LXdpZHRoOjA7IGJvcmRlci1sZWZ0LXdpZHRoOjFweDsgfSAudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItZ3JvdXAtbWlkZGxlIC51aS1kYXRlcGlja2VyLWhlYWRlciB7IGJvcmRlci1yaWdodC13aWR0aDowOyBib3JkZXItbGVmdC13aWR0aDoxcHg7IH0gIC8qIElFNiBJRlJBTUUgRklYICh0YWtlbiBmcm9tIGRhdGVwaWNrZXIgMS41LjMgKi8gLnVpLWRhdGVwaWNrZXItY292ZXIgeyAgICAgZGlzcGxheTogbm9uZTsgLypzb3JyeSBmb3IgSUU1Ki8gICAgIGRpc3BsYXkvKiovOiBibG9jazsgLypzb3JyeSBmb3IgSUU1Ki8gICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgLyptdXN0IGhhdmUqLyAgICAgei1pbmRleDogLTE7IC8qbXVzdCBoYXZlKi8gICAgIGZpbHRlcjogbWFzaygpOyAvKm11c3QgaGF2ZSovICAgICB0b3A6IC00cHg7IC8qbXVzdCBoYXZlKi8gICAgIGxlZnQ6IC00cHg7IC8qbXVzdCBoYXZlKi8gICAgIHdpZHRoOiAyMDBweDsgLyptdXN0IGhhdmUqLyAgICAgaGVpZ2h0OiAyMDBweDsgLyptdXN0IGhhdmUqLyB9LyogICogalF1ZXJ5IFVJIFByb2dyZXNzYmFyIEBWRVJTSU9OICAqICAqIENvcHlyaWdodCAyMDEwLCBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkgICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuICAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UgICogICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9Qcm9ncmVzc2JhciN0aGVtaW5nICAqLyAudWktcHJvZ3Jlc3NiYXIgeyBoZWlnaHQ6MmVtOyB0ZXh0LWFsaWduOiBsZWZ0OyB9IC51aS1wcm9ncmVzc2JhciAudWktcHJvZ3Jlc3NiYXItdmFsdWUge21hcmdpbjogLTFweDsgaGVpZ2h0OjEwMCU7IH0='
	$base64JQuery='LyohICAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjEuNC40ICAqIGh0dHA6Ly9qcXVlcnkuY29tLyAgKiAgKiBDb3B5cmlnaHQgMjAxMCwgSm9obiBSZXNpZyAgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4gICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZSAgKiAgKiBJbmNsdWRlcyBTaXp6bGUuanMgICogaHR0cDovL3NpenpsZWpzLmNvbS8gICogQ29weXJpZ2h0IDIwMTAsIFRoZSBEb2pvIEZvdW5kYXRpb24gICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCwgQlNELCBhbmQgR1BMIExpY2Vuc2VzLiAgKiAgKiBEYXRlOiBUaHUgTm92IDExIDE5OjA0OjUzIDIwMTAgLTA1MDAgICovIChmdW5jdGlvbihFLEIpe2Z1bmN0aW9uIGthKGEsYixkKXtpZihkPT09QiYmYS5ub2RlVHlwZT09PTEpe2Q9YS5nZXRBdHRyaWJ1dGUoImRhdGEtIitiKTtpZih0eXBlb2YgZD09PSJzdHJpbmciKXt0cnl7ZD1kPT09InRydWUiP3RydWU6ZD09PSJmYWxzZSI/ZmFsc2U6ZD09PSJudWxsIj9udWxsOiFjLmlzTmFOKGQpP3BhcnNlRmxvYXQoZCk6SmEudGVzdChkKT9jLnBhcnNlSlNPTihkKTpkfWNhdGNoKGUpe31jLmRhdGEoYSxiLGQpfWVsc2UgZD1CfXJldHVybiBkfWZ1bmN0aW9uIFUoKXtyZXR1cm4gZmFsc2V9ZnVuY3Rpb24gY2EoKXtyZXR1cm4gdHJ1ZX1mdW5jdGlvbiBsYShhLGIsZCl7ZFswXS50eXBlPWE7cmV0dXJuIGMuZXZlbnQuaGFuZGxlLmFwcGx5KGIsZCl9ZnVuY3Rpb24gS2EoYSl7dmFyIGIsZCxlLGYsaCxsLGssbyx4LHIsQSxDPVtdO2Y9W107aD1jLmRhdGEodGhpcyx0aGlzLm5vZGVUeXBlPyJldmVudHMiOiJfX2V2ZW50c19fIik7aWYodHlwZW9mIGg9PT0iZnVuY3Rpb24iKWg9IGguZXZlbnRzO2lmKCEoYS5saXZlRmlyZWQ9PT10aGlzfHwhaHx8IWgubGl2ZXx8YS5idXR0b24mJmEudHlwZT09PSJjbGljayIpKXtpZihhLm5hbWVzcGFjZSlBPVJlZ0V4cCgiKF58XFwuKSIrYS5uYW1lc3BhY2Uuc3BsaXQoIi4iKS5qb2luKCJcXC4oPzouKlxcLik/IikrIihcXC58JCkiKTthLmxpdmVGaXJlZD10aGlzO3ZhciBKPWgubGl2ZS5zbGljZSgwKTtmb3Ioaz0wO2s8Si5sZW5ndGg7aysrKXtoPUpba107aC5vcmlnVHlwZS5yZXBsYWNlKFgsIiIpPT09YS50eXBlP2YucHVzaChoLnNlbGVjdG9yKTpKLnNwbGljZShrLS0sMSl9Zj1jKGEudGFyZ2V0KS5jbG9zZXN0KGYsYS5jdXJyZW50VGFyZ2V0KTtvPTA7Zm9yKHg9Zi5sZW5ndGg7bzx4O28rKyl7cj1mW29dO2ZvcihrPTA7azxKLmxlbmd0aDtrKyspe2g9SltrXTtpZihyLnNlbGVjdG9yPT09aC5zZWxlY3RvciYmKCFBfHxBLnRlc3QoaC5uYW1lc3BhY2UpKSl7bD1yLmVsZW07ZT1udWxsO2lmKGgucHJlVHlwZT09PSJtb3VzZWVudGVyInx8IGgucHJlVHlwZT09PSJtb3VzZWxlYXZlIil7YS50eXBlPWgucHJlVHlwZTtlPWMoYS5yZWxhdGVkVGFyZ2V0KS5jbG9zZXN0KGguc2VsZWN0b3IpWzBdfWlmKCFlfHxlIT09bClDLnB1c2goe2VsZW06bCxoYW5kbGVPYmo6aCxsZXZlbDpyLmxldmVsfSl9fX1vPTA7Zm9yKHg9Qy5sZW5ndGg7bzx4O28rKyl7Zj1DW29dO2lmKGQmJmYubGV2ZWw+ZClicmVhazthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtO2EuZGF0YT1mLmhhbmRsZU9iai5kYXRhO2EuaGFuZGxlT2JqPWYuaGFuZGxlT2JqO0E9Zi5oYW5kbGVPYmoub3JpZ0hhbmRsZXIuYXBwbHkoZi5lbGVtLGFyZ3VtZW50cyk7aWYoQT09PWZhbHNlfHxhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2Q9Zi5sZXZlbDtpZihBPT09ZmFsc2UpYj1mYWxzZTtpZihhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpYnJlYWt9fXJldHVybiBifX1mdW5jdGlvbiBZKGEsYil7cmV0dXJuKGEmJmEhPT0iKiI/YSsiLiI6IiIpK2IucmVwbGFjZShMYSwgImAiKS5yZXBsYWNlKE1hLCImIil9ZnVuY3Rpb24gbWEoYSxiLGQpe2lmKGMuaXNGdW5jdGlvbihiKSlyZXR1cm4gYy5ncmVwKGEsZnVuY3Rpb24oZixoKXtyZXR1cm4hIWIuY2FsbChmLGgsZik9PT1kfSk7ZWxzZSBpZihiLm5vZGVUeXBlKXJldHVybiBjLmdyZXAoYSxmdW5jdGlvbihmKXtyZXR1cm4gZj09PWI9PT1kfSk7ZWxzZSBpZih0eXBlb2YgYj09PSJzdHJpbmciKXt2YXIgZT1jLmdyZXAoYSxmdW5jdGlvbihmKXtyZXR1cm4gZi5ub2RlVHlwZT09PTF9KTtpZihOYS50ZXN0KGIpKXJldHVybiBjLmZpbHRlcihiLGUsIWQpO2Vsc2UgYj1jLmZpbHRlcihiLGUpfXJldHVybiBjLmdyZXAoYSxmdW5jdGlvbihmKXtyZXR1cm4gYy5pbkFycmF5KGYsYik+PTA9PT1kfSl9ZnVuY3Rpb24gbmEoYSxiKXt2YXIgZD0wO2IuZWFjaChmdW5jdGlvbigpe2lmKHRoaXMubm9kZU5hbWU9PT0oYVtkXSYmYVtkXS5ub2RlTmFtZSkpe3ZhciBlPWMuZGF0YShhW2QrK10pLGY9Yy5kYXRhKHRoaXMsIGUpO2lmKGU9ZSYmZS5ldmVudHMpe2RlbGV0ZSBmLmhhbmRsZTtmLmV2ZW50cz17fTtmb3IodmFyIGggaW4gZSlmb3IodmFyIGwgaW4gZVtoXSljLmV2ZW50LmFkZCh0aGlzLGgsZVtoXVtsXSxlW2hdW2xdLmRhdGEpfX19KX1mdW5jdGlvbiBPYShhLGIpe2Iuc3JjP2MuYWpheCh7dXJsOmIuc3JjLGFzeW5jOmZhbHNlLGRhdGFUeXBlOiJzY3JpcHQifSk6Yy5nbG9iYWxFdmFsKGIudGV4dHx8Yi50ZXh0Q29udGVudHx8Yi5pbm5lckhUTUx8fCIiKTtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX1mdW5jdGlvbiBvYShhLGIsZCl7dmFyIGU9Yj09PSJ3aWR0aCI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodDtpZihkPT09ImJvcmRlciIpcmV0dXJuIGU7Yy5lYWNoKGI9PT0id2lkdGgiP1BhOlFhLGZ1bmN0aW9uKCl7ZHx8KGUtPXBhcnNlRmxvYXQoYy5jc3MoYSwicGFkZGluZyIrdGhpcykpfHwwKTtpZihkPT09Im1hcmdpbiIpZSs9cGFyc2VGbG9hdChjLmNzcyhhLCAibWFyZ2luIit0aGlzKSl8fDA7ZWxzZSBlLT1wYXJzZUZsb2F0KGMuY3NzKGEsImJvcmRlciIrdGhpcysiV2lkdGgiKSl8fDB9KTtyZXR1cm4gZX1mdW5jdGlvbiBkYShhLGIsZCxlKXtpZihjLmlzQXJyYXkoYikmJmIubGVuZ3RoKWMuZWFjaChiLGZ1bmN0aW9uKGYsaCl7ZHx8UmEudGVzdChhKT9lKGEsaCk6ZGEoYSsiWyIrKHR5cGVvZiBoPT09Im9iamVjdCJ8fGMuaXNBcnJheShoKT9mOiIiKSsiXSIsaCxkLGUpfSk7ZWxzZSBpZighZCYmYiE9bnVsbCYmdHlwZW9mIGI9PT0ib2JqZWN0IiljLmlzRW1wdHlPYmplY3QoYik/ZShhLCIiKTpjLmVhY2goYixmdW5jdGlvbihmLGgpe2RhKGErIlsiK2YrIl0iLGgsZCxlKX0pO2Vsc2UgZShhLGIpfWZ1bmN0aW9uIFMoYSxiKXt2YXIgZD17fTtjLmVhY2gocGEuY29uY2F0LmFwcGx5KFtdLHBhLnNsaWNlKDAsYikpLGZ1bmN0aW9uKCl7ZFt0aGlzXT1hfSk7cmV0dXJuIGR9ZnVuY3Rpb24gcWEoYSl7aWYoIWVhW2FdKXt2YXIgYj1jKCI8IisgYSsiPiIpLmFwcGVuZFRvKCJib2R5IiksZD1iLmNzcygiZGlzcGxheSIpO2IucmVtb3ZlKCk7aWYoZD09PSJub25lInx8ZD09PSIiKWQ9ImJsb2NrIjtlYVthXT1kfXJldHVybiBlYVthXX1mdW5jdGlvbiBmYShhKXtyZXR1cm4gYy5pc1dpbmRvdyhhKT9hOmEubm9kZVR5cGU9PT05P2EuZGVmYXVsdFZpZXd8fGEucGFyZW50V2luZG93OmZhbHNlfXZhciB0PUUuZG9jdW1lbnQsYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtpZighYi5pc1JlYWR5KXt0cnl7dC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChqKXtzZXRUaW1lb3V0KGEsMSk7cmV0dXJufWIucmVhZHkoKX19dmFyIGI9ZnVuY3Rpb24oaixzKXtyZXR1cm4gbmV3IGIuZm4uaW5pdChqLHMpfSxkPUUualF1ZXJ5LGU9RS4kLGYsaD0vXig/OltePF0qKDxbXHdcV10rPilbXj5dKiR8IyhbXHdcLV0rKSQpLyxsPS9cUy8saz0vXlxzKy8sbz0vXHMrJC8seD0vXFcvLHI9L1xkLyxBPS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPik/JC8sIEM9L15bXF0sOnt9XHNdKiQvLEo9L1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZyx3PS8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZyxJPS8oPzpefDp8LCkoPzpccypcWykrL2csTD0vKHdlYmtpdClbIFwvXShbXHcuXSspLyxnPS8ob3BlcmEpKD86Lip2ZXJzaW9uKT9bIFwvXShbXHcuXSspLyxpPS8obXNpZSkgKFtcdy5dKykvLG49Lyhtb3ppbGxhKSg/Oi4qPyBydjooW1x3Ll0rKSk/LyxtPW5hdmlnYXRvci51c2VyQWdlbnQscD1mYWxzZSxxPVtdLHUseT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLEY9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxNPUFycmF5LnByb3RvdHlwZS5wdXNoLE49QXJyYXkucHJvdG90eXBlLnNsaWNlLE89U3RyaW5nLnByb3RvdHlwZS50cmltLEQ9QXJyYXkucHJvdG90eXBlLmluZGV4T2YsUj17fTtiLmZuPWIucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKGosIHMpe3ZhciB2LHosSDtpZighailyZXR1cm4gdGhpcztpZihqLm5vZGVUeXBlKXt0aGlzLmNvbnRleHQ9dGhpc1swXT1qO3RoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXN9aWYoaj09PSJib2R5IiYmIXMmJnQuYm9keSl7dGhpcy5jb250ZXh0PXQ7dGhpc1swXT10LmJvZHk7dGhpcy5zZWxlY3Rvcj0iYm9keSI7dGhpcy5sZW5ndGg9MTtyZXR1cm4gdGhpc31pZih0eXBlb2Ygaj09PSJzdHJpbmciKWlmKCh2PWguZXhlYyhqKSkmJih2WzFdfHwhcykpaWYodlsxXSl7SD1zP3Mub3duZXJEb2N1bWVudHx8czp0O2lmKHo9QS5leGVjKGopKWlmKGIuaXNQbGFpbk9iamVjdChzKSl7aj1bdC5jcmVhdGVFbGVtZW50KHpbMV0pXTtiLmZuLmF0dHIuY2FsbChqLHMsdHJ1ZSl9ZWxzZSBqPVtILmNyZWF0ZUVsZW1lbnQoelsxXSldO2Vsc2V7ej1iLmJ1aWxkRnJhZ21lbnQoW3ZbMV1dLFtIXSk7aj0oei5jYWNoZWFibGU/ei5mcmFnbWVudC5jbG9uZU5vZGUodHJ1ZSk6ei5mcmFnbWVudCkuY2hpbGROb2Rlc31yZXR1cm4gYi5tZXJnZSh0aGlzLCBqKX1lbHNle2lmKCh6PXQuZ2V0RWxlbWVudEJ5SWQodlsyXSkpJiZ6LnBhcmVudE5vZGUpe2lmKHouaWQhPT12WzJdKXJldHVybiBmLmZpbmQoaik7dGhpcy5sZW5ndGg9MTt0aGlzWzBdPXp9dGhpcy5jb250ZXh0PXQ7dGhpcy5zZWxlY3Rvcj1qO3JldHVybiB0aGlzfWVsc2UgaWYoIXMmJiF4LnRlc3Qoaikpe3RoaXMuc2VsZWN0b3I9ajt0aGlzLmNvbnRleHQ9dDtqPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoaik7cmV0dXJuIGIubWVyZ2UodGhpcyxqKX1lbHNlIHJldHVybiFzfHxzLmpxdWVyeT8oc3x8ZikuZmluZChqKTpiKHMpLmZpbmQoaik7ZWxzZSBpZihiLmlzRnVuY3Rpb24oaikpcmV0dXJuIGYucmVhZHkoaik7aWYoai5zZWxlY3RvciE9PUIpe3RoaXMuc2VsZWN0b3I9ai5zZWxlY3Rvcjt0aGlzLmNvbnRleHQ9ai5jb250ZXh0fXJldHVybiBiLm1ha2VBcnJheShqLHRoaXMpfSxzZWxlY3RvcjoiIixqcXVlcnk6IjEuNC40IixsZW5ndGg6MCxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSwgdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBOLmNhbGwodGhpcywwKX0sZ2V0OmZ1bmN0aW9uKGope3JldHVybiBqPT1udWxsP3RoaXMudG9BcnJheSgpOmo8MD90aGlzLnNsaWNlKGopWzBdOnRoaXNbal19LHB1c2hTdGFjazpmdW5jdGlvbihqLHMsdil7dmFyIHo9YigpO2IuaXNBcnJheShqKT9NLmFwcGx5KHosaik6Yi5tZXJnZSh6LGopO3oucHJldk9iamVjdD10aGlzO3ouY29udGV4dD10aGlzLmNvbnRleHQ7aWYocz09PSJmaW5kIil6LnNlbGVjdG9yPXRoaXMuc2VsZWN0b3IrKHRoaXMuc2VsZWN0b3I/IiAiOiIiKSt2O2Vsc2UgaWYocyl6LnNlbGVjdG9yPXRoaXMuc2VsZWN0b3IrIi4iK3MrIigiK3YrIikiO3JldHVybiB6fSxlYWNoOmZ1bmN0aW9uKGoscyl7cmV0dXJuIGIuZWFjaCh0aGlzLGoscyl9LHJlYWR5OmZ1bmN0aW9uKGope2IuYmluZFJlYWR5KCk7aWYoYi5pc1JlYWR5KWouY2FsbCh0LGIpO2Vsc2UgcSYmcS5wdXNoKGopO3JldHVybiB0aGlzfSxlcTpmdW5jdGlvbihqKXtyZXR1cm4gaj09PSAtMT90aGlzLnNsaWNlKGopOnRoaXMuc2xpY2UoaiwraisxKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soTi5hcHBseSh0aGlzLGFyZ3VtZW50cyksInNsaWNlIixOLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfSxtYXA6ZnVuY3Rpb24oail7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGIubWFwKHRoaXMsZnVuY3Rpb24ocyx2KXtyZXR1cm4gai5jYWxsKHMsdixzKX0pKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8YihudWxsKX0scHVzaDpNLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfTtiLmZuLmluaXQucHJvdG90eXBlPWIuZm47Yi5leHRlbmQ9Yi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgaixzLHYseixILEc9YXJndW1lbnRzWzBdfHx7fSxLPTEsUT1hcmd1bWVudHMubGVuZ3RoLGdhPWZhbHNlOyBpZih0eXBlb2YgRz09PSJib29sZWFuIil7Z2E9RztHPWFyZ3VtZW50c1sxXXx8e307Sz0yfWlmKHR5cGVvZiBHIT09Im9iamVjdCImJiFiLmlzRnVuY3Rpb24oRykpRz17fTtpZihRPT09Syl7Rz10aGlzOy0tS31mb3IoO0s8UTtLKyspaWYoKGo9YXJndW1lbnRzW0tdKSE9bnVsbClmb3IocyBpbiBqKXt2PUdbc107ej1qW3NdO2lmKEchPT16KWlmKGdhJiZ6JiYoYi5pc1BsYWluT2JqZWN0KHopfHwoSD1iLmlzQXJyYXkoeikpKSl7aWYoSCl7SD1mYWxzZTt2PXYmJmIuaXNBcnJheSh2KT92OltdfWVsc2Ugdj12JiZiLmlzUGxhaW5PYmplY3Qodik/djp7fTtHW3NdPWIuZXh0ZW5kKGdhLHYseil9ZWxzZSBpZih6IT09QilHW3NdPXp9cmV0dXJuIEd9O2IuZXh0ZW5kKHtub0NvbmZsaWN0OmZ1bmN0aW9uKGope0UuJD1lO2lmKGopRS5qUXVlcnk9ZDtyZXR1cm4gYn0saXNSZWFkeTpmYWxzZSxyZWFkeVdhaXQ6MSxyZWFkeTpmdW5jdGlvbihqKXtqPT09dHJ1ZSYmYi5yZWFkeVdhaXQtLTsgaWYoIWIucmVhZHlXYWl0fHxqIT09dHJ1ZSYmIWIuaXNSZWFkeSl7aWYoIXQuYm9keSlyZXR1cm4gc2V0VGltZW91dChiLnJlYWR5LDEpO2IuaXNSZWFkeT10cnVlO2lmKCEoaiE9PXRydWUmJi0tYi5yZWFkeVdhaXQ+MCkpaWYocSl7dmFyIHM9MCx2PXE7Zm9yKHE9bnVsbDtqPXZbcysrXTspai5jYWxsKHQsYik7Yi5mbi50cmlnZ2VyJiZiKHQpLnRyaWdnZXIoInJlYWR5IikudW5iaW5kKCJyZWFkeSIpfX19LGJpbmRSZWFkeTpmdW5jdGlvbigpe2lmKCFwKXtwPXRydWU7aWYodC5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIilyZXR1cm4gc2V0VGltZW91dChiLnJlYWR5LDEpO2lmKHQuYWRkRXZlbnRMaXN0ZW5lcil7dC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIix1LGZhbHNlKTtFLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGIucmVhZHksZmFsc2UpfWVsc2UgaWYodC5hdHRhY2hFdmVudCl7dC5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIix1KTtFLmF0dGFjaEV2ZW50KCJvbmxvYWQiLCBiLnJlYWR5KTt2YXIgaj1mYWxzZTt0cnl7aj1FLmZyYW1lRWxlbWVudD09bnVsbH1jYXRjaChzKXt9dC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwmJmomJmEoKX19fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGope3JldHVybiBiLnR5cGUoaik9PT0iZnVuY3Rpb24ifSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGope3JldHVybiBiLnR5cGUoaik9PT0iYXJyYXkifSxpc1dpbmRvdzpmdW5jdGlvbihqKXtyZXR1cm4gaiYmdHlwZW9mIGo9PT0ib2JqZWN0IiYmInNldEludGVydmFsImluIGp9LGlzTmFOOmZ1bmN0aW9uKGope3JldHVybiBqPT1udWxsfHwhci50ZXN0KGopfHxpc05hTihqKX0sdHlwZTpmdW5jdGlvbihqKXtyZXR1cm4gaj09bnVsbD9TdHJpbmcoaik6Ult5LmNhbGwoaildfHwib2JqZWN0In0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihqKXtpZighanx8Yi50eXBlKGopIT09Im9iamVjdCJ8fGoubm9kZVR5cGV8fGIuaXNXaW5kb3coaikpcmV0dXJuIGZhbHNlO2lmKGouY29uc3RydWN0b3ImJiAhRi5jYWxsKGosImNvbnN0cnVjdG9yIikmJiFGLmNhbGwoai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKSlyZXR1cm4gZmFsc2U7Zm9yKHZhciBzIGluIGopO3JldHVybiBzPT09Qnx8Ri5jYWxsKGoscyl9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oail7Zm9yKHZhciBzIGluIGopcmV0dXJuIGZhbHNlO3JldHVybiB0cnVlfSxlcnJvcjpmdW5jdGlvbihqKXt0aHJvdyBqO30scGFyc2VKU09OOmZ1bmN0aW9uKGope2lmKHR5cGVvZiBqIT09InN0cmluZyJ8fCFqKXJldHVybiBudWxsO2o9Yi50cmltKGopO2lmKEMudGVzdChqLnJlcGxhY2UoSiwiQCIpLnJlcGxhY2UodywiXSIpLnJlcGxhY2UoSSwiIikpKXJldHVybiBFLkpTT04mJkUuSlNPTi5wYXJzZT9FLkpTT04ucGFyc2Uoaik6KG5ldyBGdW5jdGlvbigicmV0dXJuICIraikpKCk7ZWxzZSBiLmVycm9yKCJJbnZhbGlkIEpTT046ICIrail9LG5vb3A6ZnVuY3Rpb24oKXt9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oail7aWYoaiYmIGwudGVzdChqKSl7dmFyIHM9dC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHx0LmRvY3VtZW50RWxlbWVudCx2PXQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7di50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2lmKGIuc3VwcG9ydC5zY3JpcHRFdmFsKXYuYXBwZW5kQ2hpbGQodC5jcmVhdGVUZXh0Tm9kZShqKSk7ZWxzZSB2LnRleHQ9ajtzLmluc2VydEJlZm9yZSh2LHMuZmlyc3RDaGlsZCk7cy5yZW1vdmVDaGlsZCh2KX19LG5vZGVOYW1lOmZ1bmN0aW9uKGoscyl7cmV0dXJuIGoubm9kZU5hbWUmJmoubm9kZU5hbWUudG9VcHBlckNhc2UoKT09PXMudG9VcHBlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihqLHMsdil7dmFyIHosSD0wLEc9ai5sZW5ndGgsSz1HPT09Qnx8Yi5pc0Z1bmN0aW9uKGopO2lmKHYpaWYoSylmb3IoeiBpbiBqKXtpZihzLmFwcGx5KGpbel0sdik9PT1mYWxzZSlicmVha31lbHNlIGZvcig7SDxHOyl7aWYocy5hcHBseShqW0grK10sdik9PT1mYWxzZSlicmVha31lbHNlIGlmKEspZm9yKHogaW4gail7aWYocy5jYWxsKGpbel0sIHosalt6XSk9PT1mYWxzZSlicmVha31lbHNlIGZvcih2PWpbMF07SDxHJiZzLmNhbGwodixILHYpIT09ZmFsc2U7dj1qWysrSF0pO3JldHVybiBqfSx0cmltOk8/ZnVuY3Rpb24oail7cmV0dXJuIGo9PW51bGw/IiI6Ty5jYWxsKGopfTpmdW5jdGlvbihqKXtyZXR1cm4gaj09bnVsbD8iIjpqLnRvU3RyaW5nKCkucmVwbGFjZShrLCIiKS5yZXBsYWNlKG8sIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oaixzKXt2YXIgdj1zfHxbXTtpZihqIT1udWxsKXt2YXIgej1iLnR5cGUoaik7ai5sZW5ndGg9PW51bGx8fHo9PT0ic3RyaW5nInx8ej09PSJmdW5jdGlvbiJ8fHo9PT0icmVnZXhwInx8Yi5pc1dpbmRvdyhqKT9NLmNhbGwodixqKTpiLm1lcmdlKHYsail9cmV0dXJuIHZ9LGluQXJyYXk6ZnVuY3Rpb24oaixzKXtpZihzLmluZGV4T2YpcmV0dXJuIHMuaW5kZXhPZihqKTtmb3IodmFyIHY9MCx6PXMubGVuZ3RoO3Y8ejt2KyspaWYoc1t2XT09PWopcmV0dXJuIHY7cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGosIHMpe3ZhciB2PWoubGVuZ3RoLHo9MDtpZih0eXBlb2Ygcy5sZW5ndGg9PT0ibnVtYmVyIilmb3IodmFyIEg9cy5sZW5ndGg7ejxIO3orKylqW3YrK109c1t6XTtlbHNlIGZvcig7c1t6XSE9PUI7KWpbdisrXT1zW3orK107ai5sZW5ndGg9djtyZXR1cm4gan0sZ3JlcDpmdW5jdGlvbihqLHMsdil7dmFyIHo9W10sSDt2PSEhdjtmb3IodmFyIEc9MCxLPWoubGVuZ3RoO0c8SztHKyspe0g9ISFzKGpbR10sRyk7diE9PUgmJnoucHVzaChqW0ddKX1yZXR1cm4gen0sbWFwOmZ1bmN0aW9uKGoscyx2KXtmb3IodmFyIHo9W10sSCxHPTAsSz1qLmxlbmd0aDtHPEs7RysrKXtIPXMoaltHXSxHLHYpO2lmKEghPW51bGwpelt6Lmxlbmd0aF09SH1yZXR1cm4gei5jb25jYXQuYXBwbHkoW10seil9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihqLHMsdil7aWYoYXJndW1lbnRzLmxlbmd0aD09PTIpaWYodHlwZW9mIHM9PT0ic3RyaW5nIil7dj1qO2o9dltzXTtzPUJ9ZWxzZSBpZihzJiYhYi5pc0Z1bmN0aW9uKHMpKXt2PSBzO3M9Qn1pZighcyYmailzPWZ1bmN0aW9uKCl7cmV0dXJuIGouYXBwbHkodnx8dGhpcyxhcmd1bWVudHMpfTtpZihqKXMuZ3VpZD1qLmd1aWQ9ai5ndWlkfHxzLmd1aWR8fGIuZ3VpZCsrO3JldHVybiBzfSxhY2Nlc3M6ZnVuY3Rpb24oaixzLHYseixILEcpe3ZhciBLPWoubGVuZ3RoO2lmKHR5cGVvZiBzPT09Im9iamVjdCIpe2Zvcih2YXIgUSBpbiBzKWIuYWNjZXNzKGosUSxzW1FdLHosSCx2KTtyZXR1cm4gan1pZih2IT09Qil7ej0hRyYmeiYmYi5pc0Z1bmN0aW9uKHYpO2ZvcihRPTA7UTxLO1ErKylIKGpbUV0scyx6P3YuY2FsbChqW1FdLFEsSChqW1FdLHMpKTp2LEcpO3JldHVybiBqfXJldHVybiBLP0goalswXSxzKTpCfSxub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX0sdWFNYXRjaDpmdW5jdGlvbihqKXtqPWoudG9Mb3dlckNhc2UoKTtqPUwuZXhlYyhqKXx8Zy5leGVjKGopfHxpLmV4ZWMoail8fGouaW5kZXhPZigiY29tcGF0aWJsZSIpPDAmJm4uZXhlYyhqKXx8IFtdO3JldHVybnticm93c2VyOmpbMV18fCIiLHZlcnNpb246alsyXXx8IjAifX0sYnJvd3Nlcjp7fX0pO2IuZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCIuc3BsaXQoIiAiKSxmdW5jdGlvbihqLHMpe1JbIltvYmplY3QgIitzKyJdIl09cy50b0xvd2VyQ2FzZSgpfSk7bT1iLnVhTWF0Y2gobSk7aWYobS5icm93c2VyKXtiLmJyb3dzZXJbbS5icm93c2VyXT10cnVlO2IuYnJvd3Nlci52ZXJzaW9uPW0udmVyc2lvbn1pZihiLmJyb3dzZXIud2Via2l0KWIuYnJvd3Nlci5zYWZhcmk9dHJ1ZTtpZihEKWIuaW5BcnJheT1mdW5jdGlvbihqLHMpe3JldHVybiBELmNhbGwocyxqKX07aWYoIS9ccy8udGVzdCgiXHUwMGEwIikpe2s9L15bXHNceEEwXSsvO289L1tcc1x4QTBdKyQvfWY9Yih0KTtpZih0LmFkZEV2ZW50TGlzdGVuZXIpdT1mdW5jdGlvbigpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdSwgZmFsc2UpO2IucmVhZHkoKX07ZWxzZSBpZih0LmF0dGFjaEV2ZW50KXU9ZnVuY3Rpb24oKXtpZih0LnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKXt0LmRldGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLHUpO2IucmVhZHkoKX19O3JldHVybiBFLmpRdWVyeT1FLiQ9Yn0oKTsoZnVuY3Rpb24oKXtjLnN1cHBvcnQ9e307dmFyIGE9dC5kb2N1bWVudEVsZW1lbnQsYj10LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLGQ9dC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPSJzY3JpcHQiK2Mubm93KCk7ZC5zdHlsZS5kaXNwbGF5PSJub25lIjtkLmlubmVySFRNTD0iICAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJyBzdHlsZT0nY29sb3I6cmVkO2Zsb2F0OmxlZnQ7b3BhY2l0eTouNTU7Jz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiI7dmFyIGY9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLGg9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzBdLGw9dC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSwgaz1sLmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2lmKCEoIWZ8fCFmLmxlbmd0aHx8IWgpKXtjLnN1cHBvcnQ9e2xlYWRpbmdXaGl0ZXNwYWNlOmQuZmlyc3RDaGlsZC5ub2RlVHlwZT09PTMsdGJvZHk6IWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IikubGVuZ3RoLGh0bWxTZXJpYWxpemU6ISFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJsaW5rIikubGVuZ3RoLHN0eWxlOi9yZWQvLnRlc3QoaC5nZXRBdHRyaWJ1dGUoInN0eWxlIikpLGhyZWZOb3JtYWxpemVkOmguZ2V0QXR0cmlidXRlKCJocmVmIik9PT0iL2EiLG9wYWNpdHk6L14wLjU1JC8udGVzdChoLnN0eWxlLm9wYWNpdHkpLGNzc0Zsb2F0OiEhaC5zdHlsZS5jc3NGbG9hdCxjaGVja09uOmQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF0udmFsdWU9PT0ib24iLG9wdFNlbGVjdGVkOmsuc2VsZWN0ZWQsZGVsZXRlRXhwYW5kbzp0cnVlLG9wdERpc2FibGVkOmZhbHNlLGNoZWNrQ2xvbmU6ZmFsc2UsIHNjcmlwdEV2YWw6ZmFsc2Usbm9DbG9uZUV2ZW50OnRydWUsYm94TW9kZWw6bnVsbCxpbmxpbmVCbG9ja05lZWRzTGF5b3V0OmZhbHNlLHNocmlua1dyYXBCbG9ja3M6ZmFsc2UscmVsaWFibGVIaWRkZW5PZmZzZXRzOnRydWV9O2wuZGlzYWJsZWQ9dHJ1ZTtjLnN1cHBvcnQub3B0RGlzYWJsZWQ9IWsuZGlzYWJsZWQ7Yi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO3RyeXtiLmFwcGVuZENoaWxkKHQuY3JlYXRlVGV4dE5vZGUoIndpbmRvdy4iK2UrIj0xOyIpKX1jYXRjaChvKXt9YS5pbnNlcnRCZWZvcmUoYixhLmZpcnN0Q2hpbGQpO2lmKEVbZV0pe2Muc3VwcG9ydC5zY3JpcHRFdmFsPXRydWU7ZGVsZXRlIEVbZV19dHJ5e2RlbGV0ZSBiLnRlc3R9Y2F0Y2goeCl7Yy5zdXBwb3J0LmRlbGV0ZUV4cGFuZG89ZmFsc2V9YS5yZW1vdmVDaGlsZChiKTtpZihkLmF0dGFjaEV2ZW50JiZkLmZpcmVFdmVudCl7ZC5hdHRhY2hFdmVudCgib25jbGljayIsZnVuY3Rpb24gcigpe2Muc3VwcG9ydC5ub0Nsb25lRXZlbnQ9IGZhbHNlO2QuZGV0YWNoRXZlbnQoIm9uY2xpY2siLHIpfSk7ZC5jbG9uZU5vZGUodHJ1ZSkuZmlyZUV2ZW50KCJvbmNsaWNrIil9ZD10LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2QuaW5uZXJIVE1MPSI8aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3JhZGlvdGVzdCcgY2hlY2tlZD0nY2hlY2tlZCcvPiI7YT10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmFwcGVuZENoaWxkKGQuZmlyc3RDaGlsZCk7Yy5zdXBwb3J0LmNoZWNrQ2xvbmU9YS5jbG9uZU5vZGUodHJ1ZSkuY2xvbmVOb2RlKHRydWUpLmxhc3RDaGlsZC5jaGVja2VkO2MoZnVuY3Rpb24oKXt2YXIgcj10LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Iuc3R5bGUud2lkdGg9ci5zdHlsZS5wYWRkaW5nTGVmdD0iMXB4Ijt0LmJvZHkuYXBwZW5kQ2hpbGQocik7Yy5ib3hNb2RlbD1jLnN1cHBvcnQuYm94TW9kZWw9ci5vZmZzZXRXaWR0aD09PTI7aWYoInpvb20iaW4gci5zdHlsZSl7ci5zdHlsZS5kaXNwbGF5PSJpbmxpbmUiO3Iuc3R5bGUuem9vbT0gMTtjLnN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dD1yLm9mZnNldFdpZHRoPT09MjtyLnN0eWxlLmRpc3BsYXk9IiI7ci5pbm5lckhUTUw9IjxkaXYgc3R5bGU9J3dpZHRoOjRweDsnPjwvZGl2PiI7Yy5zdXBwb3J0LnNocmlua1dyYXBCbG9ja3M9ci5vZmZzZXRXaWR0aCE9PTJ9ci5pbm5lckhUTUw9Ijx0YWJsZT48dHI+PHRkIHN0eWxlPSdwYWRkaW5nOjA7ZGlzcGxheTpub25lJz48L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+Ijt2YXIgQT1yLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpO2Muc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHM9QVswXS5vZmZzZXRIZWlnaHQ9PT0wO0FbMF0uc3R5bGUuZGlzcGxheT0iIjtBWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiO2Muc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHM9Yy5zdXBwb3J0LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cyYmQVswXS5vZmZzZXRIZWlnaHQ9PT0wO3IuaW5uZXJIVE1MPSIiO3QuYm9keS5yZW1vdmVDaGlsZChyKS5zdHlsZS5kaXNwbGF5PSAibm9uZSJ9KTthPWZ1bmN0aW9uKHIpe3ZhciBBPXQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cj0ib24iK3I7dmFyIEM9ciBpbiBBO2lmKCFDKXtBLnNldEF0dHJpYnV0ZShyLCJyZXR1cm47Iik7Qz10eXBlb2YgQVtyXT09PSJmdW5jdGlvbiJ9cmV0dXJuIEN9O2Muc3VwcG9ydC5zdWJtaXRCdWJibGVzPWEoInN1Ym1pdCIpO2Muc3VwcG9ydC5jaGFuZ2VCdWJibGVzPWEoImNoYW5nZSIpO2E9Yj1kPWY9aD1udWxsfX0pKCk7dmFyIHJhPXt9LEphPS9eKD86XHsuKlx9fFxbLipcXSkkLztjLmV4dGVuZCh7Y2FjaGU6e30sdXVpZDowLGV4cGFuZG86ImpRdWVyeSIrYy5ub3coKSxub0RhdGE6e2VtYmVkOnRydWUsb2JqZWN0OiJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiLGFwcGxldDp0cnVlfSxkYXRhOmZ1bmN0aW9uKGEsYixkKXtpZihjLmFjY2VwdERhdGEoYSkpe2E9YT09RT9yYTphO3ZhciBlPWEubm9kZVR5cGUsZj1lP2FbYy5leHBhbmRvXTpudWxsLGg9IGMuY2FjaGU7aWYoIShlJiYhZiYmdHlwZW9mIGI9PT0ic3RyaW5nIiYmZD09PUIpKXtpZihlKWZ8fChhW2MuZXhwYW5kb109Zj0rK2MudXVpZCk7ZWxzZSBoPWE7aWYodHlwZW9mIGI9PT0ib2JqZWN0IilpZihlKWhbZl09Yy5leHRlbmQoaFtmXSxiKTtlbHNlIGMuZXh0ZW5kKGgsYik7ZWxzZSBpZihlJiYhaFtmXSloW2ZdPXt9O2E9ZT9oW2ZdOmg7aWYoZCE9PUIpYVtiXT1kO3JldHVybiB0eXBlb2YgYj09PSJzdHJpbmciP2FbYl06YX19fSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7aWYoYy5hY2NlcHREYXRhKGEpKXthPWE9PUU/cmE6YTt2YXIgZD1hLm5vZGVUeXBlLGU9ZD9hW2MuZXhwYW5kb106YSxmPWMuY2FjaGUsaD1kP2ZbZV06ZTtpZihiKXtpZihoKXtkZWxldGUgaFtiXTtkJiZjLmlzRW1wdHlPYmplY3QoaCkmJmMucmVtb3ZlRGF0YShhKX19ZWxzZSBpZihkJiZjLnN1cHBvcnQuZGVsZXRlRXhwYW5kbylkZWxldGUgYVtjLmV4cGFuZG9dO2Vsc2UgaWYoYS5yZW1vdmVBdHRyaWJ1dGUpYS5yZW1vdmVBdHRyaWJ1dGUoYy5leHBhbmRvKTsgZWxzZSBpZihkKWRlbGV0ZSBmW2VdO2Vsc2UgZm9yKHZhciBsIGluIGEpZGVsZXRlIGFbbF19fSxhY2NlcHREYXRhOmZ1bmN0aW9uKGEpe2lmKGEubm9kZU5hbWUpe3ZhciBiPWMubm9EYXRhW2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoYilyZXR1cm4hKGI9PT10cnVlfHxhLmdldEF0dHJpYnV0ZSgiY2xhc3NpZCIpIT09Yil9cmV0dXJuIHRydWV9fSk7Yy5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgZD1udWxsO2lmKHR5cGVvZiBhPT09InVuZGVmaW5lZCIpe2lmKHRoaXMubGVuZ3RoKXt2YXIgZT10aGlzWzBdLmF0dHJpYnV0ZXMsZjtkPWMuZGF0YSh0aGlzWzBdKTtmb3IodmFyIGg9MCxsPWUubGVuZ3RoO2g8bDtoKyspe2Y9ZVtoXS5uYW1lO2lmKGYuaW5kZXhPZigiZGF0YS0iKT09PTApe2Y9Zi5zdWJzdHIoNSk7a2EodGhpc1swXSxmLGRbZl0pfX19cmV0dXJuIGR9ZWxzZSBpZih0eXBlb2YgYT09PSJvYmplY3QiKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjLmRhdGEodGhpcywgYSl9KTt2YXIgaz1hLnNwbGl0KCIuIik7a1sxXT1rWzFdPyIuIitrWzFdOiIiO2lmKGI9PT1CKXtkPXRoaXMudHJpZ2dlckhhbmRsZXIoImdldERhdGEiK2tbMV0rIiEiLFtrWzBdXSk7aWYoZD09PUImJnRoaXMubGVuZ3RoKXtkPWMuZGF0YSh0aGlzWzBdLGEpO2Q9a2EodGhpc1swXSxhLGQpfXJldHVybiBkPT09QiYma1sxXT90aGlzLmRhdGEoa1swXSk6ZH1lbHNlIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz1jKHRoaXMpLHg9W2tbMF0sYl07by50cmlnZ2VySGFuZGxlcigic2V0RGF0YSIra1sxXSsiISIseCk7Yy5kYXRhKHRoaXMsYSxiKTtvLnRyaWdnZXJIYW5kbGVyKCJjaGFuZ2VEYXRhIitrWzFdKyIhIix4KX0pfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pO2MuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsZCl7aWYoYSl7Yj0oYnx8ImZ4IikrInF1ZXVlIjt2YXIgZT0gYy5kYXRhKGEsYik7aWYoIWQpcmV0dXJuIGV8fFtdO2lmKCFlfHxjLmlzQXJyYXkoZCkpZT1jLmRhdGEoYSxiLGMubWFrZUFycmF5KGQpKTtlbHNlIGUucHVzaChkKTtyZXR1cm4gZX19LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fCJmeCI7dmFyIGQ9Yy5xdWV1ZShhLGIpLGU9ZC5zaGlmdCgpO2lmKGU9PT0iaW5wcm9ncmVzcyIpZT1kLnNoaWZ0KCk7aWYoZSl7Yj09PSJmeCImJmQudW5zaGlmdCgiaW5wcm9ncmVzcyIpO2UuY2FsbChhLGZ1bmN0aW9uKCl7Yy5kZXF1ZXVlKGEsYil9KX19fSk7Yy5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGEhPT0ic3RyaW5nIil7Yj1hO2E9ImZ4In1pZihiPT09QilyZXR1cm4gYy5xdWV1ZSh0aGlzWzBdLGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1jLnF1ZXVlKHRoaXMsYSxiKTthPT09ImZ4IiYmZFswXSE9PSJpbnByb2dyZXNzIiYmYy5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5kZXF1ZXVlKHRoaXMsIGEpfSl9LGRlbGF5OmZ1bmN0aW9uKGEsYil7YT1jLmZ4P2MuZnguc3BlZWRzW2FdfHxhOmE7Yj1ifHwiZngiO3JldHVybiB0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oKXt2YXIgZD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmRlcXVldWUoZCxiKX0sYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHwiZngiLFtdKX19KTt2YXIgc2E9L1tcblx0XS9nLGhhPS9ccysvLFNhPS9cci9nLFRhPS9eKD86aHJlZnxzcmN8c3R5bGUpJC8sVWE9L14oPzpidXR0b258aW5wdXQpJC9pLFZhPS9eKD86YnV0dG9ufGlucHV0fG9iamVjdHxzZWxlY3R8dGV4dGFyZWEpJC9pLFdhPS9eYSg/OnJlYSk/JC9pLHRhPS9eKD86cmFkaW98Y2hlY2tib3gpJC9pO2MucHJvcHM9eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUiLHJlYWRvbmx5OiJyZWFkT25seSIsbWF4bGVuZ3RoOiJtYXhMZW5ndGgiLGNlbGxzcGFjaW5nOiJjZWxsU3BhY2luZyIscm93c3Bhbjoicm93U3BhbiIsIGNvbHNwYW46ImNvbFNwYW4iLHRhYmluZGV4OiJ0YWJJbmRleCIsdXNlbWFwOiJ1c2VNYXAiLGZyYW1lYm9yZGVyOiJmcmFtZUJvcmRlciJ9O2MuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuYWNjZXNzKHRoaXMsYSxiLHRydWUsYy5hdHRyKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yy5hdHRyKHRoaXMsYSwiIik7dGhpcy5ub2RlVHlwZT09PTEmJnRoaXMucmVtb3ZlQXR0cmlidXRlKGEpfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGEpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHgpe3ZhciByPWModGhpcyk7ci5hZGRDbGFzcyhhLmNhbGwodGhpcyx4LHIuYXR0cigiY2xhc3MiKSkpfSk7aWYoYSYmdHlwZW9mIGE9PT0ic3RyaW5nIilmb3IodmFyIGI9KGF8fCIiKS5zcGxpdChoYSksZD0wLGU9dGhpcy5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpc1tkXTtpZihmLm5vZGVUeXBlPT09IDEpaWYoZi5jbGFzc05hbWUpe2Zvcih2YXIgaD0iICIrZi5jbGFzc05hbWUrIiAiLGw9Zi5jbGFzc05hbWUsaz0wLG89Yi5sZW5ndGg7azxvO2srKylpZihoLmluZGV4T2YoIiAiK2Jba10rIiAiKTwwKWwrPSIgIitiW2tdO2YuY2xhc3NOYW1lPWMudHJpbShsKX1lbHNlIGYuY2xhc3NOYW1lPWF9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG8pe3ZhciB4PWModGhpcyk7eC5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxvLHguYXR0cigiY2xhc3MiKSkpfSk7aWYoYSYmdHlwZW9mIGE9PT0ic3RyaW5nInx8YT09PUIpZm9yKHZhciBiPShhfHwiIikuc3BsaXQoaGEpLGQ9MCxlPXRoaXMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPXRoaXNbZF07aWYoZi5ub2RlVHlwZT09PTEmJmYuY2xhc3NOYW1lKWlmKGEpe2Zvcih2YXIgaD0oIiAiK2YuY2xhc3NOYW1lKyIgIikucmVwbGFjZShzYSwiICIpLCBsPTAsaz1iLmxlbmd0aDtsPGs7bCsrKWg9aC5yZXBsYWNlKCIgIitiW2xdKyIgIiwiICIpO2YuY2xhc3NOYW1lPWMudHJpbShoKX1lbHNlIGYuY2xhc3NOYW1lPSIifXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBkPXR5cGVvZiBhLGU9dHlwZW9mIGI9PT0iYm9vbGVhbiI7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZil7dmFyIGg9Yyh0aGlzKTtoLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGYsaC5hdHRyKCJjbGFzcyIpLGIpLGIpfSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGQ9PT0ic3RyaW5nIilmb3IodmFyIGYsaD0wLGw9Yyh0aGlzKSxrPWIsbz1hLnNwbGl0KGhhKTtmPW9baCsrXTspe2s9ZT9rOiFsLmhhc0NsYXNzKGYpO2xbaz8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKGYpfWVsc2UgaWYoZD09PSJ1bmRlZmluZWQifHxkPT09ImJvb2xlYW4iKXt0aGlzLmNsYXNzTmFtZSYmYy5kYXRhKHRoaXMsICJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSk7dGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT1mYWxzZT8iIjpjLmRhdGEodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIn19KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7YT0iICIrYSsiICI7Zm9yKHZhciBiPTAsZD10aGlzLmxlbmd0aDtiPGQ7YisrKWlmKCgiICIrdGhpc1tiXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKHNhLCIgIikuaW5kZXhPZihhKT4tMSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2V9LHZhbDpmdW5jdGlvbihhKXtpZighYXJndW1lbnRzLmxlbmd0aCl7dmFyIGI9dGhpc1swXTtpZihiKXtpZihjLm5vZGVOYW1lKGIsIm9wdGlvbiIpKXt2YXIgZD1iLmF0dHJpYnV0ZXMudmFsdWU7cmV0dXJuIWR8fGQuc3BlY2lmaWVkP2IudmFsdWU6Yi50ZXh0fWlmKGMubm9kZU5hbWUoYiwic2VsZWN0Iikpe3ZhciBlPWIuc2VsZWN0ZWRJbmRleDtkPVtdO3ZhciBmPWIub3B0aW9ucztiPWIudHlwZT09PSJzZWxlY3Qtb25lIjsgaWYoZTwwKXJldHVybiBudWxsO3ZhciBoPWI/ZTowO2ZvcihlPWI/ZSsxOmYubGVuZ3RoO2g8ZTtoKyspe3ZhciBsPWZbaF07aWYobC5zZWxlY3RlZCYmKGMuc3VwcG9ydC5vcHREaXNhYmxlZD8hbC5kaXNhYmxlZDpsLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKT09PW51bGwpJiYoIWwucGFyZW50Tm9kZS5kaXNhYmxlZHx8IWMubm9kZU5hbWUobC5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7YT1jKGwpLnZhbCgpO2lmKGIpcmV0dXJuIGE7ZC5wdXNoKGEpfX1yZXR1cm4gZH1pZih0YS50ZXN0KGIudHlwZSkmJiFjLnN1cHBvcnQuY2hlY2tPbilyZXR1cm4gYi5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT1udWxsPyJvbiI6Yi52YWx1ZTtyZXR1cm4oYi52YWx1ZXx8IiIpLnJlcGxhY2UoU2EsIiIpfXJldHVybiBCfXZhciBrPWMuaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG8pe3ZhciB4PWModGhpcykscj1hO2lmKHRoaXMubm9kZVR5cGU9PT0xKXtpZihrKXI9IGEuY2FsbCh0aGlzLG8seC52YWwoKSk7aWYocj09bnVsbClyPSIiO2Vsc2UgaWYodHlwZW9mIHI9PT0ibnVtYmVyIilyKz0iIjtlbHNlIGlmKGMuaXNBcnJheShyKSlyPWMubWFwKHIsZnVuY3Rpb24oQyl7cmV0dXJuIEM9PW51bGw/IiI6QysiIn0pO2lmKGMuaXNBcnJheShyKSYmdGEudGVzdCh0aGlzLnR5cGUpKXRoaXMuY2hlY2tlZD1jLmluQXJyYXkoeC52YWwoKSxyKT49MDtlbHNlIGlmKGMubm9kZU5hbWUodGhpcywic2VsZWN0Iikpe3ZhciBBPWMubWFrZUFycmF5KHIpO2MoIm9wdGlvbiIsdGhpcykuZWFjaChmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWQ9Yy5pbkFycmF5KGModGhpcykudmFsKCksQSk+PTB9KTtpZighQS5sZW5ndGgpdGhpcy5zZWxlY3RlZEluZGV4PS0xfWVsc2UgdGhpcy52YWx1ZT1yfX0pfX0pO2MuZXh0ZW5kKHthdHRyRm46e3ZhbDp0cnVlLGNzczp0cnVlLGh0bWw6dHJ1ZSx0ZXh0OnRydWUsZGF0YTp0cnVlLHdpZHRoOnRydWUsaGVpZ2h0OnRydWUsb2Zmc2V0OnRydWV9LCBhdHRyOmZ1bmN0aW9uKGEsYixkLGUpe2lmKCFhfHxhLm5vZGVUeXBlPT09M3x8YS5ub2RlVHlwZT09PTgpcmV0dXJuIEI7aWYoZSYmYiBpbiBjLmF0dHJGbilyZXR1cm4gYyhhKVtiXShkKTtlPWEubm9kZVR5cGUhPT0xfHwhYy5pc1hNTERvYyhhKTt2YXIgZj1kIT09QjtiPWUmJmMucHJvcHNbYl18fGI7dmFyIGg9VGEudGVzdChiKTtpZigoYiBpbiBhfHxhW2JdIT09QikmJmUmJiFoKXtpZihmKXtiPT09InR5cGUiJiZVYS50ZXN0KGEubm9kZU5hbWUpJiZhLnBhcmVudE5vZGUmJmMuZXJyb3IoInR5cGUgcHJvcGVydHkgY2FuJ3QgYmUgY2hhbmdlZCIpO2lmKGQ9PT1udWxsKWEubm9kZVR5cGU9PT0xJiZhLnJlbW92ZUF0dHJpYnV0ZShiKTtlbHNlIGFbYl09ZH1pZihjLm5vZGVOYW1lKGEsImZvcm0iKSYmYS5nZXRBdHRyaWJ1dGVOb2RlKGIpKXJldHVybiBhLmdldEF0dHJpYnV0ZU5vZGUoYikubm9kZVZhbHVlO2lmKGI9PT0idGFiSW5kZXgiKXJldHVybihiPWEuZ2V0QXR0cmlidXRlTm9kZSgidGFiSW5kZXgiKSkmJiBiLnNwZWNpZmllZD9iLnZhbHVlOlZhLnRlc3QoYS5ub2RlTmFtZSl8fFdhLnRlc3QoYS5ub2RlTmFtZSkmJmEuaHJlZj8wOkI7cmV0dXJuIGFbYl19aWYoIWMuc3VwcG9ydC5zdHlsZSYmZSYmYj09PSJzdHlsZSIpe2lmKGYpYS5zdHlsZS5jc3NUZXh0PSIiK2Q7cmV0dXJuIGEuc3R5bGUuY3NzVGV4dH1mJiZhLnNldEF0dHJpYnV0ZShiLCIiK2QpO2lmKCFhLmF0dHJpYnV0ZXNbYl0mJmEuaGFzQXR0cmlidXRlJiYhYS5oYXNBdHRyaWJ1dGUoYikpcmV0dXJuIEI7YT0hYy5zdXBwb3J0LmhyZWZOb3JtYWxpemVkJiZlJiZoP2EuZ2V0QXR0cmlidXRlKGIsMik6YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIGE9PT1udWxsP0I6YX19KTt2YXIgWD0vXC4oLiopJC8saWE9L14oPzp0ZXh0YXJlYXxpbnB1dHxzZWxlY3QpJC9pLExhPS9cLi9nLE1hPS8gL2csWGE9L1teXHdccy58YF0vZyxZYT1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKFhhLCJcXCQmIil9LHVhPXtmb2N1c2luOjAsZm9jdXNvdXQ6MH07IGMuZXZlbnQ9e2FkZDpmdW5jdGlvbihhLGIsZCxlKXtpZighKGEubm9kZVR5cGU9PT0zfHxhLm5vZGVUeXBlPT09OCkpe2lmKGMuaXNXaW5kb3coYSkmJmEhPT1FJiYhYS5mcmFtZUVsZW1lbnQpYT1FO2lmKGQ9PT1mYWxzZSlkPVU7ZWxzZSBpZighZClyZXR1cm47dmFyIGYsaDtpZihkLmhhbmRsZXIpe2Y9ZDtkPWYuaGFuZGxlcn1pZighZC5ndWlkKWQuZ3VpZD1jLmd1aWQrKztpZihoPWMuZGF0YShhKSl7dmFyIGw9YS5ub2RlVHlwZT8iZXZlbnRzIjoiX19ldmVudHNfXyIsaz1oW2xdLG89aC5oYW5kbGU7aWYodHlwZW9mIGs9PT0iZnVuY3Rpb24iKXtvPWsuaGFuZGxlO2s9ay5ldmVudHN9ZWxzZSBpZighayl7YS5ub2RlVHlwZXx8KGhbbF09aD1mdW5jdGlvbigpe30pO2guZXZlbnRzPWs9e319aWYoIW8paC5oYW5kbGU9bz1mdW5jdGlvbigpe3JldHVybiB0eXBlb2YgYyE9PSJ1bmRlZmluZWQiJiYhYy5ldmVudC50cmlnZ2VyZWQ/Yy5ldmVudC5oYW5kbGUuYXBwbHkoby5lbGVtLCBhcmd1bWVudHMpOkJ9O28uZWxlbT1hO2I9Yi5zcGxpdCgiICIpO2Zvcih2YXIgeD0wLHI7bD1iW3grK107KXtoPWY/Yy5leHRlbmQoe30sZik6e2hhbmRsZXI6ZCxkYXRhOmV9O2lmKGwuaW5kZXhPZigiLiIpPi0xKXtyPWwuc3BsaXQoIi4iKTtsPXIuc2hpZnQoKTtoLm5hbWVzcGFjZT1yLnNsaWNlKDApLnNvcnQoKS5qb2luKCIuIil9ZWxzZXtyPVtdO2gubmFtZXNwYWNlPSIifWgudHlwZT1sO2lmKCFoLmd1aWQpaC5ndWlkPWQuZ3VpZDt2YXIgQT1rW2xdLEM9Yy5ldmVudC5zcGVjaWFsW2xdfHx7fTtpZighQSl7QT1rW2xdPVtdO2lmKCFDLnNldHVwfHxDLnNldHVwLmNhbGwoYSxlLHIsbyk9PT1mYWxzZSlpZihhLmFkZEV2ZW50TGlzdGVuZXIpYS5hZGRFdmVudExpc3RlbmVyKGwsbyxmYWxzZSk7ZWxzZSBhLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KCJvbiIrbCxvKX1pZihDLmFkZCl7Qy5hZGQuY2FsbChhLGgpO2lmKCFoLmhhbmRsZXIuZ3VpZCloLmhhbmRsZXIuZ3VpZD0gZC5ndWlkfUEucHVzaChoKTtjLmV2ZW50Lmdsb2JhbFtsXT10cnVlfWE9bnVsbH19fSxnbG9iYWw6e30scmVtb3ZlOmZ1bmN0aW9uKGEsYixkLGUpe2lmKCEoYS5ub2RlVHlwZT09PTN8fGEubm9kZVR5cGU9PT04KSl7aWYoZD09PWZhbHNlKWQ9VTt2YXIgZixoLGw9MCxrLG8seCxyLEEsQyxKPWEubm9kZVR5cGU/ImV2ZW50cyI6Il9fZXZlbnRzX18iLHc9Yy5kYXRhKGEpLEk9dyYmd1tKXTtpZih3JiZJKXtpZih0eXBlb2YgST09PSJmdW5jdGlvbiIpe3c9STtJPUkuZXZlbnRzfWlmKGImJmIudHlwZSl7ZD1iLmhhbmRsZXI7Yj1iLnR5cGV9aWYoIWJ8fHR5cGVvZiBiPT09InN0cmluZyImJmIuY2hhckF0KDApPT09Ii4iKXtiPWJ8fCIiO2ZvcihmIGluIEkpYy5ldmVudC5yZW1vdmUoYSxmK2IpfWVsc2V7Zm9yKGI9Yi5zcGxpdCgiICIpO2Y9YltsKytdOyl7cj1mO2s9Zi5pbmRleE9mKCIuIik8MDtvPVtdO2lmKCFrKXtvPWYuc3BsaXQoIi4iKTtmPW8uc2hpZnQoKTt4PVJlZ0V4cCgiKF58XFwuKSIrIGMubWFwKG8uc2xpY2UoMCkuc29ydCgpLFlhKS5qb2luKCJcXC4oPzouKlxcLik/IikrIihcXC58JCkiKX1pZihBPUlbZl0paWYoZCl7cj1jLmV2ZW50LnNwZWNpYWxbZl18fHt9O2ZvcihoPWV8fDA7aDxBLmxlbmd0aDtoKyspe0M9QVtoXTtpZihkLmd1aWQ9PT1DLmd1aWQpe2lmKGt8fHgudGVzdChDLm5hbWVzcGFjZSkpe2U9PW51bGwmJkEuc3BsaWNlKGgtLSwxKTtyLnJlbW92ZSYmci5yZW1vdmUuY2FsbChhLEMpfWlmKGUhPW51bGwpYnJlYWt9fWlmKEEubGVuZ3RoPT09MHx8ZSE9bnVsbCYmQS5sZW5ndGg9PT0xKXtpZighci50ZWFyZG93bnx8ci50ZWFyZG93bi5jYWxsKGEsbyk9PT1mYWxzZSljLnJlbW92ZUV2ZW50KGEsZix3LmhhbmRsZSk7ZGVsZXRlIElbZl19fWVsc2UgZm9yKGg9MDtoPEEubGVuZ3RoO2grKyl7Qz1BW2hdO2lmKGt8fHgudGVzdChDLm5hbWVzcGFjZSkpe2MuZXZlbnQucmVtb3ZlKGEscixDLmhhbmRsZXIsaCk7QS5zcGxpY2UoaC0tLDEpfX19aWYoYy5pc0VtcHR5T2JqZWN0KEkpKXtpZihiPSB3LmhhbmRsZSliLmVsZW09bnVsbDtkZWxldGUgdy5ldmVudHM7ZGVsZXRlIHcuaGFuZGxlO2lmKHR5cGVvZiB3PT09ImZ1bmN0aW9uIiljLnJlbW92ZURhdGEoYSxKKTtlbHNlIGMuaXNFbXB0eU9iamVjdCh3KSYmYy5yZW1vdmVEYXRhKGEpfX19fX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIsZCxlKXt2YXIgZj1hLnR5cGV8fGE7aWYoIWUpe2E9dHlwZW9mIGE9PT0ib2JqZWN0Ij9hW2MuZXhwYW5kb10/YTpjLmV4dGVuZChjLkV2ZW50KGYpLGEpOmMuRXZlbnQoZik7aWYoZi5pbmRleE9mKCIhIik+PTApe2EudHlwZT1mPWYuc2xpY2UoMCwtMSk7YS5leGNsdXNpdmU9dHJ1ZX1pZighZCl7YS5zdG9wUHJvcGFnYXRpb24oKTtjLmV2ZW50Lmdsb2JhbFtmXSYmYy5lYWNoKGMuY2FjaGUsZnVuY3Rpb24oKXt0aGlzLmV2ZW50cyYmdGhpcy5ldmVudHNbZl0mJmMuZXZlbnQudHJpZ2dlcihhLGIsdGhpcy5oYW5kbGUuZWxlbSl9KX1pZighZHx8ZC5ub2RlVHlwZT09PTN8fGQubm9kZVR5cGU9PT0gOClyZXR1cm4gQjthLnJlc3VsdD1CO2EudGFyZ2V0PWQ7Yj1jLm1ha2VBcnJheShiKTtiLnVuc2hpZnQoYSl9YS5jdXJyZW50VGFyZ2V0PWQ7KGU9ZC5ub2RlVHlwZT9jLmRhdGEoZCwiaGFuZGxlIik6KGMuZGF0YShkLCJfX2V2ZW50c19fIil8fHt9KS5oYW5kbGUpJiZlLmFwcGx5KGQsYik7ZT1kLnBhcmVudE5vZGV8fGQub3duZXJEb2N1bWVudDt0cnl7aWYoIShkJiZkLm5vZGVOYW1lJiZjLm5vRGF0YVtkLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSlpZihkWyJvbiIrZl0mJmRbIm9uIitmXS5hcHBseShkLGIpPT09ZmFsc2Upe2EucmVzdWx0PWZhbHNlO2EucHJldmVudERlZmF1bHQoKX19Y2F0Y2goaCl7fWlmKCFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmUpYy5ldmVudC50cmlnZ2VyKGEsYixlLHRydWUpO2Vsc2UgaWYoIWEuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBsO2U9YS50YXJnZXQ7dmFyIGs9Zi5yZXBsYWNlKFgsIiIpLG89Yy5ub2RlTmFtZShlLCJhIikmJms9PT0gImNsaWNrIix4PWMuZXZlbnQuc3BlY2lhbFtrXXx8e307aWYoKCF4Ll9kZWZhdWx0fHx4Ll9kZWZhdWx0LmNhbGwoZCxhKT09PWZhbHNlKSYmIW8mJiEoZSYmZS5ub2RlTmFtZSYmYy5ub0RhdGFbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkpe3RyeXtpZihlW2tdKXtpZihsPWVbIm9uIitrXSllWyJvbiIra109bnVsbDtjLmV2ZW50LnRyaWdnZXJlZD10cnVlO2Vba10oKX19Y2F0Y2gocil7fWlmKGwpZVsib24iK2tdPWw7Yy5ldmVudC50cmlnZ2VyZWQ9ZmFsc2V9fX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiLGQsZSxmO2Q9W107dmFyIGg9Yy5tYWtlQXJyYXkoYXJndW1lbnRzKTthPWhbMF09Yy5ldmVudC5maXgoYXx8RS5ldmVudCk7YS5jdXJyZW50VGFyZ2V0PXRoaXM7Yj1hLnR5cGUuaW5kZXhPZigiLiIpPDAmJiFhLmV4Y2x1c2l2ZTtpZighYil7ZT1hLnR5cGUuc3BsaXQoIi4iKTthLnR5cGU9ZS5zaGlmdCgpO2Q9ZS5zbGljZSgwKS5zb3J0KCk7ZT1SZWdFeHAoIihefFxcLikiKyBkLmpvaW4oIlxcLig/Oi4qXFwuKT8iKSsiKFxcLnwkKSIpfWEubmFtZXNwYWNlPWEubmFtZXNwYWNlfHxkLmpvaW4oIi4iKTtmPWMuZGF0YSh0aGlzLHRoaXMubm9kZVR5cGU/ImV2ZW50cyI6Il9fZXZlbnRzX18iKTtpZih0eXBlb2YgZj09PSJmdW5jdGlvbiIpZj1mLmV2ZW50cztkPShmfHx7fSlbYS50eXBlXTtpZihmJiZkKXtkPWQuc2xpY2UoMCk7Zj0wO2Zvcih2YXIgbD1kLmxlbmd0aDtmPGw7ZisrKXt2YXIgaz1kW2ZdO2lmKGJ8fGUudGVzdChrLm5hbWVzcGFjZSkpe2EuaGFuZGxlcj1rLmhhbmRsZXI7YS5kYXRhPWsuZGF0YTthLmhhbmRsZU9iaj1rO2s9ay5oYW5kbGVyLmFwcGx5KHRoaXMsaCk7aWYoayE9PUIpe2EucmVzdWx0PWs7aWYoaz09PWZhbHNlKXthLnByZXZlbnREZWZhdWx0KCk7YS5zdG9wUHJvcGFnYXRpb24oKX19aWYoYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWJyZWFrfX19cmV0dXJuIGEucmVzdWx0fSxwcm9wczoiYWx0S2V5IGF0dHJDaGFuZ2UgYXR0ck5hbWUgYnViYmxlcyBidXR0b24gY2FuY2VsYWJsZSBjaGFyQ29kZSBjbGllbnRYIGNsaWVudFkgY3RybEtleSBjdXJyZW50VGFyZ2V0IGRhdGEgZGV0YWlsIGV2ZW50UGhhc2UgZnJvbUVsZW1lbnQgaGFuZGxlciBrZXlDb2RlIGxheWVyWCBsYXllclkgbWV0YUtleSBuZXdWYWx1ZSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgcHJldlZhbHVlIHJlbGF0ZWROb2RlIHJlbGF0ZWRUYXJnZXQgc2NyZWVuWCBzY3JlZW5ZIHNoaWZ0S2V5IHNyY0VsZW1lbnQgdGFyZ2V0IHRvRWxlbWVudCB2aWV3IHdoZWVsRGVsdGEgd2hpY2giLnNwbGl0KCIgIiksIGZpeDpmdW5jdGlvbihhKXtpZihhW2MuZXhwYW5kb10pcmV0dXJuIGE7dmFyIGI9YTthPWMuRXZlbnQoYik7Zm9yKHZhciBkPXRoaXMucHJvcHMubGVuZ3RoLGU7ZDspe2U9dGhpcy5wcm9wc1stLWRdO2FbZV09YltlXX1pZighYS50YXJnZXQpYS50YXJnZXQ9YS5zcmNFbGVtZW50fHx0O2lmKGEudGFyZ2V0Lm5vZGVUeXBlPT09MylhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlO2lmKCFhLnJlbGF0ZWRUYXJnZXQmJmEuZnJvbUVsZW1lbnQpYS5yZWxhdGVkVGFyZ2V0PWEuZnJvbUVsZW1lbnQ9PT1hLnRhcmdldD9hLnRvRWxlbWVudDphLmZyb21FbGVtZW50O2lmKGEucGFnZVg9PW51bGwmJmEuY2xpZW50WCE9bnVsbCl7Yj10LmRvY3VtZW50RWxlbWVudDtkPXQuYm9keTthLnBhZ2VYPWEuY2xpZW50WCsoYiYmYi5zY3JvbGxMZWZ0fHxkJiZkLnNjcm9sbExlZnR8fDApLShiJiZiLmNsaWVudExlZnR8fGQmJmQuY2xpZW50TGVmdHx8MCk7YS5wYWdlWT1hLmNsaWVudFkrKGImJmIuc2Nyb2xsVG9wfHwgZCYmZC5zY3JvbGxUb3B8fDApLShiJiZiLmNsaWVudFRvcHx8ZCYmZC5jbGllbnRUb3B8fDApfWlmKGEud2hpY2g9PW51bGwmJihhLmNoYXJDb2RlIT1udWxsfHxhLmtleUNvZGUhPW51bGwpKWEud2hpY2g9YS5jaGFyQ29kZSE9bnVsbD9hLmNoYXJDb2RlOmEua2V5Q29kZTtpZighYS5tZXRhS2V5JiZhLmN0cmxLZXkpYS5tZXRhS2V5PWEuY3RybEtleTtpZighYS53aGljaCYmYS5idXR0b24hPT1CKWEud2hpY2g9YS5idXR0b24mMT8xOmEuYnV0dG9uJjI/MzphLmJ1dHRvbiY0PzI6MDtyZXR1cm4gYX0sZ3VpZDoxRTgscHJveHk6Yy5wcm94eSxzcGVjaWFsOntyZWFkeTp7c2V0dXA6Yy5iaW5kUmVhZHksdGVhcmRvd246Yy5ub29wfSxsaXZlOnthZGQ6ZnVuY3Rpb24oYSl7Yy5ldmVudC5hZGQodGhpcyxZKGEub3JpZ1R5cGUsYS5zZWxlY3RvciksYy5leHRlbmQoe30sYSx7aGFuZGxlcjpLYSxndWlkOmEuaGFuZGxlci5ndWlkfSkpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7Yy5ldmVudC5yZW1vdmUodGhpcywgWShhLm9yaWdUeXBlLGEuc2VsZWN0b3IpLGEpfX0sYmVmb3JldW5sb2FkOntzZXR1cDpmdW5jdGlvbihhLGIsZCl7aWYoYy5pc1dpbmRvdyh0aGlzKSl0aGlzLm9uYmVmb3JldW5sb2FkPWR9LHRlYXJkb3duOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5vbmJlZm9yZXVubG9hZD09PWIpdGhpcy5vbmJlZm9yZXVubG9hZD1udWxsfX19fTtjLnJlbW92ZUV2ZW50PXQucmVtb3ZlRXZlbnRMaXN0ZW5lcj9mdW5jdGlvbihhLGIsZCl7YS5yZW1vdmVFdmVudExpc3RlbmVyJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixkLGZhbHNlKX06ZnVuY3Rpb24oYSxiLGQpe2EuZGV0YWNoRXZlbnQmJmEuZGV0YWNoRXZlbnQoIm9uIitiLGQpfTtjLkV2ZW50PWZ1bmN0aW9uKGEpe2lmKCF0aGlzLnByZXZlbnREZWZhdWx0KXJldHVybiBuZXcgYy5FdmVudChhKTtpZihhJiZhLnR5cGUpe3RoaXMub3JpZ2luYWxFdmVudD1hO3RoaXMudHlwZT1hLnR5cGV9ZWxzZSB0aGlzLnR5cGU9YTt0aGlzLnRpbWVTdGFtcD0gYy5ub3coKTt0aGlzW2MuZXhwYW5kb109dHJ1ZX07Yy5FdmVudC5wcm90b3R5cGU9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9Y2E7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O2lmKGEpaWYoYS5wcmV2ZW50RGVmYXVsdClhLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBhLnJldHVyblZhbHVlPWZhbHNlfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPWNhO3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDtpZihhKXthLnN0b3BQcm9wYWdhdGlvbiYmYS5zdG9wUHJvcGFnYXRpb24oKTthLmNhbmNlbEJ1YmJsZT10cnVlfX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1jYTt0aGlzLnN0b3BQcm9wYWdhdGlvbigpfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6VSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpVLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOlV9OyB2YXIgdmE9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZWxhdGVkVGFyZ2V0O3RyeXtmb3IoO2ImJmIhPT10aGlzOyliPWIucGFyZW50Tm9kZTtpZihiIT09dGhpcyl7YS50eXBlPWEuZGF0YTtjLmV2ZW50LmhhbmRsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWNhdGNoKGQpe319LHdhPWZ1bmN0aW9uKGEpe2EudHlwZT1hLmRhdGE7Yy5ldmVudC5oYW5kbGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtjLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQifSxmdW5jdGlvbihhLGIpe2MuZXZlbnQuc3BlY2lhbFthXT17c2V0dXA6ZnVuY3Rpb24oZCl7Yy5ldmVudC5hZGQodGhpcyxiLGQmJmQuc2VsZWN0b3I/d2E6dmEsYSl9LHRlYXJkb3duOmZ1bmN0aW9uKGQpe2MuZXZlbnQucmVtb3ZlKHRoaXMsYixkJiZkLnNlbGVjdG9yP3dhOnZhKX19fSk7aWYoIWMuc3VwcG9ydC5zdWJtaXRCdWJibGVzKWMuZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9uKCl7aWYodGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09ICJmb3JtIil7Yy5ldmVudC5hZGQodGhpcywiY2xpY2suc3BlY2lhbFN1Ym1pdCIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsZD1iLnR5cGU7aWYoKGQ9PT0ic3VibWl0Inx8ZD09PSJpbWFnZSIpJiZjKGIpLmNsb3Nlc3QoImZvcm0iKS5sZW5ndGgpe2EubGl2ZUZpcmVkPUI7cmV0dXJuIGxhKCJzdWJtaXQiLHRoaXMsYXJndW1lbnRzKX19KTtjLmV2ZW50LmFkZCh0aGlzLCJrZXlwcmVzcy5zcGVjaWFsU3VibWl0IixmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxkPWIudHlwZTtpZigoZD09PSJ0ZXh0Inx8ZD09PSJwYXNzd29yZCIpJiZjKGIpLmNsb3Nlc3QoImZvcm0iKS5sZW5ndGgmJmEua2V5Q29kZT09PTEzKXthLmxpdmVGaXJlZD1CO3JldHVybiBsYSgic3VibWl0Iix0aGlzLGFyZ3VtZW50cyl9fSl9ZWxzZSByZXR1cm4gZmFsc2V9LHRlYXJkb3duOmZ1bmN0aW9uKCl7Yy5ldmVudC5yZW1vdmUodGhpcywiLnNwZWNpYWxTdWJtaXQiKX19O2lmKCFjLnN1cHBvcnQuY2hhbmdlQnViYmxlcyl7dmFyIFYsIHhhPWZ1bmN0aW9uKGEpe3ZhciBiPWEudHlwZSxkPWEudmFsdWU7aWYoYj09PSJyYWRpbyJ8fGI9PT0iY2hlY2tib3giKWQ9YS5jaGVja2VkO2Vsc2UgaWYoYj09PSJzZWxlY3QtbXVsdGlwbGUiKWQ9YS5zZWxlY3RlZEluZGV4Pi0xP2MubWFwKGEub3B0aW9ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS5zZWxlY3RlZH0pLmpvaW4oIi0iKToiIjtlbHNlIGlmKGEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJzZWxlY3QiKWQ9YS5zZWxlY3RlZEluZGV4O3JldHVybiBkfSxaPWZ1bmN0aW9uKGEsYil7dmFyIGQ9YS50YXJnZXQsZSxmO2lmKCEoIWlhLnRlc3QoZC5ub2RlTmFtZSl8fGQucmVhZE9ubHkpKXtlPWMuZGF0YShkLCJfY2hhbmdlX2RhdGEiKTtmPXhhKGQpO2lmKGEudHlwZSE9PSJmb2N1c291dCJ8fGQudHlwZSE9PSJyYWRpbyIpYy5kYXRhKGQsIl9jaGFuZ2VfZGF0YSIsZik7aWYoIShlPT09Qnx8Zj09PWUpKWlmKGUhPW51bGx8fGYpe2EudHlwZT0iY2hhbmdlIjthLmxpdmVGaXJlZD0gQjtyZXR1cm4gYy5ldmVudC50cmlnZ2VyKGEsYixkKX19fTtjLmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtmaWx0ZXJzOntmb2N1c291dDpaLGJlZm9yZWRlYWN0aXZhdGU6WixjbGljazpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxkPWIudHlwZTtpZihkPT09InJhZGlvInx8ZD09PSJjaGVja2JveCJ8fGIubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJzZWxlY3QiKXJldHVybiBaLmNhbGwodGhpcyxhKX0sa2V5ZG93bjpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxkPWIudHlwZTtpZihhLmtleUNvZGU9PT0xMyYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09InRleHRhcmVhInx8YS5rZXlDb2RlPT09MzImJihkPT09ImNoZWNrYm94Inx8ZD09PSJyYWRpbyIpfHxkPT09InNlbGVjdC1tdWx0aXBsZSIpcmV0dXJuIFouY2FsbCh0aGlzLGEpfSxiZWZvcmVhY3RpdmF0ZTpmdW5jdGlvbihhKXthPWEudGFyZ2V0O2MuZGF0YShhLCJfY2hhbmdlX2RhdGEiLHhhKGEpKX19LHNldHVwOmZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT09ICJmaWxlIilyZXR1cm4gZmFsc2U7Zm9yKHZhciBhIGluIFYpYy5ldmVudC5hZGQodGhpcyxhKyIuc3BlY2lhbENoYW5nZSIsVlthXSk7cmV0dXJuIGlhLnRlc3QodGhpcy5ub2RlTmFtZSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7Yy5ldmVudC5yZW1vdmUodGhpcywiLnNwZWNpYWxDaGFuZ2UiKTtyZXR1cm4gaWEudGVzdCh0aGlzLm5vZGVOYW1lKX19O1Y9Yy5ldmVudC5zcGVjaWFsLmNoYW5nZS5maWx0ZXJzO1YuZm9jdXM9Vi5iZWZvcmVhY3RpdmF0ZX10LmFkZEV2ZW50TGlzdGVuZXImJmMuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGUpe2U9Yy5ldmVudC5maXgoZSk7ZS50eXBlPWI7cmV0dXJuIGMuZXZlbnQudHJpZ2dlcihlLG51bGwsZS50YXJnZXQpfWMuZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt1YVtiXSsrPT09MCYmdC5hZGRFdmVudExpc3RlbmVyKGEsZCx0cnVlKX0sdGVhcmRvd246ZnVuY3Rpb24oKXstLXVhW2JdPT09IDAmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGQsdHJ1ZSl9fX0pO2MuZWFjaChbImJpbmQiLCJvbmUiXSxmdW5jdGlvbihhLGIpe2MuZm5bYl09ZnVuY3Rpb24oZCxlLGYpe2lmKHR5cGVvZiBkPT09Im9iamVjdCIpe2Zvcih2YXIgaCBpbiBkKXRoaXNbYl0oaCxlLGRbaF0sZik7cmV0dXJuIHRoaXN9aWYoYy5pc0Z1bmN0aW9uKGUpfHxlPT09ZmFsc2Upe2Y9ZTtlPUJ9dmFyIGw9Yj09PSJvbmUiP2MucHJveHkoZixmdW5jdGlvbihvKXtjKHRoaXMpLnVuYmluZChvLGwpO3JldHVybiBmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pOmY7aWYoZD09PSJ1bmxvYWQiJiZiIT09Im9uZSIpdGhpcy5vbmUoZCxlLGYpO2Vsc2V7aD0wO2Zvcih2YXIgaz10aGlzLmxlbmd0aDtoPGs7aCsrKWMuZXZlbnQuYWRkKHRoaXNbaF0sZCxsLGUpfXJldHVybiB0aGlzfX0pO2MuZm4uZXh0ZW5kKHt1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYT09PSJvYmplY3QiJiYhYS5wcmV2ZW50RGVmYXVsdClmb3IodmFyIGQgaW4gYSl0aGlzLnVuYmluZChkLCBhW2RdKTtlbHNle2Q9MDtmb3IodmFyIGU9dGhpcy5sZW5ndGg7ZDxlO2QrKyljLmV2ZW50LnJlbW92ZSh0aGlzW2RdLGEsYil9cmV0dXJuIHRoaXN9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixkLGUpe3JldHVybiB0aGlzLmxpdmUoYixkLGUsYSl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPT09MD90aGlzLnVuYmluZCgibGl2ZSIpOnRoaXMuZGllKGIsbnVsbCxkLGEpfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2MuZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXtpZih0aGlzWzBdKXt2YXIgZD1jLkV2ZW50KGEpO2QucHJldmVudERlZmF1bHQoKTtkLnN0b3BQcm9wYWdhdGlvbigpO2MuZXZlbnQudHJpZ2dlcihkLGIsdGhpc1swXSk7cmV0dXJuIGQucmVzdWx0fX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hcmd1bWVudHMsZD0gMTtkPGIubGVuZ3RoOyljLnByb3h5KGEsYltkKytdKTtyZXR1cm4gdGhpcy5jbGljayhjLnByb3h5KGEsZnVuY3Rpb24oZSl7dmFyIGY9KGMuZGF0YSh0aGlzLCJsYXN0VG9nZ2xlIithLmd1aWQpfHwwKSVkO2MuZGF0YSh0aGlzLCJsYXN0VG9nZ2xlIithLmd1aWQsZisxKTtlLnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIGJbZl0uYXBwbHkodGhpcyxhcmd1bWVudHMpfHxmYWxzZX0pKX0saG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSk7dmFyIHlhPXtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQiLG1vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQifTtjLmVhY2goWyJsaXZlIiwiZGllIl0sZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQsZSxmLGgpe3ZhciBsLGs9MCxvLHgscj1ofHx0aGlzLnNlbGVjdG9yO2g9aD90aGlzOmModGhpcy5jb250ZXh0KTtpZih0eXBlb2YgZD09PSAib2JqZWN0IiYmIWQucHJldmVudERlZmF1bHQpe2ZvcihsIGluIGQpaFtiXShsLGUsZFtsXSxyKTtyZXR1cm4gdGhpc31pZihjLmlzRnVuY3Rpb24oZSkpe2Y9ZTtlPUJ9Zm9yKGQ9KGR8fCIiKS5zcGxpdCgiICIpOyhsPWRbaysrXSkhPW51bGw7KXtvPVguZXhlYyhsKTt4PSIiO2lmKG8pe3g9b1swXTtsPWwucmVwbGFjZShYLCIiKX1pZihsPT09ImhvdmVyIilkLnB1c2goIm1vdXNlZW50ZXIiK3gsIm1vdXNlbGVhdmUiK3gpO2Vsc2V7bz1sO2lmKGw9PT0iZm9jdXMifHxsPT09ImJsdXIiKXtkLnB1c2goeWFbbF0reCk7bCs9eH1lbHNlIGw9KHlhW2xdfHxsKSt4O2lmKGI9PT0ibGl2ZSIpe3g9MDtmb3IodmFyIEE9aC5sZW5ndGg7eDxBO3grKyljLmV2ZW50LmFkZChoW3hdLCJsaXZlLiIrWShsLHIpLHtkYXRhOmUsc2VsZWN0b3I6cixoYW5kbGVyOmYsb3JpZ1R5cGU6bCxvcmlnSGFuZGxlcjpmLHByZVR5cGU6b30pfWVsc2UgaC51bmJpbmQoImxpdmUuIitZKGwsciksZil9fXJldHVybiB0aGlzfX0pOyBjLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtjLmZuW2JdPWZ1bmN0aW9uKGQsZSl7aWYoZT09bnVsbCl7ZT1kO2Q9bnVsbH1yZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMuYmluZChiLGQsZSk6dGhpcy50cmlnZ2VyKGIpfTtpZihjLmF0dHJGbiljLmF0dHJGbltiXT10cnVlfSk7RS5hdHRhY2hFdmVudCYmIUUuYWRkRXZlbnRMaXN0ZW5lciYmYyhFKS5iaW5kKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGMuY2FjaGUpaWYoYy5jYWNoZVthXS5oYW5kbGUpdHJ5e2MuZXZlbnQucmVtb3ZlKGMuY2FjaGVbYV0uaGFuZGxlLmVsZW0pfWNhdGNoKGIpe319KTsgKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShnLGksbixtLHAscSl7cD0wO2Zvcih2YXIgdT1tLmxlbmd0aDtwPHU7cCsrKXt2YXIgeT1tW3BdO2lmKHkpe3ZhciBGPWZhbHNlO2Zvcih5PXlbZ107eTspe2lmKHkuc2l6Y2FjaGU9PT1uKXtGPW1beS5zaXpzZXRdO2JyZWFrfWlmKHkubm9kZVR5cGU9PT0xJiYhcSl7eS5zaXpjYWNoZT1uO3kuc2l6c2V0PXB9aWYoeS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09aSl7Rj15O2JyZWFrfXk9eVtnXX1tW3BdPUZ9fX1mdW5jdGlvbiBiKGcsaSxuLG0scCxxKXtwPTA7Zm9yKHZhciB1PW0ubGVuZ3RoO3A8dTtwKyspe3ZhciB5PW1bcF07aWYoeSl7dmFyIEY9ZmFsc2U7Zm9yKHk9eVtnXTt5Oyl7aWYoeS5zaXpjYWNoZT09PW4pe0Y9bVt5LnNpenNldF07YnJlYWt9aWYoeS5ub2RlVHlwZT09PTEpe2lmKCFxKXt5LnNpemNhY2hlPW47eS5zaXpzZXQ9cH1pZih0eXBlb2YgaSE9PSJzdHJpbmciKXtpZih5PT09aSl7Rj10cnVlO2JyZWFrfX1lbHNlIGlmKGsuZmlsdGVyKGksIFt5XSkubGVuZ3RoPjApe0Y9eTticmVha319eT15W2ddfW1bcF09Rn19fXZhciBkPS8oKD86XCgoPzpcKFteKCldK1wpfFteKCldKykrXCl8XFsoPzpcW1teXFtcXV0qXF18WyciXVteJyJdKlsnIl18W15cW1xdJyJdKykrXF18XFwufFteID4rfiwoXFtcXF0rKSt8Wz4rfl0pKFxzKixccyopPygoPzoufFxyfFxuKSopL2csZT0wLGY9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxoPWZhbHNlLGw9dHJ1ZTtbMCwwXS5zb3J0KGZ1bmN0aW9uKCl7bD1mYWxzZTtyZXR1cm4gMH0pO3ZhciBrPWZ1bmN0aW9uKGcsaSxuLG0pe249bnx8W107dmFyIHA9aT1pfHx0O2lmKGkubm9kZVR5cGUhPT0xJiZpLm5vZGVUeXBlIT09OSlyZXR1cm5bXTtpZighZ3x8dHlwZW9mIGchPT0ic3RyaW5nIilyZXR1cm4gbjt2YXIgcSx1LHksRixNLE49dHJ1ZSxPPWsuaXNYTUwoaSksRD1bXSxSPWc7ZG97ZC5leGVjKCIiKTtpZihxPWQuZXhlYyhSKSl7Uj1xWzNdO0QucHVzaChxWzFdKTtpZihxWzJdKXtGPXFbM107IGJyZWFrfX19d2hpbGUocSk7aWYoRC5sZW5ndGg+MSYmeC5leGVjKGcpKWlmKEQubGVuZ3RoPT09MiYmby5yZWxhdGl2ZVtEWzBdXSl1PUwoRFswXStEWzFdLGkpO2Vsc2UgZm9yKHU9by5yZWxhdGl2ZVtEWzBdXT9baV06ayhELnNoaWZ0KCksaSk7RC5sZW5ndGg7KXtnPUQuc2hpZnQoKTtpZihvLnJlbGF0aXZlW2ddKWcrPUQuc2hpZnQoKTt1PUwoZyx1KX1lbHNle2lmKCFtJiZELmxlbmd0aD4xJiZpLm5vZGVUeXBlPT09OSYmIU8mJm8ubWF0Y2guSUQudGVzdChEWzBdKSYmIW8ubWF0Y2guSUQudGVzdChEW0QubGVuZ3RoLTFdKSl7cT1rLmZpbmQoRC5zaGlmdCgpLGksTyk7aT1xLmV4cHI/ay5maWx0ZXIocS5leHByLHEuc2V0KVswXTpxLnNldFswXX1pZihpKXtxPW0/e2V4cHI6RC5wb3AoKSxzZXQ6QyhtKX06ay5maW5kKEQucG9wKCksRC5sZW5ndGg9PT0xJiYoRFswXT09PSJ+Inx8RFswXT09PSIrIikmJmkucGFyZW50Tm9kZT9pLnBhcmVudE5vZGU6aSxPKTt1PXEuZXhwcj9rLmZpbHRlcihxLmV4cHIsIHEuc2V0KTpxLnNldDtpZihELmxlbmd0aD4wKXk9Qyh1KTtlbHNlIE49ZmFsc2U7Zm9yKDtELmxlbmd0aDspe3E9TT1ELnBvcCgpO2lmKG8ucmVsYXRpdmVbTV0pcT1ELnBvcCgpO2Vsc2UgTT0iIjtpZihxPT1udWxsKXE9aTtvLnJlbGF0aXZlW01dKHkscSxPKX19ZWxzZSB5PVtdfXl8fCh5PXUpO3l8fGsuZXJyb3IoTXx8Zyk7aWYoZi5jYWxsKHkpPT09IltvYmplY3QgQXJyYXldIilpZihOKWlmKGkmJmkubm9kZVR5cGU9PT0xKWZvcihnPTA7eVtnXSE9bnVsbDtnKyspe2lmKHlbZ10mJih5W2ddPT09dHJ1ZXx8eVtnXS5ub2RlVHlwZT09PTEmJmsuY29udGFpbnMoaSx5W2ddKSkpbi5wdXNoKHVbZ10pfWVsc2UgZm9yKGc9MDt5W2ddIT1udWxsO2crKyl5W2ddJiZ5W2ddLm5vZGVUeXBlPT09MSYmbi5wdXNoKHVbZ10pO2Vsc2Ugbi5wdXNoLmFwcGx5KG4seSk7ZWxzZSBDKHksbik7aWYoRil7ayhGLHAsbixtKTtrLnVuaXF1ZVNvcnQobil9cmV0dXJuIG59O2sudW5pcXVlU29ydD1mdW5jdGlvbihnKXtpZih3KXtoPSBsO2cuc29ydCh3KTtpZihoKWZvcih2YXIgaT0xO2k8Zy5sZW5ndGg7aSsrKWdbaV09PT1nW2ktMV0mJmcuc3BsaWNlKGktLSwxKX1yZXR1cm4gZ307ay5tYXRjaGVzPWZ1bmN0aW9uKGcsaSl7cmV0dXJuIGsoZyxudWxsLG51bGwsaSl9O2subWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGcsaSl7cmV0dXJuIGsoaSxudWxsLG51bGwsW2ddKS5sZW5ndGg+MH07ay5maW5kPWZ1bmN0aW9uKGcsaSxuKXt2YXIgbTtpZighZylyZXR1cm5bXTtmb3IodmFyIHA9MCxxPW8ub3JkZXIubGVuZ3RoO3A8cTtwKyspe3ZhciB1LHk9by5vcmRlcltwXTtpZih1PW8ubGVmdE1hdGNoW3ldLmV4ZWMoZykpe3ZhciBGPXVbMV07dS5zcGxpY2UoMSwxKTtpZihGLnN1YnN0cihGLmxlbmd0aC0xKSE9PSJcXCIpe3VbMV09KHVbMV18fCIiKS5yZXBsYWNlKC9cXC9nLCIiKTttPW8uZmluZFt5XSh1LGksbik7aWYobSE9bnVsbCl7Zz1nLnJlcGxhY2Uoby5tYXRjaFt5XSwiIik7YnJlYWt9fX19bXx8KG09aS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpKTsgcmV0dXJue3NldDptLGV4cHI6Z319O2suZmlsdGVyPWZ1bmN0aW9uKGcsaSxuLG0pe2Zvcih2YXIgcCxxLHU9Zyx5PVtdLEY9aSxNPWkmJmlbMF0mJmsuaXNYTUwoaVswXSk7ZyYmaS5sZW5ndGg7KXtmb3IodmFyIE4gaW4gby5maWx0ZXIpaWYoKHA9by5sZWZ0TWF0Y2hbTl0uZXhlYyhnKSkhPW51bGwmJnBbMl0pe3ZhciBPLEQsUj1vLmZpbHRlcltOXTtEPXBbMV07cT1mYWxzZTtwLnNwbGljZSgxLDEpO2lmKEQuc3Vic3RyKEQubGVuZ3RoLTEpIT09IlxcIil7aWYoRj09PXkpeT1bXTtpZihvLnByZUZpbHRlcltOXSlpZihwPW8ucHJlRmlsdGVyW05dKHAsRixuLHksbSxNKSl7aWYocD09PXRydWUpY29udGludWV9ZWxzZSBxPU89dHJ1ZTtpZihwKWZvcih2YXIgaj0wOyhEPUZbal0pIT1udWxsO2orKylpZihEKXtPPVIoRCxwLGosRik7dmFyIHM9bV4hIU87aWYobiYmTyE9bnVsbClpZihzKXE9dHJ1ZTtlbHNlIEZbal09ZmFsc2U7ZWxzZSBpZihzKXt5LnB1c2goRCk7cT10cnVlfX1pZihPIT09IEIpe258fChGPXkpO2c9Zy5yZXBsYWNlKG8ubWF0Y2hbTl0sIiIpO2lmKCFxKXJldHVybltdO2JyZWFrfX19aWYoZz09PXUpaWYocT09bnVsbClrLmVycm9yKGcpO2Vsc2UgYnJlYWs7dT1nfXJldHVybiBGfTtrLmVycm9yPWZ1bmN0aW9uKGcpe3Rocm93IlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrZzt9O3ZhciBvPWsuc2VsZWN0b3JzPXtvcmRlcjpbIklEIiwiTkFNRSIsIlRBRyJdLG1hdGNoOntJRDovIygoPzpbXHdcdTAwYzAtXHVGRkZGXC1dfFxcLikrKS8sQ0xBU1M6L1wuKCg/Oltcd1x1MDBjMC1cdUZGRkZcLV18XFwuKSspLyxOQU1FOi9cW25hbWU9WyciXSooKD86W1x3XHUwMGMwLVx1RkZGRlwtXXxcXC4pKylbJyJdKlxdLyxBVFRSOi9cW1xzKigoPzpbXHdcdTAwYzAtXHVGRkZGXC1dfFxcLikrKVxzKig/OihcUz89KVxzKihbJyJdKikoLio/KVwzfClccypcXS8sVEFHOi9eKCg/Oltcd1x1MDBjMC1cdUZGRkZcKlwtXXxcXC4pKykvLENISUxEOi86KG9ubHl8bnRofGxhc3R8Zmlyc3QpLWNoaWxkKD86XCgoZXZlbnxvZGR8W1xkbitcLV0qKVwpKT8vLCBQT1M6LzoobnRofGVxfGd0fGx0fGZpcnN0fGxhc3R8ZXZlbnxvZGQpKD86XCgoXGQqKVwpKT8oPz1bXlwtXXwkKS8sUFNFVURPOi86KCg/Oltcd1x1MDBjMC1cdUZGRkZcLV18XFwuKSspKD86XCgoWyciXT8pKCg/OlwoW15cKV0rXCl8W15cKFwpXSopKylcMlwpKT8vfSxsZWZ0TWF0Y2g6e30sYXR0ck1hcDp7ImNsYXNzIjoiY2xhc3NOYW1lIiwiZm9yIjoiaHRtbEZvciJ9LGF0dHJIYW5kbGU6e2hyZWY6ZnVuY3Rpb24oZyl7cmV0dXJuIGcuZ2V0QXR0cmlidXRlKCJocmVmIil9fSxyZWxhdGl2ZTp7IisiOmZ1bmN0aW9uKGcsaSl7dmFyIG49dHlwZW9mIGk9PT0ic3RyaW5nIixtPW4mJiEvXFcvLnRlc3QoaSk7bj1uJiYhbTtpZihtKWk9aS50b0xvd2VyQ2FzZSgpO209MDtmb3IodmFyIHA9Zy5sZW5ndGgscTttPHA7bSsrKWlmKHE9Z1ttXSl7Zm9yKDsocT1xLnByZXZpb3VzU2libGluZykmJnEubm9kZVR5cGUhPT0xOyk7Z1ttXT1ufHxxJiZxLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0gaT9xfHxmYWxzZTpxPT09aX1uJiZrLmZpbHRlcihpLGcsdHJ1ZSl9LCI+IjpmdW5jdGlvbihnLGkpe3ZhciBuLG09dHlwZW9mIGk9PT0ic3RyaW5nIixwPTAscT1nLmxlbmd0aDtpZihtJiYhL1xXLy50ZXN0KGkpKWZvcihpPWkudG9Mb3dlckNhc2UoKTtwPHE7cCsrKXtpZihuPWdbcF0pe249bi5wYXJlbnROb2RlO2dbcF09bi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09aT9uOmZhbHNlfX1lbHNle2Zvcig7cDxxO3ArKylpZihuPWdbcF0pZ1twXT1tP24ucGFyZW50Tm9kZTpuLnBhcmVudE5vZGU9PT1pO20mJmsuZmlsdGVyKGksZyx0cnVlKX19LCIiOmZ1bmN0aW9uKGcsaSxuKXt2YXIgbSxwPWUrKyxxPWI7aWYodHlwZW9mIGk9PT0ic3RyaW5nIiYmIS9cVy8udGVzdChpKSl7bT1pPWkudG9Mb3dlckNhc2UoKTtxPWF9cSgicGFyZW50Tm9kZSIsaSxwLGcsbSxuKX0sIn4iOmZ1bmN0aW9uKGcsaSxuKXt2YXIgbSxwPWUrKyxxPWI7aWYodHlwZW9mIGk9PT0ic3RyaW5nIiYmIS9cVy8udGVzdChpKSl7bT0gaT1pLnRvTG93ZXJDYXNlKCk7cT1hfXEoInByZXZpb3VzU2libGluZyIsaSxwLGcsbSxuKX19LGZpbmQ6e0lEOmZ1bmN0aW9uKGcsaSxuKXtpZih0eXBlb2YgaS5nZXRFbGVtZW50QnlJZCE9PSJ1bmRlZmluZWQiJiYhbilyZXR1cm4oZz1pLmdldEVsZW1lbnRCeUlkKGdbMV0pKSYmZy5wYXJlbnROb2RlP1tnXTpbXX0sTkFNRTpmdW5jdGlvbihnLGkpe2lmKHR5cGVvZiBpLmdldEVsZW1lbnRzQnlOYW1lIT09InVuZGVmaW5lZCIpe2Zvcih2YXIgbj1bXSxtPWkuZ2V0RWxlbWVudHNCeU5hbWUoZ1sxXSkscD0wLHE9bS5sZW5ndGg7cDxxO3ArKyltW3BdLmdldEF0dHJpYnV0ZSgibmFtZSIpPT09Z1sxXSYmbi5wdXNoKG1bcF0pO3JldHVybiBuLmxlbmd0aD09PTA/bnVsbDpufX0sVEFHOmZ1bmN0aW9uKGcsaSl7cmV0dXJuIGkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZ1sxXSl9fSxwcmVGaWx0ZXI6e0NMQVNTOmZ1bmN0aW9uKGcsaSxuLG0scCxxKXtnPSIgIitnWzFdLnJlcGxhY2UoL1xcL2csICIiKSsiICI7aWYocSlyZXR1cm4gZztxPTA7Zm9yKHZhciB1Oyh1PWlbcV0pIT1udWxsO3ErKylpZih1KWlmKHBeKHUuY2xhc3NOYW1lJiYoIiAiK3UuY2xhc3NOYW1lKyIgIikucmVwbGFjZSgvW1x0XG5dL2csIiAiKS5pbmRleE9mKGcpPj0wKSlufHxtLnB1c2godSk7ZWxzZSBpZihuKWlbcV09ZmFsc2U7cmV0dXJuIGZhbHNlfSxJRDpmdW5jdGlvbihnKXtyZXR1cm4gZ1sxXS5yZXBsYWNlKC9cXC9nLCIiKX0sVEFHOmZ1bmN0aW9uKGcpe3JldHVybiBnWzFdLnRvTG93ZXJDYXNlKCl9LENISUxEOmZ1bmN0aW9uKGcpe2lmKGdbMV09PT0ibnRoIil7dmFyIGk9LygtPykoXGQqKW4oKD86XCt8LSk/XGQqKS8uZXhlYyhnWzJdPT09ImV2ZW4iJiYiMm4ifHxnWzJdPT09Im9kZCImJiIybisxInx8IS9cRC8udGVzdChnWzJdKSYmIjBuKyIrZ1syXXx8Z1syXSk7Z1syXT1pWzFdKyhpWzJdfHwxKS0wO2dbM109aVszXS0wfWdbMF09ZSsrO3JldHVybiBnfSxBVFRSOmZ1bmN0aW9uKGcsaSxuLCBtLHAscSl7aT1nWzFdLnJlcGxhY2UoL1xcL2csIiIpO2lmKCFxJiZvLmF0dHJNYXBbaV0pZ1sxXT1vLmF0dHJNYXBbaV07aWYoZ1syXT09PSJ+PSIpZ1s0XT0iICIrZ1s0XSsiICI7cmV0dXJuIGd9LFBTRVVETzpmdW5jdGlvbihnLGksbixtLHApe2lmKGdbMV09PT0ibm90IilpZigoZC5leGVjKGdbM10pfHwiIikubGVuZ3RoPjF8fC9eXHcvLnRlc3QoZ1szXSkpZ1szXT1rKGdbM10sbnVsbCxudWxsLGkpO2Vsc2V7Zz1rLmZpbHRlcihnWzNdLGksbix0cnVlXnApO258fG0ucHVzaC5hcHBseShtLGcpO3JldHVybiBmYWxzZX1lbHNlIGlmKG8ubWF0Y2guUE9TLnRlc3QoZ1swXSl8fG8ubWF0Y2guQ0hJTEQudGVzdChnWzBdKSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZ30sUE9TOmZ1bmN0aW9uKGcpe2cudW5zaGlmdCh0cnVlKTtyZXR1cm4gZ319LGZpbHRlcnM6e2VuYWJsZWQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGcuZGlzYWJsZWQ9PT1mYWxzZSYmZy50eXBlIT09ImhpZGRlbiJ9LGRpc2FibGVkOmZ1bmN0aW9uKGcpe3JldHVybiBnLmRpc2FibGVkPT09IHRydWV9LGNoZWNrZWQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGcuY2hlY2tlZD09PXRydWV9LHNlbGVjdGVkOmZ1bmN0aW9uKGcpe3JldHVybiBnLnNlbGVjdGVkPT09dHJ1ZX0scGFyZW50OmZ1bmN0aW9uKGcpe3JldHVybiEhZy5maXJzdENoaWxkfSxlbXB0eTpmdW5jdGlvbihnKXtyZXR1cm4hZy5maXJzdENoaWxkfSxoYXM6ZnVuY3Rpb24oZyxpLG4pe3JldHVybiEhayhuWzNdLGcpLmxlbmd0aH0saGVhZGVyOmZ1bmN0aW9uKGcpe3JldHVybi9oXGQvaS50ZXN0KGcubm9kZU5hbWUpfSx0ZXh0OmZ1bmN0aW9uKGcpe3JldHVybiJ0ZXh0Ij09PWcudHlwZX0scmFkaW86ZnVuY3Rpb24oZyl7cmV0dXJuInJhZGlvIj09PWcudHlwZX0sY2hlY2tib3g6ZnVuY3Rpb24oZyl7cmV0dXJuImNoZWNrYm94Ij09PWcudHlwZX0sZmlsZTpmdW5jdGlvbihnKXtyZXR1cm4iZmlsZSI9PT1nLnR5cGV9LHBhc3N3b3JkOmZ1bmN0aW9uKGcpe3JldHVybiJwYXNzd29yZCI9PT1nLnR5cGV9LHN1Ym1pdDpmdW5jdGlvbihnKXtyZXR1cm4ic3VibWl0Ij09PSBnLnR5cGV9LGltYWdlOmZ1bmN0aW9uKGcpe3JldHVybiJpbWFnZSI9PT1nLnR5cGV9LHJlc2V0OmZ1bmN0aW9uKGcpe3JldHVybiJyZXNldCI9PT1nLnR5cGV9LGJ1dHRvbjpmdW5jdGlvbihnKXtyZXR1cm4iYnV0dG9uIj09PWcudHlwZXx8Zy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImJ1dHRvbiJ9LGlucHV0OmZ1bmN0aW9uKGcpe3JldHVybi9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uL2kudGVzdChnLm5vZGVOYW1lKX19LHNldEZpbHRlcnM6e2ZpcnN0OmZ1bmN0aW9uKGcsaSl7cmV0dXJuIGk9PT0wfSxsYXN0OmZ1bmN0aW9uKGcsaSxuLG0pe3JldHVybiBpPT09bS5sZW5ndGgtMX0sZXZlbjpmdW5jdGlvbihnLGkpe3JldHVybiBpJTI9PT0wfSxvZGQ6ZnVuY3Rpb24oZyxpKXtyZXR1cm4gaSUyPT09MX0sbHQ6ZnVuY3Rpb24oZyxpLG4pe3JldHVybiBpPG5bM10tMH0sZ3Q6ZnVuY3Rpb24oZyxpLG4pe3JldHVybiBpPm5bM10tMH0sbnRoOmZ1bmN0aW9uKGcsaSxuKXtyZXR1cm4gblszXS0gMD09PWl9LGVxOmZ1bmN0aW9uKGcsaSxuKXtyZXR1cm4gblszXS0wPT09aX19LGZpbHRlcjp7UFNFVURPOmZ1bmN0aW9uKGcsaSxuLG0pe3ZhciBwPWlbMV0scT1vLmZpbHRlcnNbcF07aWYocSlyZXR1cm4gcShnLG4saSxtKTtlbHNlIGlmKHA9PT0iY29udGFpbnMiKXJldHVybihnLnRleHRDb250ZW50fHxnLmlubmVyVGV4dHx8ay5nZXRUZXh0KFtnXSl8fCIiKS5pbmRleE9mKGlbM10pPj0wO2Vsc2UgaWYocD09PSJub3QiKXtpPWlbM107bj0wO2ZvcihtPWkubGVuZ3RoO248bTtuKyspaWYoaVtuXT09PWcpcmV0dXJuIGZhbHNlO3JldHVybiB0cnVlfWVsc2Ugay5lcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitwKX0sQ0hJTEQ6ZnVuY3Rpb24oZyxpKXt2YXIgbj1pWzFdLG09Zztzd2l0Y2gobil7Y2FzZSAib25seSI6Y2FzZSAiZmlyc3QiOmZvcig7bT1tLnByZXZpb3VzU2libGluZzspaWYobS5ub2RlVHlwZT09PTEpcmV0dXJuIGZhbHNlO2lmKG49PT0gImZpcnN0IilyZXR1cm4gdHJ1ZTttPWc7Y2FzZSAibGFzdCI6Zm9yKDttPW0ubmV4dFNpYmxpbmc7KWlmKG0ubm9kZVR5cGU9PT0xKXJldHVybiBmYWxzZTtyZXR1cm4gdHJ1ZTtjYXNlICJudGgiOm49aVsyXTt2YXIgcD1pWzNdO2lmKG49PT0xJiZwPT09MClyZXR1cm4gdHJ1ZTt2YXIgcT1pWzBdLHU9Zy5wYXJlbnROb2RlO2lmKHUmJih1LnNpemNhY2hlIT09cXx8IWcubm9kZUluZGV4KSl7dmFyIHk9MDtmb3IobT11LmZpcnN0Q2hpbGQ7bTttPW0ubmV4dFNpYmxpbmcpaWYobS5ub2RlVHlwZT09PTEpbS5ub2RlSW5kZXg9Kyt5O3Uuc2l6Y2FjaGU9cX1tPWcubm9kZUluZGV4LXA7cmV0dXJuIG49PT0wP209PT0wOm0lbj09PTAmJm0vbj49MH19LElEOmZ1bmN0aW9uKGcsaSl7cmV0dXJuIGcubm9kZVR5cGU9PT0xJiZnLmdldEF0dHJpYnV0ZSgiaWQiKT09PWl9LFRBRzpmdW5jdGlvbihnLGkpe3JldHVybiBpPT09IioiJiZnLm5vZGVUeXBlPT09MXx8Zy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09IGl9LENMQVNTOmZ1bmN0aW9uKGcsaSl7cmV0dXJuKCIgIisoZy5jbGFzc05hbWV8fGcuZ2V0QXR0cmlidXRlKCJjbGFzcyIpKSsiICIpLmluZGV4T2YoaSk+LTF9LEFUVFI6ZnVuY3Rpb24oZyxpKXt2YXIgbj1pWzFdO249by5hdHRySGFuZGxlW25dP28uYXR0ckhhbmRsZVtuXShnKTpnW25dIT1udWxsP2dbbl06Zy5nZXRBdHRyaWJ1dGUobik7dmFyIG09bisiIixwPWlbMl0scT1pWzRdO3JldHVybiBuPT1udWxsP3A9PT0iIT0iOnA9PT0iPSI/bT09PXE6cD09PSIqPSI/bS5pbmRleE9mKHEpPj0wOnA9PT0ifj0iPygiICIrbSsiICIpLmluZGV4T2YocSk+PTA6IXE/bSYmbiE9PWZhbHNlOnA9PT0iIT0iP20hPT1xOnA9PT0iXj0iP20uaW5kZXhPZihxKT09PTA6cD09PSIkPSI/bS5zdWJzdHIobS5sZW5ndGgtcS5sZW5ndGgpPT09cTpwPT09Inw9Ij9tPT09cXx8bS5zdWJzdHIoMCxxLmxlbmd0aCsxKT09PXErIi0iOmZhbHNlfSxQT1M6ZnVuY3Rpb24oZyxpLG4sbSl7dmFyIHA9by5zZXRGaWx0ZXJzW2lbMl1dOyBpZihwKXJldHVybiBwKGcsbixpLG0pfX19LHg9by5tYXRjaC5QT1Mscj1mdW5jdGlvbihnLGkpe3JldHVybiJcXCIrKGktMCsxKX0sQTtmb3IoQSBpbiBvLm1hdGNoKXtvLm1hdGNoW0FdPVJlZ0V4cChvLm1hdGNoW0FdLnNvdXJjZSsvKD8hW15cW10qXF0pKD8hW15cKF0qXCkpLy5zb3VyY2UpO28ubGVmdE1hdGNoW0FdPVJlZ0V4cCgvKF4oPzoufFxyfFxuKSo/KS8uc291cmNlK28ubWF0Y2hbQV0uc291cmNlLnJlcGxhY2UoL1xcKFxkKykvZyxyKSl9dmFyIEM9ZnVuY3Rpb24oZyxpKXtnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGcsMCk7aWYoaSl7aS5wdXNoLmFwcGx5KGksZyk7cmV0dXJuIGl9cmV0dXJuIGd9O3RyeXtBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LmRvY3VtZW50RWxlbWVudC5jaGlsZE5vZGVzLDApfWNhdGNoKEope0M9ZnVuY3Rpb24oZyxpKXt2YXIgbj0wLG09aXx8W107aWYoZi5jYWxsKGcpPT09IltvYmplY3QgQXJyYXldIilBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShtLCBnKTtlbHNlIGlmKHR5cGVvZiBnLmxlbmd0aD09PSJudW1iZXIiKWZvcih2YXIgcD1nLmxlbmd0aDtuPHA7bisrKW0ucHVzaChnW25dKTtlbHNlIGZvcig7Z1tuXTtuKyspbS5wdXNoKGdbbl0pO3JldHVybiBtfX12YXIgdyxJO2lmKHQuZG9jdW1lbnRFbGVtZW50LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKXc9ZnVuY3Rpb24oZyxpKXtpZihnPT09aSl7aD10cnVlO3JldHVybiAwfWlmKCFnLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9ufHwhaS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbilyZXR1cm4gZy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj8tMToxO3JldHVybiBnLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGkpJjQ/LTE6MX07ZWxzZXt3PWZ1bmN0aW9uKGcsaSl7dmFyIG4sbSxwPVtdLHE9W107bj1nLnBhcmVudE5vZGU7bT1pLnBhcmVudE5vZGU7dmFyIHU9bjtpZihnPT09aSl7aD10cnVlO3JldHVybiAwfWVsc2UgaWYobj09PW0pcmV0dXJuIEkoZyxpKTtlbHNlIGlmKG4pe2lmKCFtKXJldHVybiAxfWVsc2UgcmV0dXJuLTE7IGZvcig7dTspe3AudW5zaGlmdCh1KTt1PXUucGFyZW50Tm9kZX1mb3IodT1tO3U7KXtxLnVuc2hpZnQodSk7dT11LnBhcmVudE5vZGV9bj1wLmxlbmd0aDttPXEubGVuZ3RoO2Zvcih1PTA7dTxuJiZ1PG07dSsrKWlmKHBbdV0hPT1xW3VdKXJldHVybiBJKHBbdV0scVt1XSk7cmV0dXJuIHU9PT1uP0koZyxxW3VdLC0xKTpJKHBbdV0saSwxKX07ST1mdW5jdGlvbihnLGksbil7aWYoZz09PWkpcmV0dXJuIG47Zm9yKGc9Zy5uZXh0U2libGluZztnOyl7aWYoZz09PWkpcmV0dXJuLTE7Zz1nLm5leHRTaWJsaW5nfXJldHVybiAxfX1rLmdldFRleHQ9ZnVuY3Rpb24oZyl7Zm9yKHZhciBpPSIiLG4sbT0wO2dbbV07bSsrKXtuPWdbbV07aWYobi5ub2RlVHlwZT09PTN8fG4ubm9kZVR5cGU9PT00KWkrPW4ubm9kZVZhbHVlO2Vsc2UgaWYobi5ub2RlVHlwZSE9PTgpaSs9ay5nZXRUZXh0KG4uY2hpbGROb2Rlcyl9cmV0dXJuIGl9OyhmdW5jdGlvbigpe3ZhciBnPXQuY3JlYXRlRWxlbWVudCgiZGl2IiksIGk9InNjcmlwdCIrKG5ldyBEYXRlKS5nZXRUaW1lKCksbj10LmRvY3VtZW50RWxlbWVudDtnLmlubmVySFRNTD0iPGEgbmFtZT0nIitpKyInLz4iO24uaW5zZXJ0QmVmb3JlKGcsbi5maXJzdENoaWxkKTtpZih0LmdldEVsZW1lbnRCeUlkKGkpKXtvLmZpbmQuSUQ9ZnVuY3Rpb24obSxwLHEpe2lmKHR5cGVvZiBwLmdldEVsZW1lbnRCeUlkIT09InVuZGVmaW5lZCImJiFxKXJldHVybihwPXAuZ2V0RWxlbWVudEJ5SWQobVsxXSkpP3AuaWQ9PT1tWzFdfHx0eXBlb2YgcC5nZXRBdHRyaWJ1dGVOb2RlIT09InVuZGVmaW5lZCImJnAuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS5ub2RlVmFsdWU9PT1tWzFdP1twXTpCOltdfTtvLmZpbHRlci5JRD1mdW5jdGlvbihtLHApe3ZhciBxPXR5cGVvZiBtLmdldEF0dHJpYnV0ZU5vZGUhPT0idW5kZWZpbmVkIiYmbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBtLm5vZGVUeXBlPT09MSYmcSYmcS5ub2RlVmFsdWU9PT1wfX1uLnJlbW92ZUNoaWxkKGcpOyBuPWc9bnVsbH0pKCk7KGZ1bmN0aW9uKCl7dmFyIGc9dC5jcmVhdGVFbGVtZW50KCJkaXYiKTtnLmFwcGVuZENoaWxkKHQuY3JlYXRlQ29tbWVudCgiIikpO2lmKGcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGg+MClvLmZpbmQuVEFHPWZ1bmN0aW9uKGksbil7dmFyIG09bi5nZXRFbGVtZW50c0J5VGFnTmFtZShpWzFdKTtpZihpWzFdPT09IioiKXtmb3IodmFyIHA9W10scT0wO21bcV07cSsrKW1bcV0ubm9kZVR5cGU9PT0xJiZwLnB1c2gobVtxXSk7bT1wfXJldHVybiBtfTtnLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiI7aWYoZy5maXJzdENoaWxkJiZ0eXBlb2YgZy5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSE9PSJ1bmRlZmluZWQiJiZnLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIikhPT0iIyIpby5hdHRySGFuZGxlLmhyZWY9ZnVuY3Rpb24oaSl7cmV0dXJuIGkuZ2V0QXR0cmlidXRlKCJocmVmIiwyKX07Zz1udWxsfSkoKTt0LnF1ZXJ5U2VsZWN0b3JBbGwmJiBmdW5jdGlvbigpe3ZhciBnPWssaT10LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2kuaW5uZXJIVE1MPSI8cCBjbGFzcz0nVEVTVCc+PC9wPiI7aWYoIShpLnF1ZXJ5U2VsZWN0b3JBbGwmJmkucXVlcnlTZWxlY3RvckFsbCgiLlRFU1QiKS5sZW5ndGg9PT0wKSl7az1mdW5jdGlvbihtLHAscSx1KXtwPXB8fHQ7bT1tLnJlcGxhY2UoL1w9XHMqKFteJyJcXV0qKVxzKlxdL2csIj0nJDEnXSIpO2lmKCF1JiYhay5pc1hNTChwKSlpZihwLm5vZGVUeXBlPT09OSl0cnl7cmV0dXJuIEMocC5xdWVyeVNlbGVjdG9yQWxsKG0pLHEpfWNhdGNoKHkpe31lbHNlIGlmKHAubm9kZVR5cGU9PT0xJiZwLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ib2JqZWN0Iil7dmFyIEY9cC5nZXRBdHRyaWJ1dGUoImlkIiksTT1GfHwiX19zaXp6bGVfXyI7Rnx8cC5zZXRBdHRyaWJ1dGUoImlkIixNKTt0cnl7cmV0dXJuIEMocC5xdWVyeVNlbGVjdG9yQWxsKCIjIitNKyIgIittKSxxKX1jYXRjaChOKXt9ZmluYWxseXtGfHwgcC5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fXJldHVybiBnKG0scCxxLHUpfTtmb3IodmFyIG4gaW4gZylrW25dPWdbbl07aT1udWxsfX0oKTsoZnVuY3Rpb24oKXt2YXIgZz10LmRvY3VtZW50RWxlbWVudCxpPWcubWF0Y2hlc1NlbGVjdG9yfHxnLm1vek1hdGNoZXNTZWxlY3Rvcnx8Zy53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGcubXNNYXRjaGVzU2VsZWN0b3Isbj1mYWxzZTt0cnl7aS5jYWxsKHQuZG9jdW1lbnRFbGVtZW50LCJbdGVzdCE9JyddOnNpenpsZSIpfWNhdGNoKG0pe249dHJ1ZX1pZihpKWsubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKHAscSl7cT1xLnJlcGxhY2UoL1w9XHMqKFteJyJcXV0qKVxzKlxdL2csIj0nJDEnXSIpO2lmKCFrLmlzWE1MKHApKXRyeXtpZihufHwhby5tYXRjaC5QU0VVRE8udGVzdChxKSYmIS8hPS8udGVzdChxKSlyZXR1cm4gaS5jYWxsKHAscSl9Y2F0Y2godSl7fXJldHVybiBrKHEsbnVsbCxudWxsLFtwXSkubGVuZ3RoPjB9fSkoKTsoZnVuY3Rpb24oKXt2YXIgZz0gdC5jcmVhdGVFbGVtZW50KCJkaXYiKTtnLmlubmVySFRNTD0iPGRpdiBjbGFzcz0ndGVzdCBlJz48L2Rpdj48ZGl2IGNsYXNzPSd0ZXN0Jz48L2Rpdj4iO2lmKCEoIWcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZXx8Zy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlIikubGVuZ3RoPT09MCkpe2cubGFzdENoaWxkLmNsYXNzTmFtZT0iZSI7aWYoZy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlIikubGVuZ3RoIT09MSl7by5vcmRlci5zcGxpY2UoMSwwLCJDTEFTUyIpO28uZmluZC5DTEFTUz1mdW5jdGlvbihpLG4sbSl7aWYodHlwZW9mIG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSE9PSJ1bmRlZmluZWQiJiYhbSlyZXR1cm4gbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGlbMV0pfTtnPW51bGx9fX0pKCk7ay5jb250YWlucz10LmRvY3VtZW50RWxlbWVudC5jb250YWlucz9mdW5jdGlvbihnLGkpe3JldHVybiBnIT09aSYmKGcuY29udGFpbnM/Zy5jb250YWlucyhpKTp0cnVlKX06dC5kb2N1bWVudEVsZW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24/IGZ1bmN0aW9uKGcsaSl7cmV0dXJuISEoZy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihpKSYxNil9OmZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlfTtrLmlzWE1MPWZ1bmN0aW9uKGcpe3JldHVybihnPShnP2cub3duZXJEb2N1bWVudHx8ZzowKS5kb2N1bWVudEVsZW1lbnQpP2cubm9kZU5hbWUhPT0iSFRNTCI6ZmFsc2V9O3ZhciBMPWZ1bmN0aW9uKGcsaSl7Zm9yKHZhciBuLG09W10scD0iIixxPWkubm9kZVR5cGU/W2ldOmk7bj1vLm1hdGNoLlBTRVVETy5leGVjKGcpOyl7cCs9blswXTtnPWcucmVwbGFjZShvLm1hdGNoLlBTRVVETywiIil9Zz1vLnJlbGF0aXZlW2ddP2crIioiOmc7bj0wO2Zvcih2YXIgdT1xLmxlbmd0aDtuPHU7bisrKWsoZyxxW25dLG0pO3JldHVybiBrLmZpbHRlcihwLG0pfTtjLmZpbmQ9aztjLmV4cHI9ay5zZWxlY3RvcnM7Yy5leHByWyI6Il09Yy5leHByLmZpbHRlcnM7Yy51bmlxdWU9ay51bmlxdWVTb3J0O2MudGV4dD1rLmdldFRleHQ7Yy5pc1hNTERvYz1rLmlzWE1MOyBjLmNvbnRhaW5zPWsuY29udGFpbnN9KSgpO3ZhciBaYT0vVW50aWwkLywkYT0vXig/OnBhcmVudHN8cHJldlVudGlsfHByZXZBbGwpLyxhYj0vLC8sTmE9L14uW146I1xbXC4sXSokLyxiYj1BcnJheS5wcm90b3R5cGUuc2xpY2UsY2I9Yy5leHByLm1hdGNoLlBPUztjLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wdXNoU3RhY2soIiIsImZpbmQiLGEpLGQ9MCxlPTAsZj10aGlzLmxlbmd0aDtlPGY7ZSsrKXtkPWIubGVuZ3RoO2MuZmluZChhLHRoaXNbZV0sYik7aWYoZT4wKWZvcih2YXIgaD1kO2g8Yi5sZW5ndGg7aCsrKWZvcih2YXIgbD0wO2w8ZDtsKyspaWYoYltsXT09PWJbaF0pe2Iuc3BsaWNlKGgtLSwxKTticmVha319cmV0dXJuIGJ9LGhhczpmdW5jdGlvbihhKXt2YXIgYj1jKGEpO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKylpZihjLmNvbnRhaW5zKHRoaXMsYltkXSkpcmV0dXJuIHRydWV9KX0sIG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobWEodGhpcyxhLGZhbHNlKSwibm90IixhKX0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhtYSh0aGlzLGEsdHJ1ZSksImZpbHRlciIsYSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhYSYmYy5maWx0ZXIoYSx0aGlzKS5sZW5ndGg+MH0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe3ZhciBkPVtdLGUsZixoPXRoaXNbMF07aWYoYy5pc0FycmF5KGEpKXt2YXIgbCxrPXt9LG89MTtpZihoJiZhLmxlbmd0aCl7ZT0wO2ZvcihmPWEubGVuZ3RoO2U8ZjtlKyspe2w9YVtlXTtrW2xdfHwoa1tsXT1jLmV4cHIubWF0Y2guUE9TLnRlc3QobCk/YyhsLGJ8fHRoaXMuY29udGV4dCk6bCl9Zm9yKDtoJiZoLm93bmVyRG9jdW1lbnQmJmghPT1iOyl7Zm9yKGwgaW4gayl7ZT1rW2xdO2lmKGUuanF1ZXJ5P2UuaW5kZXgoaCk+LTE6YyhoKS5pcyhlKSlkLnB1c2goe3NlbGVjdG9yOmwsZWxlbTpoLGxldmVsOm99KX1oPSBoLnBhcmVudE5vZGU7bysrfX1yZXR1cm4gZH1sPWNiLnRlc3QoYSk/YyhhLGJ8fHRoaXMuY29udGV4dCk6bnVsbDtlPTA7Zm9yKGY9dGhpcy5sZW5ndGg7ZTxmO2UrKylmb3IoaD10aGlzW2VdO2g7KWlmKGw/bC5pbmRleChoKT4tMTpjLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGgsYSkpe2QucHVzaChoKTticmVha31lbHNle2g9aC5wYXJlbnROb2RlO2lmKCFofHwhaC5vd25lckRvY3VtZW50fHxoPT09YilicmVha31kPWQubGVuZ3RoPjE/Yy51bmlxdWUoZCk6ZDtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCwiY2xvc2VzdCIsYSl9LGluZGV4OmZ1bmN0aW9uKGEpe2lmKCFhfHx0eXBlb2YgYT09PSJzdHJpbmciKXJldHVybiBjLmluQXJyYXkodGhpc1swXSxhP2MoYSk6dGhpcy5wYXJlbnQoKS5jaGlsZHJlbigpKTtyZXR1cm4gYy5pbkFycmF5KGEuanF1ZXJ5P2FbMF06YSx0aGlzKX0sYWRkOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dHlwZW9mIGE9PT0ic3RyaW5nIj9jKGEsYnx8dGhpcy5jb250ZXh0KTogYy5tYWtlQXJyYXkoYSksZT1jLm1lcmdlKHRoaXMuZ2V0KCksZCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKCFkWzBdfHwhZFswXS5wYXJlbnROb2RlfHxkWzBdLnBhcmVudE5vZGUubm9kZVR5cGU9PT0xMXx8IWVbMF18fCFlWzBdLnBhcmVudE5vZGV8fGVbMF0ucGFyZW50Tm9kZS5ub2RlVHlwZT09PTExP2U6Yy51bmlxdWUoZSkpfSxhbmRTZWxmOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRkKHRoaXMucHJldk9iamVjdCl9fSk7Yy5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGE9YS5wYXJlbnROb2RlKSYmYS5ub2RlVHlwZSE9PTExP2E6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYy5kaXIoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmRpcihhLCJwYXJlbnROb2RlIixkKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYy5udGgoYSwyLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBjLm50aChhLCAyLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gYy5kaXIoYSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gYy5kaXIoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuZGlyKGEsIm5leHRTaWJsaW5nIixkKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5kaXIoYSwicHJldmlvdXNTaWJsaW5nIixkKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGMuc2libGluZyhhLnBhcmVudE5vZGUuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIGMuc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYy5ub2RlTmFtZShhLCJpZnJhbWUiKT9hLmNvbnRlbnREb2N1bWVudHx8YS5jb250ZW50V2luZG93LmRvY3VtZW50OmMubWFrZUFycmF5KGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLCBiKXtjLmZuW2FdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9Yy5tYXAodGhpcyxiLGQpO1phLnRlc3QoYSl8fChlPWQpO2lmKGUmJnR5cGVvZiBlPT09InN0cmluZyIpZj1jLmZpbHRlcihlLGYpO2Y9dGhpcy5sZW5ndGg+MT9jLnVuaXF1ZShmKTpmO2lmKCh0aGlzLmxlbmd0aD4xfHxhYi50ZXN0KGUpKSYmJGEudGVzdChhKSlmPWYucmV2ZXJzZSgpO3JldHVybiB0aGlzLnB1c2hTdGFjayhmLGEsYmIuY2FsbChhcmd1bWVudHMpLmpvaW4oIiwiKSl9fSk7Yy5leHRlbmQoe2ZpbHRlcjpmdW5jdGlvbihhLGIsZCl7aWYoZClhPSI6bm90KCIrYSsiKSI7cmV0dXJuIGIubGVuZ3RoPT09MT9jLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGJbMF0sYSk/W2JbMF1dOltdOmMuZmluZC5tYXRjaGVzKGEsYil9LGRpcjpmdW5jdGlvbihhLGIsZCl7dmFyIGU9W107Zm9yKGE9YVtiXTthJiZhLm5vZGVUeXBlIT09OSYmKGQ9PT1CfHxhLm5vZGVUeXBlIT09MXx8IWMoYSkuaXMoZCkpOyl7YS5ub2RlVHlwZT09PTEmJiBlLnB1c2goYSk7YT1hW2JdfXJldHVybiBlfSxudGg6ZnVuY3Rpb24oYSxiLGQpe2I9Ynx8MTtmb3IodmFyIGU9MDthO2E9YVtkXSlpZihhLm5vZGVUeXBlPT09MSYmKytlPT09YilicmVhaztyZXR1cm4gYX0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZD1bXTthO2E9YS5uZXh0U2libGluZylhLm5vZGVUeXBlPT09MSYmYSE9PWImJmQucHVzaChhKTtyZXR1cm4gZH19KTt2YXIgemE9LyBqUXVlcnlcZCs9Iig/OlxkK3xudWxsKSIvZywkPS9eXHMrLyxBYT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2lnLEJhPS88KFtcdzpdKykvLGRiPS88dGJvZHkvaSxlYj0vPHwmIz9cdys7LyxDYT0vPCg/OnNjcmlwdHxvYmplY3R8ZW1iZWR8b3B0aW9ufHN0eWxlKS9pLERhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLGZiPS9cPShbXj0iJz5cc10rXC8pPi9nLFA9e29wdGlvbjpbMSwgIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSxsZWdlbmQ6WzEsIjxmaWVsZHNldD4iLCI8L2ZpZWxkc2V0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLGNvbDpbMiwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4iLCI8L2NvbGdyb3VwPjwvdGFibGU+Il0sYXJlYTpbMSwiPG1hcD4iLCI8L21hcD4iXSxfZGVmYXVsdDpbMCwiIiwiIl19O1Aub3B0Z3JvdXA9UC5vcHRpb247UC50Ym9keT1QLnRmb290PVAuY29sZ3JvdXA9UC5jYXB0aW9uPVAudGhlYWQ7UC50aD1QLnRkO2lmKCFjLnN1cHBvcnQuaHRtbFNlcmlhbGl6ZSlQLl9kZWZhdWx0PVsxLCJkaXY8ZGl2PiIsIjwvZGl2PiJdO2MuZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGEpe2lmKGMuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3ZhciBkPSBjKHRoaXMpO2QudGV4dChhLmNhbGwodGhpcyxiLGQudGV4dCgpKSl9KTtpZih0eXBlb2YgYSE9PSJvYmplY3QiJiZhIT09QilyZXR1cm4gdGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHx0KS5jcmVhdGVUZXh0Tm9kZShhKSk7cmV0dXJuIGMudGV4dCh0aGlzKX0sd3JhcEFsbDpmdW5jdGlvbihhKXtpZihjLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihkKXtjKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsZCkpfSk7aWYodGhpc1swXSl7dmFyIGI9YyhhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUodHJ1ZSk7dGhpc1swXS5wYXJlbnROb2RlJiZiLmluc2VydEJlZm9yZSh0aGlzWzBdKTtiLm1hcChmdW5jdGlvbigpe2Zvcih2YXIgZD10aGlzO2QuZmlyc3RDaGlsZCYmZC5maXJzdENoaWxkLm5vZGVUeXBlPT09MTspZD1kLmZpcnN0Q2hpbGQ7cmV0dXJuIGR9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LCB3cmFwSW5uZXI6ZnVuY3Rpb24oYSl7aWYoYy5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7Yyh0aGlzKS53cmFwSW5uZXIoYS5jYWxsKHRoaXMsYikpfSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPWModGhpcyksZD1iLmNvbnRlbnRzKCk7ZC5sZW5ndGg/ZC53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2ModGhpcykud3JhcEFsbChhKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7Yy5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fGModGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsdHJ1ZSxmdW5jdGlvbihhKXt0aGlzLm5vZGVUeXBlPT09MSYmdGhpcy5hcHBlbmRDaGlsZChhKX0pfSwgcHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyx0cnVlLGZ1bmN0aW9uKGEpe3RoaXMubm9kZVR5cGU9PT0xJiZ0aGlzLmluc2VydEJlZm9yZShhLHRoaXMuZmlyc3RDaGlsZCl9KX0sYmVmb3JlOmZ1bmN0aW9uKCl7aWYodGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlKXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmYWxzZSxmdW5jdGlvbihiKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsdGhpcyl9KTtlbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBhPWMoYXJndW1lbnRzWzBdKTthLnB1c2guYXBwbHkoYSx0aGlzLnRvQXJyYXkoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGEsImJlZm9yZSIsYXJndW1lbnRzKX19LGFmdGVyOmZ1bmN0aW9uKCl7aWYodGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlKXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmYWxzZSxmdW5jdGlvbihiKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsIHRoaXMubmV4dFNpYmxpbmcpfSk7ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoKXt2YXIgYT10aGlzLnB1c2hTdGFjayh0aGlzLCJhZnRlciIsYXJndW1lbnRzKTthLnB1c2guYXBwbHkoYSxjKGFyZ3VtZW50c1swXSkudG9BcnJheSgpKTtyZXR1cm4gYX19LHJlbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZD0wLGU7KGU9dGhpc1tkXSkhPW51bGw7ZCsrKWlmKCFhfHxjLmZpbHRlcihhLFtlXSkubGVuZ3RoKXtpZighYiYmZS5ub2RlVHlwZT09PTEpe2MuY2xlYW5EYXRhKGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSk7Yy5jbGVhbkRhdGEoW2VdKX1lLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKX1yZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiOyhiPXRoaXNbYV0pIT1udWxsO2ErKylmb3IoYi5ub2RlVHlwZT09PTEmJmMuY2xlYW5EYXRhKGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSk7Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIuZmlyc3RDaGlsZCk7IHJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcChmdW5jdGlvbigpe2lmKCFjLnN1cHBvcnQubm9DbG9uZUV2ZW50JiYhYy5pc1hNTERvYyh0aGlzKSl7dmFyIGQ9dGhpcy5vdXRlckhUTUwsZT10aGlzLm93bmVyRG9jdW1lbnQ7aWYoIWQpe2Q9ZS5jcmVhdGVFbGVtZW50KCJkaXYiKTtkLmFwcGVuZENoaWxkKHRoaXMuY2xvbmVOb2RlKHRydWUpKTtkPWQuaW5uZXJIVE1MfXJldHVybiBjLmNsZWFuKFtkLnJlcGxhY2UoemEsIiIpLnJlcGxhY2UoZmIsJz0iJDEiPicpLnJlcGxhY2UoJCwiIildLGUpWzBdfWVsc2UgcmV0dXJuIHRoaXMuY2xvbmVOb2RlKHRydWUpfSk7aWYoYT09PXRydWUpe25hKHRoaXMsYik7bmEodGhpcy5maW5kKCIqIiksYi5maW5kKCIqIikpfXJldHVybiBifSxodG1sOmZ1bmN0aW9uKGEpe2lmKGE9PT1CKXJldHVybiB0aGlzWzBdJiZ0aGlzWzBdLm5vZGVUeXBlPT09MT90aGlzWzBdLmlubmVySFRNTC5yZXBsYWNlKHphLCIiKTpudWxsOyBlbHNlIGlmKHR5cGVvZiBhPT09InN0cmluZyImJiFDYS50ZXN0KGEpJiYoYy5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlfHwhJC50ZXN0KGEpKSYmIVBbKEJhLmV4ZWMoYSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXthPWEucmVwbGFjZShBYSwiPCQxPjwvJDI+Iik7dHJ5e2Zvcih2YXIgYj0wLGQ9dGhpcy5sZW5ndGg7YjxkO2IrKylpZih0aGlzW2JdLm5vZGVUeXBlPT09MSl7Yy5jbGVhbkRhdGEodGhpc1tiXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpKTt0aGlzW2JdLmlubmVySFRNTD1hfX1jYXRjaChlKXt0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfX1lbHNlIGMuaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oZil7dmFyIGg9Yyh0aGlzKTtoLmh0bWwoYS5jYWxsKHRoaXMsZixoLmh0bWwoKSkpfSk6dGhpcy5lbXB0eSgpLmFwcGVuZChhKTtyZXR1cm4gdGhpc30scmVwbGFjZVdpdGg6ZnVuY3Rpb24oYSl7aWYodGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlKXtpZihjLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXt2YXIgZD0gYyh0aGlzKSxlPWQuaHRtbCgpO2QucmVwbGFjZVdpdGgoYS5jYWxsKHRoaXMsYixlKSl9KTtpZih0eXBlb2YgYSE9PSJzdHJpbmciKWE9YyhhKS5kZXRhY2goKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5uZXh0U2libGluZyxkPXRoaXMucGFyZW50Tm9kZTtjKHRoaXMpLnJlbW92ZSgpO2I/YyhiKS5iZWZvcmUoYSk6YyhkKS5hcHBlbmQoYSl9KX1lbHNlIHJldHVybiB0aGlzLnB1c2hTdGFjayhjKGMuaXNGdW5jdGlvbihhKT9hKCk6YSksInJlcGxhY2VXaXRoIixhKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLHRydWUpfSxkb21NYW5pcDpmdW5jdGlvbihhLGIsZCl7dmFyIGUsZixoLGw9YVswXSxrPVtdO2lmKCFjLnN1cHBvcnQuY2hlY2tDbG9uZSYmYXJndW1lbnRzLmxlbmd0aD09PTMmJnR5cGVvZiBsPT09InN0cmluZyImJkRhLnRlc3QobCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2ModGhpcykuZG9tTWFuaXAoYSwgYixkLHRydWUpfSk7aWYoYy5pc0Z1bmN0aW9uKGwpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oeCl7dmFyIHI9Yyh0aGlzKTthWzBdPWwuY2FsbCh0aGlzLHgsYj9yLmh0bWwoKTpCKTtyLmRvbU1hbmlwKGEsYixkKX0pO2lmKHRoaXNbMF0pe2U9bCYmbC5wYXJlbnROb2RlO2U9Yy5zdXBwb3J0LnBhcmVudE5vZGUmJmUmJmUubm9kZVR5cGU9PT0xMSYmZS5jaGlsZE5vZGVzLmxlbmd0aD09PXRoaXMubGVuZ3RoP3tmcmFnbWVudDplfTpjLmJ1aWxkRnJhZ21lbnQoYSx0aGlzLGspO2g9ZS5mcmFnbWVudDtpZihmPWguY2hpbGROb2Rlcy5sZW5ndGg9PT0xP2g9aC5maXJzdENoaWxkOmguZmlyc3RDaGlsZCl7Yj1iJiZjLm5vZGVOYW1lKGYsInRyIik7Zj0wO2Zvcih2YXIgbz10aGlzLmxlbmd0aDtmPG87ZisrKWQuY2FsbChiP2Mubm9kZU5hbWUodGhpc1tmXSwidGFibGUiKT90aGlzW2ZdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHx0aGlzW2ZdLmFwcGVuZENoaWxkKHRoaXNbZl0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTogdGhpc1tmXTp0aGlzW2ZdLGY+MHx8ZS5jYWNoZWFibGV8fHRoaXMubGVuZ3RoPjE/aC5jbG9uZU5vZGUodHJ1ZSk6aCl9ay5sZW5ndGgmJmMuZWFjaChrLE9hKX1yZXR1cm4gdGhpc319KTtjLmJ1aWxkRnJhZ21lbnQ9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGYsaDtiPWImJmJbMF0/YlswXS5vd25lckRvY3VtZW50fHxiWzBdOnQ7aWYoYS5sZW5ndGg9PT0xJiZ0eXBlb2YgYVswXT09PSJzdHJpbmciJiZhWzBdLmxlbmd0aDw1MTImJmI9PT10JiYhQ2EudGVzdChhWzBdKSYmKGMuc3VwcG9ydC5jaGVja0Nsb25lfHwhRGEudGVzdChhWzBdKSkpe2Y9dHJ1ZTtpZihoPWMuZnJhZ21lbnRzW2FbMF1dKWlmKGghPT0xKWU9aH1pZighZSl7ZT1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtjLmNsZWFuKGEsYixlLGQpfWlmKGYpYy5mcmFnbWVudHNbYVswXV09aD9lOjE7cmV0dXJue2ZyYWdtZW50OmUsY2FjaGVhYmxlOmZ9fTtjLmZyYWdtZW50cz17fTtjLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLCBwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oYSxiKXtjLmZuW2FdPWZ1bmN0aW9uKGQpe3ZhciBlPVtdO2Q9YyhkKTt2YXIgZj10aGlzLmxlbmd0aD09PTEmJnRoaXNbMF0ucGFyZW50Tm9kZTtpZihmJiZmLm5vZGVUeXBlPT09MTEmJmYuY2hpbGROb2Rlcy5sZW5ndGg9PT0xJiZkLmxlbmd0aD09PTEpe2RbYl0odGhpc1swXSk7cmV0dXJuIHRoaXN9ZWxzZXtmPTA7Zm9yKHZhciBoPWQubGVuZ3RoO2Y8aDtmKyspe3ZhciBsPShmPjA/dGhpcy5jbG9uZSh0cnVlKTp0aGlzKS5nZXQoKTtjKGRbZl0pW2JdKGwpO2U9ZS5jb25jYXQobCl9cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUsYSxkLnNlbGVjdG9yKX19fSk7Yy5leHRlbmQoe2NsZWFuOmZ1bmN0aW9uKGEsYixkLGUpe2I9Ynx8dDtpZih0eXBlb2YgYi5jcmVhdGVFbGVtZW50PT09InVuZGVmaW5lZCIpYj1iLm93bmVyRG9jdW1lbnR8fCBiWzBdJiZiWzBdLm93bmVyRG9jdW1lbnR8fHQ7Zm9yKHZhciBmPVtdLGg9MCxsOyhsPWFbaF0pIT1udWxsO2grKyl7aWYodHlwZW9mIGw9PT0ibnVtYmVyIilsKz0iIjtpZihsKXtpZih0eXBlb2YgbD09PSJzdHJpbmciJiYhZWIudGVzdChsKSlsPWIuY3JlYXRlVGV4dE5vZGUobCk7ZWxzZSBpZih0eXBlb2YgbD09PSJzdHJpbmciKXtsPWwucmVwbGFjZShBYSwiPCQxPjwvJDI+Iik7dmFyIGs9KEJhLmV4ZWMobCl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksbz1QW2tdfHxQLl9kZWZhdWx0LHg9b1swXSxyPWIuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKHIuaW5uZXJIVE1MPW9bMV0rbCtvWzJdO3gtLTspcj1yLmxhc3RDaGlsZDtpZighYy5zdXBwb3J0LnRib2R5KXt4PWRiLnRlc3QobCk7az1rPT09InRhYmxlIiYmIXg/ci5maXJzdENoaWxkJiZyLmZpcnN0Q2hpbGQuY2hpbGROb2RlczpvWzFdPT09Ijx0YWJsZT4iJiYheD9yLmNoaWxkTm9kZXM6W107Zm9yKG89ay5sZW5ndGgtIDE7bz49MDstLW8pYy5ub2RlTmFtZShrW29dLCJ0Ym9keSIpJiYha1tvXS5jaGlsZE5vZGVzLmxlbmd0aCYma1tvXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGtbb10pfSFjLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UmJiQudGVzdChsKSYmci5pbnNlcnRCZWZvcmUoYi5jcmVhdGVUZXh0Tm9kZSgkLmV4ZWMobClbMF0pLHIuZmlyc3RDaGlsZCk7bD1yLmNoaWxkTm9kZXN9aWYobC5ub2RlVHlwZSlmLnB1c2gobCk7ZWxzZSBmPWMubWVyZ2UoZixsKX19aWYoZClmb3IoaD0wO2ZbaF07aCsrKWlmKGUmJmMubm9kZU5hbWUoZltoXSwic2NyaXB0IikmJighZltoXS50eXBlfHxmW2hdLnR5cGUudG9Mb3dlckNhc2UoKT09PSJ0ZXh0L2phdmFzY3JpcHQiKSllLnB1c2goZltoXS5wYXJlbnROb2RlP2ZbaF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmW2hdKTpmW2hdKTtlbHNle2ZbaF0ubm9kZVR5cGU9PT0xJiZmLnNwbGljZS5hcHBseShmLFtoKzEsMF0uY29uY2F0KGMubWFrZUFycmF5KGZbaF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpKSkpOyBkLmFwcGVuZENoaWxkKGZbaF0pfXJldHVybiBmfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGQsZT1jLmNhY2hlLGY9Yy5ldmVudC5zcGVjaWFsLGg9Yy5zdXBwb3J0LmRlbGV0ZUV4cGFuZG8sbD0wLGs7KGs9YVtsXSkhPW51bGw7bCsrKWlmKCEoay5ub2RlTmFtZSYmYy5ub0RhdGFbay5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkpaWYoZD1rW2MuZXhwYW5kb10pe2lmKChiPWVbZF0pJiZiLmV2ZW50cylmb3IodmFyIG8gaW4gYi5ldmVudHMpZltvXT9jLmV2ZW50LnJlbW92ZShrLG8pOmMucmVtb3ZlRXZlbnQoayxvLGIuaGFuZGxlKTtpZihoKWRlbGV0ZSBrW2MuZXhwYW5kb107ZWxzZSBrLnJlbW92ZUF0dHJpYnV0ZSYmay5yZW1vdmVBdHRyaWJ1dGUoYy5leHBhbmRvKTtkZWxldGUgZVtkXX19fSk7dmFyIEVhPS9hbHBoYVwoW14pXSpcKS9pLGdiPS9vcGFjaXR5PShbXildKikvLGhiPS8tKFthLXpdKS9pZyxpYj0vKFtBLVpdKS9nLEZhPS9eLT9cZCsoPzpweCk/JC9pLCBqYj0vXi0/XGQvLGtiPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxQYT1bIkxlZnQiLCJSaWdodCJdLFFhPVsiVG9wIiwiQm90dG9tIl0sVyxHYSxhYSxsYj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O2MuZm4uY3NzPWZ1bmN0aW9uKGEsYil7aWYoYXJndW1lbnRzLmxlbmd0aD09PTImJmI9PT1CKXJldHVybiB0aGlzO3JldHVybiBjLmFjY2Vzcyh0aGlzLGEsYix0cnVlLGZ1bmN0aW9uKGQsZSxmKXtyZXR1cm4gZiE9PUI/Yy5zdHlsZShkLGUsZik6Yy5jc3MoZCxlKX0pfTtjLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBkPVcoYSwib3BhY2l0eSIsIm9wYWNpdHkiKTtyZXR1cm4gZD09PSIiPyIxIjpkfWVsc2UgcmV0dXJuIGEuc3R5bGUub3BhY2l0eX19fSxjc3NOdW1iZXI6e3pJbmRleDp0cnVlLGZvbnRXZWlnaHQ6dHJ1ZSxvcGFjaXR5OnRydWUsIHpvb206dHJ1ZSxsaW5lSGVpZ2h0OnRydWV9LGNzc1Byb3BzOnsiZmxvYXQiOmMuc3VwcG9ydC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGQsZSl7aWYoISghYXx8YS5ub2RlVHlwZT09PTN8fGEubm9kZVR5cGU9PT04fHwhYS5zdHlsZSkpe3ZhciBmLGg9Yy5jYW1lbENhc2UoYiksbD1hLnN0eWxlLGs9Yy5jc3NIb29rc1toXTtiPWMuY3NzUHJvcHNbaF18fGg7aWYoZCE9PUIpe2lmKCEodHlwZW9mIGQ9PT0ibnVtYmVyIiYmaXNOYU4oZCl8fGQ9PW51bGwpKXtpZih0eXBlb2YgZD09PSJudW1iZXIiJiYhYy5jc3NOdW1iZXJbaF0pZCs9InB4IjtpZigha3x8ISgic2V0ImluIGspfHwoZD1rLnNldChhLGQpKSE9PUIpdHJ5e2xbYl09ZH1jYXRjaChvKXt9fX1lbHNle2lmKGsmJiJnZXQiaW4gayYmKGY9ay5nZXQoYSxmYWxzZSxlKSkhPT1CKXJldHVybiBmO3JldHVybiBsW2JdfX19LGNzczpmdW5jdGlvbihhLGIsZCl7dmFyIGUsZj1jLmNhbWVsQ2FzZShiKSwgaD1jLmNzc0hvb2tzW2ZdO2I9Yy5jc3NQcm9wc1tmXXx8ZjtpZihoJiYiZ2V0ImluIGgmJihlPWguZ2V0KGEsdHJ1ZSxkKSkhPT1CKXJldHVybiBlO2Vsc2UgaWYoVylyZXR1cm4gVyhhLGIsZil9LHN3YXA6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPXt9LGY7Zm9yKGYgaW4gYil7ZVtmXT1hLnN0eWxlW2ZdO2Euc3R5bGVbZl09YltmXX1kLmNhbGwoYSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWVbZl19LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGhiLGxiKX19KTtjLmN1ckNTUz1jLmNzcztjLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGEsYil7Yy5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGQsZSxmKXt2YXIgaDtpZihlKXtpZihkLm9mZnNldFdpZHRoIT09MCloPW9hKGQsYixmKTtlbHNlIGMuc3dhcChkLGtiLGZ1bmN0aW9uKCl7aD1vYShkLGIsZil9KTtpZihoPD0wKXtoPVcoZCxiLGIpO2lmKGg9PT0iMHB4IiYmYWEpaD1hYShkLGIsYik7IGlmKGghPW51bGwpcmV0dXJuIGg9PT0iInx8aD09PSJhdXRvIj8iMHB4IjpofWlmKGg8MHx8aD09bnVsbCl7aD1kLnN0eWxlW2JdO3JldHVybiBoPT09IiJ8fGg9PT0iYXV0byI/IjBweCI6aH1yZXR1cm4gdHlwZW9mIGg9PT0ic3RyaW5nIj9oOmgrInB4In19LHNldDpmdW5jdGlvbihkLGUpe2lmKEZhLnRlc3QoZSkpe2U9cGFyc2VGbG9hdChlKTtpZihlPj0wKXJldHVybiBlKyJweCJ9ZWxzZSByZXR1cm4gZX19fSk7aWYoIWMuc3VwcG9ydC5vcGFjaXR5KWMuY3NzSG9va3Mub3BhY2l0eT17Z2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGdiLnRlc3QoKGImJmEuY3VycmVudFN0eWxlP2EuY3VycmVudFN0eWxlLmZpbHRlcjphLnN0eWxlLmZpbHRlcil8fCIiKT9wYXJzZUZsb2F0KFJlZ0V4cC4kMSkvMTAwKyIiOmI/IjEiOiIifSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hLnN0eWxlO2Quem9vbT0xO3ZhciBlPWMuaXNOYU4oYik/IiI6ImFscGhhKG9wYWNpdHk9IitiKjEwMCsiKSIsZj0gZC5maWx0ZXJ8fCIiO2QuZmlsdGVyPUVhLnRlc3QoZik/Zi5yZXBsYWNlKEVhLGUpOmQuZmlsdGVyKyIgIitlfX07aWYodC5kZWZhdWx0VmlldyYmdC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKUdhPWZ1bmN0aW9uKGEsYixkKXt2YXIgZTtkPWQucmVwbGFjZShpYiwiLSQxIikudG9Mb3dlckNhc2UoKTtpZighKGI9YS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSlyZXR1cm4gQjtpZihiPWIuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKXtlPWIuZ2V0UHJvcGVydHlWYWx1ZShkKTtpZihlPT09IiImJiFjLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsYSkpZT1jLnN0eWxlKGEsZCl9cmV0dXJuIGV9O2lmKHQuZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSlhYT1mdW5jdGlvbihhLGIpe3ZhciBkLGUsZj1hLmN1cnJlbnRTdHlsZSYmYS5jdXJyZW50U3R5bGVbYl0saD1hLnN0eWxlO2lmKCFGYS50ZXN0KGYpJiZqYi50ZXN0KGYpKXtkPWgubGVmdDsgZT1hLnJ1bnRpbWVTdHlsZS5sZWZ0O2EucnVudGltZVN0eWxlLmxlZnQ9YS5jdXJyZW50U3R5bGUubGVmdDtoLmxlZnQ9Yj09PSJmb250U2l6ZSI/IjFlbSI6Znx8MDtmPWgucGl4ZWxMZWZ0KyJweCI7aC5sZWZ0PWQ7YS5ydW50aW1lU3R5bGUubGVmdD1lfXJldHVybiBmPT09IiI/ImF1dG8iOmZ9O1c9R2F8fGFhO2lmKGMuZXhwciYmYy5leHByLmZpbHRlcnMpe2MuZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXt2YXIgYj1hLm9mZnNldEhlaWdodDtyZXR1cm4gYS5vZmZzZXRXaWR0aD09PTAmJmI9PT0wfHwhYy5zdXBwb3J0LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cyYmKGEuc3R5bGUuZGlzcGxheXx8Yy5jc3MoYSwiZGlzcGxheSIpKT09PSJub25lIn07Yy5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hYy5leHByLmZpbHRlcnMuaGlkZGVuKGEpfX12YXIgbWI9Yy5ub3coKSxuYj0vPHNjcmlwdFxiW148XSooPzooPyE8XC9zY3JpcHQ+KTxbXjxdKikqPFwvc2NyaXB0Pi9naSwgb2I9L14oPzpzZWxlY3R8dGV4dGFyZWEpL2kscGI9L14oPzpjb2xvcnxkYXRlfGRhdGV0aW1lfGVtYWlsfGhpZGRlbnxtb250aHxudW1iZXJ8cGFzc3dvcmR8cmFuZ2V8c2VhcmNofHRlbHx0ZXh0fHRpbWV8dXJsfHdlZWspJC9pLHFiPS9eKD86R0VUfEhFQUQpJC8sUmE9L1xbXF0kLyxUPS9cPVw/KCZ8JCkvLGphPS9cPy8scmI9LyhbPyZdKV89W14mXSovLHNiPS9eKFx3KzopP1wvXC8oW15cLz8jXSspLyx0Yj0vJTIwL2csdWI9LyMuKiQvLEhhPWMuZm4ubG9hZDtjLmZuLmV4dGVuZCh7bG9hZDpmdW5jdGlvbihhLGIsZCl7aWYodHlwZW9mIGEhPT0ic3RyaW5nIiYmSGEpcmV0dXJuIEhhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlbHNlIGlmKCF0aGlzLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgZT1hLmluZGV4T2YoIiAiKTtpZihlPj0wKXt2YXIgZj1hLnNsaWNlKGUsYS5sZW5ndGgpO2E9YS5zbGljZSgwLGUpfWU9IkdFVCI7aWYoYilpZihjLmlzRnVuY3Rpb24oYikpe2Q9YjtiPW51bGx9ZWxzZSBpZih0eXBlb2YgYj09PSAib2JqZWN0Iil7Yj1jLnBhcmFtKGIsYy5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpO2U9IlBPU1QifXZhciBoPXRoaXM7Yy5hamF4KHt1cmw6YSx0eXBlOmUsZGF0YVR5cGU6Imh0bWwiLGRhdGE6Yixjb21wbGV0ZTpmdW5jdGlvbihsLGspe2lmKGs9PT0ic3VjY2VzcyJ8fGs9PT0ibm90bW9kaWZpZWQiKWguaHRtbChmP2MoIjxkaXY+IikuYXBwZW5kKGwucmVzcG9uc2VUZXh0LnJlcGxhY2UobmIsIiIpKS5maW5kKGYpOmwucmVzcG9uc2VUZXh0KTtkJiZoLmVhY2goZCxbbC5yZXNwb25zZVRleHQsayxsXSl9fSk7cmV0dXJuIHRoaXN9LHNlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBjLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudHM/Yy5tYWtlQXJyYXkodGhpcy5lbGVtZW50cyk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUmJiAhdGhpcy5kaXNhYmxlZCYmKHRoaXMuY2hlY2tlZHx8b2IudGVzdCh0aGlzLm5vZGVOYW1lKXx8cGIudGVzdCh0aGlzLnR5cGUpKX0pLm1hcChmdW5jdGlvbihhLGIpe3ZhciBkPWModGhpcykudmFsKCk7cmV0dXJuIGQ9PW51bGw/bnVsbDpjLmlzQXJyYXkoZCk/Yy5tYXAoZCxmdW5jdGlvbihlKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6ZX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6ZH19KS5nZXQoKX19KTtjLmVhY2goImFqYXhTdGFydCBhamF4U3RvcCBhamF4Q29tcGxldGUgYWpheEVycm9yIGFqYXhTdWNjZXNzIGFqYXhTZW5kIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7Yy5mbltiXT1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5iaW5kKGIsZCl9fSk7Yy5leHRlbmQoe2dldDpmdW5jdGlvbihhLGIsZCxlKXtpZihjLmlzRnVuY3Rpb24oYikpe2U9ZXx8ZDtkPWI7Yj1udWxsfXJldHVybiBjLmFqYXgoe3R5cGU6IkdFVCIsdXJsOmEsZGF0YTpiLHN1Y2Nlc3M6ZCxkYXRhVHlwZTplfSl9LCBnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5nZXQoYSxudWxsLGIsInNjcmlwdCIpfSxnZXRKU09OOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5nZXQoYSxiLGQsImpzb24iKX0scG9zdDpmdW5jdGlvbihhLGIsZCxlKXtpZihjLmlzRnVuY3Rpb24oYikpe2U9ZXx8ZDtkPWI7Yj17fX1yZXR1cm4gYy5hamF4KHt0eXBlOiJQT1NUIix1cmw6YSxkYXRhOmIsc3VjY2VzczpkLGRhdGFUeXBlOmV9KX0sYWpheFNldHVwOmZ1bmN0aW9uKGEpe2MuZXh0ZW5kKGMuYWpheFNldHRpbmdzLGEpfSxhamF4U2V0dGluZ3M6e3VybDpsb2NhdGlvbi5ocmVmLGdsb2JhbDp0cnVlLHR5cGU6IkdFVCIsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIscHJvY2Vzc0RhdGE6dHJ1ZSxhc3luYzp0cnVlLHhocjpmdW5jdGlvbigpe3JldHVybiBuZXcgRS5YTUxIdHRwUmVxdWVzdH0sYWNjZXB0czp7eG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixodG1sOiJ0ZXh0L2h0bWwiLCBzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0Iix0ZXh0OiJ0ZXh0L3BsYWluIixfZGVmYXVsdDoiKi8qIn19LGFqYXg6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5leHRlbmQodHJ1ZSx7fSxjLmFqYXhTZXR0aW5ncyxhKSxkLGUsZixoPWIudHlwZS50b1VwcGVyQ2FzZSgpLGw9cWIudGVzdChoKTtiLnVybD1iLnVybC5yZXBsYWNlKHViLCIiKTtiLmNvbnRleHQ9YSYmYS5jb250ZXh0IT1udWxsP2EuY29udGV4dDpiO2lmKGIuZGF0YSYmYi5wcm9jZXNzRGF0YSYmdHlwZW9mIGIuZGF0YSE9PSJzdHJpbmciKWIuZGF0YT1jLnBhcmFtKGIuZGF0YSxiLnRyYWRpdGlvbmFsKTtpZihiLmRhdGFUeXBlPT09Impzb25wIil7aWYoaD09PSJHRVQiKVQudGVzdChiLnVybCl8fChiLnVybCs9KGphLnRlc3QoYi51cmwpPyImIjoiPyIpKyhiLmpzb25wfHwiY2FsbGJhY2siKSsiPT8iKTtlbHNlIGlmKCFiLmRhdGF8fCAhVC50ZXN0KGIuZGF0YSkpYi5kYXRhPShiLmRhdGE/Yi5kYXRhKyImIjoiIikrKGIuanNvbnB8fCJjYWxsYmFjayIpKyI9PyI7Yi5kYXRhVHlwZT0ianNvbiJ9aWYoYi5kYXRhVHlwZT09PSJqc29uIiYmKGIuZGF0YSYmVC50ZXN0KGIuZGF0YSl8fFQudGVzdChiLnVybCkpKXtkPWIuanNvbnBDYWxsYmFja3x8Impzb25wIittYisrO2lmKGIuZGF0YSliLmRhdGE9KGIuZGF0YSsiIikucmVwbGFjZShULCI9IitkKyIkMSIpO2IudXJsPWIudXJsLnJlcGxhY2UoVCwiPSIrZCsiJDEiKTtiLmRhdGFUeXBlPSJzY3JpcHQiO3ZhciBrPUVbZF07RVtkXT1mdW5jdGlvbihtKXtpZihjLmlzRnVuY3Rpb24oaykpayhtKTtlbHNle0VbZF09Qjt0cnl7ZGVsZXRlIEVbZF19Y2F0Y2gocCl7fX1mPW07Yy5oYW5kbGVTdWNjZXNzKGIsdyxlLGYpO2MuaGFuZGxlQ29tcGxldGUoYix3LGUsZik7ciYmci5yZW1vdmVDaGlsZChBKX19aWYoYi5kYXRhVHlwZT09PSJzY3JpcHQiJiZiLmNhY2hlPT09bnVsbCliLmNhY2hlPSBmYWxzZTtpZihiLmNhY2hlPT09ZmFsc2UmJmwpe3ZhciBvPWMubm93KCkseD1iLnVybC5yZXBsYWNlKHJiLCIkMV89IitvKTtiLnVybD14Kyh4PT09Yi51cmw/KGphLnRlc3QoYi51cmwpPyImIjoiPyIpKyJfPSIrbzoiIil9aWYoYi5kYXRhJiZsKWIudXJsKz0oamEudGVzdChiLnVybCk/IiYiOiI/IikrYi5kYXRhO2IuZ2xvYmFsJiZjLmFjdGl2ZSsrPT09MCYmYy5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKTtvPShvPXNiLmV4ZWMoYi51cmwpKSYmKG9bMV0mJm9bMV0udG9Mb3dlckNhc2UoKSE9PWxvY2F0aW9uLnByb3RvY29sfHxvWzJdLnRvTG93ZXJDYXNlKCkhPT1sb2NhdGlvbi5ob3N0KTtpZihiLmRhdGFUeXBlPT09InNjcmlwdCImJmg9PT0iR0VUIiYmbyl7dmFyIHI9dC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHx0LmRvY3VtZW50RWxlbWVudCxBPXQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7aWYoYi5zY3JpcHRDaGFyc2V0KUEuY2hhcnNldD1iLnNjcmlwdENoYXJzZXQ7IEEuc3JjPWIudXJsO2lmKCFkKXt2YXIgQz1mYWxzZTtBLm9ubG9hZD1BLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKCFDJiYoIXRoaXMucmVhZHlTdGF0ZXx8dGhpcy5yZWFkeVN0YXRlPT09ImxvYWRlZCJ8fHRoaXMucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpKXtDPXRydWU7Yy5oYW5kbGVTdWNjZXNzKGIsdyxlLGYpO2MuaGFuZGxlQ29tcGxldGUoYix3LGUsZik7QS5vbmxvYWQ9QS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtyJiZBLnBhcmVudE5vZGUmJnIucmVtb3ZlQ2hpbGQoQSl9fX1yLmluc2VydEJlZm9yZShBLHIuZmlyc3RDaGlsZCk7cmV0dXJuIEJ9dmFyIEo9ZmFsc2Usdz1iLnhocigpO2lmKHcpe2IudXNlcm5hbWU/dy5vcGVuKGgsYi51cmwsYi5hc3luYyxiLnVzZXJuYW1lLGIucGFzc3dvcmQpOncub3BlbihoLGIudXJsLGIuYXN5bmMpO3RyeXtpZihiLmRhdGEhPW51bGwmJiFsfHxhJiZhLmNvbnRlbnRUeXBlKXcuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgYi5jb250ZW50VHlwZSk7aWYoYi5pZk1vZGlmaWVkKXtjLmxhc3RNb2RpZmllZFtiLnVybF0mJncuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLGMubGFzdE1vZGlmaWVkW2IudXJsXSk7Yy5ldGFnW2IudXJsXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixjLmV0YWdbYi51cmxdKX1vfHx3LnNldFJlcXVlc3RIZWFkZXIoIlgtUmVxdWVzdGVkLVdpdGgiLCJYTUxIdHRwUmVxdWVzdCIpO3cuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixiLmRhdGFUeXBlJiZiLmFjY2VwdHNbYi5kYXRhVHlwZV0/Yi5hY2NlcHRzW2IuZGF0YVR5cGVdKyIsICovKjsgcT0wLjAxIjpiLmFjY2VwdHMuX2RlZmF1bHQpfWNhdGNoKEkpe31pZihiLmJlZm9yZVNlbmQmJmIuYmVmb3JlU2VuZC5jYWxsKGIuY29udGV4dCx3LGIpPT09ZmFsc2Upe2IuZ2xvYmFsJiZjLmFjdGl2ZS0tPT09MSYmYy5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpO3cuYWJvcnQoKTtyZXR1cm4gZmFsc2V9Yi5nbG9iYWwmJiBjLnRyaWdnZXJHbG9iYWwoYiwiYWpheFNlbmQiLFt3LGJdKTt2YXIgTD13Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihtKXtpZighd3x8dy5yZWFkeVN0YXRlPT09MHx8bT09PSJhYm9ydCIpe0p8fGMuaGFuZGxlQ29tcGxldGUoYix3LGUsZik7Sj10cnVlO2lmKHcpdy5vbnJlYWR5c3RhdGVjaGFuZ2U9Yy5ub29wfWVsc2UgaWYoIUomJncmJih3LnJlYWR5U3RhdGU9PT00fHxtPT09InRpbWVvdXQiKSl7Sj10cnVlO3cub25yZWFkeXN0YXRlY2hhbmdlPWMubm9vcDtlPW09PT0idGltZW91dCI/InRpbWVvdXQiOiFjLmh0dHBTdWNjZXNzKHcpPyJlcnJvciI6Yi5pZk1vZGlmaWVkJiZjLmh0dHBOb3RNb2RpZmllZCh3LGIudXJsKT8ibm90bW9kaWZpZWQiOiJzdWNjZXNzIjt2YXIgcDtpZihlPT09InN1Y2Nlc3MiKXRyeXtmPWMuaHR0cERhdGEodyxiLmRhdGFUeXBlLGIpfWNhdGNoKHEpe2U9InBhcnNlcmVycm9yIjtwPXF9aWYoZT09PSJzdWNjZXNzInx8ZT09PSJub3Rtb2RpZmllZCIpZHx8IGMuaGFuZGxlU3VjY2VzcyhiLHcsZSxmKTtlbHNlIGMuaGFuZGxlRXJyb3IoYix3LGUscCk7ZHx8Yy5oYW5kbGVDb21wbGV0ZShiLHcsZSxmKTttPT09InRpbWVvdXQiJiZ3LmFib3J0KCk7aWYoYi5hc3luYyl3PW51bGx9fTt0cnl7dmFyIGc9dy5hYm9ydDt3LmFib3J0PWZ1bmN0aW9uKCl7dyYmRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwuY2FsbChnLHcpO0woImFib3J0Iil9fWNhdGNoKGkpe31iLmFzeW5jJiZiLnRpbWVvdXQ+MCYmc2V0VGltZW91dChmdW5jdGlvbigpe3cmJiFKJiZMKCJ0aW1lb3V0Iil9LGIudGltZW91dCk7dHJ5e3cuc2VuZChsfHxiLmRhdGE9PW51bGw/bnVsbDpiLmRhdGEpfWNhdGNoKG4pe2MuaGFuZGxlRXJyb3IoYix3LG51bGwsbik7Yy5oYW5kbGVDb21wbGV0ZShiLHcsZSxmKX1iLmFzeW5jfHxMKCk7cmV0dXJuIHd9fSxwYXJhbTpmdW5jdGlvbihhLGIpe3ZhciBkPVtdLGU9ZnVuY3Rpb24oaCxsKXtsPWMuaXNGdW5jdGlvbihsKT9sKCk6bDtkW2QubGVuZ3RoXT0gZW5jb2RlVVJJQ29tcG9uZW50KGgpKyI9IitlbmNvZGVVUklDb21wb25lbnQobCl9O2lmKGI9PT1CKWI9Yy5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7aWYoYy5pc0FycmF5KGEpfHxhLmpxdWVyeSljLmVhY2goYSxmdW5jdGlvbigpe2UodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IodmFyIGYgaW4gYSlkYShmLGFbZl0sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZSh0YiwiKyIpfX0pO2MuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxoYW5kbGVFcnJvcjpmdW5jdGlvbihhLGIsZCxlKXthLmVycm9yJiZhLmVycm9yLmNhbGwoYS5jb250ZXh0LGIsZCxlKTthLmdsb2JhbCYmYy50cmlnZ2VyR2xvYmFsKGEsImFqYXhFcnJvciIsW2IsYSxlXSl9LGhhbmRsZVN1Y2Nlc3M6ZnVuY3Rpb24oYSxiLGQsZSl7YS5zdWNjZXNzJiZhLnN1Y2Nlc3MuY2FsbChhLmNvbnRleHQsZSxkLGIpO2EuZ2xvYmFsJiZjLnRyaWdnZXJHbG9iYWwoYSwiYWpheFN1Y2Nlc3MiLCBbYixhXSl9LGhhbmRsZUNvbXBsZXRlOmZ1bmN0aW9uKGEsYixkKXthLmNvbXBsZXRlJiZhLmNvbXBsZXRlLmNhbGwoYS5jb250ZXh0LGIsZCk7YS5nbG9iYWwmJmMudHJpZ2dlckdsb2JhbChhLCJhamF4Q29tcGxldGUiLFtiLGFdKTthLmdsb2JhbCYmYy5hY3RpdmUtLT09PTEmJmMuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKX0sdHJpZ2dlckdsb2JhbDpmdW5jdGlvbihhLGIsZCl7KGEuY29udGV4dCYmYS5jb250ZXh0LnVybD09bnVsbD9jKGEuY29udGV4dCk6Yy5ldmVudCkudHJpZ2dlcihiLGQpfSxodHRwU3VjY2VzczpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIWEuc3RhdHVzJiZsb2NhdGlvbi5wcm90b2NvbD09PSJmaWxlOiJ8fGEuc3RhdHVzPj0yMDAmJmEuc3RhdHVzPDMwMHx8YS5zdGF0dXM9PT0zMDR8fGEuc3RhdHVzPT09MTIyM31jYXRjaChiKXt9cmV0dXJuIGZhbHNlfSxodHRwTm90TW9kaWZpZWQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hLmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIiksIGU9YS5nZXRSZXNwb25zZUhlYWRlcigiRXRhZyIpO2lmKGQpYy5sYXN0TW9kaWZpZWRbYl09ZDtpZihlKWMuZXRhZ1tiXT1lO3JldHVybiBhLnN0YXR1cz09PTMwNH0saHR0cERhdGE6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWEuZ2V0UmVzcG9uc2VIZWFkZXIoImNvbnRlbnQtdHlwZSIpfHwiIixmPWI9PT0ieG1sInx8IWImJmUuaW5kZXhPZigieG1sIik+PTA7YT1mP2EucmVzcG9uc2VYTUw6YS5yZXNwb25zZVRleHQ7ZiYmYS5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWU9PT0icGFyc2VyZXJyb3IiJiZjLmVycm9yKCJwYXJzZXJlcnJvciIpO2lmKGQmJmQuZGF0YUZpbHRlcilhPWQuZGF0YUZpbHRlcihhLGIpO2lmKHR5cGVvZiBhPT09InN0cmluZyIpaWYoYj09PSJqc29uInx8IWImJmUuaW5kZXhPZigianNvbiIpPj0wKWE9Yy5wYXJzZUpTT04oYSk7ZWxzZSBpZihiPT09InNjcmlwdCJ8fCFiJiZlLmluZGV4T2YoImphdmFzY3JpcHQiKT49MCljLmdsb2JhbEV2YWwoYSk7cmV0dXJuIGF9fSk7IGlmKEUuQWN0aXZlWE9iamVjdCljLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXtpZihFLmxvY2F0aW9uLnByb3RvY29sIT09ImZpbGU6Iil0cnl7cmV0dXJuIG5ldyBFLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGEpe310cnl7cmV0dXJuIG5ldyBFLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9Y2F0Y2goYil7fX07Yy5zdXBwb3J0LmFqYXg9ISFjLmFqYXhTZXR0aW5ncy54aHIoKTt2YXIgZWE9e30sdmI9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLHdiPS9eKFsrXC1dPSk/KFtcZCsuXC1dKykoLiopJC8sYmEscGE9W1siaGVpZ2h0IiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iXSxbIndpZHRoIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0IiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiXSxbIm9wYWNpdHkiXV07Yy5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oYSxiLGQpe2lmKGF8fGE9PT0wKXJldHVybiB0aGlzLmFuaW1hdGUoUygic2hvdyIsIDMpLGEsYixkKTtlbHNle2Q9MDtmb3IodmFyIGU9dGhpcy5sZW5ndGg7ZDxlO2QrKyl7YT10aGlzW2RdO2I9YS5zdHlsZS5kaXNwbGF5O2lmKCFjLmRhdGEoYSwib2xkZGlzcGxheSIpJiZiPT09Im5vbmUiKWI9YS5zdHlsZS5kaXNwbGF5PSIiO2I9PT0iIiYmYy5jc3MoYSwiZGlzcGxheSIpPT09Im5vbmUiJiZjLmRhdGEoYSwib2xkZGlzcGxheSIscWEoYS5ub2RlTmFtZSkpfWZvcihkPTA7ZDxlO2QrKyl7YT10aGlzW2RdO2I9YS5zdHlsZS5kaXNwbGF5O2lmKGI9PT0iInx8Yj09PSJub25lIilhLnN0eWxlLmRpc3BsYXk9Yy5kYXRhKGEsIm9sZGRpc3BsYXkiKXx8IiJ9cmV0dXJuIHRoaXN9fSxoaWRlOmZ1bmN0aW9uKGEsYixkKXtpZihhfHxhPT09MClyZXR1cm4gdGhpcy5hbmltYXRlKFMoImhpZGUiLDMpLGEsYixkKTtlbHNle2E9MDtmb3IoYj10aGlzLmxlbmd0aDthPGI7YSsrKXtkPWMuY3NzKHRoaXNbYV0sImRpc3BsYXkiKTtkIT09Im5vbmUiJiZjLmRhdGEodGhpc1thXSwib2xkZGlzcGxheSIsIGQpfWZvcihhPTA7YTxiO2ErKyl0aGlzW2FdLnN0eWxlLmRpc3BsYXk9Im5vbmUiO3JldHVybiB0aGlzfX0sX3RvZ2dsZTpjLmZuLnRvZ2dsZSx0b2dnbGU6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPXR5cGVvZiBhPT09ImJvb2xlYW4iO2lmKGMuaXNGdW5jdGlvbihhKSYmYy5pc0Z1bmN0aW9uKGIpKXRoaXMuX3RvZ2dsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZWxzZSBhPT1udWxsfHxlP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBmPWU/YTpjKHRoaXMpLmlzKCI6aGlkZGVuIik7Yyh0aGlzKVtmPyJzaG93IjoiaGlkZSJdKCl9KTp0aGlzLmFuaW1hdGUoUygidG9nZ2xlIiwzKSxhLGIsZCk7cmV0dXJuIHRoaXN9LGZhZGVUbzpmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gdGhpcy5maWx0ZXIoIjpoaWRkZW4iKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsZCxlKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsZCxlKXt2YXIgZj1jLnNwZWVkKGIsIGQsZSk7aWYoYy5pc0VtcHR5T2JqZWN0KGEpKXJldHVybiB0aGlzLmVhY2goZi5jb21wbGV0ZSk7cmV0dXJuIHRoaXNbZi5xdWV1ZT09PWZhbHNlPyJlYWNoIjoicXVldWUiXShmdW5jdGlvbigpe3ZhciBoPWMuZXh0ZW5kKHt9LGYpLGwsaz10aGlzLm5vZGVUeXBlPT09MSxvPWsmJmModGhpcykuaXMoIjpoaWRkZW4iKSx4PXRoaXM7Zm9yKGwgaW4gYSl7dmFyIHI9Yy5jYW1lbENhc2UobCk7aWYobCE9PXIpe2Fbcl09YVtsXTtkZWxldGUgYVtsXTtsPXJ9aWYoYVtsXT09PSJoaWRlIiYmb3x8YVtsXT09PSJzaG93IiYmIW8pcmV0dXJuIGguY29tcGxldGUuY2FsbCh0aGlzKTtpZihrJiYobD09PSJoZWlnaHQifHxsPT09IndpZHRoIikpe2gub3ZlcmZsb3c9W3RoaXMuc3R5bGUub3ZlcmZsb3csdGhpcy5zdHlsZS5vdmVyZmxvd1gsdGhpcy5zdHlsZS5vdmVyZmxvd1ldO2lmKGMuY3NzKHRoaXMsImRpc3BsYXkiKT09PSJpbmxpbmUiJiZjLmNzcyh0aGlzLCJmbG9hdCIpPT09Im5vbmUiKWlmKGMuc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0KWlmKHFhKHRoaXMubm9kZU5hbWUpPT09ICJpbmxpbmUiKXRoaXMuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIjtlbHNle3RoaXMuc3R5bGUuZGlzcGxheT0iaW5saW5lIjt0aGlzLnN0eWxlLnpvb209MX1lbHNlIHRoaXMuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIn1pZihjLmlzQXJyYXkoYVtsXSkpeyhoLnNwZWNpYWxFYXNpbmc9aC5zcGVjaWFsRWFzaW5nfHx7fSlbbF09YVtsXVsxXTthW2xdPWFbbF1bMF19fWlmKGgub3ZlcmZsb3chPW51bGwpdGhpcy5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIjtoLmN1ckFuaW09Yy5leHRlbmQoe30sYSk7Yy5lYWNoKGEsZnVuY3Rpb24oQSxDKXt2YXIgSj1uZXcgYy5meCh4LGgsQSk7aWYodmIudGVzdChDKSlKW0M9PT0idG9nZ2xlIj9vPyJzaG93IjoiaGlkZSI6Q10oYSk7ZWxzZXt2YXIgdz13Yi5leGVjKEMpLEk9Si5jdXIoKXx8MDtpZih3KXt2YXIgTD1wYXJzZUZsb2F0KHdbMl0pLGc9d1szXXx8InB4IjtpZihnIT09InB4Iil7Yy5zdHlsZSh4LEEsKEx8fDEpK2cpO0k9KEx8fCAxKS9KLmN1cigpKkk7Yy5zdHlsZSh4LEEsSStnKX1pZih3WzFdKUw9KHdbMV09PT0iLT0iPy0xOjEpKkwrSTtKLmN1c3RvbShJLEwsZyl9ZWxzZSBKLmN1c3RvbShJLEMsIiIpfX0pO3JldHVybiB0cnVlfSl9LHN0b3A6ZnVuY3Rpb24oYSxiKXt2YXIgZD1jLnRpbWVyczthJiZ0aGlzLnF1ZXVlKFtdKTt0aGlzLmVhY2goZnVuY3Rpb24oKXtmb3IodmFyIGU9ZC5sZW5ndGgtMTtlPj0wO2UtLSlpZihkW2VdLmVsZW09PT10aGlzKXtiJiZkW2VdKHRydWUpO2Quc3BsaWNlKGUsMSl9fSk7Ynx8dGhpcy5kZXF1ZXVlKCk7cmV0dXJuIHRoaXN9fSk7Yy5lYWNoKHtzbGlkZURvd246Uygic2hvdyIsMSksc2xpZGVVcDpTKCJoaWRlIiwxKSxzbGlkZVRvZ2dsZTpTKCJ0b2dnbGUiLDEpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oYSxiKXtjLmZuW2FdPWZ1bmN0aW9uKGQsZSxmKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsIGQsZSxmKX19KTtjLmV4dGVuZCh7c3BlZWQ6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWEmJnR5cGVvZiBhPT09Im9iamVjdCI/Yy5leHRlbmQoe30sYSk6e2NvbXBsZXRlOmR8fCFkJiZifHxjLmlzRnVuY3Rpb24oYSkmJmEsZHVyYXRpb246YSxlYXNpbmc6ZCYmYnx8YiYmIWMuaXNGdW5jdGlvbihiKSYmYn07ZS5kdXJhdGlvbj1jLmZ4Lm9mZj8wOnR5cGVvZiBlLmR1cmF0aW9uPT09Im51bWJlciI/ZS5kdXJhdGlvbjplLmR1cmF0aW9uIGluIGMuZnguc3BlZWRzP2MuZnguc3BlZWRzW2UuZHVyYXRpb25dOmMuZnguc3BlZWRzLl9kZWZhdWx0O2Uub2xkPWUuY29tcGxldGU7ZS5jb21wbGV0ZT1mdW5jdGlvbigpe2UucXVldWUhPT1mYWxzZSYmYyh0aGlzKS5kZXF1ZXVlKCk7Yy5pc0Z1bmN0aW9uKGUub2xkKSYmZS5vbGQuY2FsbCh0aGlzKX07cmV0dXJuIGV9LGVhc2luZzp7bGluZWFyOmZ1bmN0aW9uKGEsYixkLGUpe3JldHVybiBkK2UqYX0sc3dpbmc6ZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuKC1NYXRoLmNvcyhhKiBNYXRoLlBJKS8yKzAuNSkqZStkfX0sdGltZXJzOltdLGZ4OmZ1bmN0aW9uKGEsYixkKXt0aGlzLm9wdGlvbnM9Yjt0aGlzLmVsZW09YTt0aGlzLnByb3A9ZDtpZighYi5vcmlnKWIub3JpZz17fX19KTtjLmZ4LnByb3RvdHlwZT17dXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpOyhjLmZ4LnN0ZXBbdGhpcy5wcm9wXXx8Yy5meC5zdGVwLl9kZWZhdWx0KSh0aGlzKX0sY3VyOmZ1bmN0aW9uKCl7aWYodGhpcy5lbGVtW3RoaXMucHJvcF0hPW51bGwmJighdGhpcy5lbGVtLnN0eWxlfHx0aGlzLmVsZW0uc3R5bGVbdGhpcy5wcm9wXT09bnVsbCkpcmV0dXJuIHRoaXMuZWxlbVt0aGlzLnByb3BdO3ZhciBhPXBhcnNlRmxvYXQoYy5jc3ModGhpcy5lbGVtLHRoaXMucHJvcCkpO3JldHVybiBhJiZhPi0xRTQ/YTowfSxjdXN0b206ZnVuY3Rpb24oYSxiLGQpe2Z1bmN0aW9uIGUobCl7cmV0dXJuIGYuc3RlcChsKX0gdmFyIGY9dGhpcyxoPWMuZng7dGhpcy5zdGFydFRpbWU9Yy5ub3coKTt0aGlzLnN0YXJ0PWE7dGhpcy5lbmQ9Yjt0aGlzLnVuaXQ9ZHx8dGhpcy51bml0fHwicHgiO3RoaXMubm93PXRoaXMuc3RhcnQ7dGhpcy5wb3M9dGhpcy5zdGF0ZT0wO2UuZWxlbT10aGlzLmVsZW07aWYoZSgpJiZjLnRpbWVycy5wdXNoKGUpJiYhYmEpYmE9c2V0SW50ZXJ2YWwoaC50aWNrLGguaW50ZXJ2YWwpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLm9yaWdbdGhpcy5wcm9wXT1jLnN0eWxlKHRoaXMuZWxlbSx0aGlzLnByb3ApO3RoaXMub3B0aW9ucy5zaG93PXRydWU7dGhpcy5jdXN0b20odGhpcy5wcm9wPT09IndpZHRoInx8dGhpcy5wcm9wPT09ImhlaWdodCI/MTowLHRoaXMuY3VyKCkpO2ModGhpcy5lbGVtKS5zaG93KCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMub3JpZ1t0aGlzLnByb3BdPWMuc3R5bGUodGhpcy5lbGVtLHRoaXMucHJvcCk7dGhpcy5vcHRpb25zLmhpZGU9dHJ1ZTsgdGhpcy5jdXN0b20odGhpcy5jdXIoKSwwKX0sc3RlcDpmdW5jdGlvbihhKXt2YXIgYj1jLm5vdygpLGQ9dHJ1ZTtpZihhfHxiPj10aGlzLm9wdGlvbnMuZHVyYXRpb24rdGhpcy5zdGFydFRpbWUpe3RoaXMubm93PXRoaXMuZW5kO3RoaXMucG9zPXRoaXMuc3RhdGU9MTt0aGlzLnVwZGF0ZSgpO3RoaXMub3B0aW9ucy5jdXJBbmltW3RoaXMucHJvcF09dHJ1ZTtmb3IodmFyIGUgaW4gdGhpcy5vcHRpb25zLmN1ckFuaW0paWYodGhpcy5vcHRpb25zLmN1ckFuaW1bZV0hPT10cnVlKWQ9ZmFsc2U7aWYoZCl7aWYodGhpcy5vcHRpb25zLm92ZXJmbG93IT1udWxsJiYhYy5zdXBwb3J0LnNocmlua1dyYXBCbG9ja3Mpe3ZhciBmPXRoaXMuZWxlbSxoPXRoaXMub3B0aW9ucztjLmVhY2goWyIiLCJYIiwiWSJdLGZ1bmN0aW9uKGssbyl7Zi5zdHlsZVsib3ZlcmZsb3ciK29dPWgub3ZlcmZsb3dba119KX10aGlzLm9wdGlvbnMuaGlkZSYmYyh0aGlzLmVsZW0pLmhpZGUoKTtpZih0aGlzLm9wdGlvbnMuaGlkZXx8IHRoaXMub3B0aW9ucy5zaG93KWZvcih2YXIgbCBpbiB0aGlzLm9wdGlvbnMuY3VyQW5pbSljLnN0eWxlKHRoaXMuZWxlbSxsLHRoaXMub3B0aW9ucy5vcmlnW2xdKTt0aGlzLm9wdGlvbnMuY29tcGxldGUuY2FsbCh0aGlzLmVsZW0pfXJldHVybiBmYWxzZX1lbHNle2E9Yi10aGlzLnN0YXJ0VGltZTt0aGlzLnN0YXRlPWEvdGhpcy5vcHRpb25zLmR1cmF0aW9uO2I9dGhpcy5vcHRpb25zLmVhc2luZ3x8KGMuZWFzaW5nLnN3aW5nPyJzd2luZyI6ImxpbmVhciIpO3RoaXMucG9zPWMuZWFzaW5nW3RoaXMub3B0aW9ucy5zcGVjaWFsRWFzaW5nJiZ0aGlzLm9wdGlvbnMuc3BlY2lhbEVhc2luZ1t0aGlzLnByb3BdfHxiXSh0aGlzLnN0YXRlLGEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik7dGhpcy5ub3c9dGhpcy5zdGFydCsodGhpcy5lbmQtdGhpcy5zdGFydCkqdGhpcy5wb3M7dGhpcy51cGRhdGUoKX1yZXR1cm4gdHJ1ZX19O2MuZXh0ZW5kKGMuZngse3RpY2s6ZnVuY3Rpb24oKXtmb3IodmFyIGE9IGMudGltZXJzLGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl8fGEuc3BsaWNlKGItLSwxKTthLmxlbmd0aHx8Yy5meC5zdG9wKCl9LGludGVydmFsOjEzLHN0b3A6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKGJhKTtiYT1udWxsfSxzcGVlZHM6e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sc3RlcDp7b3BhY2l0eTpmdW5jdGlvbihhKXtjLnN0eWxlKGEuZWxlbSwib3BhY2l0eSIsYS5ub3cpfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtpZihhLmVsZW0uc3R5bGUmJmEuZWxlbS5zdHlsZVthLnByb3BdIT1udWxsKWEuZWxlbS5zdHlsZVthLnByb3BdPShhLnByb3A9PT0id2lkdGgifHxhLnByb3A9PT0iaGVpZ2h0Ij9NYXRoLm1heCgwLGEubm93KTphLm5vdykrYS51bml0O2Vsc2UgYS5lbGVtW2EucHJvcF09YS5ub3d9fX0pO2lmKGMuZXhwciYmYy5leHByLmZpbHRlcnMpYy5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZ3JlcChjLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PSBiLmVsZW19KS5sZW5ndGh9O3ZhciB4Yj0vXnQoPzphYmxlfGR8aCkkL2ksSWE9L14oPzpib2R5fGh0bWwpJC9pO2MuZm4ub2Zmc2V0PSJnZXRCb3VuZGluZ0NsaWVudFJlY3QiaW4gdC5kb2N1bWVudEVsZW1lbnQ/ZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXSxkO2lmKGEpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihsKXtjLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGwpfSk7aWYoIWJ8fCFiLm93bmVyRG9jdW1lbnQpcmV0dXJuIG51bGw7aWYoYj09PWIub3duZXJEb2N1bWVudC5ib2R5KXJldHVybiBjLm9mZnNldC5ib2R5T2Zmc2V0KGIpO3RyeXtkPWIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9Y2F0Y2goZSl7fXZhciBmPWIub3duZXJEb2N1bWVudCxoPWYuZG9jdW1lbnRFbGVtZW50O2lmKCFkfHwhYy5jb250YWlucyhoLGIpKXJldHVybiBkfHx7dG9wOjAsbGVmdDowfTtiPWYuYm9keTtmPWZhKGYpO3JldHVybnt0b3A6ZC50b3ArKGYucGFnZVlPZmZzZXR8fGMuc3VwcG9ydC5ib3hNb2RlbCYmIGguc2Nyb2xsVG9wfHxiLnNjcm9sbFRvcCktKGguY2xpZW50VG9wfHxiLmNsaWVudFRvcHx8MCksbGVmdDpkLmxlZnQrKGYucGFnZVhPZmZzZXR8fGMuc3VwcG9ydC5ib3hNb2RlbCYmaC5zY3JvbGxMZWZ0fHxiLnNjcm9sbExlZnQpLShoLmNsaWVudExlZnR8fGIuY2xpZW50TGVmdHx8MCl9fTpmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdO2lmKGEpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih4KXtjLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLHgpfSk7aWYoIWJ8fCFiLm93bmVyRG9jdW1lbnQpcmV0dXJuIG51bGw7aWYoYj09PWIub3duZXJEb2N1bWVudC5ib2R5KXJldHVybiBjLm9mZnNldC5ib2R5T2Zmc2V0KGIpO2Mub2Zmc2V0LmluaXRpYWxpemUoKTt2YXIgZCxlPWIub2Zmc2V0UGFyZW50LGY9Yi5vd25lckRvY3VtZW50LGg9Zi5kb2N1bWVudEVsZW1lbnQsbD1mLmJvZHk7ZD0oZj1mLmRlZmF1bHRWaWV3KT9mLmdldENvbXB1dGVkU3R5bGUoYixudWxsKTpiLmN1cnJlbnRTdHlsZTsgZm9yKHZhciBrPWIub2Zmc2V0VG9wLG89Yi5vZmZzZXRMZWZ0OyhiPWIucGFyZW50Tm9kZSkmJmIhPT1sJiZiIT09aDspe2lmKGMub2Zmc2V0LnN1cHBvcnRzRml4ZWRQb3NpdGlvbiYmZC5wb3NpdGlvbj09PSJmaXhlZCIpYnJlYWs7ZD1mP2YuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpOmIuY3VycmVudFN0eWxlO2stPWIuc2Nyb2xsVG9wO28tPWIuc2Nyb2xsTGVmdDtpZihiPT09ZSl7ays9Yi5vZmZzZXRUb3A7bys9Yi5vZmZzZXRMZWZ0O2lmKGMub2Zmc2V0LmRvZXNOb3RBZGRCb3JkZXImJiEoYy5vZmZzZXQuZG9lc0FkZEJvcmRlckZvclRhYmxlQW5kQ2VsbHMmJnhiLnRlc3QoYi5ub2RlTmFtZSkpKXtrKz1wYXJzZUZsb2F0KGQuYm9yZGVyVG9wV2lkdGgpfHwwO28rPXBhcnNlRmxvYXQoZC5ib3JkZXJMZWZ0V2lkdGgpfHwwfWU9Yi5vZmZzZXRQYXJlbnR9aWYoYy5vZmZzZXQuc3VidHJhY3RzQm9yZGVyRm9yT3ZlcmZsb3dOb3RWaXNpYmxlJiZkLm92ZXJmbG93IT09InZpc2libGUiKXtrKz0gcGFyc2VGbG9hdChkLmJvcmRlclRvcFdpZHRoKXx8MDtvKz1wYXJzZUZsb2F0KGQuYm9yZGVyTGVmdFdpZHRoKXx8MH1kPWR9aWYoZC5wb3NpdGlvbj09PSJyZWxhdGl2ZSJ8fGQucG9zaXRpb249PT0ic3RhdGljIil7ays9bC5vZmZzZXRUb3A7bys9bC5vZmZzZXRMZWZ0fWlmKGMub2Zmc2V0LnN1cHBvcnRzRml4ZWRQb3NpdGlvbiYmZC5wb3NpdGlvbj09PSJmaXhlZCIpe2srPU1hdGgubWF4KGguc2Nyb2xsVG9wLGwuc2Nyb2xsVG9wKTtvKz1NYXRoLm1heChoLnNjcm9sbExlZnQsbC5zY3JvbGxMZWZ0KX1yZXR1cm57dG9wOmssbGVmdDpvfX07Yy5vZmZzZXQ9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10LmJvZHksYj10LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGQsZSxmLGg9cGFyc2VGbG9hdChjLmNzcyhhLCJtYXJnaW5Ub3AiKSl8fDA7Yy5leHRlbmQoYi5zdHlsZSx7cG9zaXRpb246ImFic29sdXRlIix0b3A6MCxsZWZ0OjAsbWFyZ2luOjAsYm9yZGVyOjAsd2lkdGg6IjFweCIsIGhlaWdodDoiMXB4Iix2aXNpYmlsaXR5OiJoaWRkZW4ifSk7Yi5pbm5lckhUTUw9IjxkaXYgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDttYXJnaW46MDtib3JkZXI6NXB4IHNvbGlkICMwMDA7cGFkZGluZzowO3dpZHRoOjFweDtoZWlnaHQ6MXB4Oyc+PGRpdj48L2Rpdj48L2Rpdj48dGFibGUgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDttYXJnaW46MDtib3JkZXI6NXB4IHNvbGlkICMwMDA7cGFkZGluZzowO3dpZHRoOjFweDtoZWlnaHQ6MXB4OycgY2VsbHBhZGRpbmc9JzAnIGNlbGxzcGFjaW5nPScwJz48dHI+PHRkPjwvdGQ+PC90cj48L3RhYmxlPiI7YS5pbnNlcnRCZWZvcmUoYixhLmZpcnN0Q2hpbGQpO2Q9Yi5maXJzdENoaWxkO2U9ZC5maXJzdENoaWxkO2Y9ZC5uZXh0U2libGluZy5maXJzdENoaWxkLmZpcnN0Q2hpbGQ7dGhpcy5kb2VzTm90QWRkQm9yZGVyPWUub2Zmc2V0VG9wIT09NTt0aGlzLmRvZXNBZGRCb3JkZXJGb3JUYWJsZUFuZENlbGxzPSBmLm9mZnNldFRvcD09PTU7ZS5zdHlsZS5wb3NpdGlvbj0iZml4ZWQiO2Uuc3R5bGUudG9wPSIyMHB4Ijt0aGlzLnN1cHBvcnRzRml4ZWRQb3NpdGlvbj1lLm9mZnNldFRvcD09PTIwfHxlLm9mZnNldFRvcD09PTE1O2Uuc3R5bGUucG9zaXRpb249ZS5zdHlsZS50b3A9IiI7ZC5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIjtkLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7dGhpcy5zdWJ0cmFjdHNCb3JkZXJGb3JPdmVyZmxvd05vdFZpc2libGU9ZS5vZmZzZXRUb3A9PT0tNTt0aGlzLmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0PWEub2Zmc2V0VG9wIT09aDthLnJlbW92ZUNoaWxkKGIpO2Mub2Zmc2V0LmluaXRpYWxpemU9Yy5ub29wfSxib2R5T2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEub2Zmc2V0VG9wLGQ9YS5vZmZzZXRMZWZ0O2Mub2Zmc2V0LmluaXRpYWxpemUoKTtpZihjLm9mZnNldC5kb2VzTm90SW5jbHVkZU1hcmdpbkluQm9keU9mZnNldCl7Yis9cGFyc2VGbG9hdChjLmNzcyhhLCAibWFyZ2luVG9wIikpfHwwO2QrPXBhcnNlRmxvYXQoYy5jc3MoYSwibWFyZ2luTGVmdCIpKXx8MH1yZXR1cm57dG9wOmIsbGVmdDpkfX0sc2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1jLmNzcyhhLCJwb3NpdGlvbiIpO2lmKGU9PT0ic3RhdGljIilhLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7dmFyIGY9YyhhKSxoPWYub2Zmc2V0KCksbD1jLmNzcyhhLCJ0b3AiKSxrPWMuY3NzKGEsImxlZnQiKSxvPWU9PT0iYWJzb2x1dGUiJiZjLmluQXJyYXkoImF1dG8iLFtsLGtdKT4tMTtlPXt9O3ZhciB4PXt9O2lmKG8peD1mLnBvc2l0aW9uKCk7bD1vP3gudG9wOnBhcnNlSW50KGwsMTApfHwwO2s9bz94LmxlZnQ6cGFyc2VJbnQoaywxMCl8fDA7aWYoYy5pc0Z1bmN0aW9uKGIpKWI9Yi5jYWxsKGEsZCxoKTtpZihiLnRvcCE9bnVsbCllLnRvcD1iLnRvcC1oLnRvcCtsO2lmKGIubGVmdCE9bnVsbCllLmxlZnQ9Yi5sZWZ0LWgubGVmdCtrOyJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLCBlKTpmLmNzcyhlKX19O2MuZm4uZXh0ZW5kKHtwb3NpdGlvbjpmdW5jdGlvbigpe2lmKCF0aGlzWzBdKXJldHVybiBudWxsO3ZhciBhPXRoaXNbMF0sYj10aGlzLm9mZnNldFBhcmVudCgpLGQ9dGhpcy5vZmZzZXQoKSxlPUlhLnRlc3QoYlswXS5ub2RlTmFtZSk/e3RvcDowLGxlZnQ6MH06Yi5vZmZzZXQoKTtkLnRvcC09cGFyc2VGbG9hdChjLmNzcyhhLCJtYXJnaW5Ub3AiKSl8fDA7ZC5sZWZ0LT1wYXJzZUZsb2F0KGMuY3NzKGEsIm1hcmdpbkxlZnQiKSl8fDA7ZS50b3ArPXBhcnNlRmxvYXQoYy5jc3MoYlswXSwiYm9yZGVyVG9wV2lkdGgiKSl8fDA7ZS5sZWZ0Kz1wYXJzZUZsb2F0KGMuY3NzKGJbMF0sImJvcmRlckxlZnRXaWR0aCIpKXx8MDtyZXR1cm57dG9wOmQudG9wLWUudG9wLGxlZnQ6ZC5sZWZ0LWUubGVmdH19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8dC5ib2R5O2EmJiFJYS50ZXN0KGEubm9kZU5hbWUpJiYgYy5jc3MoYSwicG9zaXRpb24iKT09PSJzdGF0aWMiOylhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfSl9fSk7Yy5lYWNoKFsiTGVmdCIsIlRvcCJdLGZ1bmN0aW9uKGEsYil7dmFyIGQ9InNjcm9sbCIrYjtjLmZuW2RdPWZ1bmN0aW9uKGUpe3ZhciBmPXRoaXNbMF0saDtpZighZilyZXR1cm4gbnVsbDtpZihlIT09QilyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoaD1mYSh0aGlzKSloLnNjcm9sbFRvKCFhP2U6YyhoKS5zY3JvbGxMZWZ0KCksYT9lOmMoaCkuc2Nyb2xsVG9wKCkpO2Vsc2UgdGhpc1tkXT1lfSk7ZWxzZSByZXR1cm4oaD1mYShmKSk/InBhZ2VYT2Zmc2V0ImluIGg/aFthPyJwYWdlWU9mZnNldCI6InBhZ2VYT2Zmc2V0Il06Yy5zdXBwb3J0LmJveE1vZGVsJiZoLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXXx8aC5kb2N1bWVudC5ib2R5W2RdOmZbZF19fSk7Yy5lYWNoKFsiSGVpZ2h0IiwiV2lkdGgiXSxmdW5jdGlvbihhLGIpe3ZhciBkPWIudG9Mb3dlckNhc2UoKTsgYy5mblsiaW5uZXIiK2JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbMF0/cGFyc2VGbG9hdChjLmNzcyh0aGlzWzBdLGQsInBhZGRpbmciKSk6bnVsbH07Yy5mblsib3V0ZXIiK2JdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzWzBdP3BhcnNlRmxvYXQoYy5jc3ModGhpc1swXSxkLGU/Im1hcmdpbiI6ImJvcmRlciIpKTpudWxsfTtjLmZuW2RdPWZ1bmN0aW9uKGUpe3ZhciBmPXRoaXNbMF07aWYoIWYpcmV0dXJuIGU9PW51bGw/bnVsbDp0aGlzO2lmKGMuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGwpe3ZhciBrPWModGhpcyk7a1tkXShlLmNhbGwodGhpcyxsLGtbZF0oKSkpfSk7aWYoYy5pc1dpbmRvdyhmKSlyZXR1cm4gZi5kb2N1bWVudC5jb21wYXRNb2RlPT09IkNTUzFDb21wYXQiJiZmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IitiXXx8Zi5kb2N1bWVudC5ib2R5WyJjbGllbnQiK2JdO2Vsc2UgaWYoZi5ub2RlVHlwZT09PTkpcmV0dXJuIE1hdGgubWF4KGYuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiKyBiXSxmLmJvZHlbInNjcm9sbCIrYl0sZi5kb2N1bWVudEVsZW1lbnRbInNjcm9sbCIrYl0sZi5ib2R5WyJvZmZzZXQiK2JdLGYuZG9jdW1lbnRFbGVtZW50WyJvZmZzZXQiK2JdKTtlbHNlIGlmKGU9PT1CKXtmPWMuY3NzKGYsZCk7dmFyIGg9cGFyc2VGbG9hdChmKTtyZXR1cm4gYy5pc05hTihoKT9mOmh9ZWxzZSByZXR1cm4gdGhpcy5jc3MoZCx0eXBlb2YgZT09PSJzdHJpbmciP2U6ZSsicHgiKX19KX0pKHdpbmRvdyk7'
	$base64JQueryDataTables='LyogICogRmlsZTogICAgICAgIGpxdWVyeS5kYXRhVGFibGVzLmpzICAqIFZlcnNpb246ICAgICAxLjcuNSAgKiBEZXNjcmlwdGlvbjogUGFnaW5hdGUsIHNlYXJjaCBhbmQgc29ydCBIVE1MIHRhYmxlcyAgKiBBdXRob3I6ICAgICAgQWxsYW4gSmFyZGluZSAod3d3LnNwcnltZWRpYS5jby51aykgICogQ3JlYXRlZDogICAgIDI4LzMvMjAwOCAgKiBMYW5ndWFnZTogICAgSmF2YXNjcmlwdCAgKiBMaWNlbnNlOiAgICAgR1BMIHYyIG9yIEJTRCAzIHBvaW50IHN0eWxlICAqIFByb2plY3Q6ICAgICBNdGFhbGEgICogQ29udGFjdDogICAgIGFsbGFuLmphcmRpbmVAc3ByeW1lZGlhLmNvLnVrICAqICAgKiBDb3B5cmlnaHQgMjAwOC0yMDEwIEFsbGFuIEphcmRpbmUsIGFsbCByaWdodHMgcmVzZXJ2ZWQuICAqICAqIFRoaXMgc291cmNlIGZpbGUgaXMgZnJlZSBzb2Z0d2FyZSwgdW5kZXIgZWl0aGVyIHRoZSBHUEwgdjIgbGljZW5zZSBvciBhICAqIEJTRCBzdHlsZSBsaWNlbnNlLCBhcyBzdXBwbGllZCB3aXRoIHRoaXMgc29mdHdhcmUuICAqICAgKiBUaGlzIHNvdXJjZSBmaWxlIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCAgICogV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgICAqIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIGxpY2Vuc2UgZmlsZXMgZm9yIGRldGFpbHMuICAqICAgKiBGb3IgZGV0YWlscyBwbGVhc2UgcmVmZXIgdG86IGh0dHA6Ly93d3cuZGF0YXRhYmxlcy5uZXQgICovICAvKiAgKiBXaGVuIGNvbnNpZGVyaW5nIGpzTGludCwgd2UgbmVlZCB0byBhbGxvdyBldmFsKCkgYXMgaXQgaXQgaXMgdXNlZCBmb3IgcmVhZGluZyBjb29raWVzIGFuZCAgICogYnVpbGRpbmcgdGhlIGR5bmFtaWMgbXVsdGktY29sdW1uIHNvcnQgZnVuY3Rpb25zLiAgKi8gLypqc2xpbnQgZXZpbDogdHJ1ZSwgdW5kZWY6IHRydWUsIGJyb3dzZXI6IHRydWUgKi8gLypnbG9iYWxzICQsIGpRdWVyeSxfZm5FeHRlcm5BcGlGdW5jLF9mbkluaXRhbGlzZSxfZm5Jbml0Q29tcGxldGUsX2ZuTGFuZ3VhZ2VQcm9jZXNzLF9mbkFkZENvbHVtbixfZm5Db2x1bW5PcHRpb25zLF9mbkFkZERhdGEsX2ZuR2F0aGVyRGF0YSxfZm5EcmF3SGVhZCxfZm5EcmF3LF9mblJlRHJhdyxfZm5BamF4VXBkYXRlLF9mbkFqYXhVcGRhdGVEcmF3LF9mbkFkZE9wdGlvbnNIdG1sLF9mbkZlYXR1cmVIdG1sVGFibGUsX2ZuU2Nyb2xsRHJhdyxfZm5BanVzdENvbHVtblNpemluZyxfZm5GZWF0dXJlSHRtbEZpbHRlcixfZm5GaWx0ZXJDb21wbGV0ZSxfZm5GaWx0ZXJDdXN0b20sX2ZuRmlsdGVyQ29sdW1uLF9mbkZpbHRlcixfZm5CdWlsZFNlYXJjaEFycmF5LF9mbkJ1aWxkU2VhcmNoUm93LF9mbkZpbHRlckNyZWF0ZVNlYXJjaCxfZm5EYXRhVG9TZWFyY2gsX2ZuU29ydCxfZm5Tb3J0QXR0YWNoTGlzdGVuZXIsX2ZuU29ydGluZ0NsYXNzZXMsX2ZuRmVhdHVyZUh0bWxQYWdpbmF0ZSxfZm5QYWdlQ2hhbmdlLF9mbkZlYXR1cmVIdG1sSW5mbyxfZm5VcGRhdGVJbmZvLF9mbkZlYXR1cmVIdG1sTGVuZ3RoLF9mbkZlYXR1cmVIdG1sUHJvY2Vzc2luZyxfZm5Qcm9jZXNzaW5nRGlzcGxheSxfZm5WaXNpYmxlVG9Db2x1bW5JbmRleCxfZm5Db2x1bW5JbmRleFRvVmlzaWJsZSxfZm5Ob2RlVG9EYXRhSW5kZXgsX2ZuVmlzYmxlQ29sdW1ucyxfZm5DYWxjdWxhdGVFbmQsX2ZuQ29udmVydFRvV2lkdGgsX2ZuQ2FsY3VsYXRlQ29sdW1uV2lkdGhzLF9mblNjcm9sbGluZ1dpZHRoQWRqdXN0LF9mbkdldFdpZGVzdE5vZGUsX2ZuR2V0TWF4TGVuU3RyaW5nLF9mblN0cmluZ1RvQ3NzLF9mbkFycmF5Q21wLF9mbkRldGVjdFR5cGUsX2ZuU2V0dGluZ3NGcm9tTm9kZSxfZm5HZXREYXRhTWFzdGVyLF9mbkdldFRyTm9kZXMsX2ZuR2V0VGROb2RlcyxfZm5Fc2NhcGVSZWdleCxfZm5EZWxldGVJbmRleCxfZm5SZU9yZGVySW5kZXgsX2ZuQ29sdW1uT3JkZXJpbmcsX2ZuTG9nLF9mbkNsZWFyVGFibGUsX2ZuU2F2ZVN0YXRlLF9mbkxvYWRTdGF0ZSxfZm5DcmVhdGVDb29raWUsX2ZuUmVhZENvb2tpZSxfZm5HZXRVbmlxdWVUaHMsX2ZuU2Nyb2xsQmFyV2lkdGgsX2ZuQXBwbHlUb0NoaWxkcmVuLF9mbk1hcCovICAoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCkgeyAJLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAJICogU2VjdGlvbiAtIERhdGFUYWJsZXMgdmFyaWFibGVzIAkgKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqLyAJIAkvKiAJICogVmFyaWFibGU6IGRhdGFUYWJsZVNldHRpbmdzIAkgKiBQdXJwb3NlOiAgU3RvcmUgdGhlIHNldHRpbmdzIGZvciBlYWNoIGRhdGFUYWJsZXMgaW5zdGFuY2UgCSAqIFNjb3BlOiAgICBqUXVlcnkuZm4gCSAqLyAJJC5mbi5kYXRhVGFibGVTZXR0aW5ncyA9IFtdOyAJdmFyIF9hb1NldHRpbmdzID0gJC5mbi5kYXRhVGFibGVTZXR0aW5nczsgLyogU2hvcnQgcmVmZXJlbmNlIGZvciBmYXN0IGludGVybmFsIGxvb2t1cCAqLyAJIAkvKiAJICogVmFyaWFibGU6IGRhdGFUYWJsZUV4dCAJICogUHVycG9zZTogIENvbnRhaW5lciBmb3IgY3VzdG9taXNhYmxlIHBhcnRzIG9mIERhdGFUYWJsZXMgCSAqIFNjb3BlOiAgICBqUXVlcnkuZm4gCSAqLyAJJC5mbi5kYXRhVGFibGVFeHQgPSB7fTsgCXZhciBfb0V4dCA9ICQuZm4uZGF0YVRhYmxlRXh0OyAJIAkgCS8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogCSAqIFNlY3Rpb24gLSBEYXRhVGFibGVzIGV4dGVuc2libGUgb2JqZWN0cyAJICogIAkgKiBUaGUgX29FeHQgb2JqZWN0IGlzIHVzZWQgdG8gcHJvdmlkZSBhbiBhcmVhIHdoZXJlIHVzZXIgZGZpbmVkIHBsdWdpbnMgY2FuIGJlICAJICogYWRkZWQgdG8gRGF0YVRhYmxlcy4gVGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIG9mIHRoZSBvYmplY3QgYXJlIHVzZWQ6IAkgKiAgIG9BcGkgLSBQbHVnLWluIEFQSSBmdW5jdGlvbnMgCSAqICAgYVR5cGVzIC0gQXV0by1kZXRlY3Rpb24gb2YgdHlwZXMgCSAqICAgb1NvcnQgLSBTb3J0aW5nIGZ1bmN0aW9ucyB1c2VkIGJ5IERhdGFUYWJsZXMgKGJhc2VkIG9uIHRoZSB0eXBlKSAJICogICBvUGFnaW5hdGlvbiAtIFBhZ2luYXRpb24gZnVuY3Rpb25zIGZvciBkaWZmZXJlbnQgaW5wdXQgc3R5bGVzIAkgKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqLyAJIAkvKiAJICogVmFyaWFibGU6IHNWZXJzaW9uIAkgKiBQdXJwb3NlOiAgVmVyc2lvbiBzdHJpbmcgZm9yIHBsdWctaW5zIHRvIGNoZWNrIGNvbXBhdGliaWxpdHkgCSAqIFNjb3BlOiAgICBqUXVlcnkuZm4uZGF0YVRhYmxlRXh0IAkgKiBOb3RlczogICAgQWxsb3dlZCBmb3JtYXQgaXMgYS5iLmMuZC5lIHdoZXJlOiAJICogICBhOmludCwgYjppbnQsIGM6aW50LCBkOnN0cmluZyhkZXZ8YmV0YSksIGU6aW50LiBkIGFuZCBlIGFyZSBvcHRpb25hbCAJICovIAlfb0V4dC5zVmVyc2lvbiA9ICIxLjcuNSI7IAkgCS8qIAkgKiBWYXJpYWJsZTogc0Vyck1vZGUgCSAqIFB1cnBvc2U6ICBIb3cgc2hvdWxkIERhdGFUYWJsZXMgcmVwb3J0IGFuIGVycm9yLiBDYW4gdGFrZSB0aGUgdmFsdWUgJ2FsZXJ0JyBvciAndGhyb3cnIAkgKiBTY29wZTogICAgalF1ZXJ5LmZuLmRhdGFUYWJsZUV4dCAJICovIAlfb0V4dC5zRXJyTW9kZSA9ICJhbGVydCI7IAkgCS8qIAkgKiBWYXJpYWJsZTogaUFwaUluZGV4IAkgKiBQdXJwb3NlOiAgSW5kZXggZm9yIHdoYXQgJ3RoaXMnIGluZGV4IEFQSSBmdW5jdGlvbnMgc2hvdWxkIHVzZSAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQgCSAqLyAJX29FeHQuaUFwaUluZGV4ID0gMDsgCSAJLyogCSAqIFZhcmlhYmxlOiBvQXBpIAkgKiBQdXJwb3NlOiAgQ29udGFpbmVyIGZvciBwbHVnaW4gQVBJIGZ1bmN0aW9ucyAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQgCSAqLyAJX29FeHQub0FwaSA9IHsgfTsgCSAJLyogCSAqIFZhcmlhYmxlOiBhRmlsdGVyaW5nIAkgKiBQdXJwb3NlOiAgQ29udGFpbmVyIGZvciBwbHVnaW4gZmlsdGVyaW5nIGZ1bmN0aW9ucyAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQgCSAqLyAJX29FeHQuYWZuRmlsdGVyaW5nID0gWyBdOyAJIAkvKiAJICogVmFyaWFibGU6IGFvRmVhdHVyZXMgCSAqIFB1cnBvc2U6ICBDb250YWluZXIgZm9yIHBsdWdpbiBmdW5jdGlvbiBmdW5jdGlvbnMgCSAqIFNjb3BlOiAgICBqUXVlcnkuZm4uZGF0YVRhYmxlRXh0IAkgKiBOb3RlczogICAgQXJyYXkgb2Ygb2JqZWN0cyB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczogCSAqICAgZm5Jbml0OiBGdW5jdGlvbiBmb3IgaW5pdGlhbGlzYXRpb24gb2YgRmVhdHVyZS4gVGFrZXMgb1NldHRpbmdzIGFuZCByZXR1cm5zIG5vZGUgCSAqICAgY0ZlYXR1cmU6IENoYXJhY3RlciB0aGF0IHdpbGwgYmUgbWF0Y2hlZCBpbiBzRG9tIC0gY2FzZSBzZW5zaXRpdmUgCSAqICAgc0ZlYXR1cmU6IEZlYXR1cmUgbmFtZSAtIGp1c3QgZm9yIGNvbXBsZXRlbmVzcyA6LSkgCSAqLyAJX29FeHQuYW9GZWF0dXJlcyA9IFsgXTsgCSAJLyogCSAqIFZhcmlhYmxlOiBvZm5TZWFyY2ggCSAqIFB1cnBvc2U6ICBDb250YWluZXIgZm9yIGN1c3RvbSBmaWx0ZXJpbmcgZnVuY3Rpb25zIAkgKiBTY29wZTogICAgalF1ZXJ5LmZuLmRhdGFUYWJsZUV4dCAJICogTm90ZXM6ICAgIFRoaXMgaXMgYW4gb2JqZWN0ICh0aGUgbmFtZSBzaG91bGQgbWF0Y2ggdGhlIHR5cGUpIGZvciBjdXN0b20gZmlsdGVyaW5nIGZ1bmN0aW9uLCAJICogICB3aGljaCBjYW4gYmUgdXNlZCBmb3IgbGl2ZSBET00gY2hlY2tpbmcgb3IgZm9ybWF0dGVkIHRleHQgZmlsdGVyaW5nIAkgKi8gCV9vRXh0Lm9mblNlYXJjaCA9IHsgfTsgCSAJLyogCSAqIFZhcmlhYmxlOiBhZm5Tb3J0RGF0YSAJICogUHVycG9zZTogIENvbnRhaW5lciBmb3IgY3VzdG9tIHNvcnRpbmcgZGF0YSBzb3VyY2UgZnVuY3Rpb25zIAkgKiBTY29wZTogICAgalF1ZXJ5LmZuLmRhdGFUYWJsZUV4dCAJICogTm90ZXM6ICAgIEFycmF5IChhc3NvY2lhdGl2ZSkgb2YgZnVuY3Rpb25zIHdoaWNoIGlzIHJ1biBwcmlvciB0byBhIGNvbHVtbiBvZiB0aGlzICAJICogICAnU29ydERhdGFUeXBlJyBiZWluZyBzb3J0ZWQgdXBvbi4gCSAqICAgRnVuY3Rpb24gaW5wdXQgcGFyYW1ldGVyczogCSAqICAgICBvYmplY3Q6b1NldHRpbmdzLSAgRGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCSAqICAgICBpbnQ6aUNvbHVtbiAtIFRhcmdldCBjb2x1bW4gbnVtYmVyIAkgKiAgIFJldHVybiB2YWx1ZTogQXJyYXkgb2YgZGF0YSB3aGljaCBleGFjdGx5IG1hdGNoZWQgdGhlIGZ1bGwgZGF0YSBzZXQgc2l6ZSBmb3IgdGhlIGNvbHVtbiB0byAJICogICAgIGJlIHNvcnRlZCB1cG9uIAkgKi8gCV9vRXh0LmFmblNvcnREYXRhID0gWyBdOyAJIAkvKiAJICogVmFyaWFibGU6IG9TdGRDbGFzc2VzIAkgKiBQdXJwb3NlOiAgU3RvcmFnZSBmb3IgdGhlIHZhcmlvdXMgY2xhc3NlcyB0aGF0IERhdGFUYWJsZXMgdXNlcyAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQgCSAqLyAJX29FeHQub1N0ZENsYXNzZXMgPSB7IAkJLyogVHdvIGJ1dHRvbnMgYnV0dG9ucyAqLyAJCSJzUGFnZVByZXZFbmFibGVkIjogInBhZ2luYXRlX2VuYWJsZWRfcHJldmlvdXMiLCAJCSJzUGFnZVByZXZEaXNhYmxlZCI6ICJwYWdpbmF0ZV9kaXNhYmxlZF9wcmV2aW91cyIsIAkJInNQYWdlTmV4dEVuYWJsZWQiOiAicGFnaW5hdGVfZW5hYmxlZF9uZXh0IiwgCQkic1BhZ2VOZXh0RGlzYWJsZWQiOiAicGFnaW5hdGVfZGlzYWJsZWRfbmV4dCIsIAkJInNQYWdlSlVJTmV4dCI6ICIiLCAJCSJzUGFnZUpVSVByZXYiOiAiIiwgCQkgCQkvKiBGdWxsIG51bWJlcnMgcGFnaW5nIGJ1dHRvbnMgKi8gCQkic1BhZ2VCdXR0b24iOiAicGFnaW5hdGVfYnV0dG9uIiwgCQkic1BhZ2VCdXR0b25BY3RpdmUiOiAicGFnaW5hdGVfYWN0aXZlIiwgCQkic1BhZ2VCdXR0b25TdGF0aWNEaXNhYmxlZCI6ICJwYWdpbmF0ZV9idXR0b24iLCAJCSJzUGFnZUZpcnN0IjogImZpcnN0IiwgCQkic1BhZ2VQcmV2aW91cyI6ICJwcmV2aW91cyIsIAkJInNQYWdlTmV4dCI6ICJuZXh0IiwgCQkic1BhZ2VMYXN0IjogImxhc3QiLCAJCSAJCS8qIFN0cmlwcGluZyBjbGFzc2VzICovIAkJInNTdHJpcE9kZCI6ICJvZGQiLCAJCSJzU3RyaXBFdmVuIjogImV2ZW4iLCAJCSAJCS8qIEVtcHR5IHJvdyAqLyAJCSJzUm93RW1wdHkiOiAiZGF0YVRhYmxlc19lbXB0eSIsIAkJIAkJLyogRmVhdHVyZXMgKi8gCQkic1dyYXBwZXIiOiAiZGF0YVRhYmxlc193cmFwcGVyIiwgCQkic0ZpbHRlciI6ICJkYXRhVGFibGVzX2ZpbHRlciIsIAkJInNJbmZvIjogImRhdGFUYWJsZXNfaW5mbyIsIAkJInNQYWdpbmciOiAiZGF0YVRhYmxlc19wYWdpbmF0ZSBwYWdpbmdfIiwgLyogTm90ZSB0aGF0IHRoZSB0eXBlIGlzIHBvc3RmaXhlZCAqLyAJCSJzTGVuZ3RoIjogImRhdGFUYWJsZXNfbGVuZ3RoIiwgCQkic1Byb2Nlc3NpbmciOiAiZGF0YVRhYmxlc19wcm9jZXNzaW5nIiwgCQkgCQkvKiBTb3J0aW5nICovIAkJInNTb3J0QXNjIjogInNvcnRpbmdfYXNjIiwgCQkic1NvcnREZXNjIjogInNvcnRpbmdfZGVzYyIsIAkJInNTb3J0YWJsZSI6ICJzb3J0aW5nIiwgLyogU29ydGFibGUgaW4gYm90aCBkaXJlY3Rpb25zICovIAkJInNTb3J0YWJsZUFzYyI6ICJzb3J0aW5nX2FzY19kaXNhYmxlZCIsIAkJInNTb3J0YWJsZURlc2MiOiAic29ydGluZ19kZXNjX2Rpc2FibGVkIiwgCQkic1NvcnRhYmxlTm9uZSI6ICJzb3J0aW5nX2Rpc2FibGVkIiwgCQkic1NvcnRDb2x1bW4iOiAic29ydGluZ18iLCAvKiBOb3RlIHRoYXQgYW4gaW50IGlzIHBvc3RmaXhlZCBmb3IgdGhlIHNvcnRpbmcgb3JkZXIgKi8gCQkic1NvcnRKVUlBc2MiOiAiIiwgCQkic1NvcnRKVUlEZXNjIjogIiIsIAkJInNTb3J0SlVJIjogIiIsIAkJInNTb3J0SlVJQXNjQWxsb3dlZCI6ICIiLCAJCSJzU29ydEpVSURlc2NBbGxvd2VkIjogIiIsIAkJInNTb3J0SlVJV3JhcHBlciI6ICIiLCAJCSAJCS8qIFNjcm9sbGluZyAqLyAJCSJzU2Nyb2xsV3JhcHBlciI6ICJkYXRhVGFibGVzX3Njcm9sbCIsIAkJInNTY3JvbGxIZWFkIjogImRhdGFUYWJsZXNfc2Nyb2xsSGVhZCIsIAkJInNTY3JvbGxIZWFkSW5uZXIiOiAiZGF0YVRhYmxlc19zY3JvbGxIZWFkSW5uZXIiLCAJCSJzU2Nyb2xsQm9keSI6ICJkYXRhVGFibGVzX3Njcm9sbEJvZHkiLCAJCSJzU2Nyb2xsRm9vdCI6ICJkYXRhVGFibGVzX3Njcm9sbEZvb3QiLCAJCSJzU2Nyb2xsRm9vdElubmVyIjogImRhdGFUYWJsZXNfc2Nyb2xsRm9vdElubmVyIiwgCQkgCQkvKiBNaXNjICovIAkJInNGb290ZXJUSCI6ICIiIAl9OyAJIAkvKiAJICogVmFyaWFibGU6IG9KVUlDbGFzc2VzIAkgKiBQdXJwb3NlOiAgU3RvcmFnZSBmb3IgdGhlIHZhcmlvdXMgY2xhc3NlcyB0aGF0IERhdGFUYWJsZXMgdXNlcyAtIGpRdWVyeSBVSSBzdWl0YWJsZSAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQgCSAqLyAJX29FeHQub0pVSUNsYXNzZXMgPSB7IAkJLyogVHdvIGJ1dHRvbnMgYnV0dG9ucyAqLyAJCSJzUGFnZVByZXZFbmFibGVkIjogImZnLWJ1dHRvbiB1aS1idXR0b24gdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItbGVmdCIsIAkJInNQYWdlUHJldkRpc2FibGVkIjogImZnLWJ1dHRvbiB1aS1idXR0b24gdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItbGVmdCB1aS1zdGF0ZS1kaXNhYmxlZCIsIAkJInNQYWdlTmV4dEVuYWJsZWQiOiAiZmctYnV0dG9uIHVpLWJ1dHRvbiB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1yaWdodCIsIAkJInNQYWdlTmV4dERpc2FibGVkIjogImZnLWJ1dHRvbiB1aS1idXR0b24gdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItcmlnaHQgdWktc3RhdGUtZGlzYWJsZWQiLCAJCSJzUGFnZUpVSU5leHQiOiAidWktaWNvbiB1aS1pY29uLWNpcmNsZS1hcnJvdy1lIiwgCQkic1BhZ2VKVUlQcmV2IjogInVpLWljb24gdWktaWNvbi1jaXJjbGUtYXJyb3ctdyIsIAkJIAkJLyogRnVsbCBudW1iZXJzIHBhZ2luZyBidXR0b25zICovIAkJInNQYWdlQnV0dG9uIjogImZnLWJ1dHRvbiB1aS1idXR0b24gdWktc3RhdGUtZGVmYXVsdCIsIAkJInNQYWdlQnV0dG9uQWN0aXZlIjogImZnLWJ1dHRvbiB1aS1idXR0b24gdWktc3RhdGUtZGVmYXVsdCB1aS1zdGF0ZS1kaXNhYmxlZCIsIAkJInNQYWdlQnV0dG9uU3RhdGljRGlzYWJsZWQiOiAiZmctYnV0dG9uIHVpLWJ1dHRvbiB1aS1zdGF0ZS1kZWZhdWx0IHVpLXN0YXRlLWRpc2FibGVkIiwgCQkic1BhZ2VGaXJzdCI6ICJmaXJzdCB1aS1jb3JuZXItdGwgdWktY29ybmVyLWJsIiwgCQkic1BhZ2VQcmV2aW91cyI6ICJwcmV2aW91cyIsIAkJInNQYWdlTmV4dCI6ICJuZXh0IiwgCQkic1BhZ2VMYXN0IjogImxhc3QgdWktY29ybmVyLXRyIHVpLWNvcm5lci1iciIsIAkJIAkJLyogU3RyaXBwaW5nIGNsYXNzZXMgKi8gCQkic1N0cmlwT2RkIjogIm9kZCIsIAkJInNTdHJpcEV2ZW4iOiAiZXZlbiIsIAkJIAkJLyogRW1wdHkgcm93ICovIAkJInNSb3dFbXB0eSI6ICJkYXRhVGFibGVzX2VtcHR5IiwgCQkgCQkvKiBGZWF0dXJlcyAqLyAJCSJzV3JhcHBlciI6ICJkYXRhVGFibGVzX3dyYXBwZXIiLCAJCSJzRmlsdGVyIjogImRhdGFUYWJsZXNfZmlsdGVyIiwgCQkic0luZm8iOiAiZGF0YVRhYmxlc19pbmZvIiwgCQkic1BhZ2luZyI6ICJkYXRhVGFibGVzX3BhZ2luYXRlIGZnLWJ1dHRvbnNldCB1aS1idXR0b25zZXQgZmctYnV0dG9uc2V0LW11bHRpICIrIAkJCSJ1aS1idXR0b25zZXQtbXVsdGkgcGFnaW5nXyIsIC8qIE5vdGUgdGhhdCB0aGUgdHlwZSBpcyBwb3N0Zml4ZWQgKi8gCQkic0xlbmd0aCI6ICJkYXRhVGFibGVzX2xlbmd0aCIsIAkJInNQcm9jZXNzaW5nIjogImRhdGFUYWJsZXNfcHJvY2Vzc2luZyIsIAkJIAkJLyogU29ydGluZyAqLyAJCSJzU29ydEFzYyI6ICJ1aS1zdGF0ZS1kZWZhdWx0IiwgCQkic1NvcnREZXNjIjogInVpLXN0YXRlLWRlZmF1bHQiLCAJCSJzU29ydGFibGUiOiAidWktc3RhdGUtZGVmYXVsdCIsIAkJInNTb3J0YWJsZUFzYyI6ICJ1aS1zdGF0ZS1kZWZhdWx0IiwgCQkic1NvcnRhYmxlRGVzYyI6ICJ1aS1zdGF0ZS1kZWZhdWx0IiwgCQkic1NvcnRhYmxlTm9uZSI6ICJ1aS1zdGF0ZS1kZWZhdWx0IiwgCQkic1NvcnRDb2x1bW4iOiAic29ydGluZ18iLCAvKiBOb3RlIHRoYXQgYW4gaW50IGlzIHBvc3RmaXhlZCBmb3IgdGhlIHNvcnRpbmcgb3JkZXIgKi8gCQkic1NvcnRKVUlBc2MiOiAiY3NzX3JpZ2h0IHVpLWljb24gdWktaWNvbi10cmlhbmdsZS0xLW4iLCAJCSJzU29ydEpVSURlc2MiOiAiY3NzX3JpZ2h0IHVpLWljb24gdWktaWNvbi10cmlhbmdsZS0xLXMiLCAJCSJzU29ydEpVSSI6ICJjc3NfcmlnaHQgdWktaWNvbiB1aS1pY29uLWNhcmF0LTItbi1zIiwgCQkic1NvcnRKVUlBc2NBbGxvd2VkIjogImNzc19yaWdodCB1aS1pY29uIHVpLWljb24tY2FyYXQtMS1uIiwgCQkic1NvcnRKVUlEZXNjQWxsb3dlZCI6ICJjc3NfcmlnaHQgdWktaWNvbiB1aS1pY29uLWNhcmF0LTEtcyIsIAkJInNTb3J0SlVJV3JhcHBlciI6ICJEYXRhVGFibGVzX3NvcnRfd3JhcHBlciIsIAkJIAkJLyogU2Nyb2xsaW5nICovIAkJInNTY3JvbGxXcmFwcGVyIjogImRhdGFUYWJsZXNfc2Nyb2xsIiwgCQkic1Njcm9sbEhlYWQiOiAiZGF0YVRhYmxlc19zY3JvbGxIZWFkIHVpLXN0YXRlLWRlZmF1bHQiLCAJCSJzU2Nyb2xsSGVhZElubmVyIjogImRhdGFUYWJsZXNfc2Nyb2xsSGVhZElubmVyIiwgCQkic1Njcm9sbEJvZHkiOiAiZGF0YVRhYmxlc19zY3JvbGxCb2R5IiwgCQkic1Njcm9sbEZvb3QiOiAiZGF0YVRhYmxlc19zY3JvbGxGb290IHVpLXN0YXRlLWRlZmF1bHQiLCAJCSJzU2Nyb2xsRm9vdElubmVyIjogImRhdGFUYWJsZXNfc2Nyb2xsRm9vdElubmVyIiwgCQkgCQkvKiBNaXNjICovIAkJInNGb290ZXJUSCI6ICJ1aS1zdGF0ZS1kZWZhdWx0IiAJfTsgCSAJLyogCSAqIFZhcmlhYmxlOiBvUGFnaW5hdGlvbiAJICogUHVycG9zZTogIENvbnRhaW5lciBmb3IgdGhlIHZhcmlvdXMgdHlwZSBvZiBwYWdpbmF0aW9uIHRoYXQgZGF0YVRhYmxlcyBzdXBwb3J0cyAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQgCSAqLyAJX29FeHQub1BhZ2luYXRpb24gPSB7IAkJLyogCQkgKiBWYXJpYWJsZTogdHdvX2J1dHRvbiAJCSAqIFB1cnBvc2U6ICBTdGFuZGFyZCB0d28gYnV0dG9uIChmb3J3YXJkL2JhY2spIHBhZ2luYXRpb24gCSAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQub1BhZ2luYXRpb24gCQkgKi8gCQkidHdvX2J1dHRvbiI6IHsgCQkJLyogCQkJICogRnVuY3Rpb246IG9QYWdpbmF0aW9uLnR3b19idXR0b24uZm5Jbml0IAkJCSAqIFB1cnBvc2U6ICBJbml0YWxpc2UgZG9tIGVsZW1lbnRzIHJlcXVpcmVkIGZvciBwYWdpbmF0aW9uIHdpdGggZm9yd2FyZC9iYWNrIGJ1dHRvbnMgb25seSAJCQkgKiBSZXR1cm5zOiAgLSAJIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJICAgICAqICAgICAgICAgICBub2RlOm5QYWdpbmcgLSB0aGUgRElWIHdoaWNoIGNvbnRhaW5zIHRoaXMgcGFnaW5hdGlvbiBjb250cm9sIAkJCSAqICAgICAgICAgICBmdW5jdGlvbjpmbkNhbGxiYWNrRHJhdyAtIGRyYXcgZnVuY3Rpb24gd2hpY2ggbXVzdCBiZSBjYWxsZWQgb24gdXBkYXRlIAkJCSAqLyAJCQkiZm5Jbml0IjogZnVuY3Rpb24gKCBvU2V0dGluZ3MsIG5QYWdpbmcsIGZuQ2FsbGJhY2tEcmF3ICkgCQkJeyAJCQkJdmFyIG5QcmV2aW91cywgbk5leHQsIG5QcmV2aW91c0lubmVyLCBuTmV4dElubmVyOyAJCQkJIAkJCQkvKiBTdG9yZSB0aGUgbmV4dCBhbmQgcHJldmlvdXMgZWxlbWVudHMgaW4gdGhlIG9TZXR0aW5ncyBvYmplY3QgYXMgdGhleSBjYW4gYmUgdmVyeSAJCQkJICogdXNmdWwgZm9yIGF1dG9tYXRpb24gLSBwYXJ0aWN1bGFybHkgdGVzdGluZyAJCQkJICovIAkJCQlpZiAoICFvU2V0dGluZ3MuYkpVSSApIAkJCQl7IAkJCQkJblByZXZpb3VzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTsgCQkJCQluTmV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7IAkJCQl9IAkJCQllbHNlIAkJCQl7IAkJCQkJblByZXZpb3VzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2EnICk7IAkJCQkJbk5leHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnYScgKTsgCQkJCQkgCQkJCQluTmV4dElubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOyAJCQkJCW5OZXh0SW5uZXIuY2xhc3NOYW1lID0gb1NldHRpbmdzLm9DbGFzc2VzLnNQYWdlSlVJTmV4dDsgCQkJCQluTmV4dC5hcHBlbmRDaGlsZCggbk5leHRJbm5lciApOyAJCQkJCSAJCQkJCW5QcmV2aW91c0lubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOyAJCQkJCW5QcmV2aW91c0lubmVyLmNsYXNzTmFtZSA9IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zUGFnZUpVSVByZXY7IAkJCQkJblByZXZpb3VzLmFwcGVuZENoaWxkKCBuUHJldmlvdXNJbm5lciApOyAJCQkJfSAJCQkJIAkJCQluUHJldmlvdXMuY2xhc3NOYW1lID0gb1NldHRpbmdzLm9DbGFzc2VzLnNQYWdlUHJldkRpc2FibGVkOyAJCQkJbk5leHQuY2xhc3NOYW1lID0gb1NldHRpbmdzLm9DbGFzc2VzLnNQYWdlTmV4dERpc2FibGVkOyAJCQkJIAkJCQluUHJldmlvdXMudGl0bGUgPSBvU2V0dGluZ3Mub0xhbmd1YWdlLm9QYWdpbmF0ZS5zUHJldmlvdXM7IAkJCQluTmV4dC50aXRsZSA9IG9TZXR0aW5ncy5vTGFuZ3VhZ2Uub1BhZ2luYXRlLnNOZXh0OyAJCQkJIAkJCQluUGFnaW5nLmFwcGVuZENoaWxkKCBuUHJldmlvdXMgKTsgCQkJCW5QYWdpbmcuYXBwZW5kQ2hpbGQoIG5OZXh0ICk7IAkJCQkgCQkJCSQoblByZXZpb3VzKS5jbGljayggZnVuY3Rpb24oKSB7IAkJCQkJaWYgKCBvU2V0dGluZ3Mub0FwaS5fZm5QYWdlQ2hhbmdlKCBvU2V0dGluZ3MsICJwcmV2aW91cyIgKSApIAkJCQkJeyAJCQkJCQkvKiBPbmx5IGRyYXcgd2hlbiB0aGUgcGFnZSBoYXMgYWN0dWFsbHkgY2hhbmdlZCAqLyAJCQkJCQlmbkNhbGxiYWNrRHJhdyggb1NldHRpbmdzICk7IAkJCQkJfSAJCQkJfSApOyAJCQkJIAkJCQkkKG5OZXh0KS5jbGljayggZnVuY3Rpb24oKSB7IAkJCQkJaWYgKCBvU2V0dGluZ3Mub0FwaS5fZm5QYWdlQ2hhbmdlKCBvU2V0dGluZ3MsICJuZXh0IiApICkgCQkJCQl7IAkJCQkJCWZuQ2FsbGJhY2tEcmF3KCBvU2V0dGluZ3MgKTsgCQkJCQl9IAkJCQl9ICk7IAkJCQkgCQkJCS8qIFRha2UgdGhlIGJydXRhbCBhcHByb2FjaCB0byBjYW5jZWxsaW5nIHRleHQgc2VsZWN0aW9uICovIAkJCQkkKG5QcmV2aW91cykuYmluZCggJ3NlbGVjdHN0YXJ0JywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH0gKTsgCQkJCSQobk5leHQpLmJpbmQoICdzZWxlY3RzdGFydCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9ICk7IAkJCQkgCQkJCS8qIElEIHRoZSBmaXJzdCBlbGVtZW50cyBvbmx5ICovIAkJCQlpZiAoIG9TZXR0aW5ncy5zVGFibGVJZCAhPT0gJycgJiYgdHlwZW9mIG9TZXR0aW5ncy5hYW5GZWF0dXJlcy5wID09ICJ1bmRlZmluZWQiICkgCQkJCXsgCQkJCQluUGFnaW5nLnNldEF0dHJpYnV0ZSggJ2lkJywgb1NldHRpbmdzLnNUYWJsZUlkKydfcGFnaW5hdGUnICk7IAkJCQkJblByZXZpb3VzLnNldEF0dHJpYnV0ZSggJ2lkJywgb1NldHRpbmdzLnNUYWJsZUlkKydfcHJldmlvdXMnICk7IAkJCQkJbk5leHQuc2V0QXR0cmlidXRlKCAnaWQnLCBvU2V0dGluZ3Muc1RhYmxlSWQrJ19uZXh0JyApOyAJCQkJfSAJCQl9LCAJCQkgCQkJLyogCQkJICogRnVuY3Rpb246IG9QYWdpbmF0aW9uLnR3b19idXR0b24uZm5VcGRhdGUgCQkJICogUHVycG9zZTogIFVwZGF0ZSB0aGUgdHdvIGJ1dHRvbiBwYWdpbmF0aW9uIGF0IHRoZSBlbmQgb2YgdGhlIGRyYXcgCQkJICogUmV0dXJuczogIC0gCSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkJICogICAgICAgICAgIGZ1bmN0aW9uOmZuQ2FsbGJhY2tEcmF3IC0gZHJhdyBmdW5jdGlvbiB0byBjYWxsIG9uIHBhZ2UgY2hhbmdlIAkJCSAqLyAJCQkiZm5VcGRhdGUiOiBmdW5jdGlvbiAoIG9TZXR0aW5ncywgZm5DYWxsYmFja0RyYXcgKSAJCQl7IAkJCQlpZiAoICFvU2V0dGluZ3MuYWFuRmVhdHVyZXMucCApIAkJCQl7IAkJCQkJcmV0dXJuOyAJCQkJfSAJCQkJIAkJCQkvKiBMb29wIG92ZXIgZWFjaCBpbnN0YW5jZSBvZiB0aGUgcGFnZXIgKi8gCQkJCXZhciBhbiA9IG9TZXR0aW5ncy5hYW5GZWF0dXJlcy5wOyAJCQkJZm9yICggdmFyIGk9MCwgaUxlbj1hbi5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJeyAJCQkJCWlmICggYW5baV0uY2hpbGROb2Rlcy5sZW5ndGggIT09IDAgKSAJCQkJCXsgCQkJCQkJYW5baV0uY2hpbGROb2Rlc1swXS5jbGFzc05hbWUgPSAgCQkJCQkJCSggb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0ID09PSAwICkgPyAgCQkJCQkJCW9TZXR0aW5ncy5vQ2xhc3Nlcy5zUGFnZVByZXZEaXNhYmxlZCA6IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zUGFnZVByZXZFbmFibGVkOyAJCQkJCQkgCQkJCQkJYW5baV0uY2hpbGROb2Rlc1sxXS5jbGFzc05hbWUgPSAgCQkJCQkJCSggb1NldHRpbmdzLmZuRGlzcGxheUVuZCgpID09IG9TZXR0aW5ncy5mblJlY29yZHNEaXNwbGF5KCkgKSA/ICAJCQkJCQkJb1NldHRpbmdzLm9DbGFzc2VzLnNQYWdlTmV4dERpc2FibGVkIDogb1NldHRpbmdzLm9DbGFzc2VzLnNQYWdlTmV4dEVuYWJsZWQ7IAkJCQkJfSAJCQkJfSAJCQl9IAkJfSwgCQkgCQkgCQkvKiAJCSAqIFZhcmlhYmxlOiBpRnVsbE51bWJlcnNTaG93UGFnZXMgCQkgKiBQdXJwb3NlOiAgQ2hhbmdlIHRoZSBudW1iZXIgb2YgcGFnZXMgd2hpY2ggY2FuIGJlIHNlZW4gCSAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQub1BhZ2luYXRpb24gCQkgKi8gCQkiaUZ1bGxOdW1iZXJzU2hvd1BhZ2VzIjogNSwgCQkgCQkvKiAJCSAqIFZhcmlhYmxlOiBmdWxsX251bWJlcnMgCQkgKiBQdXJwb3NlOiAgRnVsbCBudW1iZXJzIHBhZ2luYXRpb24gCSAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQub1BhZ2luYXRpb24gCQkgKi8gCQkiZnVsbF9udW1iZXJzIjogeyAJCQkvKiAJCQkgKiBGdW5jdGlvbjogb1BhZ2luYXRpb24uZnVsbF9udW1iZXJzLmZuSW5pdCAJCQkgKiBQdXJwb3NlOiAgSW5pdGFsaXNlIGRvbSBlbGVtZW50cyByZXF1aXJlZCBmb3IgcGFnaW5hdGlvbiB3aXRoIGEgbGlzdCBvZiB0aGUgcGFnZXMgCQkJICogUmV0dXJuczogIC0gCSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCSAgICAgKiAgICAgICAgICAgbm9kZTpuUGFnaW5nIC0gdGhlIERJViB3aGljaCBjb250YWlucyB0aGlzIHBhZ2luYXRpb24gY29udHJvbCAJCQkgKiAgICAgICAgICAgZnVuY3Rpb246Zm5DYWxsYmFja0RyYXcgLSBkcmF3IGZ1bmN0aW9uIHdoaWNoIG11c3QgYmUgY2FsbGVkIG9uIHVwZGF0ZSAJCQkgKi8gCQkJImZuSW5pdCI6IGZ1bmN0aW9uICggb1NldHRpbmdzLCBuUGFnaW5nLCBmbkNhbGxiYWNrRHJhdyApIAkJCXsgCQkJCXZhciBuRmlyc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc3BhbicgKTsgCQkJCXZhciBuUHJldmlvdXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc3BhbicgKTsgCQkJCXZhciBuTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdzcGFuJyApOyAJCQkJdmFyIG5OZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3NwYW4nICk7IAkJCQl2YXIgbkxhc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc3BhbicgKTsgCQkJCSAJCQkJbkZpcnN0LmlubmVySFRNTCA9IG9TZXR0aW5ncy5vTGFuZ3VhZ2Uub1BhZ2luYXRlLnNGaXJzdDsgCQkJCW5QcmV2aW91cy5pbm5lckhUTUwgPSBvU2V0dGluZ3Mub0xhbmd1YWdlLm9QYWdpbmF0ZS5zUHJldmlvdXM7IAkJCQluTmV4dC5pbm5lckhUTUwgPSBvU2V0dGluZ3Mub0xhbmd1YWdlLm9QYWdpbmF0ZS5zTmV4dDsgCQkJCW5MYXN0LmlubmVySFRNTCA9IG9TZXR0aW5ncy5vTGFuZ3VhZ2Uub1BhZ2luYXRlLnNMYXN0OyAJCQkJIAkJCQl2YXIgb0NsYXNzZXMgPSBvU2V0dGluZ3Mub0NsYXNzZXM7IAkJCQluRmlyc3QuY2xhc3NOYW1lID0gb0NsYXNzZXMuc1BhZ2VCdXR0b24rIiAiK29DbGFzc2VzLnNQYWdlRmlyc3Q7IAkJCQluUHJldmlvdXMuY2xhc3NOYW1lID0gb0NsYXNzZXMuc1BhZ2VCdXR0b24rIiAiK29DbGFzc2VzLnNQYWdlUHJldmlvdXM7IAkJCQluTmV4dC5jbGFzc05hbWU9IG9DbGFzc2VzLnNQYWdlQnV0dG9uKyIgIitvQ2xhc3Nlcy5zUGFnZU5leHQ7IAkJCQluTGFzdC5jbGFzc05hbWUgPSBvQ2xhc3Nlcy5zUGFnZUJ1dHRvbisiICIrb0NsYXNzZXMuc1BhZ2VMYXN0OyAJCQkJIAkJCQluUGFnaW5nLmFwcGVuZENoaWxkKCBuRmlyc3QgKTsgCQkJCW5QYWdpbmcuYXBwZW5kQ2hpbGQoIG5QcmV2aW91cyApOyAJCQkJblBhZ2luZy5hcHBlbmRDaGlsZCggbkxpc3QgKTsgCQkJCW5QYWdpbmcuYXBwZW5kQ2hpbGQoIG5OZXh0ICk7IAkJCQluUGFnaW5nLmFwcGVuZENoaWxkKCBuTGFzdCApOyAJCQkJIAkJCQkkKG5GaXJzdCkuY2xpY2soIGZ1bmN0aW9uICgpIHsgCQkJCQlpZiAoIG9TZXR0aW5ncy5vQXBpLl9mblBhZ2VDaGFuZ2UoIG9TZXR0aW5ncywgImZpcnN0IiApICkgCQkJCQl7IAkJCQkJCWZuQ2FsbGJhY2tEcmF3KCBvU2V0dGluZ3MgKTsgCQkJCQl9IAkJCQl9ICk7IAkJCQkgCQkJCSQoblByZXZpb3VzKS5jbGljayggZnVuY3Rpb24oKSB7IAkJCQkJaWYgKCBvU2V0dGluZ3Mub0FwaS5fZm5QYWdlQ2hhbmdlKCBvU2V0dGluZ3MsICJwcmV2aW91cyIgKSApIAkJCQkJeyAJCQkJCQlmbkNhbGxiYWNrRHJhdyggb1NldHRpbmdzICk7IAkJCQkJfSAJCQkJfSApOyAJCQkJIAkJCQkkKG5OZXh0KS5jbGljayggZnVuY3Rpb24oKSB7IAkJCQkJaWYgKCBvU2V0dGluZ3Mub0FwaS5fZm5QYWdlQ2hhbmdlKCBvU2V0dGluZ3MsICJuZXh0IiApICkgCQkJCQl7IAkJCQkJCWZuQ2FsbGJhY2tEcmF3KCBvU2V0dGluZ3MgKTsgCQkJCQl9IAkJCQl9ICk7IAkJCQkgCQkJCSQobkxhc3QpLmNsaWNrKCBmdW5jdGlvbigpIHsgCQkJCQlpZiAoIG9TZXR0aW5ncy5vQXBpLl9mblBhZ2VDaGFuZ2UoIG9TZXR0aW5ncywgImxhc3QiICkgKSAJCQkJCXsgCQkJCQkJZm5DYWxsYmFja0RyYXcoIG9TZXR0aW5ncyApOyAJCQkJCX0gCQkJCX0gKTsgCQkJCSAJCQkJLyogVGFrZSB0aGUgYnJ1dGFsIGFwcHJvYWNoIHRvIGNhbmNlbGxpbmcgdGV4dCBzZWxlY3Rpb24gKi8gCQkJCSQoJ3NwYW4nLCBuUGFnaW5nKSAJCQkJCS5iaW5kKCAnbW91c2Vkb3duJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH0gKSAJCQkJCS5iaW5kKCAnc2VsZWN0c3RhcnQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfSApOyAJCQkJIAkJCQkvKiBJRCB0aGUgZmlyc3QgZWxlbWVudHMgb25seSAqLyAJCQkJaWYgKCBvU2V0dGluZ3Muc1RhYmxlSWQgIT09ICcnICYmIHR5cGVvZiBvU2V0dGluZ3MuYWFuRmVhdHVyZXMucCA9PSAidW5kZWZpbmVkIiApIAkJCQl7IAkJCQkJblBhZ2luZy5zZXRBdHRyaWJ1dGUoICdpZCcsIG9TZXR0aW5ncy5zVGFibGVJZCsnX3BhZ2luYXRlJyApOyAJCQkJCW5GaXJzdC5zZXRBdHRyaWJ1dGUoICdpZCcsIG9TZXR0aW5ncy5zVGFibGVJZCsnX2ZpcnN0JyApOyAJCQkJCW5QcmV2aW91cy5zZXRBdHRyaWJ1dGUoICdpZCcsIG9TZXR0aW5ncy5zVGFibGVJZCsnX3ByZXZpb3VzJyApOyAJCQkJCW5OZXh0LnNldEF0dHJpYnV0ZSggJ2lkJywgb1NldHRpbmdzLnNUYWJsZUlkKydfbmV4dCcgKTsgCQkJCQluTGFzdC5zZXRBdHRyaWJ1dGUoICdpZCcsIG9TZXR0aW5ncy5zVGFibGVJZCsnX2xhc3QnICk7IAkJCQl9IAkJCX0sIAkJCSAJCQkvKiAJCQkgKiBGdW5jdGlvbjogb1BhZ2luYXRpb24uZnVsbF9udW1iZXJzLmZuVXBkYXRlIAkJCSAqIFB1cnBvc2U6ICBVcGRhdGUgdGhlIGxpc3Qgb2YgcGFnZSBidXR0b25zIHNob3dzIAkJCSAqIFJldHVybnM6ICAtIAkgCQkgKiBJbnB1dHM6ICAgb2JqZWN0Om9TZXR0aW5ncyAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJCSAqICAgICAgICAgICBmdW5jdGlvbjpmbkNhbGxiYWNrRHJhdyAtIGRyYXcgZnVuY3Rpb24gdG8gY2FsbCBvbiBwYWdlIGNoYW5nZSAJCQkgKi8gCQkJImZuVXBkYXRlIjogZnVuY3Rpb24gKCBvU2V0dGluZ3MsIGZuQ2FsbGJhY2tEcmF3ICkgCQkJeyAJCQkJaWYgKCAhb1NldHRpbmdzLmFhbkZlYXR1cmVzLnAgKSAJCQkJeyAJCQkJCXJldHVybjsgCQkJCX0gCQkJCSAJCQkJdmFyIGlQYWdlQ291bnQgPSBfb0V4dC5vUGFnaW5hdGlvbi5pRnVsbE51bWJlcnNTaG93UGFnZXM7IAkJCQl2YXIgaVBhZ2VDb3VudEhhbGYgPSBNYXRoLmZsb29yKGlQYWdlQ291bnQgLyAyKTsgCQkJCXZhciBpUGFnZXMgPSBNYXRoLmNlaWwoKG9TZXR0aW5ncy5mblJlY29yZHNEaXNwbGF5KCkpIC8gb1NldHRpbmdzLl9pRGlzcGxheUxlbmd0aCk7IAkJCQl2YXIgaUN1cnJlbnRQYWdlID0gTWF0aC5jZWlsKG9TZXR0aW5ncy5faURpc3BsYXlTdGFydCAvIG9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGgpICsgMTsgCQkJCXZhciBzTGlzdCA9ICIiOyAJCQkJdmFyIGlTdGFydEJ1dHRvbiwgaUVuZEJ1dHRvbiwgaSwgaUxlbjsgCQkJCXZhciBvQ2xhc3NlcyA9IG9TZXR0aW5ncy5vQ2xhc3NlczsgCQkJCSAJCQkJLyogUGFnZXMgY2FsY3VsYXRpb24gKi8gCQkJCWlmIChpUGFnZXMgPCBpUGFnZUNvdW50KSAJCQkJeyAJCQkJCWlTdGFydEJ1dHRvbiA9IDE7IAkJCQkJaUVuZEJ1dHRvbiA9IGlQYWdlczsgCQkJCX0gCQkJCWVsc2UgCQkJCXsgCQkJCQlpZiAoaUN1cnJlbnRQYWdlIDw9IGlQYWdlQ291bnRIYWxmKSAJCQkJCXsgCQkJCQkJaVN0YXJ0QnV0dG9uID0gMTsgCQkJCQkJaUVuZEJ1dHRvbiA9IGlQYWdlQ291bnQ7IAkJCQkJfSAJCQkJCWVsc2UgCQkJCQl7IAkJCQkJCWlmIChpQ3VycmVudFBhZ2UgPj0gKGlQYWdlcyAtIGlQYWdlQ291bnRIYWxmKSkgCQkJCQkJeyAJCQkJCQkJaVN0YXJ0QnV0dG9uID0gaVBhZ2VzIC0gaVBhZ2VDb3VudCArIDE7IAkJCQkJCQlpRW5kQnV0dG9uID0gaVBhZ2VzOyAJCQkJCQl9IAkJCQkJCWVsc2UgCQkJCQkJeyAJCQkJCQkJaVN0YXJ0QnV0dG9uID0gaUN1cnJlbnRQYWdlIC0gTWF0aC5jZWlsKGlQYWdlQ291bnQgLyAyKSArIDE7IAkJCQkJCQlpRW5kQnV0dG9uID0gaVN0YXJ0QnV0dG9uICsgaVBhZ2VDb3VudCAtIDE7IAkJCQkJCX0gCQkJCQl9IAkJCQl9IAkJCQkgCQkJCS8qIEJ1aWxkIHRoZSBkeW5hbWljIGxpc3QgKi8gCQkJCWZvciAoIGk9aVN0YXJ0QnV0dG9uIDsgaTw9aUVuZEJ1dHRvbiA7IGkrKyApIAkJCQl7IAkJCQkJaWYgKCBpQ3VycmVudFBhZ2UgIT0gaSApIAkJCQkJeyAJCQkJCQlzTGlzdCArPSAnPHNwYW4gY2xhc3M9Iicrb0NsYXNzZXMuc1BhZ2VCdXR0b24rJyI+JytpKyc8L3NwYW4+JzsgCQkJCQl9IAkJCQkJZWxzZSAJCQkJCXsgCQkJCQkJc0xpc3QgKz0gJzxzcGFuIGNsYXNzPSInK29DbGFzc2VzLnNQYWdlQnV0dG9uQWN0aXZlKyciPicraSsnPC9zcGFuPic7IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQkvKiBMb29wIG92ZXIgZWFjaCBpbnN0YW5jZSBvZiB0aGUgcGFnZXIgKi8gCQkJCXZhciBhbiA9IG9TZXR0aW5ncy5hYW5GZWF0dXJlcy5wOyAJCQkJdmFyIGFuQnV0dG9ucywgYW5TdGF0aWMsIG5QYWdpbmF0ZUxpc3Q7IAkJCQl2YXIgZm5DbGljayA9IGZ1bmN0aW9uKCkgeyAJCQkJCS8qIFVzZSB0aGUgaW5mb3JtYXRpb24gaW4gdGhlIGVsZW1lbnQgdG8ganVtcCB0byB0aGUgcmVxdWlyZWQgcGFnZSAqLyAJCQkJCXZhciBpVGFyZ2V0ID0gKHRoaXMuaW5uZXJIVE1MICogMSkgLSAxOyAJCQkJCW9TZXR0aW5ncy5faURpc3BsYXlTdGFydCA9IGlUYXJnZXQgKiBvU2V0dGluZ3MuX2lEaXNwbGF5TGVuZ3RoOyAJCQkJCWZuQ2FsbGJhY2tEcmF3KCBvU2V0dGluZ3MgKTsgCQkJCQlyZXR1cm4gZmFsc2U7IAkJCQl9OyAJCQkJdmFyIGZuRmFsc2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTsgCQkJCSAJCQkJZm9yICggaT0wLCBpTGVuPWFuLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQl7IAkJCQkJaWYgKCBhbltpXS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMCApIAkJCQkJeyAJCQkJCQljb250aW51ZTsgCQkJCQl9IAkJCQkJIAkJCQkJLyogQnVpbGQgdXAgdGhlIGR5bmFtaWMgbGlzdCBmb3JzdCAtIGh0bWwgYW5kIGxpc3RlbmVycyAqLyAJCQkJCXZhciBxalBhZ2luYXRlTGlzdCA9ICQoJ3NwYW46ZXEoMiknLCBhbltpXSk7IAkJCQkJcWpQYWdpbmF0ZUxpc3QuaHRtbCggc0xpc3QgKTsgCQkJCQkkKCdzcGFuJywgcWpQYWdpbmF0ZUxpc3QpLmNsaWNrKCBmbkNsaWNrICkuYmluZCggJ21vdXNlZG93bicsIGZuRmFsc2UgKSAJCQkJCQkuYmluZCggJ3NlbGVjdHN0YXJ0JywgZm5GYWxzZSApOyAJCQkJCSAJCQkJCS8qIFVwZGF0ZSB0aGUgJ3ByZW1hbmVudCBib3R0b24ncyBjbGFzc2VzICovIAkJCQkJYW5CdXR0b25zID0gYW5baV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NwYW4nKTsgCQkJCQlhblN0YXRpYyA9IFsgCQkJCQkJYW5CdXR0b25zWzBdLCBhbkJ1dHRvbnNbMV0sICAJCQkJCQlhbkJ1dHRvbnNbYW5CdXR0b25zLmxlbmd0aC0yXSwgYW5CdXR0b25zW2FuQnV0dG9ucy5sZW5ndGgtMV0gCQkJCQldOyAJCQkJCSQoYW5TdGF0aWMpLnJlbW92ZUNsYXNzKCBvQ2xhc3Nlcy5zUGFnZUJ1dHRvbisiICIrb0NsYXNzZXMuc1BhZ2VCdXR0b25BY3RpdmUrIiAiK29DbGFzc2VzLnNQYWdlQnV0dG9uU3RhdGljRGlzYWJsZWQgKTsgCQkJCQlpZiAoIGlDdXJyZW50UGFnZSA9PSAxICkgCQkJCQl7IAkJCQkJCWFuU3RhdGljWzBdLmNsYXNzTmFtZSArPSAiICIrb0NsYXNzZXMuc1BhZ2VCdXR0b25TdGF0aWNEaXNhYmxlZDsgCQkJCQkJYW5TdGF0aWNbMV0uY2xhc3NOYW1lICs9ICIgIitvQ2xhc3Nlcy5zUGFnZUJ1dHRvblN0YXRpY0Rpc2FibGVkOyAJCQkJCX0gCQkJCQllbHNlIAkJCQkJeyAJCQkJCQlhblN0YXRpY1swXS5jbGFzc05hbWUgKz0gIiAiK29DbGFzc2VzLnNQYWdlQnV0dG9uOyAJCQkJCQlhblN0YXRpY1sxXS5jbGFzc05hbWUgKz0gIiAiK29DbGFzc2VzLnNQYWdlQnV0dG9uOyAJCQkJCX0gCQkJCQkgCQkJCQlpZiAoIGlQYWdlcyA9PT0gMCB8fCBpQ3VycmVudFBhZ2UgPT0gaVBhZ2VzIHx8IG9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGggPT0gLTEgKSAJCQkJCXsgCQkJCQkJYW5TdGF0aWNbMl0uY2xhc3NOYW1lICs9ICIgIitvQ2xhc3Nlcy5zUGFnZUJ1dHRvblN0YXRpY0Rpc2FibGVkOyAJCQkJCQlhblN0YXRpY1szXS5jbGFzc05hbWUgKz0gIiAiK29DbGFzc2VzLnNQYWdlQnV0dG9uU3RhdGljRGlzYWJsZWQ7IAkJCQkJfSAJCQkJCWVsc2UgCQkJCQl7IAkJCQkJCWFuU3RhdGljWzJdLmNsYXNzTmFtZSArPSAiICIrb0NsYXNzZXMuc1BhZ2VCdXR0b247IAkJCQkJCWFuU3RhdGljWzNdLmNsYXNzTmFtZSArPSAiICIrb0NsYXNzZXMuc1BhZ2VCdXR0b247IAkJCQkJfSAJCQkJfSAJCQl9IAkJfSAJfTsgCSAJLyogCSAqIFZhcmlhYmxlOiBvU29ydCAJICogUHVycG9zZTogIFdyYXBwZXIgZm9yIHRoZSBzb3J0aW5nIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIGluIERhdGFUYWJsZXMgCSAqIFNjb3BlOiAgICBqUXVlcnkuZm4uZGF0YVRhYmxlRXh0IAkgKiBOb3RlczogICAgVGhlIGZ1bmN0aW9ucyBwcm92aWRlZCBpbiB0aGlzIG9iamVjdCBhcmUgYmFzaWNhbGx5IHN0YW5kYXJkIGphdmFzY3JpcHQgc29ydCAJICogICBmdW5jdGlvbnMgLSB0aGV5IGV4cGVjdCB0d28gaW5wdXRzIHdoaWNoIHRoZXkgdGhlbiBjb21wYXJlIGFuZCB0aGVuIHJldHVybiBhIHByaW9yaXR5IAkgKiAgIHJlc3VsdC4gRm9yIGVhY2ggc29ydCBtZXRob2QgYWRkZWQsIHR3byBmdW5jdGlvbnMgbmVlZCB0byBiZSBkZWZpbmVkLCBhbiBhc2NlbmRpbmcgc29ydCBhbmQgCSAqICAgYSBkZXNjZW5kaW5nIHNvcnQuIAkgKi8gCV9vRXh0Lm9Tb3J0ID0geyAJCS8qIAkJICogdGV4dCBzb3J0aW5nIAkJICovIAkJInN0cmluZy1hc2MiOiBmdW5jdGlvbiAoIGEsIGIgKSAJCXsgCQkJdmFyIHggPSBhLnRvTG93ZXJDYXNlKCk7IAkJCXZhciB5ID0gYi50b0xvd2VyQ2FzZSgpOyAJCQlyZXR1cm4gKCh4IDwgeSkgPyAtMSA6ICgoeCA+IHkpID8gMSA6IDApKTsgCQl9LCAJCSAJCSJzdHJpbmctZGVzYyI6IGZ1bmN0aW9uICggYSwgYiApIAkJeyAJCQl2YXIgeCA9IGEudG9Mb3dlckNhc2UoKTsgCQkJdmFyIHkgPSBiLnRvTG93ZXJDYXNlKCk7IAkJCXJldHVybiAoKHggPCB5KSA/IDEgOiAoKHggPiB5KSA/IC0xIDogMCkpOyAJCX0sIAkJIAkJIAkJLyogCQkgKiBodG1sIHNvcnRpbmcgKGlnbm9yZSBodG1sIHRhZ3MpIAkJICovIAkJImh0bWwtYXNjIjogZnVuY3Rpb24gKCBhLCBiICkgCQl7IAkJCXZhciB4ID0gYS5yZXBsYWNlKCAvPC4qPz4vZywgIiIgKS50b0xvd2VyQ2FzZSgpOyAJCQl2YXIgeSA9IGIucmVwbGFjZSggLzwuKj8+L2csICIiICkudG9Mb3dlckNhc2UoKTsgCQkJcmV0dXJuICgoeCA8IHkpID8gLTEgOiAoKHggPiB5KSA/IDEgOiAwKSk7IAkJfSwgCQkgCQkiaHRtbC1kZXNjIjogZnVuY3Rpb24gKCBhLCBiICkgCQl7IAkJCXZhciB4ID0gYS5yZXBsYWNlKCAvPC4qPz4vZywgIiIgKS50b0xvd2VyQ2FzZSgpOyAJCQl2YXIgeSA9IGIucmVwbGFjZSggLzwuKj8+L2csICIiICkudG9Mb3dlckNhc2UoKTsgCQkJcmV0dXJuICgoeCA8IHkpID8gMSA6ICgoeCA+IHkpID8gLTEgOiAwKSk7IAkJfSwgCQkgCQkgCQkvKiAJCSAqIGRhdGUgc29ydGluZyAJCSAqLyAJCSJkYXRlLWFzYyI6IGZ1bmN0aW9uICggYSwgYiApIAkJeyAJCQl2YXIgeCA9IERhdGUucGFyc2UoIGEgKTsgCQkJdmFyIHkgPSBEYXRlLnBhcnNlKCBiICk7IAkJCSAJCQlpZiAoIGlzTmFOKHgpIHx8IHg9PT0iIiApIAkJCXsgICAgIAkJeCA9IERhdGUucGFyc2UoICIwMS8wMS8xOTcwIDAwOjAwOjAwIiApOyAJCQl9IAkJCWlmICggaXNOYU4oeSkgfHwgeT09PSIiICkgCQkJeyAJCQkJeSA9CURhdGUucGFyc2UoICIwMS8wMS8xOTcwIDAwOjAwOjAwIiApOyAJCQl9IAkJCSAJCQlyZXR1cm4geCAtIHk7IAkJfSwgCQkgCQkiZGF0ZS1kZXNjIjogZnVuY3Rpb24gKCBhLCBiICkgCQl7IAkJCXZhciB4ID0gRGF0ZS5wYXJzZSggYSApOyAJCQl2YXIgeSA9IERhdGUucGFyc2UoIGIgKTsgCQkJIAkJCWlmICggaXNOYU4oeCkgfHwgeD09PSIiICkgCQkJeyAgICAgCQl4ID0gRGF0ZS5wYXJzZSggIjAxLzAxLzE5NzAgMDA6MDA6MDAiICk7IAkJCX0gCQkJaWYgKCBpc05hTih5KSB8fCB5PT09IiIgKSAJCQl7IAkJCQl5ID0JRGF0ZS5wYXJzZSggIjAxLzAxLzE5NzAgMDA6MDA6MDAiICk7IAkJCX0gCQkJIAkJCXJldHVybiB5IC0geDsgCQl9LCAJCSAJCSAJCS8qIAkJICogbnVtZXJpY2FsIHNvcnRpbmcgCQkgKi8gCQkibnVtZXJpYy1hc2MiOiBmdW5jdGlvbiAoIGEsIGIgKSAJCXsgCQkJdmFyIHggPSAoYT09Ii0iIHx8IGE9PT0iIikgPyAwIDogYSoxOyAJCQl2YXIgeSA9IChiPT0iLSIgfHwgYj09PSIiKSA/IDAgOiBiKjE7IAkJCXJldHVybiB4IC0geTsgCQl9LCAJCSAJCSJudW1lcmljLWRlc2MiOiBmdW5jdGlvbiAoIGEsIGIgKSAJCXsgCQkJdmFyIHggPSAoYT09Ii0iIHx8IGE9PT0iIikgPyAwIDogYSoxOyAJCQl2YXIgeSA9IChiPT0iLSIgfHwgYj09PSIiKSA/IDAgOiBiKjE7IAkJCXJldHVybiB5IC0geDsgCQl9IAl9OyAJIAkgCS8qIAkgKiBWYXJpYWJsZTogYVR5cGVzIAkgKiBQdXJwb3NlOiAgQ29udGFpbmVyIGZvciB0aGUgdmFyaW91cyB0eXBlIG9mIHR5cGUgZGV0ZWN0aW9uIHRoYXQgZGF0YVRhYmxlcyBzdXBwb3J0cyAJICogU2NvcGU6ICAgIGpRdWVyeS5mbi5kYXRhVGFibGVFeHQgCSAqIE5vdGVzOiAgICBUaGUgZnVuY3Rpb25zIGluIHRoaXMgYXJyYXkgYXJlIGV4cGVjdGVkIHRvIHBhcnNlIGEgc3RyaW5nIHRvIHNlZSBpZiBpdCBpcyBhIGRhdGEgCSAqICAgdHlwZSB0aGF0IGl0IHJlY29nbmlzZXMuIElmIHNvIHRoZW4gdGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gdGhlIG5hbWUgb2YgdGhlIHR5cGUgKGEgCSAqICAgY29ycmVzcG9uZGluZyBzb3J0IGZ1bmN0aW9uIHNob3VsZCBiZSBkZWZpbmVkISksIGlmIHRoZSB0eXBlIGlzIG5vdCByZWNvZ25pc2VkIHRoZW4gdGhlIAkgKiAgIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gbnVsbCBzdWNoIHRoYXQgdGhlIHBhcnNlciBhbmQgbW92ZSBvbiB0byBjaGVjayB0aGUgbmV4dCB0eXBlLiAJICogICBOb3RlIHRoYXQgb3JkZXJpbmcgaXMgaW1wb3J0YW50IGluIHRoaXMgYXJyYXkgLSB0aGUgZnVuY3Rpb25zIGFyZSBwcm9jZXNzZWQgbGluZWFybHksIAkgKiAgIHN0YXJ0aW5nIGF0IGluZGV4IDAuIAkgKiAgIE5vdGUgdGhhdCB0aGUgaW5wdXQgZm9yIHRoZXNlIGZ1bmN0aW9ucyBpcyBhbHdheXMgYSBzdHJpbmchIEl0IGNhbm5vdCBiZSBhbnkgb3RoZXIgZGF0YSAJICogICB0eXBlIAkgKi8gCV9vRXh0LmFUeXBlcyA9IFsgCQkvKiAJCSAqIEZ1bmN0aW9uOiAtIAkJICogUHVycG9zZTogIENoZWNrIHRvIHNlZSBpZiBhIHN0cmluZyBpcyBudW1lcmljIAkJICogUmV0dXJuczogIHN0cmluZzonbnVtZXJpYycgb3IgbnVsbCAJCSAqIElucHV0czogICBzdHJpbmc6c1RleHQgLSBzdHJpbmcgdG8gY2hlY2sgCQkgKi8gCQlmdW5jdGlvbiAoIHNEYXRhICkgCQl7IAkJCS8qIEFsbG93IHplcm8gbGVuZ3RoIHN0cmluZ3MgYXMgYSBudW1iZXIgKi8gCQkJaWYgKCBzRGF0YS5sZW5ndGggPT09IDAgKSAJCQl7IAkJCQlyZXR1cm4gJ251bWVyaWMnOyAJCQl9IAkJCSAJCQl2YXIgc1ZhbGlkRmlyc3RDaGFycyA9ICIwMTIzNDU2Nzg5LSI7IAkJCXZhciBzVmFsaWRDaGFycyA9ICIwMTIzNDU2Nzg5LiI7IAkJCXZhciBDaGFyOyAJCQl2YXIgYkRlY2ltYWwgPSBmYWxzZTsgCQkJIAkJCS8qIENoZWNrIGZvciBhIHZhbGlkIGZpcnN0IGNoYXIgKG5vIHBlcmlvZCBhbmQgYWxsb3cgbmVnYXRpdmVzKSAqLyAJCQlDaGFyID0gc0RhdGEuY2hhckF0KDApOyAgCQkJaWYgKHNWYWxpZEZpcnN0Q2hhcnMuaW5kZXhPZihDaGFyKSA9PSAtMSkgIAkJCXsgCQkJCXJldHVybiBudWxsOyAJCQl9IAkJCSAJCQkvKiBDaGVjayBhbGwgdGhlIG90aGVyIGNoYXJhY3RlcnMgYXJlIHZhbGlkICovIAkJCWZvciAoIHZhciBpPTEgOyBpPHNEYXRhLmxlbmd0aCA7IGkrKyApICAJCQl7IAkJCQlDaGFyID0gc0RhdGEuY2hhckF0KGkpOyAgCQkJCWlmIChzVmFsaWRDaGFycy5pbmRleE9mKENoYXIpID09IC0xKSAgCQkJCXsgCQkJCQlyZXR1cm4gbnVsbDsgCQkJCX0gCQkJCSAJCQkJLyogT25seSBhbGxvd2VkIG9uZSBkZWNpbWFsIHBsYWNlLi4uICovIAkJCQlpZiAoIENoYXIgPT0gIi4iICkgCQkJCXsgCQkJCQlpZiAoIGJEZWNpbWFsICkgCQkJCQl7IAkJCQkJCXJldHVybiBudWxsOyAJCQkJCX0gCQkJCQliRGVjaW1hbCA9IHRydWU7IAkJCQl9IAkJCX0gCQkJIAkJCXJldHVybiAnbnVtZXJpYyc7IAkJfSwgCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiAtIAkJICogUHVycG9zZTogIENoZWNrIHRvIHNlZSBpZiBhIHN0cmluZyBpcyBhY3R1YWxseSBhIGZvcm1hdHRlZCBkYXRlIAkJICogUmV0dXJuczogIHN0cmluZzonZGF0ZScgb3IgbnVsbCAJCSAqIElucHV0czogICBzdHJpbmc6c1RleHQgLSBzdHJpbmcgdG8gY2hlY2sgCQkgKi8gCQlmdW5jdGlvbiAoIHNEYXRhICkgCQl7IAkJCXZhciBpUGFyc2UgPSBEYXRlLnBhcnNlKHNEYXRhKTsgCQkJaWYgKCAoaVBhcnNlICE9PSBudWxsICYmICFpc05hTihpUGFyc2UpKSB8fCBzRGF0YS5sZW5ndGggPT09IDAgKSAJCQl7IAkJCQlyZXR1cm4gJ2RhdGUnOyAJCQl9IAkJCXJldHVybiBudWxsOyAJCX0sIAkJIAkJLyogCQkgKiBGdW5jdGlvbjogLSAJCSAqIFB1cnBvc2U6ICBDaGVjayB0byBzZWUgaWYgYSBzdHJpbmcgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgYW4gSFRNTCBzdHJpbmcgCQkgKiBSZXR1cm5zOiAgc3RyaW5nOidodG1sJyBvciBudWxsIAkJICogSW5wdXRzOiAgIHN0cmluZzpzVGV4dCAtIHN0cmluZyB0byBjaGVjayAJCSAqLyAJCWZ1bmN0aW9uICggc0RhdGEgKSAJCXsgCQkJaWYgKCBzRGF0YS5pbmRleE9mKCc8JykgIT0gLTEgJiYgc0RhdGEuaW5kZXhPZignPicpICE9IC0xICkgCQkJeyAJCQkJcmV0dXJuICdodG1sJzsgCQkJfSAJCQlyZXR1cm4gbnVsbDsgCQl9IAldOyAJIAkvKiAJICogRnVuY3Rpb246IGZuVmVyc2lvbkNoZWNrIAkgKiBQdXJwb3NlOiAgQ2hlY2sgYSB2ZXJzaW9uIHN0cmluZyBhZ2FpbnN0IHRoaXMgdmVyc2lvbiBvZiBEYXRhVGFibGVzLiBVc2VmdWwgZm9yIHBsdWctaW5zIAkgKiBSZXR1cm5zOiAgYm9vbDp0cnVlIC10aGlzIHZlcnNpb24gb2YgRGF0YVRhYmxlcyBpcyBncmVhdGVyIG9yIGVxdWFsIHRvIHRoZSByZXF1aXJlZCB2ZXJzaW9uIAkgKiAgICAgICAgICAgICAgICBmYWxzZSAtdGhpcyB2ZXJzaW9uIG9mIERhdGFUYWxlcyBpcyBub3Qgc3VpdGFibGUgCSAqIElucHV0czogICBzdHJpbmc6c1ZlcnNpb24gLSB0aGUgdmVyc2lvbiB0byBjaGVjayBhZ2FpbnN0LiBNYXkgYmUgaW4gdGhlIGZvbGxvd2luZyBmb3JtYXRzOiAJICogICAgICAgICAgICAgImEiLCAiYS5iIiBvciAiYS5iLmMiIAkgKiBOb3RlczogICAgVGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgY2hlY2sgdGhlIGZpcnN0IHRocmVlIHBhcnRzIG9mIGEgdmVyc2lvbiBzdHJpbmcuIEl0IGlzIAkgKiAgIGFzc3VtZWQgdGhhdCBiZXRhIGFuZCBkZXYgdmVyc2lvbnMgd2lsbCBtZWV0IHRoZSByZXF1aXJlbWVudHMuIFRoaXMgbWlnaHQgY2hhbmdlIGluIGZ1dHVyZSAJICovIAlfb0V4dC5mblZlcnNpb25DaGVjayA9IGZ1bmN0aW9uKCBzVmVyc2lvbiApIAl7IAkJLyogVGhpcyBpcyBjaGVhcCwgYnV0IHZlcnkgZWZmZWN0aXZlICovIAkJdmFyIGZuWlBhZCA9IGZ1bmN0aW9uIChacGFkLCBjb3VudCkgCQl7IAkJCXdoaWxlKFpwYWQubGVuZ3RoIDwgY291bnQpIHsgCQkJCVpwYWQgKz0gJzAnOyAJCQl9IAkJCXJldHVybiBacGFkOyAJCX07IAkJdmFyIGFUaGlzID0gX29FeHQuc1ZlcnNpb24uc3BsaXQoJy4nKTsgCQl2YXIgYVRoYXQgPSBzVmVyc2lvbi5zcGxpdCgnLicpOyAJCXZhciBzVGhpcyA9ICcnLCBzVGhhdCA9ICcnOyAJCSAJCWZvciAoIHZhciBpPTAsIGlMZW49YVRoYXQubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQl7IAkJCXNUaGlzICs9IGZuWlBhZCggYVRoaXNbaV0sIDMgKTsgCQkJc1RoYXQgKz0gZm5aUGFkKCBhVGhhdFtpXSwgMyApOyAJCX0gCQkgCQlyZXR1cm4gcGFyc2VJbnQoc1RoaXMsIDEwKSA+PSBwYXJzZUludChzVGhhdCwgMTApOyAJfTsgCSAJLyogCSAqIFZhcmlhYmxlOiBfb0V4dGVybkNvbmZpZyAJICogUHVycG9zZTogIFN0b3JlIGluZm9ybWF0aW9uIGZvciBEYXRhVGFibGVzIHRvIGFjY2VzcyBnbG9iYWxseSBhYm91dCBvdGhlciBpbnN0YW5jZXMgCSAqIFNjb3BlOiAgICBqUXVlcnkuZm4uZGF0YVRhYmxlRXh0IAkgKi8gCV9vRXh0Ll9vRXh0ZXJuQ29uZmlnID0geyAJCS8qIGludDppTmV4dFVuaXF1ZSAtIG5leHQgdW5pcXVlIG51bWJlciBmb3IgYW4gaW5zdGFuY2UgKi8gCQkiaU5leHRVbmlxdWUiOiAwIAl9OyAJIAkgCS8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogCSAqIFNlY3Rpb24gLSBEYXRhVGFibGVzIHByb3RvdHlwZSAJICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8gCSAJLyogCSAqIEZ1bmN0aW9uOiBkYXRhVGFibGUgCSAqIFB1cnBvc2U6ICBEYXRhVGFibGVzIGluZm9ybWF0aW9uIAkgKiBSZXR1cm5zOiAgLSAJICogSW5wdXRzOiAgIG9iamVjdDpvSW5pdCAtIGluaXRhbGlzYXRpb24gb3B0aW9ucyBmb3IgdGhlIHRhYmxlIAkgKi8gCSQuZm4uZGF0YVRhYmxlID0gZnVuY3Rpb24oIG9Jbml0ICkgCXsgCQkvKiAJCSAqIEZ1bmN0aW9uOiBjbGFzc1NldHRpbmdzIAkJICogUHVycG9zZTogIFNldHRpbmdzIGNvbnRhaW5lciBmdW5jdGlvbiBmb3IgYWxsICdjbGFzcycgcHJvcGVydGllcyB3aGljaCBhcmUgcmVxdWlyZWQgCQkgKiAgIGJ5IGRhdGFUYWJsZXMgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICAtIAkJICovIAkJZnVuY3Rpb24gY2xhc3NTZXR0aW5ncyAoKSAJCXsgCQkJdGhpcy5mblJlY29yZHNUb3RhbCA9IGZ1bmN0aW9uICgpIAkJCXsgCQkJCWlmICggdGhpcy5vRmVhdHVyZXMuYlNlcnZlclNpZGUgKSB7IAkJCQkJcmV0dXJuIHBhcnNlSW50KHRoaXMuX2lSZWNvcmRzVG90YWwsIDEwKTsgCQkJCX0gZWxzZSB7IAkJCQkJcmV0dXJuIHRoaXMuYWlEaXNwbGF5TWFzdGVyLmxlbmd0aDsgCQkJCX0gCQkJfTsgCQkJIAkJCXRoaXMuZm5SZWNvcmRzRGlzcGxheSA9IGZ1bmN0aW9uICgpIAkJCXsgCQkJCWlmICggdGhpcy5vRmVhdHVyZXMuYlNlcnZlclNpZGUgKSB7IAkJCQkJcmV0dXJuIHBhcnNlSW50KHRoaXMuX2lSZWNvcmRzRGlzcGxheSwgMTApOyAJCQkJfSBlbHNlIHsgCQkJCQlyZXR1cm4gdGhpcy5haURpc3BsYXkubGVuZ3RoOyAJCQkJfSAJCQl9OyAJCQkgCQkJdGhpcy5mbkRpc3BsYXlFbmQgPSBmdW5jdGlvbiAoKSAJCQl7IAkJCQlpZiAoIHRoaXMub0ZlYXR1cmVzLmJTZXJ2ZXJTaWRlICkgeyAJCQkJCWlmICggdGhpcy5vRmVhdHVyZXMuYlBhZ2luYXRlID09PSBmYWxzZSB8fCB0aGlzLl9pRGlzcGxheUxlbmd0aCA9PSAtMSApIHsgCQkJCQkJcmV0dXJuIHRoaXMuX2lEaXNwbGF5U3RhcnQrdGhpcy5haURpc3BsYXkubGVuZ3RoOyAJCQkJCX0gZWxzZSB7IAkJCQkJCXJldHVybiBNYXRoLm1pbiggdGhpcy5faURpc3BsYXlTdGFydCt0aGlzLl9pRGlzcGxheUxlbmd0aCwgIAkJCQkJCQl0aGlzLl9pUmVjb3Jkc0Rpc3BsYXkgKTsgCQkJCQl9IAkJCQl9IGVsc2UgeyAJCQkJCXJldHVybiB0aGlzLl9pRGlzcGxheUVuZDsgCQkJCX0gCQkJfTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBvSW5zdGFuY2UgCQkJICogUHVycG9zZTogIFRoZSBEYXRhVGFibGVzIG9iamVjdCBmb3IgdGhpcyB0YWJsZSAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzICAJCQkgKi8gCQkJdGhpcy5vSW5zdGFuY2UgPSBudWxsOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IHNJbnN0YW5jZSAJCQkgKiBQdXJwb3NlOiAgVW5pcXVlIGlkZW5kaWZpZXIgZm9yIGVhY2ggaW5zdGFuY2Ugb2YgdGhlIERhdGFUYWJsZXMgb2JqZWN0IAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgIAkJCSAqLyAJCQl0aGlzLnNJbnN0YW5jZSA9IG51bGw7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogb0ZlYXR1cmVzIAkJCSAqIFB1cnBvc2U6ICBJbmRpY2F0ZSB0aGUgZW5hYmxlbWVudCBvZiBrZXkgZGF0YVRhYmxlIGZlYXR1cmVzIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgIAkJCSAqLyAJCQl0aGlzLm9GZWF0dXJlcyA9IHsgCQkJCSJiUGFnaW5hdGUiOiB0cnVlLCAJCQkJImJMZW5ndGhDaGFuZ2UiOiB0cnVlLCAJCQkJImJGaWx0ZXIiOiB0cnVlLCAJCQkJImJTb3J0IjogdHJ1ZSwgCQkJCSJiSW5mbyI6IHRydWUsIAkJCQkiYkF1dG9XaWR0aCI6IHRydWUsIAkJCQkiYlByb2Nlc3NpbmciOiBmYWxzZSwgCQkJCSJiU29ydENsYXNzZXMiOiB0cnVlLCAJCQkJImJTdGF0ZVNhdmUiOiBmYWxzZSwgCQkJCSJiU2VydmVyU2lkZSI6IGZhbHNlIAkJCX07IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogb1Njcm9sbCAJCQkgKiBQdXJwb3NlOiAgQ29udGFpbmVyIGZvciBzY3JvbGxpbmcgb3B0aW9ucyAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzICAJCQkgKi8gCQkJdGhpcy5vU2Nyb2xsID0geyAJCQkJInNYIjogIiIsIAkJCQkic1hJbm5lciI6ICIiLCAJCQkJInNZIjogIiIsIAkJCQkiYkNvbGxhcHNlIjogZmFsc2UsIAkJCQkiYkluZmluaXRlIjogZmFsc2UsIAkJCQkiaUxvYWRHYXAiOiAxMDAsIAkJCQkiaUJhcldpZHRoIjogMCwgCQkJCSJiQXV0b0NzcyI6IHRydWUgCQkJfTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBhYW5GZWF0dXJlcyAJCQkgKiBQdXJwb3NlOiAgQXJyYXkgcmVmZXJlbmNpbmcgdGhlIG5vZGVzIHdoaWNoIGFyZSB1c2VkIGZvciB0aGUgZmVhdHVyZXMgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAgCQkJICogTm90ZXM6ICAgIFRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgb2JqZWN0IG1hdGNoIHdoYXQgaXMgYWxsb3dlZCBieSBzRG9tIC0gaS5lLiAJCQkgKiAgICdsJyAtIExlbmd0aCBjaGFuZ2luZyAJCQkgKiAgICdmJyAtIEZpbHRlcmluZyBpbnB1dCAJCQkgKiAgICd0JyAtIFRoZSB0YWJsZSEgCQkJICogICAnaScgLSBJbmZvcm1hdGlvbiAJCQkgKiAgICdwJyAtIFBhZ2luYXRpb24gCQkJICogICAncicgLSBwUm9jZXNzaW5nIAkJCSAqLyAJCQl0aGlzLmFhbkZlYXR1cmVzID0gW107IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogb0xhbmd1YWdlIAkJCSAqIFB1cnBvc2U6ICBTdG9yZSB0aGUgbGFuZ3VhZ2Ugc3RyaW5ncyB1c2VkIGJ5IGRhdGFUYWJsZXMgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKiBOb3RlczogICAgVGhlIHdvcmRzIGluIHRoZSBmb3JtYXQgX1ZBUl8gYXJlIHZhcmlhYmxlcyB3aGljaCBhcmUgZHluYW1pY2FsbHkgcmVwbGFjZWQgCQkJICogICBieSBqYXZhc2NyaXB0IAkJCSAqLyAJCQl0aGlzLm9MYW5ndWFnZSA9IHsgCQkJCSJzUHJvY2Vzc2luZyI6ICJQcm9jZXNzaW5nLi4uIiwgCQkJCSJzTGVuZ3RoTWVudSI6ICJTaG93IF9NRU5VXyBlbnRyaWVzIiwgCQkJCSJzWmVyb1JlY29yZHMiOiAiTm8gbWF0Y2hpbmcgcmVjb3JkcyBmb3VuZCIsIAkJCQkic0VtcHR5VGFibGUiOiAiTm8gZGF0YSBhdmFpbGFibGUgaW4gdGFibGUiLCAJCQkJInNJbmZvIjogIlNob3dpbmcgX1NUQVJUXyB0byBfRU5EXyBvZiBfVE9UQUxfIGVudHJpZXMiLCAJCQkJInNJbmZvRW1wdHkiOiAiU2hvd2luZyAwIHRvIDAgb2YgMCBlbnRyaWVzIiwgCQkJCSJzSW5mb0ZpbHRlcmVkIjogIihmaWx0ZXJlZCBmcm9tIF9NQVhfIHRvdGFsIGVudHJpZXMpIiwgCQkJCSJzSW5mb1Bvc3RGaXgiOiAiIiwgCQkJCSJzU2VhcmNoIjogIlNlYXJjaDoiLCAJCQkJInNVcmwiOiAiIiwgCQkJCSJvUGFnaW5hdGUiOiB7IAkJCQkJInNGaXJzdCI6ICAgICJGaXJzdCIsIAkJCQkJInNQcmV2aW91cyI6ICJQcmV2aW91cyIsIAkJCQkJInNOZXh0IjogICAgICJOZXh0IiwgCQkJCQkic0xhc3QiOiAgICAgIkxhc3QiIAkJCQl9LCAJCQkJImZuSW5mb0NhbGxiYWNrIjogbnVsbCAJCQl9OyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGFvRGF0YSAJCQkgKiBQdXJwb3NlOiAgU3RvcmUgZGF0YSBpbmZvcm1hdGlvbiAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzICAJCQkgKiBOb3RlczogICAgVGhpcyBpcyBhbiBhcnJheSBvZiBvYmplY3RzIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOiAJCQkgKiAgIGludDogX2lJZCAtIGludGVybmFsIGlkIGZvciB0cmFja2luZyAJCQkgKiAgIGFycmF5OiBfYURhdGEgLSBpbnRlcm5hbCBkYXRhIC0gdXNlZCBmb3Igc29ydGluZyAvIGZpbHRlcmluZyBldGMgCQkJICogICBub2RlOiBuVHIgLSBkaXNwbGF5IG5vZGUgCQkJICogICBhcnJheSBub2RlOiBfYW5IaWRkZW4gLSBoaWRkZW4gVEQgbm9kZXMgCQkJICogICBzdHJpbmc6IF9zUm93U3RyaXBlIAkJCSAqLyAJCQl0aGlzLmFvRGF0YSA9IFtdOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGFpRGlzcGxheSAJCQkgKiBQdXJwb3NlOiAgQXJyYXkgb2YgaW5kZXhlcyB3aGljaCBhcmUgaW4gdGhlIGN1cnJlbnQgZGlzcGxheSAoYWZ0ZXIgZmlsdGVyaW5nIGV0YykgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5haURpc3BsYXkgPSBbXTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBhaURpc3BsYXlNYXN0ZXIgCQkJICogUHVycG9zZTogIEFycmF5IG9mIGluZGV4ZXMgZm9yIGRpc3BsYXkgLSBubyBmaWx0ZXJpbmcgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5haURpc3BsYXlNYXN0ZXIgPSBbXTsgCQkJCQkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogYW9Db2x1bW5zIAkJCSAqIFB1cnBvc2U6ICBTdG9yZSBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIGNvbHVtbiB0aGF0IGlzIGluIHVzZSAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzICAJCQkgKi8gCQkJdGhpcy5hb0NvbHVtbnMgPSBbXTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBpTmV4dElkIAkJCSAqIFB1cnBvc2U6ICBTdG9yZSB0aGUgbmV4dCB1bmlxdWUgaWQgdG8gYmUgdXNlZCBmb3IgYSBuZXcgcm93IAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgIAkJCSAqLyAJCQl0aGlzLmlOZXh0SWQgPSAwOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGFzRGF0YVNlYXJjaCAJCQkgKiBQdXJwb3NlOiAgU2VhcmNoIGRhdGEgYXJyYXkgZm9yIHJlZ3VsYXIgZXhwcmVzc2lvbiBzZWFyY2hpbmcgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5hc0RhdGFTZWFyY2ggPSBbXTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBvUHJldmlvdXNTZWFyY2ggCQkJICogUHVycG9zZTogIFN0b3JlIHRoZSBwcmV2aW91cyBzZWFyY2ggaW5jYXNlIHdlIHdhbnQgdG8gZm9yY2UgYSByZS1zZWFyY2ggCQkJICogICBvciBjb21wYXJlIHRoZSBvbGQgc2VhcmNoIHRvIGEgbmV3IG9uZSAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLm9QcmV2aW91c1NlYXJjaCA9IHsgCQkJCSJzU2VhcmNoIjogIiIsIAkJCQkiYlJlZ2V4IjogZmFsc2UsIAkJCQkiYlNtYXJ0IjogdHJ1ZSAJCQl9OyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGFvUHJlU2VhcmNoQ29scyAJCQkgKiBQdXJwb3NlOiAgU3RvcmUgdGhlIHByZXZpb3VzIHNlYXJjaCBmb3IgZWFjaCBjb2x1bW4gCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5hb1ByZVNlYXJjaENvbHMgPSBbXTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBhYVNvcnRpbmcgCQkJICogUHVycG9zZTogIFNvcnRpbmcgaW5mb3JtYXRpb24gCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKiBOb3RlczogICAgSW5kZXggMCAtIGNvbHVtbiBudW1iZXIgCQkJICogICAgICAgICAgIEluZGV4IDEgLSBjdXJyZW50IHNvcnRpbmcgZGlyZWN0aW9uIAkJCSAqICAgICAgICAgICBJbmRleCAyIC0gaW5kZXggb2YgYXNTb3J0aW5nIGZvciB0aGlzIGNvbHVtbiAJCQkgKi8gCQkJdGhpcy5hYVNvcnRpbmcgPSBbIFswLCAnYXNjJywgMF0gXTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBhYVNvcnRpbmdGaXhlZCAJCQkgKiBQdXJwb3NlOiAgU29ydGluZyBpbmZvcm1hdGlvbiB0aGF0IGlzIGFsd2F5cyBhcHBsaWVkIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICovIAkJCXRoaXMuYWFTb3J0aW5nRml4ZWQgPSBudWxsOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGFzU3RyaXBDbGFzc2VzIAkJCSAqIFB1cnBvc2U6ICBDbGFzc2VzIHRvIHVzZSBmb3IgdGhlIHN0cmlwaW5nIG9mIGEgdGFibGUgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5hc1N0cmlwQ2xhc3NlcyA9IFtdOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGFzRGVzdG9yeVN0cmlwcyAJCQkgKiBQdXJwb3NlOiAgSWYgcmVzdG9yaW5nIGEgdGFibGUgLSB3ZSBzaG91bGQgcmVzdG9yZSBpdCdzIHN0cmlwaW5nIGNsYXNzZXMgYXMgd2VsbCAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLmFzRGVzdG9yeVN0cmlwcyA9IFtdOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IHNEZXN0cm95V2lkdGggCQkJICogUHVycG9zZTogIElmIHJlc3RvcmluZyBhIHRhYmxlIC0gd2Ugc2hvdWxkIHJlc3RvcmUgaXQncyB3aWR0aCAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLnNEZXN0cm95V2lkdGggPSAwOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGZuUm93Q2FsbGJhY2sgCQkJICogUHVycG9zZTogIENhbGwgdGhpcyBmdW5jdGlvbiBldmVyeSB0aW1lIGEgcm93IGlzIGluc2VydGVkIChkcmF3KSAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLmZuUm93Q2FsbGJhY2sgPSBudWxsOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGZuSGVhZGVyQ2FsbGJhY2sgCQkJICogUHVycG9zZTogIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgaGVhZGVyIG9uIGVhY2ggZHJhdyAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLmZuSGVhZGVyQ2FsbGJhY2sgPSBudWxsOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGZuRm9vdGVyQ2FsbGJhY2sgCQkJICogUHVycG9zZTogIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgZm9vdGVyIG9uIGVhY2ggZHJhdyAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLmZuRm9vdGVyQ2FsbGJhY2sgPSBudWxsOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGFvRHJhd0NhbGxiYWNrIAkJCSAqIFB1cnBvc2U6ICBBcnJheSBvZiBjYWxsYmFjayBmdW5jdGlvbnMgZm9yIGRyYXcgY2FsbGJhY2sgZnVuY3Rpb25zIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICogTm90ZXM6ICAgIEVhY2ggYXJyYXkgZWxlbWVudCBpcyBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6IAkJCSAqICAgZnVuY3Rpb246Zm4gLSBmdW5jdGlvbiB0byBjYWxsIAkJCSAqICAgc3RyaW5nOnNOYW1lIC0gbmFtZSBjYWxsYmFjayAoZmVhdHVyZSkuIHVzZWZ1bCBmb3IgYXJyYW5naW5nIGFycmF5IAkJCSAqLyAJCQl0aGlzLmFvRHJhd0NhbGxiYWNrID0gW107IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogZm5Jbml0Q29tcGxldGUgCQkJICogUHVycG9zZTogIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB3aGVuIHRoZSB0YWJsZSBoYXMgYmVlbiBpbml0YWxpc2VkIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICovIAkJCXRoaXMuZm5Jbml0Q29tcGxldGUgPSBudWxsOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IHNUYWJsZUlkIAkJCSAqIFB1cnBvc2U6ICBDYWNoZSB0aGUgdGFibGUgSUQgZm9yIHF1aWNrIGFjY2VzcyAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLnNUYWJsZUlkID0gIiI7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogblRhYmxlIAkJCSAqIFB1cnBvc2U6ICBDYWNoZSB0aGUgdGFibGUgbm9kZSBmb3IgcXVpY2sgYWNjZXNzIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICovIAkJCXRoaXMublRhYmxlID0gbnVsbDsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBuVEhlYWQgCQkJICogUHVycG9zZTogIFBlcm1hbmVudCByZWYgdG8gdGhlIHRoZWFkIGVsZW1lbnQgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5uVEhlYWQgPSBudWxsOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IG5URm9vdCAJCQkgKiBQdXJwb3NlOiAgUGVybWFuZW50IHJlZiB0byB0aGUgdGZvb3QgZWxlbWVudCAtIGlmIGl0IGV4aXN0cyAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLm5URm9vdCA9IG51bGw7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogblRCb2R5IAkJCSAqIFB1cnBvc2U6ICBQZXJtYW5lbnQgcmVmIHRvIHRoZSB0Ym9keSBlbGVtZW50IAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICovIAkJCXRoaXMublRCb2R5ID0gbnVsbDsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBuVGFibGVXcmFwcGVyIAkJCSAqIFB1cnBvc2U6ICBDYWNoZSB0aGUgd3JhcHBlciBub2RlIChjb250YWlucyBhbGwgRGF0YVRhYmxlcyBjb250cm9sbGVkIGVsZW1lbnRzKSAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLm5UYWJsZVdyYXBwZXIgPSBudWxsOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGJJbml0aWFsaXNlZCAJCQkgKiBQdXJwb3NlOiAgSW5kaWNhdGUgaWYgYWxsIHJlcXVpcmVkIGluZm9ybWF0aW9uIGhhcyBiZWVuIHJlYWQgaW4gCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5iSW5pdGlhbGlzZWQgPSBmYWxzZTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBhb09wZW5Sb3dzIAkJCSAqIFB1cnBvc2U6ICBJbmZvcm1hdGlvbiBhYm91dCBvcGVuIHJvd3MgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKiBOb3RlczogICAgSGFzIHRoZSBwYXJhbWV0ZXJzICduVHInIGFuZCAnblBhcmVudCcgCQkJICovIAkJCXRoaXMuYW9PcGVuUm93cyA9IFtdOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IHNEb20gCQkJICogUHVycG9zZTogIERpY3RhdGUgdGhlIHBvc2l0aW9uaW5nIHRoYXQgdGhlIGNyZWF0ZWQgZWxlbWVudHMgd2lsbCB0YWtlIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICogTm90ZXM6ICAgICAJCQkgKiAgIFRoZSBmb2xsb3dpbmcgb3B0aW9ucyBhcmUgYWxsb3dlZDogCQkJICogICAgICdsJyAtIExlbmd0aCBjaGFuZ2luZyAJCQkgKiAgICAgJ2YnIC0gRmlsdGVyaW5nIGlucHV0IAkJCSAqICAgICAndCcgLSBUaGUgdGFibGUhIAkJCSAqICAgICAnaScgLSBJbmZvcm1hdGlvbiAJCQkgKiAgICAgJ3AnIC0gUGFnaW5hdGlvbiAJCQkgKiAgICAgJ3InIC0gcFJvY2Vzc2luZyAJCQkgKiAgIFRoZSBmb2xsb3dpbmcgY29uc3RhbnRzIGFyZSBhbGxvd2VkOiAJCQkgKiAgICAgJ0gnIC0galF1ZXJ5VUkgdGhlbWUgImhlYWRlciIgY2xhc3NlcyAJCQkgKiAgICAgJ0YnIC0galF1ZXJ5VUkgdGhlbWUgImZvb3RlciIgY2xhc3NlcyAJCQkgKiAgIFRoZSBmb2xsb3dpbmcgc3ludGF4IGlzIGV4cGVjdGVkOiAJCQkgKiAgICAgJzwnIGFuZCAnPicgLSBkaXYgZWxlbWVudHMgCQkJICogICAgICc8ImNsYXNzIiBhbmQgJz4nIC0gZGl2IHdpdGggYSBjbGFzcyAJCQkgKiAgIEV4YW1wbGVzOiAJCQkgKiAgICAgJzwid3JhcHBlciJmbGlwdD4nLCAnPGxmPHQ+aXA+JyAJCQkgKi8gCQkJdGhpcy5zRG9tID0gJ2xmcnRpcCc7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogc1BhZ2luYXRpb25UeXBlIAkJCSAqIFB1cnBvc2U6ICBOb3RlIHdoaWNoIHR5cGUgb2Ygc29ydGluZyBzaG91bGQgYmUgdXNlZCAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLnNQYWdpbmF0aW9uVHlwZSA9ICJ0d29fYnV0dG9uIjsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBpQ29va2llRHVyYXRpb24gCQkJICogUHVycG9zZTogIFRoZSBjb29raWUgZHVyYXRpb24gKGZvciBiU3RhdGVTYXZlKSBpbiBzZWNvbmRzIC0gZGVmYXVsdCAyIGhvdXJzIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICovIAkJCXRoaXMuaUNvb2tpZUR1cmF0aW9uID0gNjAgKiA2MCAqIDI7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogc0Nvb2tpZVByZWZpeCAJCQkgKiBQdXJwb3NlOiAgVGhlIGNvb2tpZSBuYW1lIHByZWZpeCAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLnNDb29raWVQcmVmaXggPSAiU3ByeU1lZGlhX0RhdGFUYWJsZXNfIjsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBmbkNvb2tpZUNhbGxiYWNrIAkJCSAqIFB1cnBvc2U6ICBDYWxsYmFjayBmdW5jdGlvbiBmb3IgY29va2llIGNyZWF0aW9uIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICovIAkJCXRoaXMuZm5Db29raWVDYWxsYmFjayA9IG51bGw7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogYW9TdGF0ZVNhdmUgCQkJICogUHVycG9zZTogIEFycmF5IG9mIGNhbGxiYWNrIGZ1bmN0aW9ucyBmb3Igc3RhdGUgc2F2aW5nIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICogTm90ZXM6ICAgIEVhY2ggYXJyYXkgZWxlbWVudCBpcyBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6IAkJCSAqICAgZnVuY3Rpb246Zm4gLSBmdW5jdGlvbiB0byBjYWxsLiBUYWtlcyB0d28gcGFyYW1ldGVycywgb1NldHRpbmdzIGFuZCB0aGUgSlNPTiBzdHJpbmcgdG8gCQkJICogICAgIHNhdmUgdGhhdCBoYXMgYmVlbiB0aHVzIGZhciBjcmVhdGVkLiBSZXR1cm5zIGEgSlNPTiBzdHJpbmcgdG8gYmUgaW5zZXJ0ZWQgaW50byBhICAJCQkgKiAgICAganNvbiBvYmplY3QgKGkuZS4gJyJwYXJhbSI6IFsgMCwgMSwgMl0nKSAJCQkgKiAgIHN0cmluZzpzTmFtZSAtIG5hbWUgb2YgY2FsbGJhY2sgCQkJICovIAkJCXRoaXMuYW9TdGF0ZVNhdmUgPSBbXTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBhb1N0YXRlTG9hZCAJCQkgKiBQdXJwb3NlOiAgQXJyYXkgb2YgY2FsbGJhY2sgZnVuY3Rpb25zIGZvciBzdGF0ZSBsb2FkaW5nIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICogTm90ZXM6ICAgIEVhY2ggYXJyYXkgZWxlbWVudCBpcyBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6IAkJCSAqICAgZnVuY3Rpb246Zm4gLSBmdW5jdGlvbiB0byBjYWxsLiBUYWtlcyB0d28gcGFyYW1ldGVycywgb1NldHRpbmdzIGFuZCB0aGUgb2JqZWN0IHN0b3JlZC4gCQkJICogICAgIE1heSByZXR1cm4gZmFsc2UgdG8gY2FuY2VsIHN0YXRlIGxvYWRpbmcuIAkJCSAqICAgc3RyaW5nOnNOYW1lIC0gbmFtZSBvZiBjYWxsYmFjayAJCQkgKi8gCQkJdGhpcy5hb1N0YXRlTG9hZCA9IFtdOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IG9Mb2FkZWRTdGF0ZSAJCQkgKiBQdXJwb3NlOiAgU3RhdGUgdGhhdCB3YXMgbG9hZGVkIGZyb20gdGhlIGNvb2tpZS4gVXNlZnVsIGZvciBiYWNrIHJlZmVyZW5jZSAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLm9Mb2FkZWRTdGF0ZSA9IG51bGw7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogc0FqYXhTb3VyY2UgCQkJICogUHVycG9zZTogIFNvdXJjZSB1cmwgZm9yIEFKQVggZGF0YSBmb3IgdGhlIHRhYmxlIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICovIAkJCXRoaXMuc0FqYXhTb3VyY2UgPSBudWxsOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGJBamF4RGF0YUdldCAJCQkgKiBQdXJwb3NlOiAgTm90ZSBpZiBkcmF3IHNob3VsZCBiZSBibG9ja2VkIHdoaWxlIGdldHRpbmcgZGF0YSAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLmJBamF4RGF0YUdldCA9IHRydWU7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogZm5TZXJ2ZXJEYXRhIAkJCSAqIFB1cnBvc2U6ICBGdW5jdGlvbiB0byBnZXQgdGhlIHNlcnZlci1zaWRlIGRhdGEgLSBjYW4gYmUgb3ZlcnJ1bGVkIGJ5IHRoZSBkZXZlbG9wZXIgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5mblNlcnZlckRhdGEgPSBmdW5jdGlvbiAoIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7IAkJCQkkLmFqYXgoIHsgCQkJCQkidXJsIjogdXJsLCAJCQkJCSJkYXRhIjogZGF0YSwgCQkJCQkic3VjY2VzcyI6IGNhbGxiYWNrLCAJCQkJCSJkYXRhVHlwZSI6ICJqc29uIiwgCQkJCQkiY2FjaGUiOiBmYWxzZSwgCQkJCQkiZXJyb3IiOiBmdW5jdGlvbiAoeGhyLCBlcnJvciwgdGhyb3duKSB7IAkJCQkJCWlmICggZXJyb3IgPT0gInBhcnNlcmVycm9yIiApIHsgCQkJCQkJCWFsZXJ0KCAiRGF0YVRhYmxlcyB3YXJuaW5nOiBKU09OIGRhdGEgZnJvbSBzZXJ2ZXIgY291bGQgbm90IGJlIHBhcnNlZC4gIisgCQkJCQkJCQkiVGhpcyBpcyBjYXVzZWQgYnkgYSBKU09OIGZvcm1hdHRpbmcgZXJyb3IuIiApOyAJCQkJCQl9IAkJCQkJfSAJCQkJfSApOyAJCQl9OyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IGZuRm9ybWF0TnVtYmVyIAkJCSAqIFB1cnBvc2U6ICBGb3JtYXQgbnVtYmVycyBmb3IgZGlzcGxheSAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLmZuRm9ybWF0TnVtYmVyID0gZnVuY3Rpb24gKCBpSW4gKSAJCQl7IAkJCQlpZiAoIGlJbiA8IDEwMDAgKSAJCQkJeyAJCQkJCS8qIEEgc21hbGwgb3B0aW1pc2F0aW9uIGZvciB3aGF0IGlzIGxpa2VseSB0byBiZSB0aGUgdmFzdCBtYWpvcml0eSBvZiB1c2UgY2FzZXMgKi8gCQkJCQlyZXR1cm4gaUluOyAJCQkJfSAJCQkJZWxzZSAJCQkJeyAJCQkJCXZhciBzPShpSW4rIiIpLCBhPXMuc3BsaXQoIiIpLCBvdXQ9IiIsIGlMZW49cy5sZW5ndGg7IAkJCQkJIAkJCQkJZm9yICggdmFyIGk9MCA7IGk8aUxlbiA7IGkrKyApIAkJCQkJeyAJCQkJCQlpZiAoIGklMyA9PT0gMCAmJiBpICE9PSAwICkgCQkJCQkJeyAJCQkJCQkJb3V0ID0gJywnK291dDsgCQkJCQkJfSAJCQkJCQlvdXQgPSBhW2lMZW4taS0xXStvdXQ7IAkJCQkJfSAJCQkJfSAJCQkJcmV0dXJuIG91dDsgCQkJfTsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBhTGVuZ3RoTWVudSAJCQkgKiBQdXJwb3NlOiAgTGlzdCBvZiBvcHRpb25zIHRoYXQgY2FuIGJlIHVzZWQgZm9yIHRoZSB1c2VyIHNlbGVjdGFibGUgbGVuZ3RoIG1lbnUgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKiBOb3RlOiAgICAgVGhpcyB2YXJhaWJsZSBjYW4gdGFrZSBmb3IgZm9ybSBvZiBhIDFEIGFycmF5LCBpbiB3aGljaCBjYXNlIHRoZSB2YWx1ZSBhbmQgdGhlICAJCQkgKiAgIGRpc3BsYXllZCB2YWx1ZSBpbiB0aGUgbWVudSBhcmUgdGhlIHNhbWUsIG9yIGEgMkQgYXJyYXkgaW4gd2hpY2ggY2FzZSB0aGUgdmFsdWUgY29tZXMgCQkJICogICBmcm9tIHRoZSBmaXJzdCBhcnJheSwgYW5kIHRoZSBkaXNwbGF5ZWQgdmFsdWUgdG8gdGhlIGVuZCB1c2VyIGNvbWVzIGZyb20gdGhlIHNlY29uZCAJCQkgKiAgIGFycmF5LiAyRCBleGFtcGxlOiBbIFsgMTAsIDI1LCA1MCwgMTAwLCAtMSBdLCBbIDEwLCAyNSwgNTAsIDEwMCwgJ0FsbCcgXSBdOyAJCQkgKi8gCQkJdGhpcy5hTGVuZ3RoTWVudSA9IFsgMTAsIDI1LCA1MCwgMTAwIF07IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogaURyYXcgCQkJICogUHVycG9zZTogIENvdW50ZXIgZm9yIHRoZSBkcmF3cyB0aGF0IHRoZSB0YWJsZSBkb2VzLiBBbHNvIHVzZWQgYXMgYSB0cmFja2VyIGZvciAJCQkgKiAgIHNlcnZlci1zaWRlIHByb2Nlc3NpbmcgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5pRHJhdyA9IDA7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogYkRyYXdpbmcgCQkJICogUHVycG9zZTogIEluZGljYXRlIGlmIGEgcmVkcmF3IGlzIGJlaW5nIGRvbmUgLSB1c2VmdWwgZm9yIEFqYXggCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5iRHJhd2luZyA9IDA7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogaURyYXdFcnJvciAJCQkgKiBQdXJwb3NlOiAgTGFzdCBkcmF3IGVycm9yIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICovIAkJCXRoaXMuaURyYXdFcnJvciA9IC0xOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IF9pRGlzcGxheUxlbmd0aCwgX2lEaXNwbGF5U3RhcnQsIF9pRGlzcGxheUVuZCAJCQkgKiBQdXJwb3NlOiAgRGlzcGxheSBsZW5ndGggdmFyaWFibGVzIAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICogTm90ZXM6ICAgIFRoZXNlIHZhcmlhYmxlIG11c3QgTk9UIGJlIHVzZWQgZXh0ZXJuYWxseSB0byBnZXQgdGhlIGRhdGEgbGVuZ3RoLiBSYXRoZXIsIHVzZSAJCQkgKiAgIHRoZSBmblJlY29yZHNUb3RhbCgpIChldGMpIGZ1bmN0aW9ucy4gCQkJICovIAkJCXRoaXMuX2lEaXNwbGF5TGVuZ3RoID0gMTA7IAkJCXRoaXMuX2lEaXNwbGF5U3RhcnQgPSAwOyAJCQl0aGlzLl9pRGlzcGxheUVuZCA9IDEwOyAJCQkgCQkJLyogCQkJICogVmFyaWFibGU6IF9pUmVjb3Jkc1RvdGFsLCBfaVJlY29yZHNEaXNwbGF5IAkJCSAqIFB1cnBvc2U6ICBEaXNwbGF5IGxlbmd0aCB2YXJpYWJsZXMgdXNlZCBmb3Igc2VydmVyIHNpZGUgcHJvY2Vzc2luZyAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqIE5vdGVzOiAgICBUaGVzZSB2YXJpYWJsZSBtdXN0IE5PVCBiZSB1c2VkIGV4dGVybmFsbHkgdG8gZ2V0IHRoZSBkYXRhIGxlbmd0aC4gUmF0aGVyLCB1c2UgCQkJICogICB0aGUgZm5SZWNvcmRzVG90YWwoKSAoZXRjKSBmdW5jdGlvbnMuIAkJCSAqLyAJCQl0aGlzLl9pUmVjb3Jkc1RvdGFsID0gMDsgCQkJdGhpcy5faVJlY29yZHNEaXNwbGF5ID0gMDsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBiSlVJIAkJCSAqIFB1cnBvc2U6ICBTaG91bGQgd2UgYWRkIHRoZSBtYXJrdXAgbmVlZGVkIGZvciBqUXVlcnkgVUkgdGhlbWluZz8gCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5iSlVJID0gZmFsc2U7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogYkpVSSAJCQkgKiBQdXJwb3NlOiAgU2hvdWxkIHdlIGFkZCB0aGUgbWFya3VwIG5lZWRlZCBmb3IgalF1ZXJ5IFVJIHRoZW1pbmc/IAkJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlLmNsYXNzU2V0dGluZ3MgCQkJICovIAkJCXRoaXMub0NsYXNzZXMgPSBfb0V4dC5vU3RkQ2xhc3NlczsgCQkJIAkJCS8qIAkJCSAqIFZhcmlhYmxlOiBiRmlsdGVyZWQgYW5kIGJTb3J0ZWQgCQkJICogUHVycG9zZTogIEZsYWdzIHRvIGFsbG93IGNhbGxiYWNrIGZ1bmN0aW9ucyB0byBzZWUgd2hhdCBhY3Rpb25zIGhhdmUgYmVlbiBwZXJmb3JtZWQgCQkJICogU2NvcGU6ICAgIGpRdWVyeS5kYXRhVGFibGUuY2xhc3NTZXR0aW5ncyAJCQkgKi8gCQkJdGhpcy5iRmlsdGVyZWQgPSBmYWxzZTsgCQkJdGhpcy5iU29ydGVkID0gZmFsc2U7IAkJCSAJCQkvKiAJCQkgKiBWYXJpYWJsZTogb0luaXQgCQkJICogUHVycG9zZTogIEluaXRpYWxpc2F0aW9uIG9iamVjdCB0aGF0IGlzIHVzZWQgZm9yIHRoZSB0YWJsZSAJCQkgKiBTY29wZTogICAgalF1ZXJ5LmRhdGFUYWJsZS5jbGFzc1NldHRpbmdzIAkJCSAqLyAJCQl0aGlzLm9Jbml0ID0gbnVsbDsgCQl9IAkJIAkJLyogCQkgKiBWYXJpYWJsZTogb0FwaSAJCSAqIFB1cnBvc2U6ICBDb250YWluZXIgZm9yIHB1YmxpY2x5IGV4cG9zZWQgJ3ByaXZhdGUnIGZ1bmN0aW9ucyAJCSAqIFNjb3BlOiAgICBqUXVlcnkuZGF0YVRhYmxlIAkJICovIAkJdGhpcy5vQXBpID0ge307IAkJIAkJIAkJLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogCQkgKiBTZWN0aW9uIC0gQVBJIGZ1bmN0aW9ucyAJCSAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqLyAJCSAJCS8qIAkJICogRnVuY3Rpb246IGZuRHJhdyAJCSAqIFB1cnBvc2U6ICBSZWRyYXcgdGhlIHRhYmxlIAkJICogUmV0dXJuczogIC0gCQkgKiBJbnB1dHM6ICAgYm9vbDpiQ29tcGxldGUgLSBSZWZpbHRlciBhbmQgcmVzb3J0IChpZiBlbmFibGVkKSB0aGUgdGFibGUgYmVmb3JlIHRoZSBkcmF3LiAJCSAqICAgICAgICAgICAgIE9wdGlvbmFsOiBkZWZhdWx0IC0gdHJ1ZSAJCSAqLyAJCXRoaXMuZm5EcmF3ID0gZnVuY3Rpb24oIGJDb21wbGV0ZSApIAkJeyAJCQl2YXIgb1NldHRpbmdzID0gX2ZuU2V0dGluZ3NGcm9tTm9kZSggdGhpc1tfb0V4dC5pQXBpSW5kZXhdICk7IAkJCWlmICggdHlwZW9mIGJDb21wbGV0ZSAhPSAndW5kZWZpbmVkJyAmJiBiQ29tcGxldGUgPT09IGZhbHNlICkgCQkJeyAJCQkJX2ZuQ2FsY3VsYXRlRW5kKCBvU2V0dGluZ3MgKTsgCQkJCV9mbkRyYXcoIG9TZXR0aW5ncyApOyAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJX2ZuUmVEcmF3KCBvU2V0dGluZ3MgKTsgCQkJfSAJCX07IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogZm5GaWx0ZXIgCQkgKiBQdXJwb3NlOiAgRmlsdGVyIHRoZSBpbnB1dCBiYXNlZCBvbiBkYXRhIAkJICogUmV0dXJuczogIC0gCQkgKiBJbnB1dHM6ICAgc3RyaW5nOnNJbnB1dCAtIHN0cmluZyB0byBmaWx0ZXIgdGhlIHRhYmxlIG9uIAkJICogICAgICAgICAgIGludDppQ29sdW1uIC0gb3B0aW9uYWwgLSBjb2x1bW4gdG8gbGltaXQgZmlsdGVyaW5nIHRvIAkJICogICAgICAgICAgIGJvb2w6YlJlZ2V4IC0gb3B0aW9uYWwgLSB0cmVhdCBhcyByZWd1bGFyIGV4cHJlc3Npb24gb3Igbm90IC0gZGVmYXVsdCBmYWxzZSAJCSAqICAgICAgICAgICBib29sOmJTbWFydCAtIG9wdGlvbmFsIC0gcGVyZm9ybSBzbWFydCBmaWx0ZXJpbmcgb3Igbm90IC0gZGVmYXVsdCB0cnVlIAkJICogICAgICAgICAgIGJvb2w6YlNob3dHbG9iYWwgLSBvcHRpb25hbCAtIHNob3cgdGhlIGlucHV0IGdsb2JhbCBmaWx0ZXIgaW4gaXQncyBpbnB1dCBib3goZXMpIAkJICogICAgICAgICAgICAgIC0gZGVmYXVsdCB0cnVlIAkJICovIAkJdGhpcy5mbkZpbHRlciA9IGZ1bmN0aW9uKCBzSW5wdXQsIGlDb2x1bW4sIGJSZWdleCwgYlNtYXJ0LCBiU2hvd0dsb2JhbCApIAkJeyAJCQl2YXIgb1NldHRpbmdzID0gX2ZuU2V0dGluZ3NGcm9tTm9kZSggdGhpc1tfb0V4dC5pQXBpSW5kZXhdICk7IAkJCSAJCQlpZiAoICFvU2V0dGluZ3Mub0ZlYXR1cmVzLmJGaWx0ZXIgKSAJCQl7IAkJCQlyZXR1cm47IAkJCX0gCQkJIAkJCWlmICggdHlwZW9mIGJSZWdleCA9PSAndW5kZWZpbmVkJyApIAkJCXsgCQkJCWJSZWdleCA9IGZhbHNlOyAJCQl9IAkJCSAJCQlpZiAoIHR5cGVvZiBiU21hcnQgPT0gJ3VuZGVmaW5lZCcgKSAJCQl7IAkJCQliU21hcnQgPSB0cnVlOyAJCQl9IAkJCSAJCQlpZiAoIHR5cGVvZiBiU2hvd0dsb2JhbCA9PSAndW5kZWZpbmVkJyApIAkJCXsgCQkJCWJTaG93R2xvYmFsID0gdHJ1ZTsgCQkJfSAJCQkgCQkJaWYgKCB0eXBlb2YgaUNvbHVtbiA9PSAidW5kZWZpbmVkIiB8fCBpQ29sdW1uID09PSBudWxsICkgCQkJeyAJCQkJLyogR2xvYmFsIGZpbHRlciAqLyAJCQkJX2ZuRmlsdGVyQ29tcGxldGUoIG9TZXR0aW5ncywgeyAJCQkJCSJzU2VhcmNoIjpzSW5wdXQsIAkJCQkJImJSZWdleCI6IGJSZWdleCwgCQkJCQkiYlNtYXJ0IjogYlNtYXJ0IAkJCQl9LCAxICk7IAkJCQkgCQkJCWlmICggYlNob3dHbG9iYWwgJiYgdHlwZW9mIG9TZXR0aW5ncy5hYW5GZWF0dXJlcy5mICE9ICd1bmRlZmluZWQnICkgCQkJCXsgCQkJCQl2YXIgbiA9IG9TZXR0aW5ncy5hYW5GZWF0dXJlcy5mOyAJCQkJCWZvciAoIHZhciBpPTAsIGlMZW49bi5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJCXsgCQkJCQkJJCgnaW5wdXQnLCBuW2ldKS52YWwoIHNJbnB1dCApOyAJCQkJCX0gCQkJCX0gCQkJfSAJCQllbHNlIAkJCXsgCQkJCS8qIFNpbmdsZSBjb2x1bW4gZmlsdGVyICovIAkJCQlvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzWyBpQ29sdW1uIF0uc1NlYXJjaCA9IHNJbnB1dDsgCQkJCW9TZXR0aW5ncy5hb1ByZVNlYXJjaENvbHNbIGlDb2x1bW4gXS5iUmVnZXggPSBiUmVnZXg7IAkJCQlvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzWyBpQ29sdW1uIF0uYlNtYXJ0ID0gYlNtYXJ0OyAJCQkJX2ZuRmlsdGVyQ29tcGxldGUoIG9TZXR0aW5ncywgb1NldHRpbmdzLm9QcmV2aW91c1NlYXJjaCwgMSApOyAJCQl9IAkJfTsgCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBmblNldHRpbmdzIAkJICogUHVycG9zZTogIEdldCB0aGUgc2V0dGluZ3MgZm9yIGEgcGFydGljdWxhciB0YWJsZSBmb3IgZXh0ZXJuLiBtYW5pcHVsYXRpb24gCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICAtIAkJICovIAkJdGhpcy5mblNldHRpbmdzID0gZnVuY3Rpb24oIG5Ob2RlICApIAkJeyAJCQlyZXR1cm4gX2ZuU2V0dGluZ3NGcm9tTm9kZSggdGhpc1tfb0V4dC5pQXBpSW5kZXhdICk7IAkJfTsgCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBmblZlcnNpb25DaGVjayAJCSAqIE5vdGVzOiAgICBUaGUgZnVuY3Rpb24gaXMgdGhlIHNhbWUgYXMgdGhlICdzdGF0aWMnIGZ1bmN0aW9uIHByb3ZpZGVkIGluIHRoZSBleHQgdmFyaWFibGUgCQkgKi8gCQl0aGlzLmZuVmVyc2lvbkNoZWNrID0gX29FeHQuZm5WZXJzaW9uQ2hlY2s7IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogZm5Tb3J0IAkJICogUHVycG9zZTogIFNvcnQgdGhlIHRhYmxlIGJ5IGEgcGFydGljdWxhciByb3cgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBpbnQ6aUNvbCAtIHRoZSBkYXRhIGluZGV4IHRvIHNvcnQgb24uIE5vdGUgdGhhdCB0aGlzIHdpbGwgCQkgKiAgIG5vdCBtYXRjaCB0aGUgJ2Rpc3BsYXkgaW5kZXgnIGlmIHlvdSBoYXZlIGhpZGRlbiBkYXRhIGVudHJpZXMgCQkgKi8gCQl0aGlzLmZuU29ydCA9IGZ1bmN0aW9uKCBhYVNvcnQgKSAJCXsgCQkJdmFyIG9TZXR0aW5ncyA9IF9mblNldHRpbmdzRnJvbU5vZGUoIHRoaXNbX29FeHQuaUFwaUluZGV4XSApOyAJCQlvU2V0dGluZ3MuYWFTb3J0aW5nID0gYWFTb3J0OyAJCQlfZm5Tb3J0KCBvU2V0dGluZ3MgKTsgCQl9OyAJCSAJCS8qIAkJICogRnVuY3Rpb246IGZuU29ydExpc3RlbmVyIAkJICogUHVycG9zZTogIEF0dGFjaCBhIHNvcnQgbGlzdGVuZXIgdG8gYW4gZWxlbWVudCBmb3IgYSBnaXZlbiBjb2x1bW4gCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBub2RlOm5Ob2RlIC0gdGhlIGVsZW1lbnQgdG8gYXR0YWNoIHRoZSBzb3J0IGxpc3RlbmVyIHRvIAkJICogICAgICAgICAgIGludDppQ29sdW1uIC0gdGhlIGNvbHVtbiB0aGF0IGEgY2xpY2sgb24gdGhpcyBub2RlIHdpbGwgc29ydCBvbiAJCSAqICAgICAgICAgICBmdW5jdGlvbjpmbkNhbGxiYWNrIC0gY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBzb3J0IGlzIHJ1biAtIG9wdGlvbmFsIAkJICovIAkJdGhpcy5mblNvcnRMaXN0ZW5lciA9IGZ1bmN0aW9uKCBuTm9kZSwgaUNvbHVtbiwgZm5DYWxsYmFjayApIAkJeyAJCQlfZm5Tb3J0QXR0YWNoTGlzdGVuZXIoIF9mblNldHRpbmdzRnJvbU5vZGUoIHRoaXNbX29FeHQuaUFwaUluZGV4XSApLCBuTm9kZSwgaUNvbHVtbiwgCQkJIAlmbkNhbGxiYWNrICk7IAkJfTsgCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBmbkFkZERhdGEgCQkgKiBQdXJwb3NlOiAgQWRkIG5ldyByb3cocykgaW50byB0aGUgdGFibGUgCQkgKiBSZXR1cm5zOiAgYXJyYXkgaW50OiBhcnJheSBvZiBpbmRleGVzIChhb0RhdGEpIHdoaWNoIGhhdmUgYmVlbiBhZGRlZCAoemVybyBsZW5ndGggb24gZXJyb3IpIAkJICogSW5wdXRzOiAgIGFycmF5Om1EYXRhIC0gdGhlIGRhdGEgdG8gYmUgYWRkZWQuIFRoZSBsZW5ndGggbXVzdCBtYXRjaCAJCSAqICAgICAgICAgICAgICAgdGhlIG9yaWdpbmFsIGRhdGEgZnJvbSB0aGUgRE9NIAkJICogICAgICAgICAgICAgb3IgCQkgKiAgICAgICAgICAgICBhcnJheSBhcnJheTptRGF0YSAtIDJEIGFycmF5IG9mIGRhdGEgdG8gYmUgYWRkZWQgCQkgKiAgICAgICAgICAgYm9vbDpiUmVkcmF3IC0gcmVkcmF3IHRoZSB0YWJsZSBvciBub3QgLSBkZWZhdWx0IHRydWUgCQkgKiBOb3RlczogICAgV2FybmluZyAtIHRoZSByZWZpbHRlciBoZXJlIHdpbGwgY2F1c2UgdGhlIHRhYmxlIHRvIHJlZHJhdyAJCSAqICAgICAgICAgICAgIHN0YXJ0aW5nIGF0IHplcm8gCQkgKiBOb3RlczogICAgVGhhbmtzIHRvIFlla2ltb3YgRGVuaXMgZm9yIGNvbnRyaWJ1dGluZyB0aGUgYmFzaXMgZm9yIHRoaXMgZnVuY3Rpb24hIAkJICovIAkJdGhpcy5mbkFkZERhdGEgPSBmdW5jdGlvbiggbURhdGEsIGJSZWRyYXcgKSAJCXsgCQkJaWYgKCBtRGF0YS5sZW5ndGggPT09IDAgKSAJCQl7IAkJCQlyZXR1cm4gW107IAkJCX0gCQkJIAkJCXZhciBhaVJldHVybiA9IFtdOyAJCQl2YXIgaVRlc3Q7IAkJCSAJCQkvKiBGaW5kIHNldHRpbmdzIGZyb20gdGFibGUgbm9kZSAqLyAJCQl2YXIgb1NldHRpbmdzID0gX2ZuU2V0dGluZ3NGcm9tTm9kZSggdGhpc1tfb0V4dC5pQXBpSW5kZXhdICk7IAkJCSAJCQkvKiBDaGVjayBpZiB3ZSB3YW50IHRvIGFkZCBtdWx0aXBsZSByb3dzIG9yIG5vdCAqLyAJCQlpZiAoIHR5cGVvZiBtRGF0YVswXSA9PSAib2JqZWN0IiApIAkJCXsgCQkJCWZvciAoIHZhciBpPTAgOyBpPG1EYXRhLmxlbmd0aCA7IGkrKyApIAkJCQl7IAkJCQkJaVRlc3QgPSBfZm5BZGREYXRhKCBvU2V0dGluZ3MsIG1EYXRhW2ldICk7IAkJCQkJaWYgKCBpVGVzdCA9PSAtMSApIAkJCQkJeyAJCQkJCQlyZXR1cm4gYWlSZXR1cm47IAkJCQkJfSAJCQkJCWFpUmV0dXJuLnB1c2goIGlUZXN0ICk7IAkJCQl9IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQlpVGVzdCA9IF9mbkFkZERhdGEoIG9TZXR0aW5ncywgbURhdGEgKTsgCQkJCWlmICggaVRlc3QgPT0gLTEgKSAJCQkJeyAJCQkJCXJldHVybiBhaVJldHVybjsgCQkJCX0gCQkJCWFpUmV0dXJuLnB1c2goIGlUZXN0ICk7IAkJCX0gCQkJIAkJCW9TZXR0aW5ncy5haURpc3BsYXkgPSBvU2V0dGluZ3MuYWlEaXNwbGF5TWFzdGVyLnNsaWNlKCk7IAkJCSAJCQlpZiAoIHR5cGVvZiBiUmVkcmF3ID09ICd1bmRlZmluZWQnIHx8IGJSZWRyYXcgKSAJCQl7IAkJCQlfZm5SZURyYXcoIG9TZXR0aW5ncyApOyAJCQl9IAkJCXJldHVybiBhaVJldHVybjsgCQl9OyAJCSAJCS8qIAkJICogRnVuY3Rpb246IGZuRGVsZXRlUm93IAkJICogUHVycG9zZTogIFJlbW92ZSBhIHJvdyBmb3IgdGhlIHRhYmxlIAkJICogUmV0dXJuczogIGFycmF5OmFSZXR1cm4gLSB0aGUgcm93IHRoYXQgd2FzIGRlbGV0ZWQgCQkgKiBJbnB1dHM6ICAgbWl4ZWQ6bVRhcmdldCAtICAJCSAqICAgICAgICAgICAgIGludDogLSBpbmRleCBvZiBhb0RhdGEgdG8gYmUgZGVsZXRlZCwgb3IgCQkgKiAgICAgICAgICAgICBub2RlKFRSKTogLSBUUiBlbGVtZW50IHlvdSB3YW50IHRvIGRlbGV0ZSAJCSAqICAgICAgICAgICBmdW5jdGlvbjpmbkNhbGxCYWNrIC0gY2FsbGJhY2sgZnVuY3Rpb24gLSBkZWZhdWx0IG51bGwgCQkgKiAgICAgICAgICAgYm9vbDpiUmVkcmF3IC0gcmVkcmF3IHRoZSB0YWJsZSBvciBub3QgLSBkZWZhdWx0IHRydWUgCQkgKi8gCQl0aGlzLmZuRGVsZXRlUm93ID0gZnVuY3Rpb24oIG1UYXJnZXQsIGZuQ2FsbEJhY2ssIGJSZWRyYXcgKSAJCXsgCQkJLyogRmluZCBzZXR0aW5ncyBmcm9tIHRhYmxlIG5vZGUgKi8gCQkJdmFyIG9TZXR0aW5ncyA9IF9mblNldHRpbmdzRnJvbU5vZGUoIHRoaXNbX29FeHQuaUFwaUluZGV4XSApOyAJCQl2YXIgaSwgaUFPRGF0YUluZGV4OyAJCQkgCQkJaUFPRGF0YUluZGV4ID0gKHR5cGVvZiBtVGFyZ2V0ID09ICdvYmplY3QnKSA/ICAJCQkJX2ZuTm9kZVRvRGF0YUluZGV4KG9TZXR0aW5ncywgbVRhcmdldCkgOiBtVGFyZ2V0OyAJCQkgCQkJLyogUmV0dXJuIHRoZSBkYXRhIGFycmF5IGZyb20gdGhpcyByb3cgKi8gCQkJdmFyIG9EYXRhID0gb1NldHRpbmdzLmFvRGF0YS5zcGxpY2UoIGlBT0RhdGFJbmRleCwgMSApOyAJCQkgCQkJLyogUmVtb3ZlIHRoZSB0YXJnZXQgcm93IGZyb20gdGhlIHNlYXJjaCBhcnJheSAqLyAJCQl2YXIgaURpc3BsYXlJbmRleCA9ICQuaW5BcnJheSggaUFPRGF0YUluZGV4LCBvU2V0dGluZ3MuYWlEaXNwbGF5ICk7IAkJCW9TZXR0aW5ncy5hc0RhdGFTZWFyY2guc3BsaWNlKCBpRGlzcGxheUluZGV4LCAxICk7IAkJCSAJCQkvKiBEZWxldGUgZnJvbSB0aGUgZGlzcGxheSBhcnJheXMgKi8gCQkJX2ZuRGVsZXRlSW5kZXgoIG9TZXR0aW5ncy5haURpc3BsYXlNYXN0ZXIsIGlBT0RhdGFJbmRleCApOyAJCQlfZm5EZWxldGVJbmRleCggb1NldHRpbmdzLmFpRGlzcGxheSwgaUFPRGF0YUluZGV4ICk7IAkJCSAJCQkvKiBJZiB0aGVyZSBpcyBhIHVzZXIgY2FsbGJhY2sgZnVuY3Rpb24gLSBjYWxsIGl0ICovIAkJCWlmICggdHlwZW9mIGZuQ2FsbEJhY2sgPT0gImZ1bmN0aW9uIiApIAkJCXsgCQkJCWZuQ2FsbEJhY2suY2FsbCggdGhpcywgb1NldHRpbmdzLCBvRGF0YSApOyAJCQl9IAkJCSAJCQkvKiBDaGVjayBmb3IgYW4gJ292ZXJmbG93JyB0aGV5IGNhc2UgZm9yIGRpc2xheWluZyB0aGUgdGFibGUgKi8gCQkJaWYgKCBvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQgPj0gb1NldHRpbmdzLmFpRGlzcGxheS5sZW5ndGggKSAJCQl7IAkJCQlvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQgLT0gb1NldHRpbmdzLl9pRGlzcGxheUxlbmd0aDsgCQkJCWlmICggb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0IDwgMCApIAkJCQl7IAkJCQkJb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0ID0gMDsgCQkJCX0gCQkJfSAJCQkgCQkJaWYgKCB0eXBlb2YgYlJlZHJhdyA9PSAndW5kZWZpbmVkJyB8fCBiUmVkcmF3ICkgCQkJeyAJCQkJX2ZuQ2FsY3VsYXRlRW5kKCBvU2V0dGluZ3MgKTsgCQkJCV9mbkRyYXcoIG9TZXR0aW5ncyApOyAJCQl9IAkJCSAJCQlyZXR1cm4gb0RhdGE7IAkJfTsgCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBmbkNsZWFyVGFibGUgCQkgKiBQdXJwb3NlOiAgUXVpY2tseSBhbmQgc2ltcGx5IGNsZWFyIGEgdGFibGUgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBib29sOmJSZWRyYXcgLSByZWRyYXcgdGhlIHRhYmxlIG9yIG5vdCAtIGRlZmF1bHQgdHJ1ZSAJCSAqIE5vdGVzOiAgICBUaGFua3MgdG8gWWVraW1vdiBEZW5pcyBmb3IgY29udHJpYnV0aW5nIHRoZSBiYXNpcyBmb3IgdGhpcyBmdW5jdGlvbiEgCQkgKi8gCQl0aGlzLmZuQ2xlYXJUYWJsZSA9IGZ1bmN0aW9uKCBiUmVkcmF3ICkgCQl7IAkJCS8qIEZpbmQgc2V0dGluZ3MgZnJvbSB0YWJsZSBub2RlICovIAkJCXZhciBvU2V0dGluZ3MgPSBfZm5TZXR0aW5nc0Zyb21Ob2RlKCB0aGlzW19vRXh0LmlBcGlJbmRleF0gKTsgCQkJX2ZuQ2xlYXJUYWJsZSggb1NldHRpbmdzICk7IAkJCSAJCQlpZiAoIHR5cGVvZiBiUmVkcmF3ID09ICd1bmRlZmluZWQnIHx8IGJSZWRyYXcgKSAJCQl7IAkJCQlfZm5EcmF3KCBvU2V0dGluZ3MgKTsgCQkJfSAJCX07IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogZm5PcGVuIAkJICogUHVycG9zZTogIE9wZW4gYSBkaXNwbGF5IHJvdyAoYXBwZW5kIGEgcm93IGFmdGVyIHRoZSByb3cgaW4gcXVlc3Rpb24pIAkJICogUmV0dXJuczogIG5vZGU6bk5ld1JvdyAtIHRoZSByb3cgb3BlbmVkIAkJICogSW5wdXRzOiAgIG5vZGU6blRyIC0gdGhlIHRhYmxlIHJvdyB0byAnb3BlbicgCQkgKiAgICAgICAgICAgc3RyaW5nOnNIdG1sIC0gdGhlIEhUTUwgdG8gcHV0IGludG8gdGhlIHJvdyAJCSAqICAgICAgICAgICBzdHJpbmc6c0NsYXNzIC0gY2xhc3MgdG8gZ2l2ZSB0aGUgbmV3IFREIGNlbGwgCQkgKi8gCQl0aGlzLmZuT3BlbiA9IGZ1bmN0aW9uKCBuVHIsIHNIdG1sLCBzQ2xhc3MgKSAJCXsgCQkJLyogRmluZCBzZXR0aW5ncyBmcm9tIHRhYmxlIG5vZGUgKi8gCQkJdmFyIG9TZXR0aW5ncyA9IF9mblNldHRpbmdzRnJvbU5vZGUoIHRoaXNbX29FeHQuaUFwaUluZGV4XSApOyAJCQkgCQkJLyogdGhlIG9sZCBvcGVuIG9uZSBpZiB0aGVyZSBpcyBvbmUgKi8gCQkJdGhpcy5mbkNsb3NlKCBuVHIgKTsgCQkJIAkJCXZhciBuTmV3Um93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsgCQkJdmFyIG5OZXdDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsgCQkJbk5ld1Jvdy5hcHBlbmRDaGlsZCggbk5ld0NlbGwgKTsgCQkJbk5ld0NlbGwuY2xhc3NOYW1lID0gc0NsYXNzOyAJCQluTmV3Q2VsbC5jb2xTcGFuID0gX2ZuVmlzYmxlQ29sdW1ucyggb1NldHRpbmdzICk7IAkJCW5OZXdDZWxsLmlubmVySFRNTCA9IHNIdG1sOyAJCQkgCQkJLyogSWYgdGhlIG5UciBpc24ndCBvbiB0aGUgcGFnZSBhdCB0aGUgbW9tZW50IC0gdGhlbiB3ZSBkb24ndCBpbnNlcnQgYXQgdGhlIG1vbWVudCAqLyAJCQl2YXIgblRycyA9ICQoJ3RyJywgb1NldHRpbmdzLm5UQm9keSk7IAkJCWlmICggJC5pbkFycmF5KG5UciwgblRycykgIT0gLTEgKSAJCQl7IAkJCQkkKG5OZXdSb3cpLmluc2VydEFmdGVyKG5Ucik7IAkJCX0gCQkJIAkJCW9TZXR0aW5ncy5hb09wZW5Sb3dzLnB1c2goIHsgCQkJCSJuVHIiOiBuTmV3Um93LCAJCQkJIm5QYXJlbnQiOiBuVHIgCQkJfSApOyAJCQkgCQkJcmV0dXJuIG5OZXdSb3c7IAkJfTsgCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBmbkNsb3NlIAkJICogUHVycG9zZTogIENsb3NlIGEgZGlzcGxheSByb3cgCQkgKiBSZXR1cm5zOiAgaW50OiAwIChzdWNjZXNzKSBvciAxIChmYWlsZWQpIAkJICogSW5wdXRzOiAgIG5vZGU6blRyIC0gdGhlIHRhYmxlIHJvdyB0byAnY2xvc2UnIAkJICovIAkJdGhpcy5mbkNsb3NlID0gZnVuY3Rpb24oIG5UciApIAkJeyAJCQkvKiBGaW5kIHNldHRpbmdzIGZyb20gdGFibGUgbm9kZSAqLyAJCQl2YXIgb1NldHRpbmdzID0gX2ZuU2V0dGluZ3NGcm9tTm9kZSggdGhpc1tfb0V4dC5pQXBpSW5kZXhdICk7IAkJCSAJCQlmb3IgKCB2YXIgaT0wIDsgaTxvU2V0dGluZ3MuYW9PcGVuUm93cy5sZW5ndGggOyBpKysgKSAJCQl7IAkJCQlpZiAoIG9TZXR0aW5ncy5hb09wZW5Sb3dzW2ldLm5QYXJlbnQgPT0gblRyICkgCQkJCXsgCQkJCQl2YXIgblRyUGFyZW50ID0gb1NldHRpbmdzLmFvT3BlblJvd3NbaV0ublRyLnBhcmVudE5vZGU7IAkJCQkJaWYgKCBuVHJQYXJlbnQgKSAJCQkJCXsgCQkJCQkJLyogUmVtb3ZlIGl0IGlmIGl0IGlzIGN1cnJlbnRseSBvbiBkaXNwbGF5ICovIAkJCQkJCW5UclBhcmVudC5yZW1vdmVDaGlsZCggb1NldHRpbmdzLmFvT3BlblJvd3NbaV0ublRyICk7IAkJCQkJfSAJCQkJCW9TZXR0aW5ncy5hb09wZW5Sb3dzLnNwbGljZSggaSwgMSApOyAJCQkJCXJldHVybiAwOyAJCQkJfSAJCQl9IAkJCXJldHVybiAxOyAJCX07IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogZm5HZXREYXRhIAkJICogUHVycG9zZTogIFJldHVybiBhbiBhcnJheSB3aXRoIHRoZSBkYXRhIHdoaWNoIGlzIHVzZWQgdG8gbWFrZSB1cCB0aGUgdGFibGUgCQkgKiBSZXR1cm5zOiAgYXJyYXkgYXJyYXkgc3RyaW5nOiAyZCBkYXRhIGFycmF5IChbcm93XVtjb2x1bW5dKSBvciBhcnJheSBzdHJpbmc6IDFkIGRhdGEgYXJyYXkgCQkgKiAgICAgICAgICAgb3IgCQkgKiAgICAgICAgICAgYXJyYXkgc3RyaW5nIChpZiBpUm93IHNwZWNpZmllZCkgCQkgKiBJbnB1dHM6ICAgbWl4ZWQ6bVJvdyAtIG9wdGlvbmFsIC0gaWYgbm90IHByZXNlbnQsIHRoZW4gdGhlIGZ1bGwgMkQgYXJyYXkgZm9yIHRoZSB0YWJsZSAgCQkgKiAgICAgICAgICAgICBpZiBnaXZlbiB0aGVuOiAJCSAqICAgICAgICAgICAgICAgaW50OiAtIHJldHVybiAxRCBhcnJheSBmb3IgYW9EYXRhIGVudHJ5IG9mIHRoaXMgaW5kZXggCQkgKiAgICAgICAgICAgICAgIG5vZGUoVFIpOiAtIHJldHVybiAxRCBhcnJheSBmb3IgdGhpcyBUUiBlbGVtZW50IAkJICogSW5wdXRzOiAgIGludDppUm93IC0gb3B0aW9uYWwgLSBpZiBwcmVzZW50IHRoZW4gdGhlIGFycmF5IHJldHVybmVkIHdpbGwgYmUgdGhlIGRhdGEgZm9yIAkJICogICAgICAgICAgICAgdGhlIHJvdyB3aXRoIHRoZSBpbmRleCAnaVJvdycgCQkgKi8gCQl0aGlzLmZuR2V0RGF0YSA9IGZ1bmN0aW9uKCBtUm93ICkgCQl7IAkJCXZhciBvU2V0dGluZ3MgPSBfZm5TZXR0aW5nc0Zyb21Ob2RlKCB0aGlzW19vRXh0LmlBcGlJbmRleF0gKTsgCQkJIAkJCWlmICggdHlwZW9mIG1Sb3cgIT0gJ3VuZGVmaW5lZCcgKSAJCQl7IAkJCQl2YXIgaVJvdyA9ICh0eXBlb2YgbVJvdyA9PSAnb2JqZWN0JykgPyAgCQkJCQlfZm5Ob2RlVG9EYXRhSW5kZXgob1NldHRpbmdzLCBtUm93KSA6IG1Sb3c7IAkJCQlyZXR1cm4gb1NldHRpbmdzLmFvRGF0YVtpUm93XS5fYURhdGE7IAkJCX0gCQkJcmV0dXJuIF9mbkdldERhdGFNYXN0ZXIoIG9TZXR0aW5ncyApOyAJCX07IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogZm5HZXROb2RlcyAJCSAqIFB1cnBvc2U6ICBSZXR1cm4gYW4gYXJyYXkgd2l0aCB0aGUgVFIgbm9kZXMgdXNlZCBmb3IgZHJhd2luZyB0aGUgdGFibGUgCQkgKiBSZXR1cm5zOiAgYXJyYXkgbm9kZTogVFIgZWxlbWVudHMgCQkgKiAgICAgICAgICAgb3IgCQkgKiAgICAgICAgICAgbm9kZSAoaWYgaVJvdyBzcGVjaWZpZWQpIAkJICogSW5wdXRzOiAgIGludDppUm93IC0gb3B0aW9uYWwgLSBpZiBwcmVzZW50IHRoZW4gdGhlIGFycmF5IHJldHVybmVkIHdpbGwgYmUgdGhlIG5vZGUgZm9yIAkJICogICAgICAgICAgICAgdGhlIHJvdyB3aXRoIHRoZSBpbmRleCAnaVJvdycgCQkgKi8gCQl0aGlzLmZuR2V0Tm9kZXMgPSBmdW5jdGlvbiggaVJvdyApIAkJeyAJCQl2YXIgb1NldHRpbmdzID0gX2ZuU2V0dGluZ3NGcm9tTm9kZSggdGhpc1tfb0V4dC5pQXBpSW5kZXhdICk7IAkJCSAJCQlpZiAoIHR5cGVvZiBpUm93ICE9ICd1bmRlZmluZWQnICkgCQkJeyAJCQkJcmV0dXJuIG9TZXR0aW5ncy5hb0RhdGFbaVJvd10ublRyOyAJCQl9IAkJCXJldHVybiBfZm5HZXRUck5vZGVzKCBvU2V0dGluZ3MgKTsgCQl9OyAJCSAJCS8qIAkJICogRnVuY3Rpb246IGZuR2V0UG9zaXRpb24gCQkgKiBQdXJwb3NlOiAgR2V0IHRoZSBhcnJheSBpbmRleGVzIG9mIGEgcGFydGljdWxhciBjZWxsIGZyb20gaXQncyBET00gZWxlbWVudCAJCSAqIFJldHVybnM6ICBpbnQ6IC0gcm93IGluZGV4LCBvciBhcnJheVsgaW50LCBpbnQsIGludCBdOiAtIHJvdyBpbmRleCwgY29sdW1uIGluZGV4ICh2aXNpYmxlKSAJCSAqICAgICAgICAgICAgIGFuZCBjb2x1bW4gaW5kZXggaW5jbHVkaW5nIGhpZGRlbiBjb2x1bW5zIAkJICogSW5wdXRzOiAgIG5vZGU6bk5vZGUgLSB0aGlzIGNhbiBlaXRoZXIgYmUgYSBUUiBvciBhIFREIGluIHRoZSB0YWJsZSwgdGhlIHJldHVybiBpcyAJCSAqICAgICAgICAgICAgIGRlcGVuZGVudCBvbiB0aGlzIGlucHV0IAkJICovIAkJdGhpcy5mbkdldFBvc2l0aW9uID0gZnVuY3Rpb24oIG5Ob2RlICkgCQl7IAkJCXZhciBvU2V0dGluZ3MgPSBfZm5TZXR0aW5nc0Zyb21Ob2RlKCB0aGlzW19vRXh0LmlBcGlJbmRleF0gKTsgCQkJdmFyIGk7IAkJCSAJCQlpZiAoIG5Ob2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIlRSIiApIAkJCXsgCQkJCXJldHVybiBfZm5Ob2RlVG9EYXRhSW5kZXgob1NldHRpbmdzLCBuTm9kZSk7IAkJCX0gCQkJZWxzZSBpZiAoIG5Ob2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIlREIiApIAkJCXsgCQkJCXZhciBpRGF0YUluZGV4ID0gX2ZuTm9kZVRvRGF0YUluZGV4KG9TZXR0aW5ncywgbk5vZGUucGFyZW50Tm9kZSk7IAkJCQl2YXIgaUNvcnJlY3RvciA9IDA7IAkJCQlmb3IgKCB2YXIgaj0wIDsgajxvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA7IGorKyApIAkJCQl7IAkJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2pdLmJWaXNpYmxlICkgCQkJCQl7IAkJCQkJCWlmICggb1NldHRpbmdzLmFvRGF0YVtpRGF0YUluZGV4XS5uVHIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RkJylbai1pQ29ycmVjdG9yXSA9PSBuTm9kZSApIAkJCQkJCXsgCQkJCQkJCXJldHVybiBbIGlEYXRhSW5kZXgsIGotaUNvcnJlY3RvciwgaiBdOyAJCQkJCQl9IAkJCQkJfSAJCQkJCWVsc2UgCQkJCQl7IAkJCQkJCWlDb3JyZWN0b3IrKzsgCQkJCQl9IAkJCQl9IAkJCX0gCQkJcmV0dXJuIG51bGw7IAkJfTsgCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBmblVwZGF0ZSAJCSAqIFB1cnBvc2U6ICBVcGRhdGUgYSB0YWJsZSBjZWxsIG9yIHJvdyAJCSAqIFJldHVybnM6ICBpbnQ6IDAgb2theSwgMSBlcnJvciAJCSAqIElucHV0czogICBhcnJheSBzdHJpbmcgJ29yJyBzdHJpbmc6bURhdGEgLSBkYXRhIHRvIHVwZGF0ZSB0aGUgY2VsbC9yb3cgd2l0aCAJCSAqICAgICAgICAgICBtaXhlZDptUm93IC0gIAkJICogICAgICAgICAgICAgaW50OiAtIGluZGV4IG9mIGFvRGF0YSB0byBiZSB1cGRhdGVkLCBvciAJCSAqICAgICAgICAgICAgIG5vZGUoVFIpOiAtIFRSIGVsZW1lbnQgeW91IHdhbnQgdG8gdXBkYXRlIAkJICogICAgICAgICAgIGludDppQ29sdW1uIC0gdGhlIGNvbHVtbiB0byB1cGRhdGUgLSBvcHRpb25hbCAobm90IHVzZWQgb2YgbURhdGEgaXMgMkQpIAkJICogICAgICAgICAgIGJvb2w6YlJlZHJhdyAtIHJlZHJhdyB0aGUgdGFibGUgb3Igbm90IC0gZGVmYXVsdCB0cnVlIAkJICogICAgICAgICAgIGJvb2w6YkFjdGlvbiAtIHBlcmZvcm0gcHJlZHJhdyBhY3Rpb25zIG9yIG5vdCAoeW91IHdpbGwgd2FudCB0aGlzIGFzICd0cnVlJyBpZiAJCSAqICAgICAgICAgICAgIHlvdSBoYXZlIGJSZWRyYXcgYXMgdHJ1ZSkgLSBkZWZhdWx0IHRydWUgCQkgKi8gCQl0aGlzLmZuVXBkYXRlID0gZnVuY3Rpb24oIG1EYXRhLCBtUm93LCBpQ29sdW1uLCBiUmVkcmF3LCBiQWN0aW9uICkgCQl7IAkJCXZhciBvU2V0dGluZ3MgPSBfZm5TZXR0aW5nc0Zyb21Ob2RlKCB0aGlzW19vRXh0LmlBcGlJbmRleF0gKTsgCQkJdmFyIGlWaXNpYmxlQ29sdW1uOyAJCQl2YXIgc0Rpc3BsYXk7IAkJCXZhciBpUm93ID0gKHR5cGVvZiBtUm93ID09ICdvYmplY3QnKSA/ICAJCQkJX2ZuTm9kZVRvRGF0YUluZGV4KG9TZXR0aW5ncywgbVJvdykgOiBtUm93OyAJCQkgCQkJaWYgKCB0eXBlb2YgbURhdGEgIT0gJ29iamVjdCcgKSAJCQl7IAkJCQlzRGlzcGxheSA9IG1EYXRhOyAJCQkJb1NldHRpbmdzLmFvRGF0YVtpUm93XS5fYURhdGFbaUNvbHVtbl0gPSBzRGlzcGxheTsgCQkJCSAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLmZuUmVuZGVyICE9PSBudWxsICkgCQkJCXsgCQkJCQlzRGlzcGxheSA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbHVtbl0uZm5SZW5kZXIoIHsgCQkJCQkJImlEYXRhUm93IjogaVJvdywgCQkJCQkJImlEYXRhQ29sdW1uIjogaUNvbHVtbiwgCQkJCQkJImFEYXRhIjogb1NldHRpbmdzLmFvRGF0YVtpUm93XS5fYURhdGEsIAkJCQkJCSJvU2V0dGluZ3MiOiBvU2V0dGluZ3MgCQkJCQl9ICk7IAkJCQkJIAkJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLmJVc2VSZW5kZXJlZCApIAkJCQkJeyAJCQkJCQlvU2V0dGluZ3MuYW9EYXRhW2lSb3ddLl9hRGF0YVtpQ29sdW1uXSA9IHNEaXNwbGF5OyAJCQkJCX0gCQkJCX0gCQkJCSAJCQkJaVZpc2libGVDb2x1bW4gPSBfZm5Db2x1bW5JbmRleFRvVmlzaWJsZSggb1NldHRpbmdzLCBpQ29sdW1uICk7IAkJCQlpZiAoIGlWaXNpYmxlQ29sdW1uICE9PSBudWxsICkgCQkJCXsgCQkJCQlvU2V0dGluZ3MuYW9EYXRhW2lSb3ddLm5Uci5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGQnKVtpVmlzaWJsZUNvbHVtbl0uaW5uZXJIVE1MID0gIAkJCQkJCXNEaXNwbGF5OyAJCQkJfSAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJaWYgKCBtRGF0YS5sZW5ndGggIT0gb1NldHRpbmdzLmFvQ29sdW1ucy5sZW5ndGggKSAJCQkJeyAJCQkJCV9mbkxvZyggb1NldHRpbmdzLCAwLCAnQW4gYXJyYXkgcGFzc2VkIHRvIGZuVXBkYXRlIG11c3QgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgJysgCQkJCQkJJ2NvbHVtbnMgYXMgdGhlIHRhYmxlIGluIHF1ZXN0aW9uIC0gaW4gdGhpcyBjYXNlICcrb1NldHRpbmdzLmFvQ29sdW1ucy5sZW5ndGggKTsgCQkJCQlyZXR1cm4gMTsgCQkJCX0gCQkJCSAJCQkJZm9yICggdmFyIGk9MCA7IGk8bURhdGEubGVuZ3RoIDsgaSsrICkgCQkJCXsgCQkJCQlzRGlzcGxheSA9IG1EYXRhW2ldOyAJCQkJCW9TZXR0aW5ncy5hb0RhdGFbaVJvd10uX2FEYXRhW2ldID0gc0Rpc3BsYXk7IAkJCQkJIAkJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmZuUmVuZGVyICE9PSBudWxsICkgCQkJCQl7IAkJCQkJCXNEaXNwbGF5ID0gb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5mblJlbmRlciggeyAJCQkJCQkJImlEYXRhUm93IjogaVJvdywgCQkJCQkJCSJpRGF0YUNvbHVtbiI6IGksIAkJCQkJCQkiYURhdGEiOiBvU2V0dGluZ3MuYW9EYXRhW2lSb3ddLl9hRGF0YSwgCQkJCQkJCSJvU2V0dGluZ3MiOiBvU2V0dGluZ3MgCQkJCQkJfSApOyAJCQkJCQkgCQkJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmJVc2VSZW5kZXJlZCApIAkJCQkJCXsgCQkJCQkJCW9TZXR0aW5ncy5hb0RhdGFbaVJvd10uX2FEYXRhW2ldID0gc0Rpc3BsYXk7IAkJCQkJCX0gCQkJCQl9IAkJCQkJIAkJCQkJaVZpc2libGVDb2x1bW4gPSBfZm5Db2x1bW5JbmRleFRvVmlzaWJsZSggb1NldHRpbmdzLCBpICk7IAkJCQkJaWYgKCBpVmlzaWJsZUNvbHVtbiAhPT0gbnVsbCApIAkJCQkJeyAJCQkJCQlvU2V0dGluZ3MuYW9EYXRhW2lSb3ddLm5Uci5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGQnKVtpVmlzaWJsZUNvbHVtbl0uaW5uZXJIVE1MID0gIAkJCQkJCQlzRGlzcGxheTsgCQkJCQl9IAkJCQl9IAkJCX0gCQkJIAkJCS8qIE1vZGlmeSB0aGUgc2VhcmNoIGluZGV4IGZvciB0aGlzIHJvdyAoc3RyaWN0bHkgdGhpcyBpcyBsaWtlbHkgbm90IG5lZWRlZCwgc2luY2UgZm5SZURyYXcgCQkJICogd2lsbCByZWJ1aWxkIHRoZSBzZWFyY2ggYXJyYXkgLSBob3dldmVyLCB0aGUgcmVkcmF3IG1pZ2h0IGJlIGRpc2FibGVkIGJ5IHRoZSB1c2VyKSAJCQkgKi8gCQkJdmFyIGlEaXNwbGF5SW5kZXggPSAkLmluQXJyYXkoIGlSb3csIG9TZXR0aW5ncy5haURpc3BsYXkgKTsgCQkJb1NldHRpbmdzLmFzRGF0YVNlYXJjaFtpRGlzcGxheUluZGV4XSA9IF9mbkJ1aWxkU2VhcmNoUm93KCBvU2V0dGluZ3MsICAJCQkJb1NldHRpbmdzLmFvRGF0YVtpUm93XS5fYURhdGEgKTsgCQkJIAkJCS8qIFBlcmZvcm0gcHJlLWRyYXcgYWN0aW9ucyAqLyAJCQlpZiAoIHR5cGVvZiBiQWN0aW9uID09ICd1bmRlZmluZWQnIHx8IGJBY3Rpb24gKSAJCQl7IAkJCQlfZm5BanVzdENvbHVtblNpemluZyggb1NldHRpbmdzICk7IAkJCX0gCQkJIAkJCS8qIFJlZHJhdyB0aGUgdGFibGUgKi8gCQkJaWYgKCB0eXBlb2YgYlJlZHJhdyA9PSAndW5kZWZpbmVkJyB8fCBiUmVkcmF3ICkgCQkJeyAJCQkJX2ZuUmVEcmF3KCBvU2V0dGluZ3MgKTsgCQkJfSAJCQlyZXR1cm4gMDsgCQl9OyAJCSAJCSAJCS8qIAkJICogRnVuY3Rpb246IGZuU2hvd0NvbG91bW4gCQkgKiBQdXJwb3NlOiAgU2hvdyBhIHBhcnRpY3VsYXIgY29sdW1uIAkJICogUmV0dXJuczogIC0gCQkgKiBJbnB1dHM6ICAgaW50OmlDb2wgLSB0aGUgY29sdW1uIHdob3NlIGRpc3BsYXkgc2hvdWxkIGJlIGNoYW5nZWQgCQkgKiAgICAgICAgICAgYm9vbDpiU2hvdyAtIHNob3cgKHRydWUpIG9yIGhpZGUgKGZhbHNlKSB0aGUgY29sdW1uIAkJICogICAgICAgICAgIGJvb2w6YlJlZHJhdyAtIHJlZHJhdyB0aGUgdGFibGUgb3Igbm90IC0gZGVmYXVsdCB0cnVlIAkJICovIAkJdGhpcy5mblNldENvbHVtblZpcyA9IGZ1bmN0aW9uICggaUNvbCwgYlNob3csIGJSZWRyYXcgKSAJCXsgCQkJdmFyIG9TZXR0aW5ncyA9IF9mblNldHRpbmdzRnJvbU5vZGUoIHRoaXNbX29FeHQuaUFwaUluZGV4XSApOyAJCQl2YXIgaSwgaUxlbjsgCQkJdmFyIGlDb2x1bW5zID0gb1NldHRpbmdzLmFvQ29sdW1ucy5sZW5ndGg7IAkJCXZhciBuVGQsIGFuVGRzLCBuQ2VsbCwgYW5UcnMsIGpxQ2hpbGRyZW47IAkJCSAJCQkvKiBObyBwb2ludCBpbiBkb2luZyBhbnl0aGluZyBpZiB3ZSBhcmUgcmVxdWVzdGluZyB3aGF0IGlzIGFscmVhZHkgdHJ1ZSAqLyAJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbF0uYlZpc2libGUgPT0gYlNob3cgKSAJCQl7IAkJCQlyZXR1cm47IAkJCX0gCQkJIAkJCXZhciBuVHJIZWFkID0gJCgnPnRyJywgb1NldHRpbmdzLm5USGVhZClbMF07IAkJCXZhciBuVHJGb290ID0gJCgnPnRyJywgb1NldHRpbmdzLm5URm9vdClbMF07IAkJCXZhciBhblRoZWFkVGggPSBbXTsgCQkJdmFyIGFuVGZvb3RUaCA9IFtdOyAJCQlmb3IgKCBpPTAgOyBpPGlDb2x1bW5zIDsgaSsrICkgCQkJeyAJCQkJYW5UaGVhZFRoLnB1c2goIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0ublRoICk7IAkJCQlhblRmb290VGgucHVzaCggb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5uVGYgKTsgCQkJfSAJCQkgCQkJLyogU2hvdyB0aGUgY29sdW1uICovIAkJCWlmICggYlNob3cgKSAJCQl7IAkJCQl2YXIgaUluc2VydCA9IDA7IAkJCQlmb3IgKCBpPTAgOyBpPGlDb2wgOyBpKysgKSAJCQkJeyAJCQkJCWlmICggb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5iVmlzaWJsZSApIAkJCQkJeyAJCQkJCQlpSW5zZXJ0Kys7IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQkvKiBOZWVkIHRvIGRlY2lkZSBpZiB3ZSBzaG91bGQgdXNlIGFwcGVuZENoaWxkIG9yIGluc2VydEJlZm9yZSAqLyAJCQkJaWYgKCBpSW5zZXJ0ID49IF9mblZpc2JsZUNvbHVtbnMoIG9TZXR0aW5ncyApICkgCQkJCXsgCQkJCQluVHJIZWFkLmFwcGVuZENoaWxkKCBhblRoZWFkVGhbaUNvbF0gKTsgCQkJCQlhblRycyA9ICQoJz50cicsIG9TZXR0aW5ncy5uVEhlYWQpOyAJCQkJCWZvciAoIGk9MSwgaUxlbj1hblRycy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJCXsgCQkJCQkJYW5UcnNbaV0uYXBwZW5kQ2hpbGQoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbF0uYW5UaEV4dHJhW2ktMV0gKTsgCQkJCQl9CSAJCQkJCSAJCQkJCWlmICggblRyRm9vdCApIAkJCQkJeyAJCQkJCQluVHJGb290LmFwcGVuZENoaWxkKCBhblRmb290VGhbaUNvbF0gKTsgCQkJCQkJYW5UcnMgPSAkKCc+dHInLCBvU2V0dGluZ3MublRGb290KTsgCQkJCQkJZm9yICggaT0xLCBpTGVuPWFuVHJzLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQkJCXsgCQkJCQkJCWFuVHJzW2ldLmFwcGVuZENoaWxkKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2xdLmFuVGZFeHRyYVtpLTFdICk7IAkJCQkJCX0JIAkJCQkJfSAJCQkJCSAJCQkJCWZvciAoIGk9MCwgaUxlbj1vU2V0dGluZ3MuYW9EYXRhLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQkJeyAJCQkJCQluVGQgPSBvU2V0dGluZ3MuYW9EYXRhW2ldLl9hbkhpZGRlbltpQ29sXTsgCQkJCQkJb1NldHRpbmdzLmFvRGF0YVtpXS5uVHIuYXBwZW5kQ2hpbGQoIG5UZCApOyAJCQkJCX0gCQkJCX0gCQkJCWVsc2UgCQkJCXsgCQkJCQkvKiBXaGljaCBjb2xvdW1uIHNob3VsZCB3ZSBiZSBpbnNlcnRpbmcgYmVmb3JlPyAqLyAJCQkJCXZhciBpQmVmb3JlOyAJCQkJCWZvciAoIGk9aUNvbCA7IGk8aUNvbHVtbnMgOyBpKysgKSAJCQkJCXsgCQkJCQkJaUJlZm9yZSA9IF9mbkNvbHVtbkluZGV4VG9WaXNpYmxlKCBvU2V0dGluZ3MsIGkgKTsgCQkJCQkJaWYgKCBpQmVmb3JlICE9PSBudWxsICkgCQkJCQkJeyAJCQkJCQkJYnJlYWs7IAkJCQkJCX0gCQkJCQl9IAkJCQkJIAkJCQkJblRySGVhZC5pbnNlcnRCZWZvcmUoIGFuVGhlYWRUaFtpQ29sXSwgblRySGVhZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGgnKVtpQmVmb3JlXSApOyAJCQkJCWFuVHJzID0gJCgnPnRyJywgb1NldHRpbmdzLm5USGVhZCk7IAkJCQkJZm9yICggaT0xLCBpTGVuPWFuVHJzLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQkJeyAJCQkJCQlqcUNoaWxkcmVuID0gJChhblRyc1tpXSkuY2hpbGRyZW4oKTsgCQkJCQkJYW5UcnNbaV0uaW5zZXJ0QmVmb3JlKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2xdLmFuVGhFeHRyYVtpLTFdLCBqcUNoaWxkcmVuW2lCZWZvcmVdICk7IAkJCQkJfQkgCQkJCQkgCQkJCQlpZiAoIG5UckZvb3QgKSAJCQkJCXsgCQkJCQkJblRyRm9vdC5pbnNlcnRCZWZvcmUoIGFuVGZvb3RUaFtpQ29sXSwgblRyRm9vdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGgnKVtpQmVmb3JlXSApOyAJCQkJCQlhblRycyA9ICQoJz50cicsIG9TZXR0aW5ncy5uVEZvb3QpOyAJCQkJCQlmb3IgKCBpPTEsIGlMZW49YW5UcnMubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJCQkJeyAJCQkJCQkJanFDaGlsZHJlbiA9ICQoYW5UcnNbaV0pLmNoaWxkcmVuKCk7IAkJCQkJCQlhblRyc1tpXS5pbnNlcnRCZWZvcmUoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbF0uYW5UZkV4dHJhW2ktMV0sIGpxQ2hpbGRyZW5baUJlZm9yZV0gKTsgCQkJCQkJfQkgCQkJCQl9IAkJCQkJIAkJCQkJYW5UZHMgPSBfZm5HZXRUZE5vZGVzKCBvU2V0dGluZ3MgKTsgCQkJCQlmb3IgKCBpPTAsIGlMZW49b1NldHRpbmdzLmFvRGF0YS5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJCXsgCQkJCQkJblRkID0gb1NldHRpbmdzLmFvRGF0YVtpXS5fYW5IaWRkZW5baUNvbF07IAkJCQkJCW9TZXR0aW5ncy5hb0RhdGFbaV0ublRyLmluc2VydEJlZm9yZSggblRkLCAkKCc+dGQ6ZXEoJytpQmVmb3JlKycpJywgIAkJCQkJCQlvU2V0dGluZ3MuYW9EYXRhW2ldLm5UcilbMF0gKTsgCQkJCQl9IAkJCQl9IAkJCQkgCQkJCW9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbF0uYlZpc2libGUgPSB0cnVlOyAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJLyogUmVtb3ZlIGEgY29sdW1uIGZyb20gZGlzcGxheSAqLyAJCQkJblRySGVhZC5yZW1vdmVDaGlsZCggYW5UaGVhZFRoW2lDb2xdICk7IAkJCQlmb3IgKCBpPTAsIGlMZW49b1NldHRpbmdzLmFvQ29sdW1uc1tpQ29sXS5hblRoRXh0cmEubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJCXsgCQkJCQluQ2VsbCA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbF0uYW5UaEV4dHJhW2ldOyAJCQkJCW5DZWxsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIG5DZWxsICk7IAkJCQl9IAkJCQkgCQkJCWlmICggblRyRm9vdCApIAkJCQl7IAkJCQkJblRyRm9vdC5yZW1vdmVDaGlsZCggYW5UZm9vdFRoW2lDb2xdICk7IAkJCQkJZm9yICggaT0wLCBpTGVuPW9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbF0uYW5UZkV4dHJhLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQkJeyAJCQkJCQluQ2VsbCA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbF0uYW5UZkV4dHJhW2ldOyAJCQkJCQluQ2VsbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBuQ2VsbCApOyAJCQkJCX0gCQkJCX0gCQkJCSAJCQkJYW5UZHMgPSBfZm5HZXRUZE5vZGVzKCBvU2V0dGluZ3MgKTsgCQkJCWZvciAoIGk9MCwgaUxlbj1vU2V0dGluZ3MuYW9EYXRhLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQl7IAkJCQkJblRkID0gYW5UZHNbICggaSpvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCkgKyAoaUNvbCoxKSBdOyAJCQkJCW9TZXR0aW5ncy5hb0RhdGFbaV0uX2FuSGlkZGVuW2lDb2xdID0gblRkOyAJCQkJCW5UZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBuVGQgKTsgCQkJCX0gCQkJCSAJCQkJb1NldHRpbmdzLmFvQ29sdW1uc1tpQ29sXS5iVmlzaWJsZSA9IGZhbHNlOyAJCQl9IAkJCSAJCQkvKiBJZiB0aGVyZSBhcmUgYW55ICdvcGVuJyByb3dzLCB0aGVuIHdlIG5lZWQgdG8gYWx0ZXIgdGhlIGNvbHNwYW4gZm9yIHRoaXMgY29sIGNoYW5nZSAqLyAJCQlmb3IgKCBpPTAsIGlMZW49b1NldHRpbmdzLmFvT3BlblJvd3MubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJb1NldHRpbmdzLmFvT3BlblJvd3NbaV0ublRyLmNvbFNwYW4gPSBfZm5WaXNibGVDb2x1bW5zKCBvU2V0dGluZ3MgKTsgCQkJfSAJCQkgCQkJLyogRG8gYSByZWRyYXcgaW5jYXNlIGFueXRoaW5nIGRlcGVuZGluZyBvbiB0aGUgdGFibGUgY29sdW1ucyBuZWVkcyBpdCAgCQkJICogKGJ1aWx0LWluOiBzY3JvbGxpbmcpICAJCQkgKi8gCQkJaWYgKCB0eXBlb2YgYlJlZHJhdyA9PSAndW5kZWZpbmVkJyB8fCBiUmVkcmF3ICkgCQkJeyAJCQkJX2ZuQWp1c3RDb2x1bW5TaXppbmcoIG9TZXR0aW5ncyApOyAJCQkJX2ZuRHJhdyggb1NldHRpbmdzICk7IAkJCX0gCQkJIAkJCV9mblNhdmVTdGF0ZSggb1NldHRpbmdzICk7IAkJfTsgCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBmblBhZ2VDaGFuZ2UgCQkgKiBQdXJwb3NlOiAgQ2hhbmdlIHRoZSBwYWdpbmF0aW9uIAkJICogUmV0dXJuczogIC0gCQkgKiBJbnB1dHM6ICAgc3RyaW5nOnNBY3Rpb24gLSBwYWdpbmcgYWN0aW9uIHRvIHRha2U6ICJmaXJzdCIsICJwcmV2aW91cyIsICJuZXh0IiBvciAibGFzdCIgCQkgKiAgICAgICAgICAgYm9vbDpiUmVkcmF3IC0gcmVkcmF3IHRoZSB0YWJsZSBvciBub3QgLSBvcHRpb25hbCAtIGRlZmF1bHQgdHJ1ZSAJCSAqLyAJCXRoaXMuZm5QYWdlQ2hhbmdlID0gZnVuY3Rpb24gKCBzQWN0aW9uLCBiUmVkcmF3ICkgCQl7IAkJCXZhciBvU2V0dGluZ3MgPSBfZm5TZXR0aW5nc0Zyb21Ob2RlKCB0aGlzW19vRXh0LmlBcGlJbmRleF0gKTsgCQkJX2ZuUGFnZUNoYW5nZSggb1NldHRpbmdzLCBzQWN0aW9uICk7IAkJCV9mbkNhbGN1bGF0ZUVuZCggb1NldHRpbmdzICk7IAkJCSAJCQlpZiAoIHR5cGVvZiBiUmVkcmF3ID09ICd1bmRlZmluZWQnIHx8IGJSZWRyYXcgKSAJCQl7IAkJCQlfZm5EcmF3KCBvU2V0dGluZ3MgKTsgCQkJfSAJCX07IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogZm5EZXN0cm95IAkJICogUHVycG9zZTogIERlc3RydWN0b3IgZm9yIHRoZSBEYXRhVGFibGUgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICAtIAkJICovIAkJdGhpcy5mbkRlc3Ryb3kgPSBmdW5jdGlvbiAoICkgCQl7IAkJCXZhciBvU2V0dGluZ3MgPSBfZm5TZXR0aW5nc0Zyb21Ob2RlKCB0aGlzW19vRXh0LmlBcGlJbmRleF0gKTsgCQkJdmFyIG5PcmlnID0gb1NldHRpbmdzLm5UYWJsZVdyYXBwZXIucGFyZW50Tm9kZTsgCQkJdmFyIG5Cb2R5ID0gb1NldHRpbmdzLm5UQm9keTsgCQkJdmFyIGksIGlMZW47IAkJCSAJCQkvKiBGbGFnIHRvIG5vdGUgdGhhdCB0aGUgdGFibGUgaXMgY3VycmVudGx5IGJlaW5nIGRlc3RvcnllZCAtIG5vIGFjdGlvbiBzaG91bGQgYmUgdGFrZW4gKi8gCQkJb1NldHRpbmdzLmJEZXN0cm95aW5nID0gdHJ1ZTsgCQkJIAkJCS8qIFJlc3RvcmUgaGlkZGVuIGNvbHVtbnMgKi8gCQkJZm9yICggaT0wLCBpTGVuPW9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmJWaXNpYmxlID09PSBmYWxzZSApIAkJCQl7IAkJCQkJdGhpcy5mblNldENvbHVtblZpcyggaSwgdHJ1ZSApOyAJCQkJfSAJCQl9IAkJCSAJCQkvKiBJZiB0aGVyZSBpcyBhbiAnZW1wdHknIGluZGljYXRvciByb3csIHJlbW92ZSBpdCAqLyAJCQkkKCd0Ym9keT50cj50ZC4nK29TZXR0aW5ncy5vQ2xhc3Nlcy5zUm93RW1wdHksIG9TZXR0aW5ncy5uVGFibGUpLnBhcmVudCgpLnJlbW92ZSgpOyAJCQkgCQkJLyogV2hlbiBzY3JvbGxpbmcgd2UgaGFkIHRvIGJyZWFrIHRoZSB0YWJsZSB1cCAtIHJlc3RvcmUgaXQgKi8gCQkJaWYgKCBvU2V0dGluZ3MublRhYmxlICE9IG9TZXR0aW5ncy5uVEhlYWQucGFyZW50Tm9kZSApIAkJCXsgCQkJCSQoJz50aGVhZCcsIG9TZXR0aW5ncy5uVGFibGUpLnJlbW92ZSgpOyAJCQkJb1NldHRpbmdzLm5UYWJsZS5hcHBlbmRDaGlsZCggb1NldHRpbmdzLm5USGVhZCApOyAJCQl9IAkJCSAJCQlpZiAoIG9TZXR0aW5ncy5uVEZvb3QgJiYgb1NldHRpbmdzLm5UYWJsZSAhPSBvU2V0dGluZ3MublRGb290LnBhcmVudE5vZGUgKSAJCQl7IAkJCQkkKCc+dGZvb3QnLCBvU2V0dGluZ3MublRhYmxlKS5yZW1vdmUoKTsgCQkJCW9TZXR0aW5ncy5uVGFibGUuYXBwZW5kQ2hpbGQoIG9TZXR0aW5ncy5uVEZvb3QgKTsgCQkJfSAJCQkgCQkJLyogUmVtb3ZlIHRoZSBEYXRhVGFibGVzIGdlbmVyYXRlZCBub2RlcywgZXZlbnRzIGFuZCBjbGFzc2VzICovIAkJCW9TZXR0aW5ncy5uVGFibGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggb1NldHRpbmdzLm5UYWJsZSApOyAJCQkkKG9TZXR0aW5ncy5uVGFibGVXcmFwcGVyKS5yZW1vdmUoKTsgCQkJIAkJCW9TZXR0aW5ncy5hYVNvcnRpbmcgPSBbXTsgCQkJb1NldHRpbmdzLmFhU29ydGluZ0ZpeGVkID0gW107IAkJCV9mblNvcnRpbmdDbGFzc2VzKCBvU2V0dGluZ3MgKTsgCQkJIAkJCSQoX2ZuR2V0VHJOb2Rlcyggb1NldHRpbmdzICkpLnJlbW92ZUNsYXNzKCBvU2V0dGluZ3MuYXNTdHJpcENsYXNzZXMuam9pbignICcpICk7IAkJCSAJCQlpZiAoICFvU2V0dGluZ3MuYkpVSSApIAkJCXsgCQkJCSQoJ3RoJywgb1NldHRpbmdzLm5USGVhZCkucmVtb3ZlQ2xhc3MoIFsgX29FeHQub1N0ZENsYXNzZXMuc1NvcnRhYmxlLCAJCQkJCV9vRXh0Lm9TdGRDbGFzc2VzLnNTb3J0YWJsZUFzYywgCQkJCQlfb0V4dC5vU3RkQ2xhc3Nlcy5zU29ydGFibGVEZXNjLCAJCQkJCV9vRXh0Lm9TdGRDbGFzc2VzLnNTb3J0YWJsZU5vbmUgXS5qb2luKCcgJykgCQkJCSk7IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQkkKCd0aCcsIG9TZXR0aW5ncy5uVEhlYWQpLnJlbW92ZUNsYXNzKCBbIF9vRXh0Lm9TdGRDbGFzc2VzLnNTb3J0YWJsZSwgCQkJCQlfb0V4dC5vSlVJQ2xhc3Nlcy5zU29ydGFibGVBc2MsIAkJCQkJX29FeHQub0pVSUNsYXNzZXMuc1NvcnRhYmxlRGVzYywgCQkJCQlfb0V4dC5vSlVJQ2xhc3Nlcy5zU29ydGFibGVOb25lIF0uam9pbignICcpIAkJCQkpOyAJCQkJJCgndGggc3BhbicsIG9TZXR0aW5ncy5uVEhlYWQpLnJlbW92ZSgpOyAJCQl9IAkJCSAJCQkvKiBBZGQgdGhlIFRSIGVsZW1lbnRzIGJhY2sgaW50byB0aGUgdGFibGUgaW4gdGhlaXIgb3JpZ2luYWwgb3JkZXIgKi8gCQkJbk9yaWcuYXBwZW5kQ2hpbGQoIG9TZXR0aW5ncy5uVGFibGUgKTsgCQkJZm9yICggaT0wLCBpTGVuPW9TZXR0aW5ncy5hb0RhdGEubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJbkJvZHkuYXBwZW5kQ2hpbGQoIG9TZXR0aW5ncy5hb0RhdGFbaV0ublRyICk7IAkJCX0gCQkJIAkJCS8qIFJlc3RvcmUgdGhlIHdpZHRoIG9mIHRoZSBvcmlnaW5hbCB0YWJsZSAqLyAJCQlvU2V0dGluZ3MublRhYmxlLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3Mob1NldHRpbmdzLnNEZXN0cm95V2lkdGgpOyAJCQkgCQkJLyogSWYgdGhlIHdlcmUgb3JpZ2luYWxseSBvZGQvZXZlbiB0eXBlIGNsYXNzZXMgLSB0aGVuIHdlIGFkZCB0aGVtIGJhY2sgaGVyZS4gTm90ZSAJCQkgKiB0aGlzIGlzIG5vdCBmb29sIHByb29mIChmb3IgZXhhbXBsZSBpZiBub3QgYWxsIHJvd3MgYXMgb2RkL2V2ZW4gY2xhc3NlcyAtIGJ1dCAgCQkJICogaXQncyBhIGdvb2QgZWZmb3J0IHdpdGhvdXQgZ2V0dGluZyBjYXJyaWVkIGF3YXkgCQkJICovIAkJCSQoJz50cjpldmVuJywgbkJvZHkpLmFkZENsYXNzKCBvU2V0dGluZ3MuYXNEZXN0b3J5U3RyaXBzWzBdICk7IAkJCSQoJz50cjpvZGQnLCBuQm9keSkuYWRkQ2xhc3MoIG9TZXR0aW5ncy5hc0Rlc3RvcnlTdHJpcHNbMV0gKTsgCQkJIAkJCS8qIFJlbW92ZSB0aGUgc2V0dGluZ3Mgb2JqZWN0IGZyb20gdGhlIHNldHRpbmdzIGFycmF5ICovIAkJCWZvciAoIGk9MCwgaUxlbj1fYW9TZXR0aW5ncy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQl7IAkJCQlpZiAoIF9hb1NldHRpbmdzW2ldID09IG9TZXR0aW5ncyApIAkJCQl7IAkJCQkJX2FvU2V0dGluZ3Muc3BsaWNlKCBpLCAxICk7IAkJCQl9IAkJCX0gCQkJIAkJCS8qIEVuZCBpdCBhbGwgKi8gCQkJb1NldHRpbmdzID0gbnVsbDsgCQl9OyAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkFqdXN0Q29sdW1uU2l6aW5nIAkJICogUHVycG9zZTogIFVwZGF0ZSB0YWxlIHNpemluZyBiYXNlZCBvbiBjb250ZW50LiBUaGlzIHdvdWxkIG1vc3QgbGlrZWx5IGJlIHVzZWQgZm9yIHNjcm9sbGluZyAJCSAqICAgYW5kIHdpbGwgdHlwaWNhbGx5IG5lZWQgYSByZWRyYXcgYWZ0ZXIgaXQuIAkJICogUmV0dXJuczogIC0gCQkgKiBJbnB1dHM6ICAgYm9vbDpiUmVkcmF3IC0gcmVkcmF3IHRoZSB0YWJsZSBvciBub3QsIHlvdSB3aWxsIHR5cGljYWxseSB3YW50IHRvIC0gZGVmYXVsdCB0cnVlIAkJICovIAkJdGhpcy5mbkFkanVzdENvbHVtblNpemluZyA9IGZ1bmN0aW9uICggYlJlZHJhdyApIAkJeyAJCQl2YXIgb1NldHRpbmdzID0gX2ZuU2V0dGluZ3NGcm9tTm9kZSh0aGlzW19vRXh0LmlBcGlJbmRleF0pOyAJCQlfZm5BanVzdENvbHVtblNpemluZyggb1NldHRpbmdzICk7IAkJCSAJCQlpZiAoIHR5cGVvZiBiUmVkcmF3ID09ICd1bmRlZmluZWQnIHx8IGJSZWRyYXcgKSAJCQl7IAkJCQl0aGlzLmZuRHJhdyggZmFsc2UgKTsgCQkJfSAJCQllbHNlIGlmICggb1NldHRpbmdzLm9TY3JvbGwuc1ggIT09ICIiIHx8IG9TZXR0aW5ncy5vU2Nyb2xsLnNZICE9PSAiIiApIAkJCXsgCQkJCS8qIElmIG5vdCByZWRyYXdpbmcsIGJ1dCBzY3JvbGxpbmcsIHdlIHdhbnQgdG8gYXBwbHkgdGhlIG5ldyBjb2x1bW4gc2l6ZXMgYW55d2F5ICovIAkJCQl0aGlzLm9BcGkuX2ZuU2Nyb2xsRHJhdyhvU2V0dGluZ3MpOyAJCQl9IAkJfTsgCQkgCQkvKiAJCSAqIFBsdWdpbiBBUEkgZnVuY3Rpb25zIAkJICogIAkJICogVGhpcyBjYWxsIHdpbGwgYWRkIHRoZSBmdW5jdGlvbnMgd2hpY2ggYXJlIGRlZmluZWQgaW4gX29FeHQub0FwaSB0byB0aGUgCQkgKiBEYXRhVGFibGVzIG9iamVjdCwgcHJvdmlkaW5nIGEgcmF0aGVyIG5pY2Ugd2F5IHRvIGFsbG93IHBsdWctaW4gQVBJIGZ1bmN0aW9ucy4gTm90ZSB0aGF0IAkJICogdGhpcyBpcyBkb25lIGhlcmUsIHNvIHRoYXQgQVBJIGZ1bmN0aW9uIGNhbiBhY3R1YWxseSBvdmVycmlkZSB0aGUgYnVpbHQgaW4gQVBJIGZ1bmN0aW9ucyBpZiAJCSAqIHJlcXVpcmVkIGZvciBhIHBhcnRpY3VsYXIgcHVycG9zZS4gCQkgKi8gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5FeHRlcm5BcGlGdW5jIAkJICogUHVycG9zZTogIENyZWF0ZSBhIHdyYXBwZXIgZnVuY3Rpb24gZm9yIGV4cG9ydGluZyBhbiBpbnRlcm5hbCBmdW5jIHRvIGFuIGV4dGVybmFsIEFQSSBmdW5jIAkJICogUmV0dXJuczogIGZ1bmN0aW9uOiAtIHdyYXBwZWQgZnVuY3Rpb24gCQkgKiBJbnB1dHM6ICAgc3RyaW5nOnNGdW5jIC0gQVBJIGZ1bmN0aW9uIG5hbWUgCQkgKi8gCQlmdW5jdGlvbiBfZm5FeHRlcm5BcGlGdW5jIChzRnVuYykgCQl7IAkJCXJldHVybiBmdW5jdGlvbigpIHsgCQkJCQl2YXIgYUFyZ3MgPSBbX2ZuU2V0dGluZ3NGcm9tTm9kZSh0aGlzW19vRXh0LmlBcGlJbmRleF0pXS5jb25jYXQoICAJCQkJCQlBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpICk7IAkJCQkJcmV0dXJuIF9vRXh0Lm9BcGlbc0Z1bmNdLmFwcGx5KCB0aGlzLCBhQXJncyApOyAJCQkJfTsgCQl9IAkJIAkJZm9yICggdmFyIHNGdW5jIGluIF9vRXh0Lm9BcGkgKSAJCXsgCQkJaWYgKCBzRnVuYyApIAkJCXsgCQkJCS8qIAkJCQkgKiBGdW5jdGlvbjogYW5vbiAJCQkJICogUHVycG9zZTogIFdyYXAgdGhlIHBsdWctaW4gQVBJIGZ1bmN0aW9ucyBpbiBvcmRlciB0byBwcm92aWRlIHRoZSBzZXR0aW5ncyBhcyAxc3QgYXJnICAJCQkJICogICBhbmQgZXhlY3V0ZSBpbiB0aGlzIHNjb3BlIAkJCQkgKiBSZXR1cm5zOiAgLSAJCQkJICogSW5wdXRzOiAgIC0gCQkJCSAqLyAJCQkJdGhpc1tzRnVuY10gPSBfZm5FeHRlcm5BcGlGdW5jKHNGdW5jKTsgCQkJfSAJCX0gCQkgCQkgCQkgCQkvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAJCSAqIFNlY3Rpb24gLSBMb2NhbCBmdW5jdGlvbnMgCQkgKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi8gCQkgCQkvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAJCSAqIFNlY3Rpb24gLSBJbml0YWxpc2F0aW9uIAkJICovIAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuSW5pdGFsaXNlIAkJICogUHVycG9zZTogIERyYXcgdGhlIHRhYmxlIGZvciB0aGUgZmlyc3QgdGltZSwgYWRkaW5nIGFsbCByZXF1aXJlZCBmZWF0dXJlcyAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkluaXRhbGlzZSAoIG9TZXR0aW5ncyApIAkJeyAJCQl2YXIgaSwgaUxlbjsgCQkJIAkJCS8qIEVuc3VyZSB0aGF0IHRoZSB0YWJsZSBkYXRhIGlzIGZ1bGx5IGluaXRpYWxpc2VkICovIAkJCWlmICggb1NldHRpbmdzLmJJbml0aWFsaXNlZCA9PT0gZmFsc2UgKSAJCQl7IAkJCQlzZXRUaW1lb3V0KCBmdW5jdGlvbigpeyBfZm5Jbml0YWxpc2UoIG9TZXR0aW5ncyApOyB9LCAyMDAgKTsgCQkJCXJldHVybjsgCQkJfSAJCQkgCQkJLyogU2hvdyB0aGUgZGlzcGxheSBIVE1MIG9wdGlvbnMgKi8gCQkJX2ZuQWRkT3B0aW9uc0h0bWwoIG9TZXR0aW5ncyApOyAJCQkgCQkJLyogRHJhdyB0aGUgaGVhZGVycyBmb3IgdGhlIHRhYmxlICovIAkJCV9mbkRyYXdIZWFkKCBvU2V0dGluZ3MgKTsgCQkJIAkJCS8qIE9rYXkgdG8gc2hvdyB0aGF0IHNvbWV0aGluZyBpcyBnb2luZyBvbiBub3cgKi8gCQkJX2ZuUHJvY2Vzc2luZ0Rpc3BsYXkoIG9TZXR0aW5ncywgdHJ1ZSApOyAJCQkgCQkJLyogQ2FsY3VsYXRlIHNpemVzIGZvciBjb2x1bW5zICovIAkJCWlmICggb1NldHRpbmdzLm9GZWF0dXJlcy5iQXV0b1dpZHRoICkgCQkJeyAJCQkJX2ZuQ2FsY3VsYXRlQ29sdW1uV2lkdGhzKCBvU2V0dGluZ3MgKTsgCQkJfSAJCQkgCQkJZm9yICggaT0wLCBpTGVuPW9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLnNXaWR0aCAhPT0gbnVsbCApIAkJCQl7IAkJCQkJb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5uVGguc3R5bGUud2lkdGggPSBfZm5TdHJpbmdUb0Nzcyggb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5zV2lkdGggKTsgCQkJCX0gCQkJfSAJCQkgCQkJLyogSWYgdGhlcmUgaXMgZGVmYXVsdCBzb3J0aW5nIHJlcXVpcmVkIC0gbGV0J3MgZG8gaXQuIFRoZSBzb3J0IGZ1bmN0aW9uIHdpbGwgZG8gdGhlIAkJCSAqIGRyYXdpbmcgZm9yIHVzLiBPdGhlcndpc2Ugd2UgZHJhdyB0aGUgdGFibGUgcmVnYXJkbGVzcyBvZiB0aGUgQWpheCBzb3VyY2UgLSB0aGlzIGFsbG93cyAJCQkgKiB0aGUgdGFibGUgdG8gbG9vayBpbml0aWFsaXNlZCBmb3IgQWpheCBzb3VyY2luZyBkYXRhIChzaG93ICdsb2FkaW5nJyBtZXNzYWdlIHBvc3NpYmx5KSAJCQkgKi8gCQkJaWYgKCBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJTb3J0ICkgCQkJeyAJCQkJX2ZuU29ydCggb1NldHRpbmdzICk7IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQlvU2V0dGluZ3MuYWlEaXNwbGF5ID0gb1NldHRpbmdzLmFpRGlzcGxheU1hc3Rlci5zbGljZSgpOyAJCQkJX2ZuQ2FsY3VsYXRlRW5kKCBvU2V0dGluZ3MgKTsgCQkJCV9mbkRyYXcoIG9TZXR0aW5ncyApOyAJCQl9IAkJCSAJCQkvKiBpZiB0aGVyZSBpcyBhbiBhamF4IHNvdXJjZSBsb2FkIHRoZSBkYXRhICovIAkJCWlmICggb1NldHRpbmdzLnNBamF4U291cmNlICE9PSBudWxsICYmICFvU2V0dGluZ3Mub0ZlYXR1cmVzLmJTZXJ2ZXJTaWRlICkgCQkJeyAJCQkJb1NldHRpbmdzLmZuU2VydmVyRGF0YS5jYWxsKCBvU2V0dGluZ3Mub0luc3RhbmNlLCBvU2V0dGluZ3Muc0FqYXhTb3VyY2UsIFtdLCBmdW5jdGlvbihqc29uKSB7IAkJCQkJLyogR290IHRoZSBkYXRhIC0gYWRkIGl0IHRvIHRoZSB0YWJsZSAqLyAJCQkJCWZvciAoIGk9MCA7IGk8anNvbi5hYURhdGEubGVuZ3RoIDsgaSsrICkgCQkJCQl7IAkJCQkJCV9mbkFkZERhdGEoIG9TZXR0aW5ncywganNvbi5hYURhdGFbaV0gKTsgCQkJCQl9IAkJCQkJIAkJCQkJLyogUmVzZXQgdGhlIGluaXQgZGlzcGxheSBmb3IgY29va2llIHNhdmluZy4gV2UndmUgYWxyZWFkeSBkb25lIGEgZmlsdGVyLCBhbmQgCQkJCQkgKiB0aGVyZWZvcmUgY2xlYXJlZCBpdCBiZWZvcmUuIFNvIHdlIG5lZWQgdG8gbWFrZSBpdCBhcHBlYXIgJ2ZyZXNoJyAJCQkJCSAqLyAJCQkJCW9TZXR0aW5ncy5pSW5pdERpc3BsYXlTdGFydCA9IG9TZXR0aW5ncy5faURpc3BsYXlTdGFydDsgCQkJCQkgCQkJCQlpZiAoIG9TZXR0aW5ncy5vRmVhdHVyZXMuYlNvcnQgKSAJCQkJCXsgCQkJCQkJX2ZuU29ydCggb1NldHRpbmdzICk7IAkJCQkJfSAJCQkJCWVsc2UgCQkJCQl7IAkJCQkJCW9TZXR0aW5ncy5haURpc3BsYXkgPSBvU2V0dGluZ3MuYWlEaXNwbGF5TWFzdGVyLnNsaWNlKCk7IAkJCQkJCV9mbkNhbGN1bGF0ZUVuZCggb1NldHRpbmdzICk7IAkJCQkJCV9mbkRyYXcoIG9TZXR0aW5ncyApOyAJCQkJCX0gCQkJCQkgCQkJCQlfZm5Qcm9jZXNzaW5nRGlzcGxheSggb1NldHRpbmdzLCBmYWxzZSApOyAJCQkJCV9mbkluaXRDb21wbGV0ZSggb1NldHRpbmdzLCBqc29uICk7IAkJCQl9ICk7IAkJCQlyZXR1cm47IAkJCX0gCQkJIAkJCS8qIFNlcnZlci1zaWRlIHByb2Nlc3NpbmcgaW5pdGlhbGlzYXRpb24gY29tcGxldGUgaXMgZG9uZSBhdCB0aGUgZW5kIG9mIF9mbkRyYXcgKi8gCQkJaWYgKCAhb1NldHRpbmdzLm9GZWF0dXJlcy5iU2VydmVyU2lkZSApIAkJCXsgCQkJCV9mblByb2Nlc3NpbmdEaXNwbGF5KCBvU2V0dGluZ3MsIGZhbHNlICk7IAkJCQlfZm5Jbml0Q29tcGxldGUoIG9TZXR0aW5ncyApOyAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkluaXRhbGlzZSAJCSAqIFB1cnBvc2U6ICBEcmF3IHRoZSB0YWJsZSBmb3IgdGhlIGZpcnN0IHRpbWUsIGFkZGluZyBhbGwgcmVxdWlyZWQgZmVhdHVyZXMgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5Jbml0Q29tcGxldGUgKCBvU2V0dGluZ3MsIGpzb24gKSAJCXsgCQkJb1NldHRpbmdzLl9iSW5pdENvbXBsZXRlID0gdHJ1ZTsgCQkJaWYgKCB0eXBlb2Ygb1NldHRpbmdzLmZuSW5pdENvbXBsZXRlID09ICdmdW5jdGlvbicgKSAJCQl7IAkJCQlpZiAoIHR5cGVvZiBqc29uICE9ICd1bmRlZmluZWQnICkgCQkJCXsgCQkJCQlvU2V0dGluZ3MuZm5Jbml0Q29tcGxldGUuY2FsbCggb1NldHRpbmdzLm9JbnN0YW5jZSwgb1NldHRpbmdzLCBqc29uICk7IAkJCQl9IAkJCQllbHNlIAkJCQl7IAkJCQkJb1NldHRpbmdzLmZuSW5pdENvbXBsZXRlLmNhbGwoIG9TZXR0aW5ncy5vSW5zdGFuY2UsIG9TZXR0aW5ncyApOyAJCQkJfSAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkxhbmd1YWdlUHJvY2VzcyAJCSAqIFB1cnBvc2U6ICBDb3B5IGxhbmd1YWdlIHZhcmlhYmxlcyBmcm9tIHJlbW90ZSBvYmplY3QgdG8gYSBsb2NhbCBvbmUgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgb2JqZWN0Om9MYW5ndWFnZSAtIExhbmd1YWdlIGluZm9ybWF0aW9uIAkJICogICAgICAgICAgIGJvb2w6YkluaXQgLSBpbml0IG9uY2UgY29tcGxldGUgCQkgKi8gCQlmdW5jdGlvbiBfZm5MYW5ndWFnZVByb2Nlc3MoIG9TZXR0aW5ncywgb0xhbmd1YWdlLCBiSW5pdCApIAkJeyAJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2UsIG9MYW5ndWFnZSwgJ3NQcm9jZXNzaW5nJyApOyAJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2UsIG9MYW5ndWFnZSwgJ3NMZW5ndGhNZW51JyApOyAJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2UsIG9MYW5ndWFnZSwgJ3NFbXB0eVRhYmxlJyApOyAJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2UsIG9MYW5ndWFnZSwgJ3NaZXJvUmVjb3JkcycgKTsgCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub0xhbmd1YWdlLCBvTGFuZ3VhZ2UsICdzSW5mbycgKTsgCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub0xhbmd1YWdlLCBvTGFuZ3VhZ2UsICdzSW5mb0VtcHR5JyApOyAJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2UsIG9MYW5ndWFnZSwgJ3NJbmZvRmlsdGVyZWQnICk7IAkJCV9mbk1hcCggb1NldHRpbmdzLm9MYW5ndWFnZSwgb0xhbmd1YWdlLCAnc0luZm9Qb3N0Rml4JyApOyAJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2UsIG9MYW5ndWFnZSwgJ3NTZWFyY2gnICk7IAkJCSAJCQlpZiAoIHR5cGVvZiBvTGFuZ3VhZ2Uub1BhZ2luYXRlICE9ICd1bmRlZmluZWQnICkgCQkJeyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub0xhbmd1YWdlLm9QYWdpbmF0ZSwgb0xhbmd1YWdlLm9QYWdpbmF0ZSwgJ3NGaXJzdCcgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLm9MYW5ndWFnZS5vUGFnaW5hdGUsIG9MYW5ndWFnZS5vUGFnaW5hdGUsICdzUHJldmlvdXMnICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2Uub1BhZ2luYXRlLCBvTGFuZ3VhZ2Uub1BhZ2luYXRlLCAnc05leHQnICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2Uub1BhZ2luYXRlLCBvTGFuZ3VhZ2Uub1BhZ2luYXRlLCAnc0xhc3QnICk7IAkJCX0gCQkJIAkJCS8qIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IC0gaWYgdGhlcmUgaXMgbm8gc0VtcHR5VGFibGUgZ2l2ZW4sIHRoZW4gdXNlIHRoZSBzYW1lIGFzIAkJCSAqIHNaZXJvUmVjb3JkcyAtIGFzc3VtaW5nIHRoYXQgaXMgZ2l2ZW4uIAkJCSAqLyAJCQlpZiAoIHR5cGVvZiBvTGFuZ3VhZ2Uuc0VtcHR5VGFibGUgPT0gJ3VuZGVmaW5lZCcgJiYgIAkJCSAgICAgdHlwZW9mIG9MYW5ndWFnZS5zWmVyb1JlY29yZHMgIT0gJ3VuZGVmaW5lZCcgKSAJCQl7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2UsIG9MYW5ndWFnZSwgJ3NaZXJvUmVjb3JkcycsICdzRW1wdHlUYWJsZScgKTsgCQkJfSAJCQkgCQkJaWYgKCBiSW5pdCApIAkJCXsgCQkJCV9mbkluaXRhbGlzZSggb1NldHRpbmdzICk7IAkJCX0gCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQWRkQ29sdW1uIAkJICogUHVycG9zZTogIEFkZCBhIGNvbHVtbiB0byB0aGUgbGlzdCB1c2VkIGZvciB0aGUgdGFibGUgd2l0aCBkZWZhdWx0IHZhbHVlcyAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqICAgICAgICAgICBub2RlOm5UaCAtIHRoZSB0aCBlbGVtZW50IGZvciB0aGlzIGNvbHVtbiAJCSAqLyAJCWZ1bmN0aW9uIF9mbkFkZENvbHVtbiggb1NldHRpbmdzLCBuVGggKSAJCXsgCQkJb1NldHRpbmdzLmFvQ29sdW1uc1sgb1NldHRpbmdzLmFvQ29sdW1ucy5sZW5ndGgrKyBdID0geyAJCQkJInNUeXBlIjogbnVsbCwgCQkJCSJfYkF1dG9UeXBlIjogdHJ1ZSwgCQkJCSJiVmlzaWJsZSI6IHRydWUsIAkJCQkiYlNlYXJjaGFibGUiOiB0cnVlLCAJCQkJImJTb3J0YWJsZSI6IHRydWUsIAkJCQkiYXNTb3J0aW5nIjogWyAnYXNjJywgJ2Rlc2MnIF0sIAkJCQkic1NvcnRpbmdDbGFzcyI6IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU29ydGFibGUsIAkJCQkic1NvcnRpbmdDbGFzc0pVSSI6IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU29ydEpVSSwgCQkJCSJzVGl0bGUiOiBuVGggPyBuVGguaW5uZXJIVE1MIDogJycsIAkJCQkic05hbWUiOiAnJywgCQkJCSJzV2lkdGgiOiBudWxsLCAJCQkJInNXaWR0aE9yaWciOiBudWxsLCAJCQkJInNDbGFzcyI6IG51bGwsIAkJCQkiZm5SZW5kZXIiOiBudWxsLCAJCQkJImJVc2VSZW5kZXJlZCI6IHRydWUsIAkJCQkiaURhdGFTb3J0Ijogb1NldHRpbmdzLmFvQ29sdW1ucy5sZW5ndGgtMSwgCQkJCSJzU29ydERhdGFUeXBlIjogJ3N0ZCcsIAkJCQkiblRoIjogblRoID8gblRoIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKSwgCQkJCSJuVGYiOiBudWxsLCAJCQkJImFuVGhFeHRyYSI6IFtdLCAJCQkJImFuVGZFeHRyYSI6IFtdIAkJCX07IAkJCSAJCQl2YXIgaUNvbCA9IG9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoLTE7IAkJCXZhciBvQ29sID0gb1NldHRpbmdzLmFvQ29sdW1uc1sgaUNvbCBdOyAJCQkgCQkJLyogQWRkIGEgY29sdW1uIHNwZWNpZmljIGZpbHRlciAqLyAJCQlpZiAoIHR5cGVvZiBvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzWyBpQ29sIF0gPT0gJ3VuZGVmaW5lZCcgfHwgCQkJICAgICBvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzWyBpQ29sIF0gPT09IG51bGwgKSAJCQl7IAkJCQlvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzWyBpQ29sIF0gPSB7IAkJCQkJInNTZWFyY2giOiAiIiwgCQkJCQkiYlJlZ2V4IjogZmFsc2UsIAkJCQkJImJTbWFydCI6IHRydWUgCQkJCX07IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQkvKiBEb24ndCByZXF1aXJlIHRoYXQgdGhlIHVzZXIgbXVzdCBzcGVjaWZ5IGJSZWdleCBhbmQgLyBvciBiU21hcnQgKi8gCQkJCWlmICggdHlwZW9mIG9TZXR0aW5ncy5hb1ByZVNlYXJjaENvbHNbIGlDb2wgXS5iUmVnZXggPT0gJ3VuZGVmaW5lZCcgKSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5hb1ByZVNlYXJjaENvbHNbIGlDb2wgXS5iUmVnZXggPSB0cnVlOyAJCQkJfSAJCQkJIAkJCQlpZiAoIHR5cGVvZiBvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzWyBpQ29sIF0uYlNtYXJ0ID09ICd1bmRlZmluZWQnICkgCQkJCXsgCQkJCQlvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzWyBpQ29sIF0uYlNtYXJ0ID0gdHJ1ZTsgCQkJCX0gCQkJfSAgCQkJIAkJCS8qIFVzZSB0aGUgY29sdW1uIG9wdGlvbnMgZnVuY3Rpb24gdG8gaW5pdGlhbGlzZSBjbGFzc2VzIGV0YyAqLyAJCQlfZm5Db2x1bW5PcHRpb25zKCBvU2V0dGluZ3MsIGlDb2wsIG51bGwgKTsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQ29sdW1uT3B0aW9ucyAJCSAqIFB1cnBvc2U6ICBBcHBseSBvcHRpb25zIGZvciBhIGNvbHVtbiAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqICAgICAgICAgICBpbnQ6aUNvbCAtIGNvbHVtbiBpbmRleCB0byBjb25zaWRlciAJCSAqICAgICAgICAgICBvYmplY3Q6b09wdGlvbnMgLSBvYmplY3Qgd2l0aCBzVHlwZSwgYlZpc2libGUgYW5kIGJTZWFyY2hhYmxlIAkJICovIAkJZnVuY3Rpb24gX2ZuQ29sdW1uT3B0aW9ucyggb1NldHRpbmdzLCBpQ29sLCBvT3B0aW9ucyApIAkJeyAJCQl2YXIgb0NvbCA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbIGlDb2wgXTsgCQkJIAkJCS8qIFVzZXIgc3BlY2lmaWVkIGNvbHVtbiBvcHRpb25zICovIAkJCWlmICggdHlwZW9mIG9PcHRpb25zICE9ICd1bmRlZmluZWQnICYmIG9PcHRpb25zICE9PSBudWxsICkgCQkJeyAJCQkJaWYgKCB0eXBlb2Ygb09wdGlvbnMuc1R5cGUgIT0gJ3VuZGVmaW5lZCcgKSAJCQkJeyAJCQkJCW9Db2wuc1R5cGUgPSBvT3B0aW9ucy5zVHlwZTsgCQkJCQlvQ29sLl9iQXV0b1R5cGUgPSBmYWxzZTsgCQkJCX0gCQkJCSAJCQkJX2ZuTWFwKCBvQ29sLCBvT3B0aW9ucywgImJWaXNpYmxlIiApOyAJCQkJX2ZuTWFwKCBvQ29sLCBvT3B0aW9ucywgImJTZWFyY2hhYmxlIiApOyAJCQkJX2ZuTWFwKCBvQ29sLCBvT3B0aW9ucywgImJTb3J0YWJsZSIgKTsgCQkJCV9mbk1hcCggb0NvbCwgb09wdGlvbnMsICJzVGl0bGUiICk7IAkJCQlfZm5NYXAoIG9Db2wsIG9PcHRpb25zLCAic05hbWUiICk7IAkJCQlfZm5NYXAoIG9Db2wsIG9PcHRpb25zLCAic1dpZHRoIiApOyAJCQkJX2ZuTWFwKCBvQ29sLCBvT3B0aW9ucywgInNXaWR0aCIsICJzV2lkdGhPcmlnIiApOyAJCQkJX2ZuTWFwKCBvQ29sLCBvT3B0aW9ucywgInNDbGFzcyIgKTsgCQkJCV9mbk1hcCggb0NvbCwgb09wdGlvbnMsICJmblJlbmRlciIgKTsgCQkJCV9mbk1hcCggb0NvbCwgb09wdGlvbnMsICJiVXNlUmVuZGVyZWQiICk7IAkJCQlfZm5NYXAoIG9Db2wsIG9PcHRpb25zLCAiaURhdGFTb3J0IiApOyAJCQkJX2ZuTWFwKCBvQ29sLCBvT3B0aW9ucywgImFzU29ydGluZyIgKTsgCQkJCV9mbk1hcCggb0NvbCwgb09wdGlvbnMsICJzU29ydERhdGFUeXBlIiApOyAJCQl9IAkJCSAJCQkvKiBGZWF0dXJlIHNvcnRpbmcgb3ZlcnJpZGVzIGNvbHVtbiBzcGVjaWZpYyB3aGVuIG9mZiAqLyAJCQlpZiAoICFvU2V0dGluZ3Mub0ZlYXR1cmVzLmJTb3J0ICkgCQkJeyAJCQkJb0NvbC5iU29ydGFibGUgPSBmYWxzZTsgCQkJfSAJCQkgCQkJLyogQ2hlY2sgdGhhdCB0aGUgY2xhc3MgYXNzaWdubWVudCBpcyBjb3JyZWN0IGZvciBzb3J0aW5nICovIAkJCWlmICggIW9Db2wuYlNvcnRhYmxlIHx8IAkJCQkJICgkLmluQXJyYXkoJ2FzYycsIG9Db2wuYXNTb3J0aW5nKSA9PSAtMSAmJiAkLmluQXJyYXkoJ2Rlc2MnLCBvQ29sLmFzU29ydGluZykgPT0gLTEpICkgCQkJeyAJCQkJb0NvbC5zU29ydGluZ0NsYXNzID0gb1NldHRpbmdzLm9DbGFzc2VzLnNTb3J0YWJsZU5vbmU7IAkJCQlvQ29sLnNTb3J0aW5nQ2xhc3NKVUkgPSAiIjsgCQkJfSAJCQllbHNlIGlmICggJC5pbkFycmF5KCdhc2MnLCBvQ29sLmFzU29ydGluZykgIT0gLTEgJiYgJC5pbkFycmF5KCdkZXNjJywgb0NvbC5hc1NvcnRpbmcpID09IC0xICkgCQkJeyAJCQkJb0NvbC5zU29ydGluZ0NsYXNzID0gb1NldHRpbmdzLm9DbGFzc2VzLnNTb3J0YWJsZUFzYzsgCQkJCW9Db2wuc1NvcnRpbmdDbGFzc0pVSSA9IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU29ydEpVSUFzY0FsbG93ZWQ7IAkJCX0gCQkJZWxzZSBpZiAoICQuaW5BcnJheSgnYXNjJywgb0NvbC5hc1NvcnRpbmcpID09IC0xICYmICQuaW5BcnJheSgnZGVzYycsIG9Db2wuYXNTb3J0aW5nKSAhPSAtMSApIAkJCXsgCQkJCW9Db2wuc1NvcnRpbmdDbGFzcyA9IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU29ydGFibGVEZXNjOyAJCQkJb0NvbC5zU29ydGluZ0NsYXNzSlVJID0gb1NldHRpbmdzLm9DbGFzc2VzLnNTb3J0SlVJRGVzY0FsbG93ZWQ7IAkJCX0gCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQWRkRGF0YSAJCSAqIFB1cnBvc2U6ICBBZGQgYSBkYXRhIGFycmF5IHRvIHRoZSB0YWJsZSwgY3JlYXRpbmcgRE9NIG5vZGUgZXRjIAkJICogUmV0dXJuczogIGludDogLSA+PTAgaWYgc3VjY2Vzc2Z1bCAoaW5kZXggb2YgbmV3IGFvRGF0YSBlbnRyeSksIC0xIGlmIGZhaWxlZCAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgYXJyYXk6YURhdGEgLSBkYXRhIGFycmF5IHRvIGJlIGFkZGVkIAkJICogTm90ZXM6ICAgIFRoZXJlIGFyZSB0d28gYmFzaWMgbWV0aG9kcyBmb3IgRGF0YVRhYmxlcyB0byBnZXQgZGF0YSB0byBkaXNwbGF5IC0gYSBKUyBhcnJheSAJCSAqICAgKHdoaWNoIGlzIGRlYWx0IHdpdGggYnkgdGhpcyBmdW5jdGlvbiksIGFuZCB0aGUgRE9NLCB3aGljaCBoYXMgaXQncyBvd24gb3B0aW1pc2VkIAkJICogICBmdW5jdGlvbiAoX2ZuR2F0aGVyRGF0YSkuIEJlIGNhcmVmdWwgdG8gbWFrZSB0aGUgc2FtZSBjaGFuZ2VzIGhlcmUgYXMgdGhlcmUgYW5kIHZpY2UtdmVyc2EgCQkgKi8gCQlmdW5jdGlvbiBfZm5BZGREYXRhICggb1NldHRpbmdzLCBhRGF0YVN1cHBsaWVkICkgCQl7IAkJCS8qIFNhbml0eSBjaGVjayB0aGUgbGVuZ3RoIG9mIHRoZSBuZXcgYXJyYXkgKi8gCQkJaWYgKCBhRGF0YVN1cHBsaWVkLmxlbmd0aCAhPSBvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCAmJiAJCQkJb1NldHRpbmdzLmlEcmF3RXJyb3IgIT0gb1NldHRpbmdzLmlEcmF3ICkgCQkJeyAJCQkJX2ZuTG9nKCBvU2V0dGluZ3MsIDAsICJBZGRlZCBkYXRhIChzaXplICIrYURhdGFTdXBwbGllZC5sZW5ndGgrIikgZG9lcyBub3QgbWF0Y2gga25vd24gIisgCQkJCQkibnVtYmVyIG9mIGNvbHVtbnMgKCIrb1NldHRpbmdzLmFvQ29sdW1ucy5sZW5ndGgrIikiICk7IAkJCQlvU2V0dGluZ3MuaURyYXdFcnJvciA9IG9TZXR0aW5ncy5pRHJhdzsgCQkJCXJldHVybiAtMTsgCQkJfSAJCQkgCQkJIAkJCS8qIENyZWF0ZSB0aGUgb2JqZWN0IGZvciBzdG9yaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoaXMgbmV3IHJvdyAqLyAJCQl2YXIgYURhdGEgPSBhRGF0YVN1cHBsaWVkLnNsaWNlKCk7IAkJCXZhciBpVGhpc0luZGV4ID0gb1NldHRpbmdzLmFvRGF0YS5sZW5ndGg7IAkJCW9TZXR0aW5ncy5hb0RhdGEucHVzaCggeyAJCQkJIm5UciI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyksIAkJCQkiX2lJZCI6IG9TZXR0aW5ncy5pTmV4dElkKyssIAkJCQkiX2FEYXRhIjogYURhdGEsIAkJCQkiX2FuSGlkZGVuIjogW10sIAkJCQkiX3NSb3dTdHJpcGUiOiAnJyAJCQl9ICk7IAkJCSAJCQkvKiBDcmVhdGUgdGhlIGNlbGxzICovIAkJCXZhciBuVGQsIHNUaGlzVHlwZTsgCQkJZm9yICggdmFyIGk9MCA7IGk8YURhdGEubGVuZ3RoIDsgaSsrICkgCQkJeyAJCQkJblRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsgCQkJCSAJCQkJLyogQWxsb3cgbnVsbCBkYXRhIChmcm9tIGEgZGF0YSBhcnJheSkgLSBzaW1wbHkgZGVhbCB3aXRoIGl0IGFzIGEgYmxhbmsgc3RyaW5nICovIAkJCQlpZiAoIGFEYXRhW2ldID09PSBudWxsICkgCQkJCXsgCQkJCQlhRGF0YVtpXSA9ICcnOyAJCQkJfSAJCQkJIAkJCQlpZiAoIHR5cGVvZiBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmZuUmVuZGVyID09ICdmdW5jdGlvbicgKSAJCQkJeyAJCQkJCXZhciBzUmVuZGVyZWQgPSBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmZuUmVuZGVyKCB7IAkJCQkJCQkiaURhdGFSb3ciOiBpVGhpc0luZGV4LCAJCQkJCQkJImlEYXRhQ29sdW1uIjogaSwgCQkJCQkJCSJhRGF0YSI6IGFEYXRhLCAJCQkJCQkJIm9TZXR0aW5ncyI6IG9TZXR0aW5ncyAJCQkJCQl9ICk7IAkJCQkJblRkLmlubmVySFRNTCA9IHNSZW5kZXJlZDsgCQkJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uYlVzZVJlbmRlcmVkICkgCQkJCQl7IAkJCQkJCS8qIFVzZSB0aGUgcmVuZGVyZWQgZGF0YSBmb3IgZmlsdGVyaW5nL3NvcnRpbmcgKi8gCQkJCQkJb1NldHRpbmdzLmFvRGF0YVtpVGhpc0luZGV4XS5fYURhdGFbaV0gPSBzUmVuZGVyZWQ7IAkJCQkJfSAJCQkJfSAJCQkJZWxzZSAJCQkJeyAJCQkJCW5UZC5pbm5lckhUTUwgPSBhRGF0YVtpXTsgCQkJCX0gCQkJCSAJCQkJLyogQ2FzdCBldmVyeXRoaW5nIGFzIGEgc3RyaW5nIC0gc28gd2UgY2FuIHRyZWF0IGV2ZXJ5dGhpbmcgZXF1YWxseSB3aGVuIHNvcnRpbmcgKi8gCQkJCWlmICggdHlwZW9mIGFEYXRhW2ldICE9ICdzdHJpbmcnICkgCQkJCXsgCQkJCQlhRGF0YVtpXSArPSAiIjsgCQkJCX0gCQkJCWFEYXRhW2ldID0gJC50cmltKGFEYXRhW2ldKTsgCQkJCSAJCQkJLyogQWRkIHVzZXIgZGVmaW5lZCBjbGFzcyAqLyAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLnNDbGFzcyAhPT0gbnVsbCApIAkJCQl7IAkJCQkJblRkLmNsYXNzTmFtZSA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc0NsYXNzOyAJCQkJfSAJCQkJIAkJCQkvKiBTZWUgaWYgd2Ugc2hvdWxkIGF1dG8tZGV0ZWN0IHRoZSBjb2x1bW4gdHlwZSAqLyAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLl9iQXV0b1R5cGUgJiYgb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5zVHlwZSAhPSAnc3RyaW5nJyApIAkJCQl7IAkJCQkJLyogQXR0ZW1wdCB0byBhdXRvIGRldGVjdCB0aGUgdHlwZSAtIHNhbWUgYXMgX2ZuR2F0aGVyRGF0YSgpICovIAkJCQkJc1RoaXNUeXBlID0gX2ZuRGV0ZWN0VHlwZSggb1NldHRpbmdzLmFvRGF0YVtpVGhpc0luZGV4XS5fYURhdGFbaV0gKTsgCQkJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc1R5cGUgPT09IG51bGwgKSAJCQkJCXsgCQkJCQkJb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5zVHlwZSA9IHNUaGlzVHlwZTsgCQkJCQl9IAkJCQkJZWxzZSBpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc1R5cGUgIT0gc1RoaXNUeXBlICkgCQkJCQl7IAkJCQkJCS8qIFN0cmluZyBpcyBhbHdheXMgdGhlICdmYWxsYmFjaycgb3B0aW9uICovIAkJCQkJCW9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc1R5cGUgPSAnc3RyaW5nJzsgCQkJCQl9IAkJCQl9IAkJCQkJIAkJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uYlZpc2libGUgKSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5hb0RhdGFbaVRoaXNJbmRleF0ublRyLmFwcGVuZENoaWxkKCBuVGQgKTsgCQkJCQlvU2V0dGluZ3MuYW9EYXRhW2lUaGlzSW5kZXhdLl9hbkhpZGRlbltpXSA9IG51bGw7IAkJCQl9IAkJCQllbHNlIAkJCQl7IAkJCQkJb1NldHRpbmdzLmFvRGF0YVtpVGhpc0luZGV4XS5fYW5IaWRkZW5baV0gPSBuVGQ7IAkJCQl9IAkJCX0gCQkJIAkJCS8qIEFkZCB0byB0aGUgZGlzcGxheSBhcnJheSAqLyAJCQlvU2V0dGluZ3MuYWlEaXNwbGF5TWFzdGVyLnB1c2goIGlUaGlzSW5kZXggKTsgCQkJcmV0dXJuIGlUaGlzSW5kZXg7IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkdhdGhlckRhdGEgCQkgKiBQdXJwb3NlOiAgUmVhZCBpbiB0aGUgZGF0YSBmcm9tIHRoZSB0YXJnZXQgdGFibGUgZnJvbSB0aGUgRE9NIAkJICogUmV0dXJuczogIC0gCQkgKiBJbnB1dHM6ICAgb2JqZWN0Om9TZXR0aW5ncyAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJICogTm90ZXM6ICAgIFRoaXMgaXMgYSBvcHRpbWlzZWQgdmVyc2lvbiBvZiBfZm5BZGREYXRhIChtb3JlIG9yIGxlc3MpIGZvciByZWFkaW5nIGluZm9ybWF0aW9uIAkJICogICBmcm9tIHRoZSBET00uIFRoZSBiYXNpYyBhY3Rpb25zIG11c3QgYmUgaWRlbnRpY2FsIGluIHRoZSB0d28gZnVuY3Rpb25zLiAJCSAqLyAJCWZ1bmN0aW9uIF9mbkdhdGhlckRhdGEoIG9TZXR0aW5ncyApIAkJeyAJCQl2YXIgaUxvb3AsIGksIGlMZW4sIGosIGpMZW4sIGpJbm5lciwgCQkJIAluVGRzLCBuVHJzLCBuVGQsIGFMb2NhbERhdGEsIGlUaGlzSW5kZXgsIAkJCQlpUm93LCBpUm93cywgaUNvbHVtbiwgaUNvbHVtbnM7IAkJCSAJCQkvKiAJCQkgKiBQcm9jZXNzIGJ5IHJvdyBmaXJzdCAJCQkgKiBBZGQgdGhlIGRhdGEgb2JqZWN0IGZvciB0aGUgd2hvbGUgdGFibGUgLSBzdG9yaW5nIHRoZSB0ciBub2RlLiBOb3RlIC0gbm8gcG9pbnQgaW4gZ2V0dGluZyAJCQkgKiBET00gYmFzZWQgZGF0YSBpZiB3ZSBhcmUgZ29pbmcgdG8gZ28gYW5kIHJlcGxhY2UgaXQgd2l0aCBBamF4IHNvdXJjZSBkYXRhLiAJCQkgKi8gCQkJaWYgKCBvU2V0dGluZ3Muc0FqYXhTb3VyY2UgPT09IG51bGwgKSAJCQl7IAkJCQluVHJzID0gb1NldHRpbmdzLm5UQm9keS5jaGlsZE5vZGVzOyAJCQkJZm9yICggaT0wLCBpTGVuPW5UcnMubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJCXsgCQkJCQlpZiAoIG5UcnNbaV0ubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PSAiVFIiICkgCQkJCQl7IAkJCQkJCWlUaGlzSW5kZXggPSBvU2V0dGluZ3MuYW9EYXRhLmxlbmd0aDsgCQkJCQkJb1NldHRpbmdzLmFvRGF0YS5wdXNoKCB7IAkJCQkJCQkiblRyIjogblRyc1tpXSwgCQkJCQkJCSJfaUlkIjogb1NldHRpbmdzLmlOZXh0SWQrKywgCQkJCQkJCSJfYURhdGEiOiBbXSwgCQkJCQkJCSJfYW5IaWRkZW4iOiBbXSwgCQkJCQkJCSJfc1Jvd1N0cmlwZSI6ICcnIAkJCQkJCX0gKTsgCQkJCQkJIAkJCQkJCW9TZXR0aW5ncy5haURpc3BsYXlNYXN0ZXIucHVzaCggaVRoaXNJbmRleCApOyAJCQkJCQkgCQkJCQkJYUxvY2FsRGF0YSA9IG9TZXR0aW5ncy5hb0RhdGFbaVRoaXNJbmRleF0uX2FEYXRhOyAJCQkJCQluVGRzID0gblRyc1tpXS5jaGlsZE5vZGVzOyAJCQkJCQlqSW5uZXIgPSAwOyAJCQkJCQkgCQkJCQkJZm9yICggaj0wLCBqTGVuPW5UZHMubGVuZ3RoIDsgajxqTGVuIDsgaisrICkgCQkJCQkJeyAJCQkJCQkJaWYgKCBuVGRzW2pdLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIlREIiApIAkJCQkJCQl7IAkJCQkJCQkJYUxvY2FsRGF0YVtqSW5uZXJdID0gJC50cmltKG5UZHNbal0uaW5uZXJIVE1MKTsgCQkJCQkJCQlqSW5uZXIrKzsgCQkJCQkJCX0gCQkJCQkJfSAJCQkJCX0gCQkJCX0gCQkJfSAJCQkgCQkJLyogR2F0aGVyIGluIHRoZSBURCBlbGVtZW50cyBvZiB0aGUgVGFibGUgLSBub3RlIHRoYXQgdGhpcyBpcyBiYXNpY2FsbHkgdGhlIHNhbWUgYXMgCQkJICogZm5HZXRUZE5vZGVzLCBidXQgdGhhdCBmdW5jdGlvbiB0YWtlcyBhY2NvdW50IG9mIGhpZGRlbiBjb2x1bW5zLCB3aGljaCB3ZSBoYXZlbid0IHlldCAJCQkgKiBzZXR1cCEgCQkJICovIAkJCW5UcnMgPSBfZm5HZXRUck5vZGVzKCBvU2V0dGluZ3MgKTsgCQkJblRkcyA9IFtdOyAJCQlmb3IgKCBpPTAsIGlMZW49blRycy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQl7IAkJCQlmb3IgKCBqPTAsIGpMZW49blRyc1tpXS5jaGlsZE5vZGVzLmxlbmd0aCA7IGo8akxlbiA7IGorKyApIAkJCQl7IAkJCQkJblRkID0gblRyc1tpXS5jaGlsZE5vZGVzW2pdOyAJCQkJCWlmICggblRkLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIlREIiApIAkJCQkJeyAJCQkJCQluVGRzLnB1c2goIG5UZCApOyAJCQkJCX0gCQkJCX0gCQkJfSAJCQkgCQkJLyogU2FuaXR5IGNoZWNrICovIAkJCWlmICggblRkcy5sZW5ndGggIT0gblRycy5sZW5ndGggKiBvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCApIAkJCXsgCQkJCV9mbkxvZyggb1NldHRpbmdzLCAxLCAiVW5leHBlY3RlZCBudW1iZXIgb2YgVEQgZWxlbWVudHMuIEV4cGVjdGVkICIrIAkJCQkJKG5UcnMubGVuZ3RoICogb1NldHRpbmdzLmFvQ29sdW1ucy5sZW5ndGgpKyIgYW5kIGdvdCAiK25UZHMubGVuZ3RoKyIuIERhdGFUYWJsZXMgZG9lcyAiKyAJCQkJCSJub3Qgc3VwcG9ydCByb3dzcGFuIC8gY29sc3BhbiBpbiB0aGUgdGFibGUgYm9keSwgYW5kIHRoZXJlIG11c3QgYmUgb25lIGNlbGwgZm9yIGVhY2ggIisgCQkJCQkicm93L2NvbHVtbiBjb21iaW5hdGlvbi4iICk7IAkJCX0gCQkJIAkJCS8qIE5vdyBwcm9jZXNzIGJ5IGNvbHVtbiAqLyAJCQlmb3IgKCBpQ29sdW1uPTAsIGlDb2x1bW5zPW9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaUNvbHVtbjxpQ29sdW1ucyA7IGlDb2x1bW4rKyApIAkJCXsgCQkJCS8qIEdldCB0aGUgdGl0bGUgb2YgdGhlIGNvbHVtbiAtIHVubGVzcyB0aGVyZSBpcyBhIHVzZXIgc2V0IG9uZSAqLyAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLnNUaXRsZSA9PT0gbnVsbCApIAkJCQl7IAkJCQkJb1NldHRpbmdzLmFvQ29sdW1uc1tpQ29sdW1uXS5zVGl0bGUgPSBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLm5UaC5pbm5lckhUTUw7IAkJCQl9IAkJCQkgCQkJCXZhciAJCQkJCWJBdXRvVHlwZSA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbHVtbl0uX2JBdXRvVHlwZSwgCQkJCQliUmVuZGVyID0gdHlwZW9mIG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbHVtbl0uZm5SZW5kZXIgPT0gJ2Z1bmN0aW9uJywgCQkJCQliQ2xhc3MgPSBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLnNDbGFzcyAhPT0gbnVsbCwgCQkJCQliVmlzaWJsZSA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbHVtbl0uYlZpc2libGUsIAkJCQkJbkNlbGwsIHNUaGlzVHlwZSwgc1JlbmRlcmVkOyAJCQkJIAkJCQkvKiBBIHNpbmdsZSBsb29wIHRvIHJ1bGUgdGhlbSBhbGwgKGFuZCBiZSBtb3JlIGVmZmljaWVudCkgKi8gCQkJCWlmICggYkF1dG9UeXBlIHx8IGJSZW5kZXIgfHwgYkNsYXNzIHx8ICFiVmlzaWJsZSApIAkJCQl7IAkJCQkJZm9yICggaVJvdz0wLCBpUm93cz1vU2V0dGluZ3MuYW9EYXRhLmxlbmd0aCA7IGlSb3c8aVJvd3MgOyBpUm93KysgKSAJCQkJCXsgCQkJCQkJbkNlbGwgPSBuVGRzWyAoaVJvdyppQ29sdW1ucykgKyBpQ29sdW1uIF07IAkJCQkJCSAJCQkJCQkvKiBUeXBlIGRldGVjdGlvbiAqLyAJCQkJCQlpZiAoIGJBdXRvVHlwZSApIAkJCQkJCXsgCQkJCQkJCWlmICggb1NldHRpbmdzLmFvQ29sdW1uc1tpQ29sdW1uXS5zVHlwZSAhPSAnc3RyaW5nJyApIAkJCQkJCQl7IAkJCQkJCQkJc1RoaXNUeXBlID0gX2ZuRGV0ZWN0VHlwZSggb1NldHRpbmdzLmFvRGF0YVtpUm93XS5fYURhdGFbaUNvbHVtbl0gKTsgCQkJCQkJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbHVtbl0uc1R5cGUgPT09IG51bGwgKSAJCQkJCQkJCXsgCQkJCQkJCQkJb1NldHRpbmdzLmFvQ29sdW1uc1tpQ29sdW1uXS5zVHlwZSA9IHNUaGlzVHlwZTsgCQkJCQkJCQl9IAkJCQkJCQkJZWxzZSBpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbHVtbl0uc1R5cGUgIT0gc1RoaXNUeXBlICkgCQkJCQkJCQl7IAkJCQkJCQkJCS8qIFN0cmluZyBpcyBhbHdheXMgdGhlICdmYWxsYmFjaycgb3B0aW9uICovIAkJCQkJCQkJCW9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbHVtbl0uc1R5cGUgPSAnc3RyaW5nJzsgCQkJCQkJCQl9IAkJCQkJCQl9IAkJCQkJCX0gCQkJCQkJIAkJCQkJCS8qIFJlbmRlcmluZyAqLyAJCQkJCQlpZiAoIGJSZW5kZXIgKSAJCQkJCQl7IAkJCQkJCQlzUmVuZGVyZWQgPSBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLmZuUmVuZGVyKCB7IAkJCQkJCQkJCSJpRGF0YVJvdyI6IGlSb3csIAkJCQkJCQkJCSJpRGF0YUNvbHVtbiI6IGlDb2x1bW4sIAkJCQkJCQkJCSJhRGF0YSI6IG9TZXR0aW5ncy5hb0RhdGFbaVJvd10uX2FEYXRhLCAJCQkJCQkJCQkib1NldHRpbmdzIjogb1NldHRpbmdzIAkJCQkJCQkJfSApOyAJCQkJCQkJbkNlbGwuaW5uZXJIVE1MID0gc1JlbmRlcmVkOyAJCQkJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLmJVc2VSZW5kZXJlZCApIAkJCQkJCQl7IAkJCQkJCQkJLyogVXNlIHRoZSByZW5kZXJlZCBkYXRhIGZvciBmaWx0ZXJpbmcvc29ydGluZyAqLyAJCQkJCQkJCW9TZXR0aW5ncy5hb0RhdGFbaVJvd10uX2FEYXRhW2lDb2x1bW5dID0gc1JlbmRlcmVkOyAJCQkJCQkJfSAJCQkJCQl9IAkJCQkJCSAJCQkJCQkvKiBDbGFzc2VzICovIAkJCQkJCWlmICggYkNsYXNzICkgCQkJCQkJeyAJCQkJCQkJbkNlbGwuY2xhc3NOYW1lICs9ICcgJytvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLnNDbGFzczsgCQkJCQkJfSAJCQkJCQkgCQkJCQkJLyogQ29sdW1uIHZpc2FiaWxpdHkgKi8gCQkJCQkJaWYgKCAhYlZpc2libGUgKSAJCQkJCQl7IAkJCQkJCQlvU2V0dGluZ3MuYW9EYXRhW2lSb3ddLl9hbkhpZGRlbltpQ29sdW1uXSA9IG5DZWxsOyAJCQkJCQkJbkNlbGwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggbkNlbGwgKTsgCQkJCQkJfSAJCQkJCQllbHNlIAkJCQkJCXsgCQkJCQkJCW9TZXR0aW5ncy5hb0RhdGFbaVJvd10uX2FuSGlkZGVuW2lDb2x1bW5dID0gbnVsbDsgCQkJCQkJfSAJCQkJCX0gCQkJCX0gCQkJfSAJCX0gCQkgCQkgCQkgCQkvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAJCSAqIFNlY3Rpb24gLSBEcmF3aW5nIGZ1bmN0aW9ucyAJCSAqLyAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkRyYXdIZWFkIAkJICogUHVycG9zZTogIENyZWF0ZSB0aGUgSFRNTCBoZWFkZXIgZm9yIHRoZSB0YWJsZSAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkRyYXdIZWFkKCBvU2V0dGluZ3MgKSAJCXsgCQkJdmFyIGksIG5UaCwgaUxlbiwgaiwgakxlbjsgCQkJdmFyIGFuVHIgPSBvU2V0dGluZ3MublRIZWFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpOyAJCQl2YXIgaVRocyA9IG9TZXR0aW5ncy5uVEhlYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RoJykubGVuZ3RoOyAJCQl2YXIgaUNvcnJlY3RvciA9IDA7IAkJCXZhciBqcUNoaWxkcmVuOyAJCQkgCQkJLyogSWYgdGhlcmUgaXMgYSBoZWFkZXIgaW4gcGxhY2UgLSB0aGVuIHVzZSBpdCAtIG90aGVyd2lzZSBpdCdzIGdvaW5nIHRvIGdldCBudWtlZC4uLiAqLyAJCQlpZiAoIGlUaHMgIT09IDAgKSAJCQl7IAkJCQkvKiBXZSd2ZSBnb3QgYSB0aGVhZCBmcm9tIHRoZSBET00sIHNvIHJlbW92ZSBoaWRkZW4gY29sdW1ucyBhbmQgYXBwbHkgd2lkdGggdG8gdmlzIGNvbHMgKi8gCQkJCWZvciAoIGk9MCwgaUxlbj1vU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQl7IAkJCQkJblRoID0gb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5uVGg7IAkJCQkJIAkJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLnNDbGFzcyAhPT0gbnVsbCApIAkJCQkJeyAJCQkJCQkkKG5UaCkuYWRkQ2xhc3MoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc0NsYXNzICk7IAkJCQkJfSAJCQkJCSAJCQkJCS8qIENhY2hlIGFuZCByZW1vdmUgKGlmIG5lZWRlZCkgYW55IGV4dHJhIGVsZW1lbnRzIGZvciB0aGlzIGNvbHVtbiBpbiB0aGUgaGVhZGVyICovIAkJCQkJZm9yICggaj0xLCBqTGVuPWFuVHIubGVuZ3RoIDsgajxqTGVuIDsgaisrICkgCQkJCQl7IAkJCQkJCWpxQ2hpbGRyZW4gPSAkKGFuVHJbal0pLmNoaWxkcmVuKCk7IAkJCQkJCW9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uYW5UaEV4dHJhLnB1c2goIGpxQ2hpbGRyZW5baS1pQ29ycmVjdG9yXSApOyAJCQkJCQlpZiAoICFvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmJWaXNpYmxlICkgCQkJCQkJeyAJCQkJCQkJYW5UcltqXS5yZW1vdmVDaGlsZCgganFDaGlsZHJlbltpLWlDb3JyZWN0b3JdICk7IAkJCQkJCX0gCQkJCQl9IAkJCQkJIAkJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmJWaXNpYmxlICkgCQkJCQl7IAkJCQkJCS8qIFNldCB0aGUgdGl0bGUgb2YgdGhlIGNvbHVtbiBpZiBpdCBpcyB1c2VyIGRlZmluZWQgKG5vdCB3aGF0IHdhcyBhdXRvIGRldGVjdGVkKSAqLyAJCQkJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc1RpdGxlICE9IG5UaC5pbm5lckhUTUwgKSAJCQkJCQl7IAkJCQkJCQluVGguaW5uZXJIVE1MID0gb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5zVGl0bGU7IAkJCQkJCX0gCQkJCQl9IAkJCQkJZWxzZSAJCQkJCXsgCQkJCQkJblRoLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIG5UaCApOyAJCQkJCQlpQ29ycmVjdG9yKys7IAkJCQkJfSAJCQkJfSAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJLyogV2UgZG9uJ3QgaGF2ZSBhIGhlYWRlciBpbiB0aGUgRE9NIC0gc28gd2UgYXJlIGdvaW5nIHRvIGhhdmUgdG8gY3JlYXRlIG9uZSAqLyAJCQkJdmFyIG5UciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJ0ciIgKTsgCQkJCSAJCQkJZm9yICggaT0wLCBpTGVuPW9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJCXsgCQkJCQluVGggPSBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLm5UaDsgCQkJCQluVGguaW5uZXJIVE1MID0gb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5zVGl0bGU7IAkJCQkJIAkJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLnNDbGFzcyAhPT0gbnVsbCApIAkJCQkJeyAJCQkJCQkkKG5UaCkuYWRkQ2xhc3MoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc0NsYXNzICk7IAkJCQkJfSAJCQkJCSAJCQkJCWlmICggb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5iVmlzaWJsZSApIAkJCQkJeyAJCQkJCQluVHIuYXBwZW5kQ2hpbGQoIG5UaCApOyAJCQkJCX0gCQkJCX0gCQkJCSQob1NldHRpbmdzLm5USGVhZCkuaHRtbCggJycgKVswXS5hcHBlbmRDaGlsZCggblRyICk7IAkJCX0gCQkJIAkJCS8qIEFkZCB0aGUgZXh0cmEgbWFya3VwIG5lZWRlZCBieSBqUXVlcnkgVUkncyB0aGVtZXMgKi8gCQkJaWYgKCBvU2V0dGluZ3MuYkpVSSApIAkJCXsgCQkJCWZvciAoIGk9MCwgaUxlbj1vU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQl7IAkJCQkJblRoID0gb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5uVGg7IAkJCQkJIAkJCQkJdmFyIG5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgCQkJCQluRGl2LmNsYXNzTmFtZSA9IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU29ydEpVSVdyYXBwZXI7IAkJCQkJJChuVGgpLmNvbnRlbnRzKCkuYXBwZW5kVG8obkRpdik7IAkJCQkJIAkJCQkJbkRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpICk7IAkJCQkJblRoLmFwcGVuZENoaWxkKCBuRGl2ICk7IAkJCQl9IAkJCX0gCQkJIAkJCS8qIEFkZCBzb3J0IGxpc3RlbmVyICovIAkJCXZhciBmbk5vU2VsZWN0ID0gZnVuY3Rpb24gKGUpIHsgCQkJCXRoaXMub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2U7IH07IAkJCQlyZXR1cm4gZmFsc2U7IAkJCX07IAkJCSAJCQlpZiAoIG9TZXR0aW5ncy5vRmVhdHVyZXMuYlNvcnQgKSAJCQl7IAkJCQlmb3IgKCBpPTAgOyBpPG9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaSsrICkgCQkJCXsgCQkJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uYlNvcnRhYmxlICE9PSBmYWxzZSApIAkJCQkJeyAJCQkJCQlfZm5Tb3J0QXR0YWNoTGlzdGVuZXIoIG9TZXR0aW5ncywgb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5uVGgsIGkgKTsgCQkJCQkJIAkJCQkJCS8qIFRha2UgdGhlIGJydXRhbCBhcHByb2FjaCB0byBjYW5jZWxsaW5nIHRleHQgc2VsZWN0aW9uIGluIGhlYWRlciAqLyAJCQkJCQkkKG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0ublRoKS5tb3VzZWRvd24oIGZuTm9TZWxlY3QgKTsgCQkJCQl9IAkJCQkJZWxzZSAJCQkJCXsgCQkJCQkJJChvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLm5UaCkuYWRkQ2xhc3MoIG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU29ydGFibGVOb25lICk7IAkJCQkJfSAJCQkJfSAJCQl9IAkJCSAJCQkvKiBDYWNoZSB0aGUgZm9vdGVyIGVsZW1lbnRzICovIAkJCWlmICggb1NldHRpbmdzLm5URm9vdCAhPT0gbnVsbCApIAkJCXsgCQkJCWlDb3JyZWN0b3IgPSAwOyAJCQkJYW5UciA9IG9TZXR0aW5ncy5uVEZvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RyJyk7IAkJCQl2YXIgblRmcyA9IGFuVHJbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RoJyk7IAkJCQkgCQkJCWZvciAoIGk9MCwgaUxlbj1uVGZzLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQl7IAkJCQkJaWYgKCB0eXBlb2Ygb1NldHRpbmdzLmFvQ29sdW1uc1tpXSAhPSAndW5kZWZpbmVkJyApIAkJCQkJeyAJCQkJCQlvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLm5UZiA9IG5UZnNbaS1pQ29ycmVjdG9yXTsgCQkJCQkJIAkJCQkJCWlmICggb1NldHRpbmdzLm9DbGFzc2VzLnNGb290ZXJUSCAhPT0gIiIgKSAJCQkJCQl7IAkJCQkJCQlvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLm5UZi5jbGFzc05hbWUgKz0gIiAiK29TZXR0aW5ncy5vQ2xhc3Nlcy5zRm9vdGVyVEg7IAkJCQkJCX0gCQkJCQkJIAkJCQkJCS8qIERlYWwgd2l0aCBhbnkgZXh0cmEgZWxlbWVudHMgZm9yIHRoaXMgY29sdW1uIGZyb20gdGhlIGZvb3RlciAqLyAJCQkJCQlmb3IgKCBqPTEsIGpMZW49YW5Uci5sZW5ndGggOyBqPGpMZW4gOyBqKysgKSAJCQkJCQl7IAkJCQkJCQlqcUNoaWxkcmVuID0gJChhblRyW2pdKS5jaGlsZHJlbigpOyAJCQkJCQkJb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5hblRmRXh0cmEucHVzaCgganFDaGlsZHJlbltpLWlDb3JyZWN0b3JdICk7IAkJCQkJCQlpZiAoICFvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmJWaXNpYmxlICkgCQkJCQkJCXsgCQkJCQkJCQlhblRyW2pdLnJlbW92ZUNoaWxkKCBqcUNoaWxkcmVuW2ktaUNvcnJlY3Rvcl0gKTsgCQkJCQkJCX0gCQkJCQkJfSAJCQkJCQkgCQkJCQkJaWYgKCAhb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5iVmlzaWJsZSApIAkJCQkJCXsgCQkJCQkJCW5UZnNbaS1pQ29ycmVjdG9yXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBuVGZzW2ktaUNvcnJlY3Rvcl0gKTsgCQkJCQkJCWlDb3JyZWN0b3IrKzsgCQkJCQkJfSAJCQkJCX0gCQkJCX0gCQkJfSAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5EcmF3IAkJICogUHVycG9zZTogIEluc2VydCB0aGUgcmVxdWlyZWQgVFIgbm9kZXMgaW50byB0aGUgdGFibGUgZm9yIGRpc3BsYXkgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5EcmF3KCBvU2V0dGluZ3MgKSAJCXsgCQkJdmFyIGksIGlMZW47IAkJCXZhciBhblJvd3MgPSBbXTsgCQkJdmFyIGlSb3dDb3VudCA9IDA7IAkJCXZhciBiUm93RXJyb3IgPSBmYWxzZTsgCQkJdmFyIGlTdHJpcHMgPSBvU2V0dGluZ3MuYXNTdHJpcENsYXNzZXMubGVuZ3RoOyAJCQl2YXIgaU9wZW5Sb3dzID0gb1NldHRpbmdzLmFvT3BlblJvd3MubGVuZ3RoOyAJCQkgCQkJb1NldHRpbmdzLmJEcmF3aW5nID0gdHJ1ZTsgCQkJIAkJCS8qIENoZWNrIGFuZCBzZWUgaWYgd2UgaGF2ZSBhbiBpbml0aWFsIGRyYXcgcG9zaXRpb24gZnJvbSBzdGF0ZSBzYXZpbmcgKi8gCQkJaWYgKCB0eXBlb2Ygb1NldHRpbmdzLmlJbml0RGlzcGxheVN0YXJ0ICE9ICd1bmRlZmluZWQnICYmIG9TZXR0aW5ncy5pSW5pdERpc3BsYXlTdGFydCAhPSAtMSApIAkJCXsgCQkJCWlmICggb1NldHRpbmdzLm9GZWF0dXJlcy5iU2VydmVyU2lkZSApIAkJCQl7IAkJCQkJb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0ID0gb1NldHRpbmdzLmlJbml0RGlzcGxheVN0YXJ0OyAJCQkJfSAJCQkJZWxzZSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5faURpc3BsYXlTdGFydCA9IChvU2V0dGluZ3MuaUluaXREaXNwbGF5U3RhcnQgPj0gb1NldHRpbmdzLmZuUmVjb3Jkc0Rpc3BsYXkoKSkgPyAJCQkJCQkwIDogb1NldHRpbmdzLmlJbml0RGlzcGxheVN0YXJ0OyAJCQkJfSAJCQkJb1NldHRpbmdzLmlJbml0RGlzcGxheVN0YXJ0ID0gLTE7IAkJCQlfZm5DYWxjdWxhdGVFbmQoIG9TZXR0aW5ncyApOyAJCQl9IAkJCSAJCQkvKiBJZiB3ZSBhcmUgZGVhbGluZyB3aXRoIEFqYXggLSBkbyBpdCBoZXJlICovIAkJCWlmICggIW9TZXR0aW5ncy5iRGVzdHJveWluZyAmJiBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJTZXJ2ZXJTaWRlICYmICAJCQkgICAgICFfZm5BamF4VXBkYXRlKCBvU2V0dGluZ3MgKSApIAkJCXsgCQkJCXJldHVybjsgCQkJfSAJCQllbHNlIGlmICggIW9TZXR0aW5ncy5vRmVhdHVyZXMuYlNlcnZlclNpZGUgKSAJCQl7IAkJCQlvU2V0dGluZ3MuaURyYXcrKzsgCQkJfSAJCQkgCQkJaWYgKCBvU2V0dGluZ3MuYWlEaXNwbGF5Lmxlbmd0aCAhPT0gMCApIAkJCXsgCQkJCXZhciBpU3RhcnQgPSBvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQ7IAkJCQl2YXIgaUVuZCA9IG9TZXR0aW5ncy5faURpc3BsYXlFbmQ7IAkJCQkgCQkJCWlmICggb1NldHRpbmdzLm9GZWF0dXJlcy5iU2VydmVyU2lkZSApIAkJCQl7IAkJCQkJaVN0YXJ0ID0gMDsgCQkJCQlpRW5kID0gb1NldHRpbmdzLmFvRGF0YS5sZW5ndGg7IAkJCQl9IAkJCQkgCQkJCWZvciAoIHZhciBqPWlTdGFydCA7IGo8aUVuZCA7IGorKyApIAkJCQl7IAkJCQkJdmFyIGFvRGF0YSA9IG9TZXR0aW5ncy5hb0RhdGFbIG9TZXR0aW5ncy5haURpc3BsYXlbal0gXTsgCQkJCQl2YXIgblJvdyA9IGFvRGF0YS5uVHI7IAkJCQkJIAkJCQkJLyogUmVtb3ZlIHRoZSBvbGQgc3RyaXBwaW5nIGNsYXNzZXMgYW5kIHRoZW4gYWRkIHRoZSBuZXcgb25lICovIAkJCQkJaWYgKCBpU3RyaXBzICE9PSAwICkgCQkJCQl7IAkJCQkJCXZhciBzU3RyaXAgPSBvU2V0dGluZ3MuYXNTdHJpcENsYXNzZXNbIGlSb3dDb3VudCAlIGlTdHJpcHMgXTsgCQkJCQkJaWYgKCBhb0RhdGEuX3NSb3dTdHJpcGUgIT0gc1N0cmlwICkgCQkJCQkJeyAJCQkJCQkJJChuUm93KS5yZW1vdmVDbGFzcyggYW9EYXRhLl9zUm93U3RyaXBlICkuYWRkQ2xhc3MoIHNTdHJpcCApOyAJCQkJCQkJYW9EYXRhLl9zUm93U3RyaXBlID0gc1N0cmlwOyAJCQkJCQl9IAkJCQkJfSAJCQkJCSAJCQkJCS8qIEN1c3RvbSByb3cgY2FsbGJhY2sgZnVuY3Rpb24gLSBtaWdodCB3YW50IHRvIG1hbmlwdWxlIHRoZSByb3cgKi8gCQkJCQlpZiAoIHR5cGVvZiBvU2V0dGluZ3MuZm5Sb3dDYWxsYmFjayA9PSAiZnVuY3Rpb24iICkgCQkJCQl7IAkJCQkJCW5Sb3cgPSBvU2V0dGluZ3MuZm5Sb3dDYWxsYmFjay5jYWxsKCBvU2V0dGluZ3Mub0luc3RhbmNlLCBuUm93LCAgCQkJCQkJCW9TZXR0aW5ncy5hb0RhdGFbIG9TZXR0aW5ncy5haURpc3BsYXlbal0gXS5fYURhdGEsIGlSb3dDb3VudCwgaiApOyAJCQkJCQlpZiAoICFuUm93ICYmICFiUm93RXJyb3IgKSAJCQkJCQl7IAkJCQkJCQlfZm5Mb2coIG9TZXR0aW5ncywgMCwgIkEgbm9kZSB3YXMgbm90IHJldHVybmVkIGJ5IGZuUm93Q2FsbGJhY2siICk7IAkJCQkJCQliUm93RXJyb3IgPSB0cnVlOyAJCQkJCQl9IAkJCQkJfSAJCQkJCSAJCQkJCWFuUm93cy5wdXNoKCBuUm93ICk7IAkJCQkJaVJvd0NvdW50Kys7IAkJCQkJIAkJCQkJLyogSWYgdGhlcmUgaXMgYW4gb3BlbiByb3cgLSBhbmQgaXQgaXMgYXR0YWNoZWQgdG8gdGhpcyBwYXJlbnQgLSBhdHRhY2ggaXQgb24gcmVkcmF3ICovIAkJCQkJaWYgKCBpT3BlblJvd3MgIT09IDAgKSAJCQkJCXsgCQkJCQkJZm9yICggdmFyIGs9MCA7IGs8aU9wZW5Sb3dzIDsgaysrICkgCQkJCQkJeyAJCQkJCQkJaWYgKCBuUm93ID09IG9TZXR0aW5ncy5hb09wZW5Sb3dzW2tdLm5QYXJlbnQgKSAJCQkJCQkJeyAJCQkJCQkJCWFuUm93cy5wdXNoKCBvU2V0dGluZ3MuYW9PcGVuUm93c1trXS5uVHIgKTsgCQkJCQkJCX0gCQkJCQkJfSAJCQkJCX0gCQkJCX0gCQkJfSAJCQllbHNlIAkJCXsgCQkJCS8qIFRhYmxlIGlzIGVtcHR5IC0gY3JlYXRlIGEgcm93IHdpdGggYW4gZW1wdHkgbWVzc2FnZSBpbiBpdCAqLyAJCQkJYW5Sb3dzWyAwIF0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndHInICk7IAkJCQkgCQkJCWlmICggdHlwZW9mIG9TZXR0aW5ncy5hc1N0cmlwQ2xhc3Nlc1swXSAhPSAndW5kZWZpbmVkJyApIAkJCQl7IAkJCQkJYW5Sb3dzWyAwIF0uY2xhc3NOYW1lID0gb1NldHRpbmdzLmFzU3RyaXBDbGFzc2VzWzBdOyAJCQkJfSAJCQkJIAkJCQl2YXIgblRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RkJyApOyAJCQkJblRkLnNldEF0dHJpYnV0ZSggJ3ZhbGlnbicsICJ0b3AiICk7IAkJCQluVGQuY29sU3BhbiA9IF9mblZpc2JsZUNvbHVtbnMoIG9TZXR0aW5ncyApOyAJCQkJblRkLmNsYXNzTmFtZSA9IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zUm93RW1wdHk7IAkJCQlpZiAoIHR5cGVvZiBvU2V0dGluZ3Mub0xhbmd1YWdlLnNFbXB0eVRhYmxlICE9ICd1bmRlZmluZWQnICYmIAkJCQkgICAgIG9TZXR0aW5ncy5mblJlY29yZHNUb3RhbCgpID09PSAwICkgCQkJCXsgCQkJCQluVGQuaW5uZXJIVE1MID0gb1NldHRpbmdzLm9MYW5ndWFnZS5zRW1wdHlUYWJsZTsgCQkJCX0gCQkJCWVsc2UgCQkJCXsgCQkJCQluVGQuaW5uZXJIVE1MID0gb1NldHRpbmdzLm9MYW5ndWFnZS5zWmVyb1JlY29yZHMucmVwbGFjZSggCQkJCQkJJ19NQVhfJywgb1NldHRpbmdzLmZuRm9ybWF0TnVtYmVyKG9TZXR0aW5ncy5mblJlY29yZHNUb3RhbCgpKSApOyAJCQkJfSAJCQkJIAkJCQlhblJvd3NbIGlSb3dDb3VudCBdLmFwcGVuZENoaWxkKCBuVGQgKTsgCQkJfSAJCQkgCQkJLyogQ2FsbGJhY2sgdGhlIGhlYWRlciBhbmQgZm9vdGVyIGN1c3RvbSBmdW5jYXRpb24gaWYgdGhlcmUgaXMgb25lICovIAkJCWlmICggdHlwZW9mIG9TZXR0aW5ncy5mbkhlYWRlckNhbGxiYWNrID09ICdmdW5jdGlvbicgKSAJCQl7IAkJCQlvU2V0dGluZ3MuZm5IZWFkZXJDYWxsYmFjay5jYWxsKCBvU2V0dGluZ3Mub0luc3RhbmNlLCAkKCc+dHInLCBvU2V0dGluZ3MublRIZWFkKVswXSwgIAkJCQkJX2ZuR2V0RGF0YU1hc3Rlciggb1NldHRpbmdzICksIG9TZXR0aW5ncy5faURpc3BsYXlTdGFydCwgb1NldHRpbmdzLmZuRGlzcGxheUVuZCgpLCAJCQkJCW9TZXR0aW5ncy5haURpc3BsYXkgKTsgCQkJfSAJCQkgCQkJaWYgKCB0eXBlb2Ygb1NldHRpbmdzLmZuRm9vdGVyQ2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJyApIAkJCXsgCQkJCW9TZXR0aW5ncy5mbkZvb3RlckNhbGxiYWNrLmNhbGwoIG9TZXR0aW5ncy5vSW5zdGFuY2UsICQoJz50cicsIG9TZXR0aW5ncy5uVEZvb3QpWzBdLCAgCQkJCQlfZm5HZXREYXRhTWFzdGVyKCBvU2V0dGluZ3MgKSwgb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0LCBvU2V0dGluZ3MuZm5EaXNwbGF5RW5kKCksIAkJCQkJb1NldHRpbmdzLmFpRGlzcGxheSApOyAJCQl9IAkJCSAJCQkvKiAgCQkJICogTmVlZCB0byByZW1vdmUgYW55IG9sZCByb3cgZnJvbSB0aGUgZGlzcGxheSAtIG5vdGUgd2UgY2FuJ3QganVzdCBlbXB0eSB0aGUgdGJvZHkgdXNpbmcgCQkJICogJCgpLmh0bWwoJycpIHNpbmNlIHRoaXMgd2lsbCB1bmJpbmQgdGhlIGpRdWVyeSBldmVudCBoYW5kbGVycyAoZXZlbiBhbHRob3VnaCB0aGUgbm9kZSAgCQkJICogc3RpbGwgZXhpc3RzISkgLSBlcXVhbGx5IHdlIGNhbid0IHVzZSBpbm5lckhUTUwsIHNpbmNlIElFIHRocm93cyBhbiBleGNlcHRpb24uIAkJCSAqLyAJCQl2YXIgCQkJCW5BZGRGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLCAJCQkJblJlbW92ZUZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIAkJCQluQm9keVBhciwgblRyczsgCQkJIAkJCWlmICggb1NldHRpbmdzLm5UQm9keSApIAkJCXsgCQkJCW5Cb2R5UGFyID0gb1NldHRpbmdzLm5UQm9keS5wYXJlbnROb2RlOyAJCQkJblJlbW92ZUZyYWcuYXBwZW5kQ2hpbGQoIG9TZXR0aW5ncy5uVEJvZHkgKTsgCQkJCSAJCQkJLyogV2hlbiBkb2luZyBpbmZpbml0ZSBzY3JvbGxpbmcsIG9ubHkgcmVtb3ZlIGNoaWxkIHJvd3Mgd2hlbiBzb3J0aW5nLCBmaWx0ZXJpbmcgb3Igc3RhcnQgCQkJCSAqIHVwLiBXaGVuIG5vdCBpbmZpbml0ZSBzY3JvbGwsIGFsd2F5cyBkbyBpdC4gCQkJCSAqLyAJCQkJaWYgKCAhb1NldHRpbmdzLm9TY3JvbGwuYkluZmluaXRlIHx8ICFvU2V0dGluZ3MuX2JJbml0Q29tcGxldGUgfHwgCQkJCSAJb1NldHRpbmdzLmJTb3J0ZWQgfHwgb1NldHRpbmdzLmJGaWx0ZXJlZCApIAkJCQl7IAkJCQkJblRycyA9IG9TZXR0aW5ncy5uVEJvZHkuY2hpbGROb2RlczsgCQkJCQlmb3IgKCBpPW5UcnMubGVuZ3RoLTEgOyBpPj0wIDsgaS0tICkgCQkJCQl7IAkJCQkJCW5UcnNbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggblRyc1tpXSApOyAJCQkJCX0gCQkJCX0gCQkJCSAJCQkJLyogUHV0IHRoZSBkcmF3IHRhYmxlIGludG8gdGhlIGRvbSAqLyAJCQkJZm9yICggaT0wLCBpTGVuPWFuUm93cy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJeyAJCQkJCW5BZGRGcmFnLmFwcGVuZENoaWxkKCBhblJvd3NbaV0gKTsgCQkJCX0gCQkJCSAJCQkJb1NldHRpbmdzLm5UQm9keS5hcHBlbmRDaGlsZCggbkFkZEZyYWcgKTsgCQkJCWlmICggbkJvZHlQYXIgIT09IG51bGwgKSAJCQkJeyAJCQkJCW5Cb2R5UGFyLmFwcGVuZENoaWxkKCBvU2V0dGluZ3MublRCb2R5ICk7IAkJCQl9IAkJCX0gCQkJIAkJCS8qIENhbGwgYWxsIHJlcXVpcmVkIGNhbGxiYWNrIGZ1bmN0aW9ucyBmb3IgdGhlIGVuZCBvZiBhIGRyYXcgKi8gCQkJZm9yICggaT1vU2V0dGluZ3MuYW9EcmF3Q2FsbGJhY2subGVuZ3RoLTEgOyBpPj0wIDsgaS0tICkgCQkJeyAJCQkJb1NldHRpbmdzLmFvRHJhd0NhbGxiYWNrW2ldLmZuLmNhbGwoIG9TZXR0aW5ncy5vSW5zdGFuY2UsIG9TZXR0aW5ncyApOyAJCQl9IAkJCSAJCQkvKiBEcmF3IGlzIGNvbXBsZXRlLCBzb3J0aW5nIGFuZCBmaWx0ZXJpbmcgbXVzdCBiZSBhcyB3ZWxsICovIAkJCW9TZXR0aW5ncy5iU29ydGVkID0gZmFsc2U7IAkJCW9TZXR0aW5ncy5iRmlsdGVyZWQgPSBmYWxzZTsgCQkJb1NldHRpbmdzLmJEcmF3aW5nID0gZmFsc2U7IAkJCSAJCQlpZiAoIG9TZXR0aW5ncy5vRmVhdHVyZXMuYlNlcnZlclNpZGUgKSAJCQl7IAkJCQlfZm5Qcm9jZXNzaW5nRGlzcGxheSggb1NldHRpbmdzLCBmYWxzZSApOyAJCQkJaWYgKCB0eXBlb2Ygb1NldHRpbmdzLl9iSW5pdENvbXBsZXRlID09ICd1bmRlZmluZWQnICkgCQkJCXsgCQkJCQlfZm5Jbml0Q29tcGxldGUoIG9TZXR0aW5ncyApOyAJCQkJfSAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mblJlRHJhdyAJCSAqIFB1cnBvc2U6ICBSZWRyYXcgdGhlIHRhYmxlIC0gdGFraW5nIGFjY291bnQgb2YgdGhlIHZhcmlvdXMgZmVhdHVyZXMgd2hpY2ggYXJlIGVuYWJsZWQgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5SZURyYXcoIG9TZXR0aW5ncyApIAkJeyAJCQlpZiAoIG9TZXR0aW5ncy5vRmVhdHVyZXMuYlNvcnQgKSAJCQl7IAkJCQkvKiBTb3J0aW5nIHdpbGwgcmVmaWx0ZXIgYW5kIGRyYXcgZm9yIHVzICovIAkJCQlfZm5Tb3J0KCBvU2V0dGluZ3MsIG9TZXR0aW5ncy5vUHJldmlvdXNTZWFyY2ggKTsgCQkJfSAJCQllbHNlIGlmICggb1NldHRpbmdzLm9GZWF0dXJlcy5iRmlsdGVyICkgCQkJeyAJCQkJLyogRmlsdGVyaW5nIHdpbGwgcmVkcmF3IGZvciB1cyAqLyAJCQkJX2ZuRmlsdGVyQ29tcGxldGUoIG9TZXR0aW5ncywgb1NldHRpbmdzLm9QcmV2aW91c1NlYXJjaCApOyAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJX2ZuQ2FsY3VsYXRlRW5kKCBvU2V0dGluZ3MgKTsgCQkJCV9mbkRyYXcoIG9TZXR0aW5ncyApOyAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkFqYXhVcGRhdGUgCQkgKiBQdXJwb3NlOiAgVXBkYXRlIHRoZSB0YWJsZSB1c2luZyBhbiBBamF4IGNhbGwgCQkgKiBSZXR1cm5zOiAgYm9vbDogYmxvY2sgdGhlIHRhYmxlIGRyYXdpbmcgb3Igbm90IAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkFqYXhVcGRhdGUoIG9TZXR0aW5ncyApIAkJeyAJCQlpZiAoIG9TZXR0aW5ncy5iQWpheERhdGFHZXQgKSAJCQl7IAkJCQlfZm5Qcm9jZXNzaW5nRGlzcGxheSggb1NldHRpbmdzLCB0cnVlICk7IAkJCQl2YXIgaUNvbHVtbnMgPSBvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aDsgCQkJCXZhciBhb0RhdGEgPSBbXTsgCQkJCXZhciBpOyAJCQkJIAkJCQkvKiBQYWdpbmcgYW5kIGdlbmVyYWwgKi8gCQkJCW9TZXR0aW5ncy5pRHJhdysrOyAJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAic0VjaG8iLCAgICAgICAgICAidmFsdWUiOiBvU2V0dGluZ3MuaURyYXcgfSApOyAJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAiaUNvbHVtbnMiLCAgICAgICAidmFsdWUiOiBpQ29sdW1ucyB9ICk7IAkJCQlhb0RhdGEucHVzaCggeyAibmFtZSI6ICJzQ29sdW1ucyIsICAgICAgICJ2YWx1ZSI6IF9mbkNvbHVtbk9yZGVyaW5nKG9TZXR0aW5ncykgfSApOyAJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAiaURpc3BsYXlTdGFydCIsICAidmFsdWUiOiBvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQgfSApOyAJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAiaURpc3BsYXlMZW5ndGgiLCAidmFsdWUiOiBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJQYWdpbmF0ZSAhPT0gZmFsc2UgPyAJCQkJCW9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGggOiAtMSB9ICk7IAkJCQkgCQkJCS8qIEZpbHRlcmluZyAqLyAJCQkJaWYgKCBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJGaWx0ZXIgIT09IGZhbHNlICkgCQkJCXsgCQkJCQlhb0RhdGEucHVzaCggeyAibmFtZSI6ICJzU2VhcmNoIiwgInZhbHVlIjogb1NldHRpbmdzLm9QcmV2aW91c1NlYXJjaC5zU2VhcmNoIH0gKTsgCQkJCQlhb0RhdGEucHVzaCggeyAibmFtZSI6ICJiUmVnZXgiLCAgInZhbHVlIjogb1NldHRpbmdzLm9QcmV2aW91c1NlYXJjaC5iUmVnZXggfSApOyAJCQkJCWZvciAoIGk9MCA7IGk8aUNvbHVtbnMgOyBpKysgKSAJCQkJCXsgCQkJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAic1NlYXJjaF8iK2ksICAgICAidmFsdWUiOiBvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzW2ldLnNTZWFyY2ggfSApOyAJCQkJCQlhb0RhdGEucHVzaCggeyAibmFtZSI6ICJiUmVnZXhfIitpLCAgICAgICJ2YWx1ZSI6IG9TZXR0aW5ncy5hb1ByZVNlYXJjaENvbHNbaV0uYlJlZ2V4IH0gKTsgCQkJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAiYlNlYXJjaGFibGVfIitpLCAidmFsdWUiOiBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmJTZWFyY2hhYmxlIH0gKTsgCQkJCQl9IAkJCQl9IAkJCQkgCQkJCS8qIFNvcnRpbmcgKi8gCQkJCWlmICggb1NldHRpbmdzLm9GZWF0dXJlcy5iU29ydCAhPT0gZmFsc2UgKSAJCQkJeyAJCQkJCXZhciBpRml4ZWQgPSBvU2V0dGluZ3MuYWFTb3J0aW5nRml4ZWQgIT09IG51bGwgPyBvU2V0dGluZ3MuYWFTb3J0aW5nRml4ZWQubGVuZ3RoIDogMDsgCQkJCQl2YXIgaVVzZXIgPSBvU2V0dGluZ3MuYWFTb3J0aW5nLmxlbmd0aDsgCQkJCQlhb0RhdGEucHVzaCggeyAibmFtZSI6ICJpU29ydGluZ0NvbHMiLCAgICJ2YWx1ZSI6IGlGaXhlZCtpVXNlciB9ICk7IAkJCQkJZm9yICggaT0wIDsgaTxpRml4ZWQgOyBpKysgKSAJCQkJCXsgCQkJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAiaVNvcnRDb2xfIitpLCAgInZhbHVlIjogb1NldHRpbmdzLmFhU29ydGluZ0ZpeGVkW2ldWzBdIH0gKTsgCQkJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAic1NvcnREaXJfIitpLCAgInZhbHVlIjogb1NldHRpbmdzLmFhU29ydGluZ0ZpeGVkW2ldWzFdIH0gKTsgCQkJCQl9IAkJCQkJIAkJCQkJZm9yICggaT0wIDsgaTxpVXNlciA7IGkrKyApIAkJCQkJeyAJCQkJCQlhb0RhdGEucHVzaCggeyAibmFtZSI6ICJpU29ydENvbF8iKyhpK2lGaXhlZCksICAidmFsdWUiOiBvU2V0dGluZ3MuYWFTb3J0aW5nW2ldWzBdIH0gKTsgCQkJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAic1NvcnREaXJfIisoaStpRml4ZWQpLCAgInZhbHVlIjogb1NldHRpbmdzLmFhU29ydGluZ1tpXVsxXSB9ICk7IAkJCQkJfSAJCQkJCSAJCQkJCWZvciAoIGk9MCA7IGk8aUNvbHVtbnMgOyBpKysgKSAJCQkJCXsgCQkJCQkJYW9EYXRhLnB1c2goIHsgIm5hbWUiOiAiYlNvcnRhYmxlXyIraSwgICJ2YWx1ZSI6IG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uYlNvcnRhYmxlIH0gKTsgCQkJCQl9IAkJCQl9IAkJCQkgCQkJCW9TZXR0aW5ncy5mblNlcnZlckRhdGEuY2FsbCggb1NldHRpbmdzLm9JbnN0YW5jZSwgb1NldHRpbmdzLnNBamF4U291cmNlLCBhb0RhdGEsIAkJCQkJZnVuY3Rpb24oanNvbikgeyAJCQkJCQlfZm5BamF4VXBkYXRlRHJhdyggb1NldHRpbmdzLCBqc29uICk7IAkJCQkJfSApOyAJCQkJcmV0dXJuIGZhbHNlOyAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJcmV0dXJuIHRydWU7IAkJCX0gCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQWpheFVwZGF0ZURyYXcgCQkgKiBQdXJwb3NlOiAgRGF0YSB0aGUgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgKG51a2luZyB0aGUgb2xkKSBhbmQgcmVkcmF3IHRoZSB0YWJsZSAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqICAgICAgICAgICBvYmplY3Q6anNvbiAtIGpzb24gZGF0YSByZXR1cm4gZnJvbSB0aGUgc2VydmVyLiAJCSAqICAgICAgICAgICAgIFRoZSBmb2xsb3dpbmcgbXVzdCBiZSBkZWZpbmVkOiAJCSAqICAgICAgICAgICAgICAgaVRvdGFsUmVjb3JkcywgaVRvdGFsRGlzcGxheVJlY29yZHMsIGFhRGF0YSAJCSAqICAgICAgICAgICAgIFRoZSBmb2xsb3dpbmcgbWF5IGJlIGRlZmluZWQ6IAkJICogICAgICAgICAgICAgICBzQ29sdW1ucyAJCSAqLyAJCWZ1bmN0aW9uIF9mbkFqYXhVcGRhdGVEcmF3ICggb1NldHRpbmdzLCBqc29uICkgCQl7IAkJCWlmICggdHlwZW9mIGpzb24uc0VjaG8gIT0gJ3VuZGVmaW5lZCcgKSAJCQl7IAkJCQkvKiBQcm90ZWN0IGFnYWluc3Qgb2xkIHJldHVybnMgb3Zlci13cml0aW5nIGEgbmV3IG9uZS4gUG9zc2libGUgd2hlbiB5b3UgZ2V0IAkJCQkgKiB2ZXJ5IGZhc3QgaW50ZXJhY3Rpb24sIGFuZCBsYXRlciBxdWVpcmVzIGFyZSBjb21wbGV0ZWQgbXVjaCBmYXN0ZXIgCQkJCSAqLyAJCQkJaWYgKCBqc29uLnNFY2hvKjEgPCBvU2V0dGluZ3MuaURyYXcgKSAJCQkJeyAJCQkJCXJldHVybjsgCQkJCX0gCQkJCWVsc2UgCQkJCXsgCQkJCQlvU2V0dGluZ3MuaURyYXcgPSBqc29uLnNFY2hvICogMTsgCQkJCX0gCQkJfSAJCQkgCQkJaWYgKCAhb1NldHRpbmdzLm9TY3JvbGwuYkluZmluaXRlIHx8IAkJCQkgICAob1NldHRpbmdzLm9TY3JvbGwuYkluZmluaXRlICYmIChvU2V0dGluZ3MuYlNvcnRlZCB8fCBvU2V0dGluZ3MuYkZpbHRlcmVkKSkgKSAJCQl7IAkJCQlfZm5DbGVhclRhYmxlKCBvU2V0dGluZ3MgKTsgCQkJfSAJCQlvU2V0dGluZ3MuX2lSZWNvcmRzVG90YWwgPSBqc29uLmlUb3RhbFJlY29yZHM7IAkJCW9TZXR0aW5ncy5faVJlY29yZHNEaXNwbGF5ID0ganNvbi5pVG90YWxEaXNwbGF5UmVjb3JkczsgCQkJIAkJCS8qIERldGVybWluZSBpZiByZW9yZGVyaW5nIGlzIHJlcXVpcmVkICovIAkJCXZhciBzT3JkZXJpbmcgPSBfZm5Db2x1bW5PcmRlcmluZyhvU2V0dGluZ3MpOyAJCQl2YXIgYlJlT3JkZXIgPSAodHlwZW9mIGpzb24uc0NvbHVtbnMgIT0gJ3VuZGVmaW5lZCcgJiYgc09yZGVyaW5nICE9PSAiIiAmJiBqc29uLnNDb2x1bW5zICE9IHNPcmRlcmluZyApOyAJCQlpZiAoIGJSZU9yZGVyICkgCQkJeyAJCQkJdmFyIGFpSW5kZXggPSBfZm5SZU9yZGVySW5kZXgoIG9TZXR0aW5ncywganNvbi5zQ29sdW1ucyApOyAJCQl9IAkJCSAJCQlmb3IgKCB2YXIgaT0wLCBpTGVuPWpzb24uYWFEYXRhLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCXsgCQkJCWlmICggYlJlT3JkZXIgKSAJCQkJeyAJCQkJCS8qIElmIHdlIG5lZWQgdG8gcmUtb3JkZXIsIHRoZW4gY3JlYXRlIGEgbmV3IGFycmF5IHdpdGggdGhlIGNvcnJlY3Qgb3JkZXIgYW5kIGFkZCBpdCAqLyAJCQkJCXZhciBhRGF0YSA9IFtdOyAJCQkJCWZvciAoIHZhciBqPTAsIGpMZW49b1NldHRpbmdzLmFvQ29sdW1ucy5sZW5ndGggOyBqPGpMZW4gOyBqKysgKSAJCQkJCXsgCQkJCQkJYURhdGEucHVzaCgganNvbi5hYURhdGFbaV1bIGFpSW5kZXhbal0gXSApOyAJCQkJCX0gCQkJCQlfZm5BZGREYXRhKCBvU2V0dGluZ3MsIGFEYXRhICk7IAkJCQl9IAkJCQllbHNlIAkJCQl7IAkJCQkJLyogTm8gcmUtb3JkZXIgcmVxdWlyZWQsIHNldmVyIGdvdCBpdCAicmlnaHQiIC0ganVzdCBzdHJhaWdodCBhZGQgKi8gCQkJCQlfZm5BZGREYXRhKCBvU2V0dGluZ3MsIGpzb24uYWFEYXRhW2ldICk7IAkJCQl9IAkJCX0gCQkJb1NldHRpbmdzLmFpRGlzcGxheSA9IG9TZXR0aW5ncy5haURpc3BsYXlNYXN0ZXIuc2xpY2UoKTsgCQkJIAkJCW9TZXR0aW5ncy5iQWpheERhdGFHZXQgPSBmYWxzZTsgCQkJX2ZuRHJhdyggb1NldHRpbmdzICk7IAkJCW9TZXR0aW5ncy5iQWpheERhdGFHZXQgPSB0cnVlOyAJCQlfZm5Qcm9jZXNzaW5nRGlzcGxheSggb1NldHRpbmdzLCBmYWxzZSApOyAJCX0gCQkgCQkgCQkvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAJCSAqIFNlY3Rpb24gLSBPcHRpb25zIChmZWF0dXJlcykgSFRNTCAJCSAqLyAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkFkZE9wdGlvbnNIdG1sIAkJICogUHVycG9zZTogIEFkZCB0aGUgb3B0aW9ucyB0byB0aGUgcGFnZSBIVE1MIGZvciB0aGUgdGFibGUgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5BZGRPcHRpb25zSHRtbCAoIG9TZXR0aW5ncyApIAkJeyAJCQkvKiAJCQkgKiBDcmVhdGUgYSB0ZW1wb3JhcnksIGVtcHR5LCBkaXYgd2hpY2ggd2UgY2FuIGxhdGVyIG9uIHJlcGxhY2Ugd2l0aCB3aGF0IHdlIGhhdmUgZ2VuZXJhdGVkIAkJCSAqIHdlIGRvIGl0IHRoaXMgd2F5IHRvIHJlbmRlcmluZyB0aGUgJ29wdGlvbnMnIGh0bWwgb2ZmbGluZSAtIHNwZWVkIDotKSAJCQkgKi8gCQkJdmFyIG5Ib2xkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTsgCQkJb1NldHRpbmdzLm5UYWJsZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggbkhvbGRpbmcsIG9TZXR0aW5ncy5uVGFibGUgKTsgCQkJIAkJCS8qICAJCQkgKiBBbGwgRGF0YVRhYmxlcyBhcmUgd3JhcHBlZCBpbiBhIGRpdiAtIHRoaXMgaXMgbm90IGN1cnJlbnRseSBvcHRpb25hbCAtIGJhY2t3YXJkcyAgCQkJICogY29tcGF0YWJpbGl0eS4gSXQgY2FuIGJlIHJlbW92ZWQgaWYgeW91IGRvbid0IHdhbnQgaXQuIAkJCSAqLyAJCQlvU2V0dGluZ3MublRhYmxlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7IAkJCW9TZXR0aW5ncy5uVGFibGVXcmFwcGVyLmNsYXNzTmFtZSA9IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zV3JhcHBlcjsgCQkJaWYgKCBvU2V0dGluZ3Muc1RhYmxlSWQgIT09ICcnICkgCQkJeyAJCQkJb1NldHRpbmdzLm5UYWJsZVdyYXBwZXIuc2V0QXR0cmlidXRlKCAnaWQnLCBvU2V0dGluZ3Muc1RhYmxlSWQrJ193cmFwcGVyJyApOyAJCQl9IAkJCSAJCQkvKiBUcmFjayB3aGVyZSB3ZSB3YW50IHRvIGluc2VydCB0aGUgb3B0aW9uICovIAkJCXZhciBuSW5zZXJ0Tm9kZSA9IG9TZXR0aW5ncy5uVGFibGVXcmFwcGVyOyAJCQkgCQkJLyogTG9vcCBvdmVyIHRoZSB1c2VyIHNldCBwb3NpdGlvbmluZyBhbmQgcGxhY2UgdGhlIGVsZW1lbnRzIGFzIG5lZWRlZCAqLyAJCQl2YXIgYURvbSA9IG9TZXR0aW5ncy5zRG9tLnNwbGl0KCcnKTsgCQkJdmFyIG5UbXAsIGlQdXNoRmVhdHVyZSwgY09wdGlvbiwgbk5ld05vZGUsIGNOZXh0LCBzQXR0ciwgajsgCQkJZm9yICggdmFyIGk9MCA7IGk8YURvbS5sZW5ndGggOyBpKysgKSAJCQl7IAkJCQlpUHVzaEZlYXR1cmUgPSAwOyAJCQkJY09wdGlvbiA9IGFEb21baV07IAkJCQkgCQkJCWlmICggY09wdGlvbiA9PSAnPCcgKSAJCQkJeyAJCQkJCS8qIE5ldyBjb250YWluZXIgZGl2ICovIAkJCQkJbk5ld05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApOyAJCQkJCSAJCQkJCS8qIENoZWNrIHRvIHNlZSBpZiB3ZSBzaG91bGQgYXBwZW5kIGFuIGlkIGFuZC9vciBhIGNsYXNzIG5hbWUgdG8gdGhlIGNvbnRhaW5lciAqLyAJCQkJCWNOZXh0ID0gYURvbVtpKzFdOyAJCQkJCWlmICggY05leHQgPT0gIiciIHx8IGNOZXh0ID09ICciJyApIAkJCQkJeyAJCQkJCQlzQXR0ciA9ICIiOyAJCQkJCQlqID0gMjsgCQkJCQkJd2hpbGUgKCBhRG9tW2kral0gIT0gY05leHQgKSAJCQkJCQl7IAkJCQkJCQlzQXR0ciArPSBhRG9tW2kral07IAkJCQkJCQlqKys7IAkJCQkJCX0gCQkJCQkJIAkJCQkJCS8qIFJlcGxhY2UgalF1ZXJ5IFVJIGNvbnN0YW50cyAqLyAJCQkJCQlpZiAoIHNBdHRyID09ICJIIiApIAkJCQkJCXsgCQkJCQkJCXNBdHRyID0gImZnLXRvb2xiYXIgdWktdG9vbGJhciB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci10bCB1aS1jb3JuZXItdHIgdWktaGVscGVyLWNsZWFyZml4IjsgCQkJCQkJfSAJCQkJCQllbHNlIGlmICggc0F0dHIgPT0gIkYiICkgCQkJCQkJeyAJCQkJCQkJc0F0dHIgPSAiZmctdG9vbGJhciB1aS10b29sYmFyIHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWJsIHVpLWNvcm5lci1iciB1aS1oZWxwZXItY2xlYXJmaXgiOyAJCQkJCQl9IAkJCQkJCSAJCQkJCQkvKiBUaGUgYXR0cmlidXRlIGNhbiBiZSBpbiB0aGUgZm9ybWF0IG9mICIjaWQuY2xhc3MiLCAiI2lkIiBvciAiY2xhc3MiIFRoaXMgbG9naWMgCQkJCQkJICogYnJlYWtzIHRoZSBzdHJpbmcgaW50byBwYXJ0cyBhbmQgYXBwbGllcyB0aGVtIGFzIG5lZWRlZCAJCQkJCQkgKi8gCQkJCQkJaWYgKCBzQXR0ci5pbmRleE9mKCcuJykgIT0gLTEgKSAJCQkJCQl7IAkJCQkJCQl2YXIgYVNwbGl0ID0gc0F0dHIuc3BsaXQoJy4nKTsgCQkJCQkJCW5OZXdOb2RlLnNldEF0dHJpYnV0ZSgnaWQnLCBhU3BsaXRbMF0uc3Vic3RyKDEsIGFTcGxpdFswXS5sZW5ndGgtMSkgKTsgCQkJCQkJCW5OZXdOb2RlLmNsYXNzTmFtZSA9IGFTcGxpdFsxXTsgCQkJCQkJfSAJCQkJCQllbHNlIGlmICggc0F0dHIuY2hhckF0KDApID09ICIjIiApIAkJCQkJCXsgCQkJCQkJCW5OZXdOb2RlLnNldEF0dHJpYnV0ZSgnaWQnLCBzQXR0ci5zdWJzdHIoMSwgc0F0dHIubGVuZ3RoLTEpICk7IAkJCQkJCX0gCQkJCQkJZWxzZSAJCQkJCQl7IAkJCQkJCQluTmV3Tm9kZS5jbGFzc05hbWUgPSBzQXR0cjsgCQkJCQkJfSAJCQkJCQkgCQkJCQkJaSArPSBqOyAvKiBNb3ZlIGFsb25nIHRoZSBwb3NpdGlvbiBhcnJheSAqLyAJCQkJCX0gCQkJCQkgCQkJCQluSW5zZXJ0Tm9kZS5hcHBlbmRDaGlsZCggbk5ld05vZGUgKTsgCQkJCQluSW5zZXJ0Tm9kZSA9IG5OZXdOb2RlOyAJCQkJfSAJCQkJZWxzZSBpZiAoIGNPcHRpb24gPT0gJz4nICkgCQkJCXsgCQkJCQkvKiBFbmQgY29udGFpbmVyIGRpdiAqLyAJCQkJCW5JbnNlcnROb2RlID0gbkluc2VydE5vZGUucGFyZW50Tm9kZTsgCQkJCX0gCQkJCWVsc2UgaWYgKCBjT3B0aW9uID09ICdsJyAmJiBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJQYWdpbmF0ZSAmJiBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJMZW5ndGhDaGFuZ2UgKSAJCQkJeyAJCQkJCS8qIExlbmd0aCAqLyAJCQkJCW5UbXAgPSBfZm5GZWF0dXJlSHRtbExlbmd0aCggb1NldHRpbmdzICk7IAkJCQkJaVB1c2hGZWF0dXJlID0gMTsgCQkJCX0gCQkJCWVsc2UgaWYgKCBjT3B0aW9uID09ICdmJyAmJiBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJGaWx0ZXIgKSAJCQkJeyAJCQkJCS8qIEZpbHRlciAqLyAJCQkJCW5UbXAgPSBfZm5GZWF0dXJlSHRtbEZpbHRlciggb1NldHRpbmdzICk7IAkJCQkJaVB1c2hGZWF0dXJlID0gMTsgCQkJCX0gCQkJCWVsc2UgaWYgKCBjT3B0aW9uID09ICdyJyAmJiBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJQcm9jZXNzaW5nICkgCQkJCXsgCQkJCQkvKiBwUm9jZXNzaW5nICovIAkJCQkJblRtcCA9IF9mbkZlYXR1cmVIdG1sUHJvY2Vzc2luZyggb1NldHRpbmdzICk7IAkJCQkJaVB1c2hGZWF0dXJlID0gMTsgCQkJCX0gCQkJCWVsc2UgaWYgKCBjT3B0aW9uID09ICd0JyApIAkJCQl7IAkJCQkJLyogVGFibGUgKi8gCQkJCQluVG1wID0gX2ZuRmVhdHVyZUh0bWxUYWJsZSggb1NldHRpbmdzICk7IAkJCQkJaVB1c2hGZWF0dXJlID0gMTsgCQkJCX0gCQkJCWVsc2UgaWYgKCBjT3B0aW9uID09ICAnaScgJiYgb1NldHRpbmdzLm9GZWF0dXJlcy5iSW5mbyApIAkJCQl7IAkJCQkJLyogSW5mbyAqLyAJCQkJCW5UbXAgPSBfZm5GZWF0dXJlSHRtbEluZm8oIG9TZXR0aW5ncyApOyAJCQkJCWlQdXNoRmVhdHVyZSA9IDE7IAkJCQl9IAkJCQllbHNlIGlmICggY09wdGlvbiA9PSAncCcgJiYgb1NldHRpbmdzLm9GZWF0dXJlcy5iUGFnaW5hdGUgKSAJCQkJeyAJCQkJCS8qIFBhZ2luYXRpb24gKi8gCQkJCQluVG1wID0gX2ZuRmVhdHVyZUh0bWxQYWdpbmF0ZSggb1NldHRpbmdzICk7IAkJCQkJaVB1c2hGZWF0dXJlID0gMTsgCQkJCX0gCQkJCWVsc2UgaWYgKCBfb0V4dC5hb0ZlYXR1cmVzLmxlbmd0aCAhPT0gMCApIAkJCQl7IAkJCQkJLyogUGx1Zy1pbiBmZWF0dXJlcyAqLyAJCQkJCXZhciBhb0ZlYXR1cmVzID0gX29FeHQuYW9GZWF0dXJlczsgCQkJCQlmb3IgKCB2YXIgaz0wLCBrTGVuPWFvRmVhdHVyZXMubGVuZ3RoIDsgazxrTGVuIDsgaysrICkgCQkJCQl7IAkJCQkJCWlmICggY09wdGlvbiA9PSBhb0ZlYXR1cmVzW2tdLmNGZWF0dXJlICkgCQkJCQkJeyAJCQkJCQkJblRtcCA9IGFvRmVhdHVyZXNba10uZm5Jbml0KCBvU2V0dGluZ3MgKTsgCQkJCQkJCWlmICggblRtcCApIAkJCQkJCQl7IAkJCQkJCQkJaVB1c2hGZWF0dXJlID0gMTsgCQkJCQkJCX0gCQkJCQkJCWJyZWFrOyAJCQkJCQl9IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQkvKiBBZGQgdG8gdGhlIDJEIGZlYXR1cmVzIGFycmF5ICovIAkJCQlpZiAoIGlQdXNoRmVhdHVyZSA9PSAxICYmIG5UbXAgIT09IG51bGwgKSAJCQkJeyAJCQkJCWlmICggdHlwZW9mIG9TZXR0aW5ncy5hYW5GZWF0dXJlc1tjT3B0aW9uXSAhPSAnb2JqZWN0JyApIAkJCQkJeyAJCQkJCQlvU2V0dGluZ3MuYWFuRmVhdHVyZXNbY09wdGlvbl0gPSBbXTsgCQkJCQl9IAkJCQkJb1NldHRpbmdzLmFhbkZlYXR1cmVzW2NPcHRpb25dLnB1c2goIG5UbXAgKTsgCQkJCQluSW5zZXJ0Tm9kZS5hcHBlbmRDaGlsZCggblRtcCApOyAJCQkJfSAJCQl9IAkJCSAJCQkvKiBCdWlsdCBvdXIgRE9NIHN0cnVjdHVyZSAtIHJlcGxhY2UgdGhlIGhvbGRpbmcgZGl2IHdpdGggd2hhdCB3ZSB3YW50ICovIAkJCW5Ib2xkaW5nLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKCBvU2V0dGluZ3MublRhYmxlV3JhcHBlciwgbkhvbGRpbmcgKTsgCQl9IAkJIAkJIAkJLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogCQkgKiBTZWN0aW9uIC0gRmVhdHVyZTogRmlsdGVyaW5nIAkJICovIAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuRmVhdHVyZUh0bWxUYWJsZSAJCSAqIFB1cnBvc2U6ICBBZGQgYW55IGNvbnRyb2wgZWxlbWVudHMgZm9yIHRoZSB0YWJsZSAtIHNwZWNpZmljYWxseSBzY3JvbGxpbmcgCQkgKiBSZXR1cm5zOiAgbm9kZTogLSBOb2RlIHRvIGFkZCB0byB0aGUgRE9NIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkZlYXR1cmVIdG1sVGFibGUgKCBvU2V0dGluZ3MgKSAJCXsgCQkJLyogQ2hhY2sgaWYgc2Nyb2xsaW5nIGlzIGVuYWJsZWQgb3Igbm90IC0gaWYgbm90IHRoZW4gbGVhdmUgdGhlIERPTSB1bmFsdGVyZWQgKi8gCQkJaWYgKCBvU2V0dGluZ3Mub1Njcm9sbC5zWCA9PT0gIiIgJiYgb1NldHRpbmdzLm9TY3JvbGwuc1kgPT09ICIiICkgCQkJeyAJCQkJcmV0dXJuIG9TZXR0aW5ncy5uVGFibGU7IAkJCX0gCQkJIAkJCS8qIAkJCSAqIFRoZSBIVE1MIHN0cnVjdHVyZSB0aGF0IHdlIHdhbnQgdG8gZ2VuZXJhdGUgaW4gdGhpcyBmdW5jdGlvbiBpczogCQkJICogIGRpdiAtIG5TY3JvbGxlciAJCQkgKiAgICBkaXYgLSBuU2Nyb2xsSGVhZCAJCQkgKiAgICAgIGRpdiAtIG5TY3JvbGxIZWFkSW5uZXIgCQkJICogICAgICAgIHRhYmxlIC0gblNjcm9sbEhlYWRUYWJsZSAJCQkgKiAgICAgICAgICB0aGVhZCAtIG5UaGVhZCAJCQkgKiAgICBkaXYgLSBuU2Nyb2xsQm9keSAJCQkgKiAgICAgIHRhYmxlIC0gb1NldHRpbmdzLm5UYWJsZSAJCQkgKiAgICAgICAgdGhlYWQgLSBuVGhlYWRTaXplIAkJCSAqICAgICAgICB0Ym9keSAtIG5UYm9keSAJCQkgKiAgICBkaXYgLSBuU2Nyb2xsRm9vdCAJCQkgKiAgICAgIGRpdiAtIG5TY3JvbGxGb290SW5uZXIgCQkJICogICAgICAgIHRhYmxlIC0gblNjcm9sbEZvb3RUYWJsZSAJCQkgKiAgICAgICAgICB0Zm9vdCAtIG5UZm9vdCAJCQkgKi8gCQkJdmFyIAkJCSAJblNjcm9sbGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksIAkJCSAJblNjcm9sbEhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgCQkJIAluU2Nyb2xsSGVhZElubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksIAkJCSAJblNjcm9sbEJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgCQkJIAluU2Nyb2xsRm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCAJCQkgCW5TY3JvbGxGb290SW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgCQkJIAluU2Nyb2xsSGVhZFRhYmxlID0gb1NldHRpbmdzLm5UYWJsZS5jbG9uZU5vZGUoZmFsc2UpLCAJCQkgCW5TY3JvbGxGb290VGFibGUgPSBvU2V0dGluZ3MublRhYmxlLmNsb25lTm9kZShmYWxzZSksIAkJCQluVGhlYWQgPSBvU2V0dGluZ3MublRhYmxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0aGVhZCcpWzBdLCAJCQkgCW5UZm9vdCA9IG9TZXR0aW5ncy5uVGFibGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3Rmb290JykubGVuZ3RoID09PSAwID8gbnVsbCA6ICAJCQkJCW9TZXR0aW5ncy5uVGFibGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3Rmb290JylbMF0sIAkJCQlvQ2xhc3NlcyA9ICh0eXBlb2Ygb0luaXQuYkpRdWVyeVVJICE9ICd1bmRlZmluZWQnICYmIG9Jbml0LmJKUXVlcnlVSSkgPyAJCQkgCQlfb0V4dC5vSlVJQ2xhc3NlcyA6IF9vRXh0Lm9TdGRDbGFzc2VzOyAJCQkgCQkJblNjcm9sbEhlYWQuYXBwZW5kQ2hpbGQoIG5TY3JvbGxIZWFkSW5uZXIgKTsgCQkJblNjcm9sbEZvb3QuYXBwZW5kQ2hpbGQoIG5TY3JvbGxGb290SW5uZXIgKTsgCQkJblNjcm9sbEJvZHkuYXBwZW5kQ2hpbGQoIG9TZXR0aW5ncy5uVGFibGUgKTsgCQkJblNjcm9sbGVyLmFwcGVuZENoaWxkKCBuU2Nyb2xsSGVhZCApOyAJCQluU2Nyb2xsZXIuYXBwZW5kQ2hpbGQoIG5TY3JvbGxCb2R5ICk7IAkJCW5TY3JvbGxIZWFkSW5uZXIuYXBwZW5kQ2hpbGQoIG5TY3JvbGxIZWFkVGFibGUgKTsgCQkJblNjcm9sbEhlYWRUYWJsZS5hcHBlbmRDaGlsZCggblRoZWFkICk7IAkJCWlmICggblRmb290ICE9PSBudWxsICkgCQkJeyAJCQkJblNjcm9sbGVyLmFwcGVuZENoaWxkKCBuU2Nyb2xsRm9vdCApOyAJCQkJblNjcm9sbEZvb3RJbm5lci5hcHBlbmRDaGlsZCggblNjcm9sbEZvb3RUYWJsZSApOyAJCQkJblNjcm9sbEZvb3RUYWJsZS5hcHBlbmRDaGlsZCggblRmb290ICk7IAkJCX0gCQkJIAkJCW5TY3JvbGxlci5jbGFzc05hbWUgPSBvQ2xhc3Nlcy5zU2Nyb2xsV3JhcHBlcjsgCQkJblNjcm9sbEhlYWQuY2xhc3NOYW1lID0gb0NsYXNzZXMuc1Njcm9sbEhlYWQ7IAkJCW5TY3JvbGxIZWFkSW5uZXIuY2xhc3NOYW1lID0gb0NsYXNzZXMuc1Njcm9sbEhlYWRJbm5lcjsgCQkJblNjcm9sbEJvZHkuY2xhc3NOYW1lID0gb0NsYXNzZXMuc1Njcm9sbEJvZHk7IAkJCW5TY3JvbGxGb290LmNsYXNzTmFtZSA9IG9DbGFzc2VzLnNTY3JvbGxGb290OyAJCQluU2Nyb2xsRm9vdElubmVyLmNsYXNzTmFtZSA9IG9DbGFzc2VzLnNTY3JvbGxGb290SW5uZXI7IAkJCSAJCQlpZiAoIG9TZXR0aW5ncy5vU2Nyb2xsLmJBdXRvQ3NzICkgCQkJeyAJCQkJblNjcm9sbEhlYWQuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsgCQkJCW5TY3JvbGxIZWFkLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsgCQkJCW5TY3JvbGxGb290LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7IAkJCQluU2Nyb2xsQm9keS5zdHlsZS5vdmVyZmxvdyA9ICJhdXRvIjsgCQkJfSAJCQkgCQkJblNjcm9sbEhlYWQuc3R5bGUuYm9yZGVyID0gIjAiOyAJCQluU2Nyb2xsRm9vdC5zdHlsZS5ib3JkZXIgPSAiMCI7IAkJCW5TY3JvbGxIZWFkSW5uZXIuc3R5bGUud2lkdGggPSAiMTUwJSI7IC8qIHdpbGwgYmUgb3ZlcndyaXR0ZW4gKi8gCQkJIAkJCS8qIE1vZGlmeSBhdHRyaWJ1dGVzIHRvIHJlc3BlY3QgdGhlIGNsb25lcyAqLyAJCQluU2Nyb2xsSGVhZFRhYmxlLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTsgCQkJblNjcm9sbEhlYWRUYWJsZS5zdHlsZS5tYXJnaW5MZWZ0ID0gIjAiOyAJCQlvU2V0dGluZ3MublRhYmxlLnN0eWxlLm1hcmdpbkxlZnQgPSAiMCI7IAkJCWlmICggblRmb290ICE9PSBudWxsICkgCQkJeyAJCQkJblNjcm9sbEZvb3RUYWJsZS5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7IAkJCQluU2Nyb2xsRm9vdFRhYmxlLnN0eWxlLm1hcmdpbkxlZnQgPSAiMCI7IAkJCX0gCQkJIAkJCS8qIE1vdmUgYW55IGNhcHRpb24gZWxlbWVudHMgZnJvbSB0aGUgYm9keSB0byB0aGUgaGVhZGVyICovIAkJCXZhciBuQ2FwdGlvbnMgPSAkKCc+Y2FwdGlvbicsIG9TZXR0aW5ncy5uVGFibGUpOyAJCQlmb3IgKCB2YXIgaT0wLCBpTGVuPW5DYXB0aW9ucy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQl7IAkJCQluU2Nyb2xsSGVhZFRhYmxlLmFwcGVuZENoaWxkKCBuQ2FwdGlvbnNbaV0gKTsgCQkJfSAJCQkgCQkJLyogCQkJICogU2l6aW5nIAkJCSAqLyAJCQkvKiBXaGVuIHhzY3JvbGxpbmcgYWRkIHRoZSB3aWR0aCBhbmQgYSBzY3JvbGxlciB0byBtb3ZlIHRoZSBoZWFkZXIgd2l0aCB0aGUgYm9keSAqLyAJCQlpZiAoIG9TZXR0aW5ncy5vU2Nyb2xsLnNYICE9PSAiIiApIAkJCXsgCQkJCW5TY3JvbGxIZWFkLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3MoIG9TZXR0aW5ncy5vU2Nyb2xsLnNYICk7IAkJCQluU2Nyb2xsQm9keS5zdHlsZS53aWR0aCA9IF9mblN0cmluZ1RvQ3NzKCBvU2V0dGluZ3Mub1Njcm9sbC5zWCApOyAJCQkJIAkJCQlpZiAoIG5UZm9vdCAhPT0gbnVsbCApIAkJCQl7IAkJCQkJblNjcm9sbEZvb3Quc3R5bGUud2lkdGggPSBfZm5TdHJpbmdUb0Nzcyggb1NldHRpbmdzLm9TY3JvbGwuc1ggKTsJIAkJCQl9IAkJCQkgCQkJCS8qIFdoZW4gdGhlIGJvZHkgaXMgc2Nyb2xsZWQsIHRoZW4gd2UgYWxzbyB3YW50IHRvIHNjcm9sbCB0aGUgaGVhZGVycyAqLyAJCQkJJChuU2Nyb2xsQm9keSkuc2Nyb2xsKCBmdW5jdGlvbiAoZSkgeyAJCQkJCW5TY3JvbGxIZWFkLnNjcm9sbExlZnQgPSB0aGlzLnNjcm9sbExlZnQ7IAkJCQkJIAkJCQkJaWYgKCBuVGZvb3QgIT09IG51bGwgKSAJCQkJCXsgCQkJCQkJblNjcm9sbEZvb3Quc2Nyb2xsTGVmdCA9IHRoaXMuc2Nyb2xsTGVmdDsgCQkJCQl9IAkJCQl9ICk7IAkJCX0gCQkJIAkJCS8qIFdoZW4geXNjcm9sbGluZywgYWRkIHRoZSBoZWlnaHQgKi8gCQkJaWYgKCBvU2V0dGluZ3Mub1Njcm9sbC5zWSAhPT0gIiIgKSAJCQl7IAkJCQluU2Nyb2xsQm9keS5zdHlsZS5oZWlnaHQgPSBfZm5TdHJpbmdUb0Nzcyggb1NldHRpbmdzLm9TY3JvbGwuc1kgKTsgCQkJfSAJCQkgCQkJLyogUmVkcmF3IC0gYWxpZ24gY29sdW1ucyBhY3Jvc3MgdGhlIHRhYmxlcyAqLyAJCQlvU2V0dGluZ3MuYW9EcmF3Q2FsbGJhY2sucHVzaCggeyAJCQkJImZuIjogX2ZuU2Nyb2xsRHJhdywgCQkJCSJzTmFtZSI6ICJzY3JvbGxpbmciIAkJCX0gKTsgCQkJIAkJCS8qIEluZmluaXRlIHNjcm9sbGluZyBldmVudCBoYW5kbGVycyAqLyAJCQlpZiAoIG9TZXR0aW5ncy5vU2Nyb2xsLmJJbmZpbml0ZSApIAkJCXsgCQkJCSQoblNjcm9sbEJvZHkpLnNjcm9sbCggZnVuY3Rpb24oKSB7IAkJCQkJLyogVXNlIGEgYmxvY2tlciB0byBzdG9wIHNjcm9sbGluZyBmcm9tIGxvYWRpbmcgbW9yZSBkYXRhIHdoaWxlIG90aGVyIGRhdGEgaXMgc3RpbGwgbG9hZGluZyAqLyAJCQkJCWlmICggIW9TZXR0aW5ncy5iRHJhd2luZyApIAkJCQkJeyAJCQkJCQkvKiBDaGVjayBpZiB3ZSBzaG91bGQgbG9hZCB0aGUgbmV4dCBkYXRhIHNldCAqLyAJCQkJCQlpZiAoICQodGhpcykuc2Nyb2xsVG9wKCkgKyAkKHRoaXMpLmhlaWdodCgpID4gIAkJCQkJCQkkKG9TZXR0aW5ncy5uVGFibGUpLmhlaWdodCgpIC0gb1NldHRpbmdzLm9TY3JvbGwuaUxvYWRHYXAgKSAJCQkJCQl7IAkJCQkJCQkvKiBPbmx5IGRvIHRoZSByZWRyYXcgaWYgd2UgaGF2ZSB0byAtIHdlIG1pZ2h0IGJlIGF0IHRoZSBlbmQgb2YgdGhlIGRhdGEgKi8gCQkJCQkJCWlmICggb1NldHRpbmdzLmZuRGlzcGxheUVuZCgpIDwgb1NldHRpbmdzLmZuUmVjb3Jkc0Rpc3BsYXkoKSApIAkJCQkJCQl7IAkJCQkJCQkJX2ZuUGFnZUNoYW5nZSggb1NldHRpbmdzLCAnbmV4dCcgKTsgCQkJCQkJCQlfZm5DYWxjdWxhdGVFbmQoIG9TZXR0aW5ncyApOyAJCQkJCQkJCV9mbkRyYXcoIG9TZXR0aW5ncyApOyAJCQkJCQkJfSAJCQkJCQl9IAkJCQkJfSAJCQkJfSApOyAJCQl9IAkJCSAJCQlvU2V0dGluZ3MublNjcm9sbEhlYWQgPSBuU2Nyb2xsSGVhZDsgCQkJb1NldHRpbmdzLm5TY3JvbGxGb290ID0gblNjcm9sbEZvb3Q7IAkJCSAJCQlyZXR1cm4gblNjcm9sbGVyOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5TY3JvbGxEcmF3IAkJICogUHVycG9zZTogIFVwZGF0ZSB0aGUgdmFyaW91cyB0YWJsZXMgZm9yIHJlc2l6aW5nIAkJICogUmV0dXJuczogIG5vZGU6IC0gTm9kZSB0byBhZGQgdG8gdGhlIERPTSAJCSAqIElucHV0czogICBvYmplY3Q6byAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJICogTm90ZXM6ICAgIEl0J3MgYSBiaXQgb2YgYSBwaWcgdGhpcyBmdW5jdGlvbiwgYnV0IGJhc2ljYWxseSB0aGUgaWRlYSB0bzogCQkgKiAgIDEuIFJlLWNyZWF0ZSB0aGUgdGFibGUgaW5zaWRlIHRoZSBzY3JvbGxpbmcgZGl2IAkJICogICAyLiBUYWtlIGxpdmUgbWVhc3VyZW1lbnRzIGZyb20gdGhlIERPTSAJCSAqICAgMy4gQXBwbHkgdGhlIG1lYXN1cmVtZW50cyAJCSAqICAgNC4gQ2xlYW4gdXAgCQkgKi8gCQlmdW5jdGlvbiBfZm5TY3JvbGxEcmF3ICggbyApIAkJeyAJCQl2YXIgCQkJCW5TY3JvbGxIZWFkSW5uZXIgPSBvLm5TY3JvbGxIZWFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKVswXSwgCQkJCW5TY3JvbGxIZWFkVGFibGUgPSBuU2Nyb2xsSGVhZElubmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0YWJsZScpWzBdLCAJCQkJblNjcm9sbEJvZHkgPSBvLm5UYWJsZS5wYXJlbnROb2RlLCAJCQkJaSwgaUxlbiwgaiwgakxlbiwgYW5IZWFkVG9TaXplLCBhbkhlYWRTaXplcnMsIGFuRm9vdFNpemVycywgYW5Gb290VG9TaXplLCBvU3R5bGUsIGlWaXMsIAkJCQlpV2lkdGgsIGFBcHBsaWVkPVtdLCBpU2FuaXR5V2lkdGg7IAkJCSAJCQkvKiAJCQkgKiAxLiBSZS1jcmVhdGUgdGhlIHRhYmxlIGluc2lkZSB0aGUgc2Nyb2xsaW5nIGRpdiAJCQkgKi8gCQkJIAkJCS8qIFJlbW92ZSB0aGUgb2xkIG1pbmltaXNlZCB0aGVhZCBhbmQgdGZvb3QgZWxlbWVudHMgaW4gdGhlIGlubmVyIHRhYmxlICovIAkJCXZhciBuVGhlYWRTaXplID0gby5uVGFibGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RoZWFkJyk7IAkJCWlmICggblRoZWFkU2l6ZS5sZW5ndGggPiAwICkgCQkJeyAJCQkJby5uVGFibGUucmVtb3ZlQ2hpbGQoIG5UaGVhZFNpemVbMF0gKTsgCQkJfSAJCQkgCQkJaWYgKCBvLm5URm9vdCAhPT0gbnVsbCApIAkJCXsgCQkJCS8qIFJlbW92ZSB0aGUgb2xkIG1pbmltaXNlZCBmb290ZXIgZWxlbWVudCBpbiB0aGUgY2xvbmVkIGhlYWRlciAqLyAJCQkJdmFyIG5UZm9vdFNpemUgPSBvLm5UYWJsZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGZvb3QnKTsgCQkJCWlmICggblRmb290U2l6ZS5sZW5ndGggPiAwICkgCQkJCXsgCQkJCQlvLm5UYWJsZS5yZW1vdmVDaGlsZCggblRmb290U2l6ZVswXSApOyAJCQkJfSAJCQl9IAkJCSAJCQkvKiBDbG9uZSB0aGUgY3VycmVudCBoZWFkZXIgYW5kIGZvb3RlciBlbGVtZW50cyBhbmQgdGhlbiBwbGFjZSBpdCBpbnRvIHRoZSBpbm5lciB0YWJsZSAqLyAJCQluVGhlYWRTaXplID0gby5uVEhlYWQuY2xvbmVOb2RlKHRydWUpOyAJCQlvLm5UYWJsZS5pbnNlcnRCZWZvcmUoIG5UaGVhZFNpemUsIG8ublRhYmxlLmNoaWxkTm9kZXNbMF0gKTsgCQkJIAkJCWlmICggby5uVEZvb3QgIT09IG51bGwgKSAJCQl7IAkJCQluVGZvb3RTaXplID0gby5uVEZvb3QuY2xvbmVOb2RlKHRydWUpOyAJCQkJby5uVGFibGUuaW5zZXJ0QmVmb3JlKCBuVGZvb3RTaXplLCBvLm5UYWJsZS5jaGlsZE5vZGVzWzFdICk7IAkJCX0gCQkJIAkJCS8qIAkJCSAqIDIuIFRha2UgbGl2ZSBtZWFzdXJlbWVudHMgZnJvbSB0aGUgRE9NIC0gZG8gbm90IGFsdGVyIHRoZSBET00gaXRzZWxmISAJCQkgKi8gCQkJIAkJCS8qIFJlbW92ZSBvbGQgc2l6aW5nIGFuZCBhcHBseSB0aGUgY2FsY3VsYXRlZCBjb2x1bW4gd2lkdGhzIAkJCSAqIEdldCB0aGUgdW5pcXVlIGNvbHVtbiBoZWFkZXJzIGluIHRoZSBuZXdseSBjcmVhdGVkIChjbG9uZWQpIGhlYWRlci4gV2Ugd2FudCB0byBhcHBseSB0aGUgCQkJICogY2FsY2xhdGVkIHNpemVzIHRvIHRoaXMgaGVhZGVyIAkJCSAqLyAJCQl2YXIgblRocyA9IF9mbkdldFVuaXF1ZVRocyggblRoZWFkU2l6ZSApOyAJCQlmb3IgKCBpPTAsIGlMZW49blRocy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQl7IAkJCQlpVmlzID0gX2ZuVmlzaWJsZVRvQ29sdW1uSW5kZXgoIG8sIGkgKTsgCQkJCW5UaHNbaV0uc3R5bGUud2lkdGggPSBvLmFvQ29sdW1uc1tpVmlzXS5zV2lkdGg7IAkJCX0gCQkJIAkJCWlmICggby5uVEZvb3QgIT09IG51bGwgKSAJCQl7IAkJCQlfZm5BcHBseVRvQ2hpbGRyZW4oIGZ1bmN0aW9uKG4pIHsgCQkJCQluLnN0eWxlLndpZHRoID0gIiI7IAkJCQl9LCBuVGZvb3RTaXplLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpICk7IAkJCX0gCQkJIAkJCS8qIFNpemUgdGhlIHRhYmxlIGFzIGEgd2hvbGUgKi8gCQkJaVNhbml0eVdpZHRoID0gJChvLm5UYWJsZSkub3V0ZXJXaWR0aCgpOyAJCQlpZiAoIG8ub1Njcm9sbC5zWCA9PT0gIiIgKSAJCQl7IAkJCQkvKiBObyB4IHNjcm9sbGluZyAqLyAJCQkJby5uVGFibGUuc3R5bGUud2lkdGggPSAiMTAwJSI7IAkJCQkgCQkJCS8qIEkga25vdyB0aGlzIGlzIHJ1YmJpc2ggLSBidXQgSUU3IHdpbGwgbWFrZSB0aGUgd2lkdGggb2YgdGhlIHRhYmxlIHdoZW4gMTAwJSBpbmNsdWRlIAkJCQkgKiB0aGUgc2Nyb2xsYmFyIC0gd2hpY2ggaXMgc2hvdWxkbid0LiBUaGlzIG5lZWRzIGZlYXR1cmUgZGV0ZWN0aW9uIGluIGZ1dHVyZSAtIHRvIGRvIAkJCQkgKi8gCQkJCWlmICggJC5icm93c2VyLm1zaWUgJiYgJC5icm93c2VyLnZlcnNpb24gPD0gNyApIAkJCQl7IAkJCQkJby5uVGFibGUuc3R5bGUud2lkdGggPSBfZm5TdHJpbmdUb0NzcyggJChvLm5UYWJsZSkub3V0ZXJXaWR0aCgpLW8ub1Njcm9sbC5pQmFyV2lkdGggKTsgCQkJCX0gCQkJfSAJCQllbHNlIAkJCXsgCQkJCWlmICggby5vU2Nyb2xsLnNYSW5uZXIgIT09ICIiICkgCQkJCXsgCQkJCQkvKiB4IHNjcm9sbCBpbm5lciBoYXMgYmVlbiBnaXZlbiAtIHVzZSBpdCAqLyAJCQkJCW8ublRhYmxlLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3Moby5vU2Nyb2xsLnNYSW5uZXIpOyAJCQkJfSAJCQkJZWxzZSBpZiAoIGlTYW5pdHlXaWR0aCA9PSAkKG5TY3JvbGxCb2R5KS53aWR0aCgpICYmIAkJCQkgICAkKG5TY3JvbGxCb2R5KS5oZWlnaHQoKSA8ICQoby5uVGFibGUpLmhlaWdodCgpICkgCQkJCXsgCQkJCQkvKiBUaGVyZSBpcyB5LXNjcm9sbGluZyAtIHRyeSB0byB0YWtlIGFjY291bnQgb2YgdGhlIHkgc2Nyb2xsIGJhciAqLyAJCQkJCW8ublRhYmxlLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3MoIGlTYW5pdHlXaWR0aC1vLm9TY3JvbGwuaUJhcldpZHRoICk7IAkJCQkJaWYgKCAkKG8ublRhYmxlKS5vdXRlcldpZHRoKCkgPiBpU2FuaXR5V2lkdGgtby5vU2Nyb2xsLmlCYXJXaWR0aCApIAkJCQkJeyAJCQkJCQkvKiBOb3QgcG9zc2libGUgdG8gdGFrZSBhY2NvdW50IG9mIGl0ICovIAkJCQkJCW8ublRhYmxlLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3MoIGlTYW5pdHlXaWR0aCApOyAJCQkJCX0gCQkJCX0gCQkJCWVsc2UgCQkJCXsgCQkJCQkvKiBBbGwgZWxzZSBmYWlscyAqLyAJCQkJCW8ublRhYmxlLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3MoIGlTYW5pdHlXaWR0aCApOyAJCQkJfSAJCQl9IAkJCSAJCQkvKiBSZWNhbGN1bGF0ZSB0aGUgc2FuaXR5IHdpZHRoIC0gbm93IHRoYXQgd2UndmUgYXBwbGllZCB0aGUgcmVxdWlyZWQgd2lkdGgsIGJlZm9yZSBpdCB3YXMgCQkJICogYSB0ZW1wb3JhcnkgdmFyaWFibGUuIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSB0aGUgY29sdW1uIHdpZHRoIGNhbGN1bGF0aW9uIGlzIGRvbmUgCQkJICogYmVmb3JlIHRoaXMgdGFibGUgRE9NIGlzIGNyZWF0ZWQuIAkJCSAqLyAJCQlpU2FuaXR5V2lkdGggPSAkKG8ublRhYmxlKS5vdXRlcldpZHRoKCk7IAkJCSAJCQkvKiBXZSB3YW50IHRoZSBoaWRkZW4gaGVhZGVyIHRvIGhhdmUgemVybyBoZWlnaHQsIHNvIHJlbW92ZSBwYWRkaW5nIGFuZCBib3JkZXJzLiBUaGVuIAkJCSAqIHNldCB0aGUgd2lkdGggYmFzZWQgb24gdGhlIHJlYWwgaGVhZGVycyAJCQkgKi8gCQkJYW5IZWFkVG9TaXplID0gby5uVEhlYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RyJyk7IAkJCWFuSGVhZFNpemVycyA9IG5UaGVhZFNpemUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RyJyk7IAkJCSAJCQlfZm5BcHBseVRvQ2hpbGRyZW4oIGZ1bmN0aW9uKG5TaXplciwgblRvU2l6ZSkgeyAJCQkJb1N0eWxlID0gblNpemVyLnN0eWxlOyAJCQkJb1N0eWxlLnBhZGRpbmdUb3AgPSAiMCI7IAkJCQlvU3R5bGUucGFkZGluZ0JvdHRvbSA9ICIwIjsgCQkJCW9TdHlsZS5ib3JkZXJUb3BXaWR0aCA9ICIwIjsgCQkJCW9TdHlsZS5ib3JkZXJCb3R0b21XaWR0aCA9ICIwIjsgCQkJCW9TdHlsZS5oZWlnaHQgPSAwOyAJCQkJIAkJCQlpV2lkdGggPSAkKG5TaXplcikud2lkdGgoKTsgCQkJCW5Ub1NpemUuc3R5bGUud2lkdGggPSBfZm5TdHJpbmdUb0NzcyggaVdpZHRoICk7IAkJCQlhQXBwbGllZC5wdXNoKCBpV2lkdGggKTsgCQkJfSwgYW5IZWFkU2l6ZXJzLCBhbkhlYWRUb1NpemUgKTsgCQkJJChhbkhlYWRTaXplcnMpLmhlaWdodCgwKTsgCQkJIAkJCWlmICggby5uVEZvb3QgIT09IG51bGwgKSAJCQl7IAkJCQkvKiBDbG9uZSB0aGUgY3VycmVudCBmb290ZXIgYW5kIHRoZW4gcGxhY2UgaXQgaW50byB0aGUgYm9keSB0YWJsZSBhcyBhICJoaWRkZW4gaGVhZGVyIiAqLyAJCQkJYW5Gb290U2l6ZXJzID0gblRmb290U2l6ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKTsgCQkJCWFuRm9vdFRvU2l6ZSA9IG8ublRGb290LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpOyAJCQkJIAkJCQlfZm5BcHBseVRvQ2hpbGRyZW4oIGZ1bmN0aW9uKG5TaXplciwgblRvU2l6ZSkgeyAJCQkJCW9TdHlsZSA9IG5TaXplci5zdHlsZTsgCQkJCQlvU3R5bGUucGFkZGluZ1RvcCA9ICIwIjsgCQkJCQlvU3R5bGUucGFkZGluZ0JvdHRvbSA9ICIwIjsgCQkJCQlvU3R5bGUuYm9yZGVyVG9wV2lkdGggPSAiMCI7IAkJCQkJb1N0eWxlLmJvcmRlckJvdHRvbVdpZHRoID0gIjAiOyAJCQkJCSAJCQkJCWlXaWR0aCA9ICQoblNpemVyKS53aWR0aCgpOyAJCQkJCW5Ub1NpemUuc3R5bGUud2lkdGggPSBfZm5TdHJpbmdUb0NzcyggaVdpZHRoICk7IAkJCQkJYUFwcGxpZWQucHVzaCggaVdpZHRoICk7IAkJCQl9LCBhbkZvb3RTaXplcnMsIGFuRm9vdFRvU2l6ZSApOyAJCQkJJChhbkZvb3RTaXplcnMpLmhlaWdodCgwKTsgCQkJfSAJCQkgCQkJLyogCQkJICogMy4gQXBwbHkgdGhlIG1lYXN1cmVtZW50cyAJCQkgKi8gCQkJIAkJCS8qICJIaWRlIiB0aGUgaGVhZGVyIGFuZCBmb290ZXIgdGhhdCB3ZSB1c2VkIGZvciB0aGUgc2l6aW5nLiBXZSB3YW50IHRvIGFsc28gZml4IHRoZWlyIHdpZHRoIAkJCSAqIHRvIHdoYXQgdGhleSBjdXJyZW50bHkgYXJlIAkJCSAqLyAJCQlfZm5BcHBseVRvQ2hpbGRyZW4oIGZ1bmN0aW9uKG5TaXplcikgeyAJCQkJblNpemVyLmlubmVySFRNTCA9ICIiOyAJCQkJblNpemVyLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3MoIGFBcHBsaWVkLnNoaWZ0KCkgKTsgCQkJfSwgYW5IZWFkU2l6ZXJzICk7IAkJCSAJCQlpZiAoIG8ublRGb290ICE9PSBudWxsICkgCQkJeyAJCQkJX2ZuQXBwbHlUb0NoaWxkcmVuKCBmdW5jdGlvbihuU2l6ZXIpIHsgCQkJCQluU2l6ZXIuaW5uZXJIVE1MID0gIiI7IAkJCQkJblNpemVyLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3MoIGFBcHBsaWVkLnNoaWZ0KCkgKTsgCQkJCX0sIGFuRm9vdFNpemVycyApOyAJCQl9IAkJCSAJCQkvKiBTYW5pdHkgY2hlY2sgdGhhdCB0aGUgdGFibGUgaXMgb2YgYSBzZW5zaWJsZSB3aWR0aC4gSWYgbm90IHRoZW4gd2UgYXJlIGdvaW5nIHRvIGdldCAJCQkgKiBtaXNhbGlnbm1lbnQgCQkJICovIAkJCWlmICggJChvLm5UYWJsZSkub3V0ZXJXaWR0aCgpIDwgaVNhbml0eVdpZHRoICkgCQkJeyAJCQkJaWYgKCBvLm9TY3JvbGwuc1ggPT09ICIiICkgCQkJCXsgCQkJCQlfZm5Mb2coIG8sIDEsICJUaGUgdGFibGUgY2Fubm90IGZpdCBpbnRvIHRoZSBjdXJyZW50IGVsZW1lbnQgd2hpY2ggd2lsbCBjYXVzZSBjb2x1bW4iKyAJCQkJCQkiIG1pc2FsaWdubWVudC4gSXQgaXMgc3VnZ2VzdGVkIHRoYXQgeW91IGVuYWJsZSB4LXNjcm9sbGluZyBvciBpbmNyZWFzZSB0aGUgd2lkdGgiKyAJCQkJCQkiIHRoZSB0YWJsZSBoYXMgaW4gd2hpY2ggdG8gYmUgZHJhd24iICk7IAkJCQl9IAkJCQllbHNlIGlmICggby5vU2Nyb2xsLnNYSW5uZXIgIT09ICIiICkgCQkJCXsgCQkJCQlfZm5Mb2coIG8sIDEsICJUaGUgdGFibGUgY2Fubm90IGZpdCBpbnRvIHRoZSBjdXJyZW50IGVsZW1lbnQgd2hpY2ggd2lsbCBjYXVzZSBjb2x1bW4iKyAJCQkJCQkiIG1pc2FsaWdubWVudC4gSXQgaXMgc3VnZ2VzdGVkIHRoYXQgeW91IGluY3JlYXNlIHRoZSBzU2Nyb2xsWElubmVyIHByb3BlcnR5IHRvIisgCQkJCQkJIiBhbGxvdyBpdCB0byBkcmF3IGluIGEgbGFyZ2VyIGFyZWEsIG9yIHNpbXBseSByZW1vdmUgdGhhdCBwYXJhbWV0ZXIgdG8gYWxsb3ciKyAJCQkJCQkiIGF1dG9tYXRpYyBjYWxjdWxhdGlvbiIgKTsgCQkJCX0gCQkJfSAJCQkgCQkJIAkJCS8qIAkJCSAqIDQuIENsZWFuIHVwIAkJCSAqLyAJCQkgCQkJaWYgKCBvLm9TY3JvbGwuc1kgPT09ICIiICkgCQkJeyAJCQkJLyogSUU3PCBwdXRzIGEgdmVydGljYWwgc2Nyb2xsYmFyIGluIHBsYWNlICh3aGVuIGl0IHNob3VsZG4ndCBiZSkgZHVlIHRvIHN1YnRyYWN0aW5nIAkJCQkgKiB0aGUgc2Nyb2xsYmFyIGhlaWdodCBmcm9tIHRoZSB2aXNpYmxlIGRpc3BsYXksIHJhdGhlciB0aGFuIGFkZGluZyBpdCBvbi4gV2UgbmVlZCB0byAJCQkJICogc2V0IHRoZSBoZWlnaHQgaW4gb3JkZXIgdG8gc29ydCB0aGlzLiBEb24ndCB3YW50IHRvIGRvIGl0IGluIGFueSBvdGhlciBicm93c2Vycy4gCQkJCSAqLyAJCQkJaWYgKCAkLmJyb3dzZXIubXNpZSAmJiAkLmJyb3dzZXIudmVyc2lvbiA8PSA3ICkgCQkJCXsgCQkJCQluU2Nyb2xsQm9keS5zdHlsZS5oZWlnaHQgPSBfZm5TdHJpbmdUb0Nzcyggby5uVGFibGUub2Zmc2V0SGVpZ2h0K28ub1Njcm9sbC5pQmFyV2lkdGggKTsgCQkJCX0gCQkJfSAJCQkgCQkJaWYgKCBvLm9TY3JvbGwuc1kgIT09ICIiICYmIG8ub1Njcm9sbC5iQ29sbGFwc2UgKSAJCQl7IAkJCQluU2Nyb2xsQm9keS5zdHlsZS5oZWlnaHQgPSBfZm5TdHJpbmdUb0Nzcyggby5vU2Nyb2xsLnNZICk7IAkJCQkgCQkJCXZhciBpRXh0cmEgPSAoby5vU2Nyb2xsLnNYICE9PSAiIiAmJiBvLm5UYWJsZS5vZmZzZXRXaWR0aCA+IG5TY3JvbGxCb2R5Lm9mZnNldFdpZHRoKSA/IAkJCQkgCW8ub1Njcm9sbC5pQmFyV2lkdGggOiAwOyAJCQkJaWYgKCBvLm5UYWJsZS5vZmZzZXRIZWlnaHQgPCBuU2Nyb2xsQm9keS5vZmZzZXRIZWlnaHQgKSAJCQkJeyAJCQkJCW5TY3JvbGxCb2R5LnN0eWxlLmhlaWdodCA9IF9mblN0cmluZ1RvQ3NzKCAkKG8ublRhYmxlKS5oZWlnaHQoKStpRXh0cmEgKTsgCQkJCX0gCQkJfSAJCQkgCQkJLyogRmluYWxseSBzZXQgdGhlIHdpZHRoJ3Mgb2YgdGhlIGhlYWRlciBhbmQgZm9vdGVyIHRhYmxlcyAqLyAJCQl2YXIgaU91dGVyV2lkdGggPSAkKG8ublRhYmxlKS5vdXRlcldpZHRoKCk7IAkJCW5TY3JvbGxIZWFkVGFibGUuc3R5bGUud2lkdGggPSBfZm5TdHJpbmdUb0NzcyggaU91dGVyV2lkdGggKTsgCQkJblNjcm9sbEhlYWRJbm5lci5zdHlsZS53aWR0aCA9IF9mblN0cmluZ1RvQ3NzKCBpT3V0ZXJXaWR0aCtvLm9TY3JvbGwuaUJhcldpZHRoICk7IAkJCW5TY3JvbGxIZWFkSW5uZXIucGFyZW50Tm9kZS5zdHlsZS53aWR0aCA9IF9mblN0cmluZ1RvQ3NzKCAkKG5TY3JvbGxCb2R5KS53aWR0aCgpICk7IAkJCSAJCQlpZiAoIG8ublRGb290ICE9PSBudWxsICkgCQkJeyAJCQkJdmFyIAkJCQkJblNjcm9sbEZvb3RJbm5lciA9IG8ublNjcm9sbEZvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpWzBdLCAJCQkJCW5TY3JvbGxGb290VGFibGUgPSBuU2Nyb2xsRm9vdElubmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0YWJsZScpWzBdOyAJCQkJIAkJCQluU2Nyb2xsRm9vdElubmVyLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3MoIG8ublRhYmxlLm9mZnNldFdpZHRoK28ub1Njcm9sbC5pQmFyV2lkdGggKTsgCQkJCW5TY3JvbGxGb290VGFibGUuc3R5bGUud2lkdGggPSBfZm5TdHJpbmdUb0Nzcyggby5uVGFibGUub2Zmc2V0V2lkdGggKTsgCQkJfSAJCQkgCQkJLyogSWYgc29ydGluZyBvciBmaWx0ZXJpbmcgaGFzIG9jY3VyZWQsIGp1bXAgdGhlIHNjcm9sbGluZyBiYWNrIHRvIHRoZSB0b3AgKi8gCQkJaWYgKCBvLmJTb3J0ZWQgfHwgby5iRmlsdGVyZWQgKSAJCQl7IAkJCQluU2Nyb2xsQm9keS5zY3JvbGxUb3AgPSAwOyAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkFqdXN0Q29sdW1uU2l6aW5nIAkJICogUHVycG9zZTogIEFqdXN0IHRoZSB0YWJsZSBjb2x1bW4gd2lkdGhzIGZvciBuZXcgZGF0YSAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqIE5vdGVzOiAgICBZb3Ugd291bGQgcHJvYmFibHkgd2FudCB0byBkbyBhIHJlZHJhdyBhZnRlciBjYWxsaW5nIHRoaXMgZnVuY3Rpb24hIAkJICovIAkJZnVuY3Rpb24gX2ZuQWp1c3RDb2x1bW5TaXppbmcgKCBvU2V0dGluZ3MgKSAJCXsgCQkJLyogTm90IGludGVyZXN0ZWQgaW4gZG9pbmcgY29sdW1uIHdpZHRoIGNhbGN1bGF0aW9uIGlmIGF1dG93aWR0aCBpcyBkaXNhYmxlZCAqLyAJCQlpZiAoIG9TZXR0aW5ncy5vRmVhdHVyZXMuYkF1dG9XaWR0aCA9PT0gZmFsc2UgKSAJCQl7IAkJCQlyZXR1cm4gZmFsc2U7IAkJCX0gCQkJIAkJCV9mbkNhbGN1bGF0ZUNvbHVtbldpZHRocyggb1NldHRpbmdzICk7IAkJCWZvciAoIHZhciBpPTAgLCBpTGVuPW9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5uVGguc3R5bGUud2lkdGggPSBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLnNXaWR0aDsgCQkJfSAJCX0gCQkgCQkgCQkvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAJCSAqIFNlY3Rpb24gLSBGZWF0dXJlOiBGaWx0ZXJpbmcgCQkgKi8gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5GZWF0dXJlSHRtbEZpbHRlciAJCSAqIFB1cnBvc2U6ICBHZW5lcmF0ZSB0aGUgbm9kZSByZXF1aXJlZCBmb3IgZmlsdGVyaW5nIHRleHQgCQkgKiBSZXR1cm5zOiAgbm9kZSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5GZWF0dXJlSHRtbEZpbHRlciAoIG9TZXR0aW5ncyApIAkJeyAJCQl2YXIgbkZpbHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7IAkJCWlmICggb1NldHRpbmdzLnNUYWJsZUlkICE9PSAnJyAmJiB0eXBlb2Ygb1NldHRpbmdzLmFhbkZlYXR1cmVzLmYgPT0gInVuZGVmaW5lZCIgKSAJCQl7IAkJCQluRmlsdGVyLnNldEF0dHJpYnV0ZSggJ2lkJywgb1NldHRpbmdzLnNUYWJsZUlkKydfZmlsdGVyJyApOyAJCQl9IAkJCW5GaWx0ZXIuY2xhc3NOYW1lID0gb1NldHRpbmdzLm9DbGFzc2VzLnNGaWx0ZXI7IAkJCXZhciBzU3BhY2UgPSBvU2V0dGluZ3Mub0xhbmd1YWdlLnNTZWFyY2g9PT0iIiA/ICIiIDogIiAiOyAJCQluRmlsdGVyLmlubmVySFRNTCA9IG9TZXR0aW5ncy5vTGFuZ3VhZ2Uuc1NlYXJjaCtzU3BhY2UrJzxpbnB1dCB0eXBlPSJ0ZXh0IiAvPic7IAkJCSAJCQl2YXIganFGaWx0ZXIgPSAkKCJpbnB1dCIsIG5GaWx0ZXIpOyAJCQlqcUZpbHRlci52YWwoIG9TZXR0aW5ncy5vUHJldmlvdXNTZWFyY2guc1NlYXJjaC5yZXBsYWNlKCciJywnJnF1b3Q7JykgKTsgCQkJanFGaWx0ZXIua2V5dXAoIGZ1bmN0aW9uKGUpIHsgCQkJCS8qIFVwZGF0ZSBhbGwgb3RoZXIgZmlsdGVyIGlucHV0IGVsZW1lbnRzIGZvciB0aGUgbmV3IGRpc3BsYXkgKi8gCQkJCXZhciBuID0gb1NldHRpbmdzLmFhbkZlYXR1cmVzLmY7IAkJCQlmb3IgKCB2YXIgaT0wLCBpTGVuPW4ubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJCXsgCQkJCQlpZiAoIG5baV0gIT0gdGhpcy5wYXJlbnROb2RlICkgCQkJCQl7IAkJCQkJCSQoJ2lucHV0JywgbltpXSkudmFsKCB0aGlzLnZhbHVlICk7IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQkvKiBOb3cgZG8gdGhlIGZpbHRlciAqLyAJCQkJaWYgKCB0aGlzLnZhbHVlICE9IG9TZXR0aW5ncy5vUHJldmlvdXNTZWFyY2guc1NlYXJjaCApIAkJCQl7IAkJCQkJX2ZuRmlsdGVyQ29tcGxldGUoIG9TZXR0aW5ncywgeyAgCQkJCQkJInNTZWFyY2giOiB0aGlzLnZhbHVlLCAgCQkJCQkJImJSZWdleCI6ICBvU2V0dGluZ3Mub1ByZXZpb3VzU2VhcmNoLmJSZWdleCwgCQkJCQkJImJTbWFydCI6ICBvU2V0dGluZ3Mub1ByZXZpb3VzU2VhcmNoLmJTbWFydCAgCQkJCQl9ICk7IAkJCQl9IAkJCX0gKTsgCQkJIAkJCWpxRmlsdGVyLmtleXByZXNzKCBmdW5jdGlvbihlKSB7IAkJCQkvKiBQcmV2ZW50IGRlZmF1bHQgKi8gCQkJCWlmICggZS5rZXlDb2RlID09IDEzICkgCQkJCXsgCQkJCQlyZXR1cm4gZmFsc2U7IAkJCQl9IAkJCX0gKTsgCQkJIAkJCXJldHVybiBuRmlsdGVyOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5GaWx0ZXJDb21wbGV0ZSAJCSAqIFB1cnBvc2U6ICBGaWx0ZXIgdGhlIHRhYmxlIHVzaW5nIGJvdGggdGhlIGdsb2JhbCBmaWx0ZXIgYW5kIGNvbHVtbiBiYXNlZCBmaWx0ZXJpbmcgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgb2JqZWN0Om9TZWFyY2g6IHNlYXJjaCBpbmZvcm1hdGlvbiAJCSAqICAgICAgICAgICBpbnQ6aUZvcmNlIC0gb3B0aW9uYWwgLSBmb3JjZSBhIHJlc2VhcmNoIG9mIHRoZSBtYXN0ZXIgYXJyYXkgKDEpIG9yIG5vdCAodW5kZWZpbmVkIG9yIDApIAkJICovIAkJZnVuY3Rpb24gX2ZuRmlsdGVyQ29tcGxldGUgKCBvU2V0dGluZ3MsIG9JbnB1dCwgaUZvcmNlICkgCQl7IAkJCS8qIEZpbHRlciBvbiBldmVyeXRoaW5nICovIAkJCV9mbkZpbHRlciggb1NldHRpbmdzLCBvSW5wdXQuc1NlYXJjaCwgaUZvcmNlLCBvSW5wdXQuYlJlZ2V4LCBvSW5wdXQuYlNtYXJ0ICk7IAkJCSAJCQkvKiBOb3cgZG8gdGhlIGluZGl2aWR1YWwgY29sdW1uIGZpbHRlciAqLyAJCQlmb3IgKCB2YXIgaT0wIDsgaTxvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzLmxlbmd0aCA7IGkrKyApIAkJCXsgCQkJCV9mbkZpbHRlckNvbHVtbiggb1NldHRpbmdzLCBvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzW2ldLnNTZWFyY2gsIGksICAJCQkJCW9TZXR0aW5ncy5hb1ByZVNlYXJjaENvbHNbaV0uYlJlZ2V4LCBvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzW2ldLmJTbWFydCApOyAJCQl9IAkJCSAJCQkvKiBDdXN0b20gZmlsdGVyaW5nICovIAkJCWlmICggX29FeHQuYWZuRmlsdGVyaW5nLmxlbmd0aCAhPT0gMCApIAkJCXsgCQkJCV9mbkZpbHRlckN1c3RvbSggb1NldHRpbmdzICk7IAkJCX0gCQkJIAkJCS8qIFRlbGwgdGhlIGRyYXcgZnVuY3Rpb24gd2UgaGF2ZSBiZWVuIGZpbHRlcmluZyAqLyAJCQlvU2V0dGluZ3MuYkZpbHRlcmVkID0gdHJ1ZTsgCQkJIAkJCS8qIFJlZHJhdyB0aGUgdGFibGUgKi8gCQkJb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0ID0gMDsgCQkJX2ZuQ2FsY3VsYXRlRW5kKCBvU2V0dGluZ3MgKTsgCQkJX2ZuRHJhdyggb1NldHRpbmdzICk7IAkJCSAJCQkvKiBSZWJ1aWxkIHNlYXJjaCBhcnJheSAnb2ZmbGluZScgKi8gCQkJX2ZuQnVpbGRTZWFyY2hBcnJheSggb1NldHRpbmdzLCAwICk7IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkZpbHRlckN1c3RvbSAJCSAqIFB1cnBvc2U6ICBBcHBseSBjdXN0b20gZmlsdGVyaW5nIGZ1bmN0aW9ucyAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkZpbHRlckN1c3RvbSggb1NldHRpbmdzICkgCQl7IAkJCXZhciBhZm5GaWx0ZXJzID0gX29FeHQuYWZuRmlsdGVyaW5nOyAJCQlmb3IgKCB2YXIgaT0wLCBpTGVuPWFmbkZpbHRlcnMubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJdmFyIGlDb3JyZWN0b3IgPSAwOyAJCQkJZm9yICggdmFyIGo9MCwgakxlbj1vU2V0dGluZ3MuYWlEaXNwbGF5Lmxlbmd0aCA7IGo8akxlbiA7IGorKyApIAkJCQl7IAkJCQkJdmFyIGlEaXNJbmRleCA9IG9TZXR0aW5ncy5haURpc3BsYXlbai1pQ29ycmVjdG9yXTsgCQkJCQkgCQkJCQkvKiBDaGVjayBpZiB3ZSBzaG91bGQgdXNlIHRoaXMgcm93IGJhc2VkIG9uIHRoZSBmaWx0ZXJpbmcgZnVuY3Rpb24gKi8gCQkJCQlpZiAoICFhZm5GaWx0ZXJzW2ldKCBvU2V0dGluZ3MsIG9TZXR0aW5ncy5hb0RhdGFbaURpc0luZGV4XS5fYURhdGEsIGlEaXNJbmRleCApICkgCQkJCQl7IAkJCQkJCW9TZXR0aW5ncy5haURpc3BsYXkuc3BsaWNlKCBqLWlDb3JyZWN0b3IsIDEgKTsgCQkJCQkJaUNvcnJlY3RvcisrOyAJCQkJCX0gCQkJCX0gCQkJfSAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5GaWx0ZXJDb2x1bW4gCQkgKiBQdXJwb3NlOiAgRmlsdGVyIHRoZSB0YWJsZSBvbiBhIHBlci1jb2x1bW4gYmFzaXMgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgc3RyaW5nOnNJbnB1dCAtIHN0cmluZyB0byBmaWx0ZXIgb24gCQkgKiAgICAgICAgICAgaW50OmlDb2x1bW4gLSBjb2x1bW4gdG8gZmlsdGVyIAkJICogICAgICAgICAgIGJvb2w6YlJlZ2V4IC0gdHJlYXQgc2VhcmNoIHN0cmluZyBhcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBvciBub3QgCQkgKiAgICAgICAgICAgYm9vbDpiU21hcnQgLSB1c2Ugc21hcnQgZmlsdGVyaW5nIG9yIG5vdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkZpbHRlckNvbHVtbiAoIG9TZXR0aW5ncywgc0lucHV0LCBpQ29sdW1uLCBiUmVnZXgsIGJTbWFydCApIAkJeyAJCQlpZiAoIHNJbnB1dCA9PT0gIiIgKSAJCQl7IAkJCQlyZXR1cm47IAkJCX0gCQkJIAkJCXZhciBpSW5kZXhDb3JyZWN0b3IgPSAwOyAJCQl2YXIgcnBTZWFyY2ggPSBfZm5GaWx0ZXJDcmVhdGVTZWFyY2goIHNJbnB1dCwgYlJlZ2V4LCBiU21hcnQgKTsgCQkJIAkJCWZvciAoIHZhciBpPW9TZXR0aW5ncy5haURpc3BsYXkubGVuZ3RoLTEgOyBpPj0wIDsgaS0tICkgCQkJeyAJCQkJdmFyIHNEYXRhID0gX2ZuRGF0YVRvU2VhcmNoKCBvU2V0dGluZ3MuYW9EYXRhWyBvU2V0dGluZ3MuYWlEaXNwbGF5W2ldIF0uX2FEYXRhW2lDb2x1bW5dLCAJCQkJCW9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbHVtbl0uc1R5cGUgKTsgCQkJCWlmICggISBycFNlYXJjaC50ZXN0KCBzRGF0YSApICkgCQkJCXsgCQkJCQlvU2V0dGluZ3MuYWlEaXNwbGF5LnNwbGljZSggaSwgMSApOyAJCQkJCWlJbmRleENvcnJlY3RvcisrOyAJCQkJfSAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkZpbHRlciAJCSAqIFB1cnBvc2U6ICBGaWx0ZXIgdGhlIGRhdGEgdGFibGUgYmFzZWQgb24gdXNlciBpbnB1dCBhbmQgZHJhdyB0aGUgdGFibGUgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgc3RyaW5nOnNJbnB1dCAtIHN0cmluZyB0byBmaWx0ZXIgb24gCQkgKiAgICAgICAgICAgaW50OmlGb3JjZSAtIG9wdGlvbmFsIC0gZm9yY2UgYSByZXNlYXJjaCBvZiB0aGUgbWFzdGVyIGFycmF5ICgxKSBvciBub3QgKHVuZGVmaW5lZCBvciAwKSAJCSAqICAgICAgICAgICBib29sOmJSZWdleCAtIHRyZWF0IGFzIGEgcmVndWxhciBleHByZXNzaW9uIG9yIG5vdCAJCSAqICAgICAgICAgICBib29sOmJTbWFydCAtIHBlcmZvcm0gc21hcnQgZmlsdGVyaW5nIG9yIG5vdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkZpbHRlciggb1NldHRpbmdzLCBzSW5wdXQsIGlGb3JjZSwgYlJlZ2V4LCBiU21hcnQgKSAJCXsgCQkJdmFyIGk7IAkJCXZhciBycFNlYXJjaCA9IF9mbkZpbHRlckNyZWF0ZVNlYXJjaCggc0lucHV0LCBiUmVnZXgsIGJTbWFydCApOyAJCQkgCQkJLyogQ2hlY2sgaWYgd2UgYXJlIGZvcmNpbmcgb3Igbm90IC0gb3B0aW9uYWwgcGFyYW1ldGVyICovIAkJCWlmICggdHlwZW9mIGlGb3JjZSA9PSAndW5kZWZpbmVkJyB8fCBpRm9yY2UgPT09IG51bGwgKSAJCQl7IAkJCQlpRm9yY2UgPSAwOyAJCQl9IAkJCSAJCQkvKiBOZWVkIHRvIHRha2UgYWNjb3VudCBvZiBjdXN0b20gZmlsdGVyaW5nIGZ1bmN0aW9ucyAtIGFsd2F5cyBmaWx0ZXIgKi8gCQkJaWYgKCBfb0V4dC5hZm5GaWx0ZXJpbmcubGVuZ3RoICE9PSAwICkgCQkJeyAJCQkJaUZvcmNlID0gMTsgCQkJfSAJCQkgCQkJLyogCQkJICogSWYgdGhlIGlucHV0IGlzIGJsYW5rIC0gd2Ugd2FudCB0aGUgZnVsbCBkYXRhIHNldCAJCQkgKi8gCQkJaWYgKCBzSW5wdXQubGVuZ3RoIDw9IDAgKSAJCQl7IAkJCQlvU2V0dGluZ3MuYWlEaXNwbGF5LnNwbGljZSggMCwgb1NldHRpbmdzLmFpRGlzcGxheS5sZW5ndGgpOyAJCQkJb1NldHRpbmdzLmFpRGlzcGxheSA9IG9TZXR0aW5ncy5haURpc3BsYXlNYXN0ZXIuc2xpY2UoKTsgCQkJfSAJCQllbHNlIAkJCXsgCQkJCS8qIAkJCQkgKiBXZSBhcmUgc3RhcnRpbmcgYSBuZXcgc2VhcmNoIG9yIHRoZSBuZXcgc2VhcmNoIHN0cmluZyBpcyBzbWFsbGVyICAJCQkJICogdGhlbiB0aGUgb2xkIG9uZSAoaS5lLiBkZWxldGUpLiBTZWFyY2ggZnJvbSB0aGUgbWFzdGVyIGFycmF5IAkJCSAJICovIAkJCQlpZiAoIG9TZXR0aW5ncy5haURpc3BsYXkubGVuZ3RoID09IG9TZXR0aW5ncy5haURpc3BsYXlNYXN0ZXIubGVuZ3RoIHx8IAkJCQkJICAgb1NldHRpbmdzLm9QcmV2aW91c1NlYXJjaC5zU2VhcmNoLmxlbmd0aCA+IHNJbnB1dC5sZW5ndGggfHwgaUZvcmNlID09IDEgfHwgCQkJCQkgICBzSW5wdXQuaW5kZXhPZihvU2V0dGluZ3Mub1ByZXZpb3VzU2VhcmNoLnNTZWFyY2gpICE9PSAwICkgCQkJCXsgCQkJCQkvKiBOdWtlIHRoZSBvbGQgZGlzcGxheSBhcnJheSAtIHdlIGFyZSBnb2luZyB0byByZWJ1aWxkIGl0ICovIAkJCQkJb1NldHRpbmdzLmFpRGlzcGxheS5zcGxpY2UoIDAsIG9TZXR0aW5ncy5haURpc3BsYXkubGVuZ3RoKTsgCQkJCQkgCQkJCQkvKiBGb3JjZSBhIHJlYnVpbGQgb2YgdGhlIHNlYXJjaCBhcnJheSAqLyAJCQkJCV9mbkJ1aWxkU2VhcmNoQXJyYXkoIG9TZXR0aW5ncywgMSApOyAJCQkJCSAJCQkJCS8qIFNlYXJjaCB0aHJvdWdoIGFsbCByZWNvcmRzIHRvIHBvcHVsYXRlIHRoZSBzZWFyY2ggYXJyYXkgCQkJCQkgKiBUaGUgdGhlIG9TZXR0aW5ncy5haURpc3BsYXlNYXN0ZXIgYW5kIGFzRGF0YVNlYXJjaCBhcnJheXMgaGF2ZSAxIHRvIDEgIAkJCQkJICogbWFwcGluZyAJCQkJCSAqLyAJCQkJCWZvciAoIGk9MCA7IGk8b1NldHRpbmdzLmFpRGlzcGxheU1hc3Rlci5sZW5ndGggOyBpKysgKSAJCQkJCXsgCQkJCQkJaWYgKCBycFNlYXJjaC50ZXN0KG9TZXR0aW5ncy5hc0RhdGFTZWFyY2hbaV0pICkgCQkJCQkJeyAJCQkJCQkJb1NldHRpbmdzLmFpRGlzcGxheS5wdXNoKCBvU2V0dGluZ3MuYWlEaXNwbGF5TWFzdGVyW2ldICk7IAkJCQkJCX0gCQkJCQl9IAkJCSAgfSAJCQkgIGVsc2UgCQkJCXsgCQkJICAJLyogVXNpbmcgb2xkIHNlYXJjaCBhcnJheSAtIHJlZmluZSBpdCAtIGRvIGl0IHRoaXMgd2F5IGZvciBzcGVlZCAJCQkgIAkgKiBEb24ndCBoYXZlIHRvIHNlYXJjaCB0aGUgd2hvbGUgbWFzdGVyIGFycmF5IGFnYWluIAkJCSAJCSAqLyAJCQkgIAl2YXIgaUluZGV4Q29ycmVjdG9yID0gMDsgCQkJICAJIAkJCSAgCS8qIFNlYXJjaCB0aGUgY3VycmVudCByZXN1bHRzICovIAkJCSAgCWZvciAoIGk9MCA7IGk8b1NldHRpbmdzLmFzRGF0YVNlYXJjaC5sZW5ndGggOyBpKysgKSAJCQkJCXsgCQkJICAJCWlmICggISBycFNlYXJjaC50ZXN0KG9TZXR0aW5ncy5hc0RhdGFTZWFyY2hbaV0pICkgCQkJCQkJeyAJCQkgIAkJCW9TZXR0aW5ncy5haURpc3BsYXkuc3BsaWNlKCBpLWlJbmRleENvcnJlY3RvciwgMSApOyAJCQkgIAkJCWlJbmRleENvcnJlY3RvcisrOyAJCQkgIAkJfSAJCQkgIAl9IAkJCSAgfSAJCQl9IAkJCW9TZXR0aW5ncy5vUHJldmlvdXNTZWFyY2guc1NlYXJjaCA9IHNJbnB1dDsgCQkJb1NldHRpbmdzLm9QcmV2aW91c1NlYXJjaC5iUmVnZXggPSBiUmVnZXg7IAkJCW9TZXR0aW5ncy5vUHJldmlvdXNTZWFyY2guYlNtYXJ0ID0gYlNtYXJ0OyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5CdWlsZFNlYXJjaEFycmF5IAkJICogUHVycG9zZTogIENyZWF0ZSBhbiBhcnJheSB3aGljaCBjYW4gYmUgcXVpY2tseSBzZWFyY2ggdGhyb3VnaCAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqICAgICAgICAgICBpbnQ6aU1hc3RlciAtIHVzZSB0aGUgbWFzdGVyIGRhdGEgYXJyYXkgLSBvcHRpb25hbCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkJ1aWxkU2VhcmNoQXJyYXkgKCBvU2V0dGluZ3MsIGlNYXN0ZXIgKSAJCXsgCQkJLyogQ2xlYXIgb3V0IHRoZSBvbGQgZGF0YSAqLyAJCQlvU2V0dGluZ3MuYXNEYXRhU2VhcmNoLnNwbGljZSggMCwgb1NldHRpbmdzLmFzRGF0YVNlYXJjaC5sZW5ndGggKTsgCQkJIAkJCXZhciBhQXJyYXkgPSAodHlwZW9mIGlNYXN0ZXIgIT0gJ3VuZGVmaW5lZCcgJiYgaU1hc3RlciA9PSAxKSA/IAkJCSAJb1NldHRpbmdzLmFpRGlzcGxheU1hc3RlciA6IG9TZXR0aW5ncy5haURpc3BsYXk7IAkJCSAJCQlmb3IgKCB2YXIgaT0wLCBpTGVuPWFBcnJheS5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQl7IAkJCQlvU2V0dGluZ3MuYXNEYXRhU2VhcmNoW2ldID0gX2ZuQnVpbGRTZWFyY2hSb3coIG9TZXR0aW5ncywgIAkJCQkJb1NldHRpbmdzLmFvRGF0YVsgYUFycmF5W2ldIF0uX2FEYXRhICk7IAkJCX0gCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQnVpbGRTZWFyY2hSb3cgCQkgKiBQdXJwb3NlOiAgQ3JlYXRlIGEgc2VhcmNoYWJsZSBzdHJpbmcgZnJvbSBhIHNpbmdsZSBkYXRhIHJvdyAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqICAgICAgICAgICBhcnJheTphRGF0YSAtIGFvRGF0YVtdLl9hRGF0YSBhcnJheSB0byB1c2UgZm9yIHRoZSBkYXRhIHRvIHNlYXJjaCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkJ1aWxkU2VhcmNoUm93KCBvU2V0dGluZ3MsIGFEYXRhICkgCQl7IAkJCXZhciBzU2VhcmNoID0gJyc7IAkJCXZhciBuVG1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IAkJCSAJCQlmb3IgKCB2YXIgaj0wLCBqTGVuPW9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgajxqTGVuIDsgaisrICkgCQkJeyAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2pdLmJTZWFyY2hhYmxlICkgCQkJCXsgCQkJCQl2YXIgc0RhdGEgPSBhRGF0YVtqXTsgCQkJCQlzU2VhcmNoICs9IF9mbkRhdGFUb1NlYXJjaCggc0RhdGEsIG9TZXR0aW5ncy5hb0NvbHVtbnNbal0uc1R5cGUgKSsnICAnOyAJCQkJfSAJCQl9IAkJCSAJCQkvKiBJZiBpdCBsb29rcyBsaWtlIHRoZXJlIGlzIGFuIEhUTUwgZW50aXR5IGluIHRoZSBzdHJpbmcsIGF0dGVtcHQgdG8gZGVjb2RlIGl0ICovIAkJCWlmICggc1NlYXJjaC5pbmRleE9mKCcmJykgIT09IC0xICkgCQkJeyAJCQkJblRtcC5pbm5lckhUTUwgPSBzU2VhcmNoOyAJCQkJc1NlYXJjaCA9IG5UbXAudGV4dENvbnRlbnQgPyBuVG1wLnRleHRDb250ZW50IDogblRtcC5pbm5lclRleHQ7IAkJCQkgCQkJCS8qIElFIGFuZCBPcGVyYSBhcHBlYXIgdG8gcHV0IGFuIG5ld2xpbmUgd2hlcmUgdGhlcmUgaXMgYSA8YnI+IHRhZyAtIHJlbW92ZSBpdCAqLyAJCQkJc1NlYXJjaCA9IHNTZWFyY2gucmVwbGFjZSgvXG4vZywiICIpLnJlcGxhY2UoL1xyL2csIiIpOyAJCQl9IAkJCSAJCQlyZXR1cm4gc1NlYXJjaDsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuRmlsdGVyQ3JlYXRlU2VhcmNoIAkJICogUHVycG9zZTogIEJ1aWxkIGEgcmVndWxhciBleHByZXNzaW9uIG9iamVjdCBzdWl0YWJsZSBmb3Igc2VhcmNoaW5nIGEgdGFibGUgCQkgKiBSZXR1cm5zOiAgUmVnRXhwOiAtIGNvbnN0cnVjdGVkIG9iamVjdCAJCSAqIElucHV0czogICBzdHJpbmc6c1NlYXJjaCAtIHN0cmluZyB0byBzZWFyY2ggZm9yIAkJICogICAgICAgICAgIGJvb2w6YlJlZ2V4IC0gdHJlYXQgYXMgYSByZWd1bGFyIGV4cHJlc3Npb24gb3Igbm90IAkJICogICAgICAgICAgIGJvb2w6YlNtYXJ0IC0gcGVyZm9ybSBzbWFydCBmaWx0ZXJpbmcgb3Igbm90IAkJICovIAkJZnVuY3Rpb24gX2ZuRmlsdGVyQ3JlYXRlU2VhcmNoKCBzU2VhcmNoLCBiUmVnZXgsIGJTbWFydCApIAkJeyAJCQl2YXIgYXNTZWFyY2gsIHNSZWdFeHBTdHJpbmc7IAkJCSAJCQlpZiAoIGJTbWFydCApIAkJCXsgCQkJCS8qIEdlbmVyYXRlIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gdG8gdXNlLiBTb21ldGhpbmcgYWxvbmcgdGhlIGxpbmVzIG9mOiAJCQkJICogXig/PS4qP1xib25lXGIpKD89Lio/XGJ0d29cYikoPz0uKj9cYnRocmVlXGIpLiokIAkJCQkgKi8gCQkJCWFzU2VhcmNoID0gYlJlZ2V4ID8gc1NlYXJjaC5zcGxpdCggJyAnICkgOiBfZm5Fc2NhcGVSZWdleCggc1NlYXJjaCApLnNwbGl0KCAnICcgKTsgCQkJCXNSZWdFeHBTdHJpbmcgPSAnXig/PS4qPycrYXNTZWFyY2guam9pbiggJykoPz0uKj8nICkrJykuKiQnOyAJCQkJcmV0dXJuIG5ldyBSZWdFeHAoIHNSZWdFeHBTdHJpbmcsICJpIiApOyAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJc1NlYXJjaCA9IGJSZWdleCA/IHNTZWFyY2ggOiBfZm5Fc2NhcGVSZWdleCggc1NlYXJjaCApOyAJCQkJcmV0dXJuIG5ldyBSZWdFeHAoIHNTZWFyY2gsICJpIiApOyAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkRhdGFUb1NlYXJjaCAJCSAqIFB1cnBvc2U6ICBDb252ZXJ0IHJhdyBkYXRhIGludG8gc29tZXRoaW5nIHRoYXQgdGhlIHVzZXIgY2FuIHNlYXJjaCBvbiAJCSAqIFJldHVybnM6ICBzdHJpbmc6IC0gc2VhcmNoIHN0cmluZyAJCSAqIElucHV0czogICBzdHJpbmc6c0RhdGEgLSBkYXRhIHRvIGJlIG1vZGlmaWVkIAkJICogICAgICAgICAgIHN0cmluZzpzVHlwZSAtIGRhdGEgdHlwZSAJCSAqLyAJCWZ1bmN0aW9uIF9mbkRhdGFUb1NlYXJjaCAoIHNEYXRhLCBzVHlwZSApIAkJeyAJCQlpZiAoIHR5cGVvZiBfb0V4dC5vZm5TZWFyY2hbc1R5cGVdID09ICJmdW5jdGlvbiIgKSAJCQl7IAkJCQlyZXR1cm4gX29FeHQub2ZuU2VhcmNoW3NUeXBlXSggc0RhdGEgKTsgCQkJfSAJCQllbHNlIGlmICggc1R5cGUgPT0gImh0bWwiICkgCQkJeyAJCQkJcmV0dXJuIHNEYXRhLnJlcGxhY2UoL1xuL2csIiAiKS5yZXBsYWNlKCAvPC4qPz4vZywgIiIgKTsgCQkJfSAJCQllbHNlIGlmICggdHlwZW9mIHNEYXRhID09ICJzdHJpbmciICkgCQkJeyAJCQkJcmV0dXJuIHNEYXRhLnJlcGxhY2UoL1xuL2csIiAiKTsgCQkJfSAJCQlyZXR1cm4gc0RhdGE7IAkJfSAJCSAJCSAJCS8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogCQkgKiBTZWN0aW9uIC0gRmVhdHVyZTogU29ydGluZyAJCSAqLyAJCSAJCS8qIAkgCSAqIEZ1bmN0aW9uOiBfZm5Tb3J0IAkJICogUHVycG9zZTogIENoYW5nZSB0aGUgb3JkZXIgb2YgdGhlIHRhYmxlIAkJICogUmV0dXJuczogIC0gCQkgKiBJbnB1dHM6ICAgb2JqZWN0Om9TZXR0aW5ncyAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJICogICAgICAgICAgIGJvb2w6YkFwcGx5Q2xhc3NlcyAtIG9wdGlvbmFsIC0gc2hvdWxkIHdlIGFwcGx5IGNsYXNzZXMgb3Igbm90IAkJICogTm90ZXM6ICAgIFdlIGFsd2F5cyBzb3J0IHRoZSBtYXN0ZXIgYXJyYXkgYW5kIHRoZW4gYXBwbHkgYSBmaWx0ZXIgYWdhaW4gCQkgKiAgIGlmIGl0IGlzIG5lZWRlZC4gVGhpcyBwcm9iYWJseSBpc24ndCBvcHRpbWFsIC0gYnV0IGF0bSBJIGNhbid0IHRoaW5rIAkJICogICBvZiBhbnkgb3RoZXIgd2F5IHdoaWNoIGlzIChlYWNoIGhhcyBkaXNhZHZhbnRhZ2VzKS4gd2Ugd2FudCB0byBzb3J0IGFpRGlzcGxheU1hc3RlciAtICAJCSAqICAgYnV0IGFjY29yZGluZyB0byBhb0RhdGFbXS5fYURhdGEgCQkgKi8gCQlmdW5jdGlvbiBfZm5Tb3J0ICggb1NldHRpbmdzLCBiQXBwbHlDbGFzc2VzICkgCQl7IAkJCXZhciAJCQkJaURhdGFTb3J0LCBpRGF0YVR5cGUsIAkJCQlpLCBpTGVuLCBqLCBqTGVuLCAJCQkJYWFTb3J0ID0gW10sIAkJCSAJYWlPcmlnID0gW10sIAkJCQlvU29ydCA9IF9vRXh0Lm9Tb3J0LCAJCQkJYW9EYXRhID0gb1NldHRpbmdzLmFvRGF0YSwgCQkJCWFvQ29sdW1ucyA9IG9TZXR0aW5ncy5hb0NvbHVtbnM7IAkJCSAJCQkvKiBObyBzb3J0aW5nIHJlcXVpcmVkIGlmIHNlcnZlci1zaWRlIG9yIG5vIHNvcnRpbmcgYXJyYXkgKi8gCQkJaWYgKCAhb1NldHRpbmdzLm9GZWF0dXJlcy5iU2VydmVyU2lkZSAmJiAgCQkJCShvU2V0dGluZ3MuYWFTb3J0aW5nLmxlbmd0aCAhPT0gMCB8fCBvU2V0dGluZ3MuYWFTb3J0aW5nRml4ZWQgIT09IG51bGwpICkgCQkJeyAJCQkJaWYgKCBvU2V0dGluZ3MuYWFTb3J0aW5nRml4ZWQgIT09IG51bGwgKSAJCQkJeyAJCQkJCWFhU29ydCA9IG9TZXR0aW5ncy5hYVNvcnRpbmdGaXhlZC5jb25jYXQoIG9TZXR0aW5ncy5hYVNvcnRpbmcgKTsgCQkJCX0gCQkJCWVsc2UgCQkJCXsgCQkJCQlhYVNvcnQgPSBvU2V0dGluZ3MuYWFTb3J0aW5nLnNsaWNlKCk7IAkJCQl9IAkJCQkgCQkJCS8qIElmIHRoZXJlIGlzIGEgc29ydGluZyBkYXRhIHR5cGUsIGFuZCBhIGZ1Y3Rpb24gYmVsb25naW5nIHRvIGl0LCB0aGVuIHdlIG5lZWQgdG8gCQkJCSAqIGdldCB0aGUgZGF0YSBmcm9tIHRoZSBkZXZlbG9wZXIncyBmdW5jdGlvbiBhbmQgYXBwbHkgaXQgZm9yIHRoaXMgY29sdW1uIAkJCQkgKi8gCQkJCWZvciAoIGk9MCA7IGk8YWFTb3J0Lmxlbmd0aCA7IGkrKyApIAkJCQl7IAkJCQkJdmFyIGlDb2x1bW4gPSBhYVNvcnRbaV1bMF07IAkJCQkJdmFyIGlWaXNDb2x1bW4gPSBfZm5Db2x1bW5JbmRleFRvVmlzaWJsZSggb1NldHRpbmdzLCBpQ29sdW1uICk7IAkJCQkJdmFyIHNEYXRhVHlwZSA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbIGlDb2x1bW4gXS5zU29ydERhdGFUeXBlOyAJCQkJCWlmICggdHlwZW9mIF9vRXh0LmFmblNvcnREYXRhW3NEYXRhVHlwZV0gIT0gJ3VuZGVmaW5lZCcgKSAJCQkJCXsgCQkJCQkJdmFyIGFEYXRhID0gX29FeHQuYWZuU29ydERhdGFbc0RhdGFUeXBlXSggb1NldHRpbmdzLCBpQ29sdW1uLCBpVmlzQ29sdW1uICk7IAkJCQkJCWZvciAoIGo9MCwgakxlbj1hb0RhdGEubGVuZ3RoIDsgajxqTGVuIDsgaisrICkgCQkJCQkJeyAJCQkJCQkJYW9EYXRhW2pdLl9hRGF0YVtpQ29sdW1uXSA9IGFEYXRhW2pdOyAJCQkJCQl9IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQkvKiBDcmVhdGUgYSB2YWx1ZSAtIGtleSBhcnJheSBvZiB0aGUgY3VycmVudCByb3cgcG9zaXRpb25zIHN1Y2ggdGhhdCB3ZSBjYW4gdXNlIHRoZWlyIAkJCQkgKiBjdXJyZW50IHBvc2l0aW9uIGR1cmluZyB0aGUgc29ydCwgaWYgdmFsdWVzIG1hdGNoLCBpbiBvcmRlciB0byBwZXJmb3JtIHN0YWJsZSBzb3J0aW5nIAkJCQkgKi8gCQkJCWZvciAoIGk9MCwgaUxlbj1vU2V0dGluZ3MuYWlEaXNwbGF5TWFzdGVyLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCQl7IAkJCQkJYWlPcmlnWyBvU2V0dGluZ3MuYWlEaXNwbGF5TWFzdGVyW2ldIF0gPSBpOyAJCQkJfSAJCQkJIAkJCQkvKiBEbyB0aGUgc29ydCAtIGhlcmUgd2Ugd2FudCBtdWx0aS1jb2x1bW4gc29ydGluZyBiYXNlZCBvbiBhIGdpdmVuIGRhdGEgc291cmNlIChjb2x1bW4pIAkJCQkgKiBhbmQgc29ydGluZyBmdW5jdGlvbiAoZnJvbSBvU29ydCkgaW4gYSBjZXJ0YWluIGRpcmVjdGlvbi4gSXQncyByZWFzb25hYmx5IGNvbXBsZXggdG8gCQkJCSAqIGZvbGxvdyBvbiBpdCdzIG93biwgYnV0IHRoaXMgaXMgd2hhdCB3ZSB3YW50IChleGFtcGxlIHR3byBjb2x1bW4gc29ydGluZyk6IAkJCQkgKiAgZm5Mb2NhbFNvcnRpbmcgPSBmdW5jdGlvbihhLGIpeyAJCQkJICogIAl2YXIgaVRlc3Q7IAkJCQkgKiAgCWlUZXN0ID0gb1NvcnRbJ3N0cmluZy1hc2MnXSgnZGF0YTExJywgJ2RhdGExMicpOyAJCQkJICogIAlpZiAoaVRlc3QgIT09IDApIAkJCQkgKiAgCQlyZXR1cm4gaVRlc3Q7IAkJCQkgKiAgICBpVGVzdCA9IG9Tb3J0WydudW1lcmljLWRlc2MnXSgnZGF0YTIxJywgJ2RhdGEyMicpOyAJCQkJICogICAgaWYgKGlUZXN0ICE9PSAwKSAJCQkJICogIAkJcmV0dXJuIGlUZXN0OyAJCQkJICogIAlyZXR1cm4gb1NvcnRbJ251bWVyaWMtYXNjJ10oIGFpT3JpZ1thXSwgYWlPcmlnW2JdICk7IAkJCQkgKiAgfSAJCQkJICogQmFzaWNhbGx5IHdlIGhhdmUgYSB0ZXN0IGZvciBlYWNoIHNvcnRpbmcgY29sdW1uLCBpZiB0aGUgZGF0YSBpbiB0aGF0IGNvbHVtbiBpcyBlcXVhbCwgCQkJCSAqIHRlc3QgdGhlIG5leHQgY29sdW1uLiBJZiBhbGwgY29sdW1ucyBtYXRjaCwgdGhlbiB3ZSB1c2UgYSBudW1lcmljIHNvcnQgb24gdGhlIHJvdyAgCQkJCSAqIHBvc2l0aW9ucyBpbiB0aGUgb3JpZ2luYWwgZGF0YSBhcnJheSB0byBwcm92aWRlIGEgc3RhYmxlIHNvcnQuIAkJCQkgKi8gCQkJCXZhciBpU29ydExlbiA9IGFhU29ydC5sZW5ndGg7IAkJCQlvU2V0dGluZ3MuYWlEaXNwbGF5TWFzdGVyLnNvcnQoIGZ1bmN0aW9uICggYSwgYiApIHsgCQkJCQl2YXIgaVRlc3Q7IAkJCQkJZm9yICggaT0wIDsgaTxpU29ydExlbiA7IGkrKyApIAkJCQkJeyAJCQkJCQlpRGF0YVNvcnQgPSBhb0NvbHVtbnNbIGFhU29ydFtpXVswXSBdLmlEYXRhU29ydDsgCQkJCQkJaURhdGFUeXBlID0gYW9Db2x1bW5zWyBpRGF0YVNvcnQgXS5zVHlwZTsgCQkJCQkJaVRlc3QgPSBvU29ydFsgaURhdGFUeXBlKyItIithYVNvcnRbaV1bMV0gXSggCQkJCQkJCWFvRGF0YVthXS5fYURhdGFbaURhdGFTb3J0XSwgCQkJCQkJCWFvRGF0YVtiXS5fYURhdGFbaURhdGFTb3J0XSAJCQkJCQkpOyAJCQkJCQkgCQkJCQkJaWYgKCBpVGVzdCAhPT0gMCApIAkJCQkJCXsgCQkJCQkJCXJldHVybiBpVGVzdDsgCQkJCQkJfSAJCQkJCX0gCQkJCQkgCQkJCQlyZXR1cm4gb1NvcnRbJ251bWVyaWMtYXNjJ10oIGFpT3JpZ1thXSwgYWlPcmlnW2JdICk7IAkJCQl9ICk7IAkJCX0gCQkJIAkJCS8qIEFsdGVyIHRoZSBzb3J0aW5nIGNsYXNzZXMgdG8gdGFrZSBhY2NvdW50IG9mIHRoZSBjaGFuZ2VzICovIAkJCWlmICggdHlwZW9mIGJBcHBseUNsYXNzZXMgPT0gJ3VuZGVmaW5lZCcgfHwgYkFwcGx5Q2xhc3NlcyApIAkJCXsgCQkJCV9mblNvcnRpbmdDbGFzc2VzKCBvU2V0dGluZ3MgKTsgCQkJfSAJCQkgCQkJLyogVGVsbCB0aGUgZHJhdyBmdW5jdGlvbiB0aGF0IHdlIGhhdmUgc29ydGVkIHRoZSBkYXRhICovIAkJCW9TZXR0aW5ncy5iU29ydGVkID0gdHJ1ZTsgCQkJIAkJCS8qIENvcHkgdGhlIG1hc3RlciBkYXRhIGludG8gdGhlIGRyYXcgYXJyYXkgYW5kIHJlLWRyYXcgKi8gCQkJaWYgKCBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJGaWx0ZXIgKSAJCQl7IAkJCQkvKiBfZm5GaWx0ZXIoKSB3aWxsIHJlZHJhdyB0aGUgdGFibGUgZm9yIHVzICovIAkJCQlfZm5GaWx0ZXJDb21wbGV0ZSggb1NldHRpbmdzLCBvU2V0dGluZ3Mub1ByZXZpb3VzU2VhcmNoLCAxICk7IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQlvU2V0dGluZ3MuYWlEaXNwbGF5ID0gb1NldHRpbmdzLmFpRGlzcGxheU1hc3Rlci5zbGljZSgpOyAJCQkJb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0ID0gMDsgLyogcmVzZXQgZGlzcGxheSBiYWNrIHRvIHBhZ2UgMCAqLyAJCQkJX2ZuQ2FsY3VsYXRlRW5kKCBvU2V0dGluZ3MgKTsgCQkJCV9mbkRyYXcoIG9TZXR0aW5ncyApOyAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mblNvcnRBdHRhY2hMaXN0ZW5lciAJCSAqIFB1cnBvc2U6ICBBdHRhY2ggYSBzb3J0IGhhbmRsZXIgKGNsaWNrKSB0byBhIG5vZGUgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgbm9kZTpuTm9kZSAtIG5vZGUgdG8gYXR0YWNoIHRoZSBoYW5kbGVyIHRvIAkJICogICAgICAgICAgIGludDppRGF0YUluZGV4IC0gY29sdW1uIHNvcnRpbmcgaW5kZXggCQkgKiAgICAgICAgICAgZnVuY3Rpb246Zm5DYWxsYmFjayAtIGNhbGxiYWNrIGZ1bmN0aW9uIC0gb3B0aW9uYWwgCQkgKi8gCQlmdW5jdGlvbiBfZm5Tb3J0QXR0YWNoTGlzdGVuZXIgKCBvU2V0dGluZ3MsIG5Ob2RlLCBpRGF0YUluZGV4LCBmbkNhbGxiYWNrICkgCQl7IAkJCSQobk5vZGUpLmNsaWNrKCBmdW5jdGlvbiAoZSkgeyAJCQkJLyogSWYgdGhlIGNvbHVtbiBpcyBub3Qgc29ydGFibGUgLSBkb24ndCB0byBhbnl0aGluZyAqLyAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2lEYXRhSW5kZXhdLmJTb3J0YWJsZSA9PT0gZmFsc2UgKSAJCQkJeyAJCQkJCXJldHVybjsgCQkJCX0gCQkJCSAJCQkJLyogCQkJCSAqIFRoaXMgaXMgYSBsaXR0bGUgYml0IG9kZCBJIGFkbWl0Li4uIEkgZGVjbGFyZSBhIHRlbXBvcmFyeSBmdW5jdGlvbiBpbnNpZGUgdGhlIHNjb3BlIG9mIAkJCQkgKiBfZm5EcmF3SGVhZCBhbmQgdGhlIGNsaWNrIGhhbmRsZXIgaW4gb3JkZXIgdGhhdCB0aGUgY29kZSBwcmVzZW50ZWQgaGVyZSBjYW4gYmUgdXNlZCAgCQkJCSAqIHR3aWNlIC0gb25jZSBmb3Igd2hlbiBiUHJvY2Vzc2luZyBpcyBlbmFibGVkLCBhbmQgYW5vdGhlciB0aW1lIGZvciB3aGVuIGl0IGlzICAJCQkJICogZGlzYWJsZWQsIGFzIHdlIG5lZWQgdG8gcGVyZm9ybSBzbGlnaHRseSBkaWZmZXJlbnQgYWN0aW9ucy4gCQkJCSAqICAgQmFzaWNhbGx5IHRoZSBpc3N1ZSBoZXJlIGlzIHRoYXQgdGhlIEphdmFzY3JpcHQgZW5naW5lIGluIG1vZGVybiBicm93c2VycyBkb24ndCAgCQkJCSAqIGFwcGVhciB0byBhbGxvdyB0aGUgcmVuZGVyaW5nIGVuZ2luZSB0byB1cGRhdGUgdGhlIGRpc3BsYXkgd2hpbGUgaXQgaXMgc3RpbGwgZXhjdXRpbmcgCQkJCSAqIGl0J3MgdGhyZWFkICh3ZWxsIC0gaXQgZG9lcyBidXQgb25seSBhZnRlciBsb25nIGludGVydmFscykuIFRoaXMgbWVhbnMgdGhhdCB0aGUgIAkJCQkgKiAncHJvY2Vzc2luZycgZGlzcGxheSBkb2Vzbid0IGFwcGVhciBmb3IgYSB0YWJsZSBzb3J0LiBUbyBicmVhayB0aGUganMgdGhyZWFkIHVwIGEgYml0IAkJCQkgKiBJIGZvcmNlIGFuIGV4ZWN1dGlvbiBicmVhayBieSB1c2luZyBzZXRUaW1lb3V0IC0gYnV0IHRoaXMgYnJlYWtzIHRoZSBleHBlY3RlZCAgCQkJCSAqIHRocmVhZCBjb250aW51YXRpb24gZm9yIHRoZSBlbmQtZGV2ZWxvcGVyJ3MgcG9pbnQgb2YgdmlldyAodGhlaXIgY29kZSB3b3VsZCBleGVjdXRlIAkJCQkgKiB0b28gZWFybHkpLCBzbyB3ZSBvbjt5IGRvIGl0IHdoZW4gd2UgYWJzb2x1dGVseSBoYXZlIHRvLiAJCQkJICovIAkJCQl2YXIgZm5Jbm5lclNvcnRpbmcgPSBmdW5jdGlvbiAoKSB7IAkJCQkJdmFyIGlDb2x1bW4sIGlOZXh0U29ydDsgCQkJCQkgCQkJCQkvKiBJZiB0aGUgc2hpZnQga2V5IGlzIHByZXNzZWQgdGhlbiB3ZSBhcmUgbXVsdGlwZSBjb2x1bW4gc29ydGluZyAqLyAJCQkJCWlmICggZS5zaGlmdEtleSApIAkJCQkJeyAJCQkJCQkvKiBBcmUgd2UgYWxyZWFkeSBkb2luZyBzb21lIGtpbmQgb2Ygc29ydCBvbiB0aGlzIGNvbHVtbj8gKi8gCQkJCQkJdmFyIGJGb3VuZCA9IGZhbHNlOyAJCQkJCQlmb3IgKCB2YXIgaT0wIDsgaTxvU2V0dGluZ3MuYWFTb3J0aW5nLmxlbmd0aCA7IGkrKyApIAkJCQkJCXsgCQkJCQkJCWlmICggb1NldHRpbmdzLmFhU29ydGluZ1tpXVswXSA9PSBpRGF0YUluZGV4ICkgCQkJCQkJCXsgCQkJCQkJCQliRm91bmQgPSB0cnVlOyAJCQkJCQkJCWlDb2x1bW4gPSBvU2V0dGluZ3MuYWFTb3J0aW5nW2ldWzBdOyAJCQkJCQkJCWlOZXh0U29ydCA9IG9TZXR0aW5ncy5hYVNvcnRpbmdbaV1bMl0rMTsgCQkJCQkJCQkgCQkJCQkJCQlpZiAoIHR5cGVvZiBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLmFzU29ydGluZ1tpTmV4dFNvcnRdID09ICd1bmRlZmluZWQnICkgCQkJCQkJCQl7IAkJCQkJCQkJCS8qIFJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgc29ydGluZyBvcHRpb25zLCByZW1vdmUgZnJvbSBtdWx0aS1jb2wgc29ydCAqLyAJCQkJCQkJCQlvU2V0dGluZ3MuYWFTb3J0aW5nLnNwbGljZSggaSwgMSApOyAJCQkJCQkJCX0gCQkJCQkJCQllbHNlIAkJCQkJCQkJeyAJCQkJCQkJCQkvKiBNb3ZlIG9udG8gbmV4dCBzb3J0aW5nIGRpcmVjdGlvbiAqLyAJCQkJCQkJCQlvU2V0dGluZ3MuYWFTb3J0aW5nW2ldWzFdID0gb1NldHRpbmdzLmFvQ29sdW1uc1tpQ29sdW1uXS5hc1NvcnRpbmdbaU5leHRTb3J0XTsgCQkJCQkJCQkJb1NldHRpbmdzLmFhU29ydGluZ1tpXVsyXSA9IGlOZXh0U29ydDsgCQkJCQkJCQl9IAkJCQkJCQkJYnJlYWs7IAkJCQkJCQl9IAkJCQkJCX0gCQkJCQkJIAkJCQkJCS8qIE5vIHNvcnQgeWV0IC0gYWRkIGl0IGluICovIAkJCQkJCWlmICggYkZvdW5kID09PSBmYWxzZSApIAkJCQkJCXsgCQkJCQkJCW9TZXR0aW5ncy5hYVNvcnRpbmcucHVzaCggWyBpRGF0YUluZGV4LCAgCQkJCQkJCQlvU2V0dGluZ3MuYW9Db2x1bW5zW2lEYXRhSW5kZXhdLmFzU29ydGluZ1swXSwgMCBdICk7IAkJCQkJCX0gCQkJCQl9IAkJCQkJZWxzZSAJCQkJCXsgCQkJCQkJLyogSWYgbm8gc2hpZnQga2V5IHRoZW4gc2luZ2xlIGNvbHVtbiBzb3J0ICovIAkJCQkJCWlmICggb1NldHRpbmdzLmFhU29ydGluZy5sZW5ndGggPT0gMSAmJiBvU2V0dGluZ3MuYWFTb3J0aW5nWzBdWzBdID09IGlEYXRhSW5kZXggKSAJCQkJCQl7IAkJCQkJCQlpQ29sdW1uID0gb1NldHRpbmdzLmFhU29ydGluZ1swXVswXTsgCQkJCQkJCWlOZXh0U29ydCA9IG9TZXR0aW5ncy5hYVNvcnRpbmdbMF1bMl0rMTsgCQkJCQkJCWlmICggdHlwZW9mIG9TZXR0aW5ncy5hb0NvbHVtbnNbaUNvbHVtbl0uYXNTb3J0aW5nW2lOZXh0U29ydF0gPT0gJ3VuZGVmaW5lZCcgKSAJCQkJCQkJeyAJCQkJCQkJCWlOZXh0U29ydCA9IDA7IAkJCQkJCQl9IAkJCQkJCQlvU2V0dGluZ3MuYWFTb3J0aW5nWzBdWzFdID0gb1NldHRpbmdzLmFvQ29sdW1uc1tpQ29sdW1uXS5hc1NvcnRpbmdbaU5leHRTb3J0XTsgCQkJCQkJCW9TZXR0aW5ncy5hYVNvcnRpbmdbMF1bMl0gPSBpTmV4dFNvcnQ7IAkJCQkJCX0gCQkJCQkJZWxzZSAJCQkJCQl7IAkJCQkJCQlvU2V0dGluZ3MuYWFTb3J0aW5nLnNwbGljZSggMCwgb1NldHRpbmdzLmFhU29ydGluZy5sZW5ndGggKTsgCQkJCQkJCW9TZXR0aW5ncy5hYVNvcnRpbmcucHVzaCggWyBpRGF0YUluZGV4LCAgCQkJCQkJCQlvU2V0dGluZ3MuYW9Db2x1bW5zW2lEYXRhSW5kZXhdLmFzU29ydGluZ1swXSwgMCBdICk7IAkJCQkJCX0gCQkJCQl9IAkJCQkJIAkJCQkJLyogUnVuIHRoZSBzb3J0ICovIAkJCQkJX2ZuU29ydCggb1NldHRpbmdzICk7IAkJCQl9OyAvKiAvZm5Jbm5lclNvcnRpbmcgKi8gCQkJCSAJCQkJaWYgKCAhb1NldHRpbmdzLm9GZWF0dXJlcy5iUHJvY2Vzc2luZyApIAkJCQl7IAkJCQkJZm5Jbm5lclNvcnRpbmcoKTsgCQkJCX0gCQkJCWVsc2UgCQkJCXsgCQkJCQlfZm5Qcm9jZXNzaW5nRGlzcGxheSggb1NldHRpbmdzLCB0cnVlICk7IAkJCQkJc2V0VGltZW91dCggZnVuY3Rpb24oKSB7IAkJCQkJCWZuSW5uZXJTb3J0aW5nKCk7IAkJCQkJCWlmICggIW9TZXR0aW5ncy5vRmVhdHVyZXMuYlNlcnZlclNpZGUgKSAJCQkJCQl7IAkJCQkJCQlfZm5Qcm9jZXNzaW5nRGlzcGxheSggb1NldHRpbmdzLCBmYWxzZSApOyAJCQkJCQl9IAkJCQkJfSwgMCApOyAJCQkJfSAJCQkJIAkJCQkvKiBDYWxsIHRoZSB1c2VyIHNwZWNpZmllZCBjYWxsYmFjayBmdW5jdGlvbiAtIHVzZWQgZm9yIGFzeW5jIHVzZXIgaW50ZXJhY3Rpb24gKi8gCQkJCWlmICggdHlwZW9mIGZuQ2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJyApIAkJCQl7IAkJCQkJZm5DYWxsYmFjayggb1NldHRpbmdzICk7IAkJCQl9IAkJCX0gKTsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuU29ydGluZ0NsYXNzZXMgCQkgKiBQdXJwb3NlOiAgU2V0IHRoZSBzb3J0dGluZyBjbGFzc2VzIG9uIHRoZSBoZWFkZXIgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiBOb3RlczogICAgSXQgaXMgc2FmZSB0byBjYWxsIHRoaXMgZnVuY3Rpb24gd2hlbiBiU29ydCBhbmQgYlNvcnRDbGFzc2VzIGFyZSBmYWxzZSAJCSAqLyAJCWZ1bmN0aW9uIF9mblNvcnRpbmdDbGFzc2VzKCBvU2V0dGluZ3MgKSAJCXsgCQkJdmFyIGksIGlMZW4sIGosIGpMZW4sIGlGb3VuZDsgCQkJdmFyIGFhU29ydCwgc0NsYXNzOyAJCQl2YXIgaUNvbHVtbnMgPSBvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aDsgCQkJdmFyIG9DbGFzc2VzID0gb1NldHRpbmdzLm9DbGFzc2VzOyAJCQkgCQkJZm9yICggaT0wIDsgaTxpQ29sdW1ucyA7IGkrKyApIAkJCXsgCQkJCWlmICggb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5iU29ydGFibGUgKSAJCQkJeyAJCQkJCSQob1NldHRpbmdzLmFvQ29sdW1uc1tpXS5uVGgpLnJlbW92ZUNsYXNzKCBvQ2xhc3Nlcy5zU29ydEFzYyArIiAiKyBvQ2xhc3Nlcy5zU29ydERlc2MgKyAJCQkJIAkJIiAiKyBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLnNTb3J0aW5nQ2xhc3MgKTsgCQkJCX0gCQkJfSAJCQkgCQkJaWYgKCBvU2V0dGluZ3MuYWFTb3J0aW5nRml4ZWQgIT09IG51bGwgKSAJCQl7IAkJCQlhYVNvcnQgPSBvU2V0dGluZ3MuYWFTb3J0aW5nRml4ZWQuY29uY2F0KCBvU2V0dGluZ3MuYWFTb3J0aW5nICk7IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQlhYVNvcnQgPSBvU2V0dGluZ3MuYWFTb3J0aW5nLnNsaWNlKCk7IAkJCX0gCQkJIAkJCS8qIEFwcGx5IHRoZSByZXF1aXJlZCBjbGFzc2VzIHRvIHRoZSBoZWFkZXIgKi8gCQkJZm9yICggaT0wIDsgaTxvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA7IGkrKyApIAkJCXsgCQkJCWlmICggb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5iU29ydGFibGUgKSAJCQkJeyAJCQkJCXNDbGFzcyA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc1NvcnRpbmdDbGFzczsgCQkJCQlpRm91bmQgPSAtMTsgCQkJCQlmb3IgKCBqPTAgOyBqPGFhU29ydC5sZW5ndGggOyBqKysgKSAJCQkJCXsgCQkJCQkJaWYgKCBhYVNvcnRbal1bMF0gPT0gaSApIAkJCQkJCXsgCQkJCQkJCXNDbGFzcyA9ICggYWFTb3J0W2pdWzFdID09ICJhc2MiICkgPyAJCQkJCQkJCW9DbGFzc2VzLnNTb3J0QXNjIDogb0NsYXNzZXMuc1NvcnREZXNjOyAJCQkJCQkJaUZvdW5kID0gajsgCQkJCQkJCWJyZWFrOyAJCQkJCQl9IAkJCQkJfSAJCQkJCSQob1NldHRpbmdzLmFvQ29sdW1uc1tpXS5uVGgpLmFkZENsYXNzKCBzQ2xhc3MgKTsgCQkJCQkgCQkJCQlpZiAoIG9TZXR0aW5ncy5iSlVJICkgCQkJCQl7IAkJCQkJCS8qIGpRdWVyeSBVSSB1c2VzIGV4dHJhIG1hcmt1cCAqLyAJCQkJCQl2YXIganFTcGFuID0gJCgic3BhbiIsIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0ublRoKTsgCQkJCQkJanFTcGFuLnJlbW92ZUNsYXNzKG9DbGFzc2VzLnNTb3J0SlVJQXNjICsiICIrIG9DbGFzc2VzLnNTb3J0SlVJRGVzYyArIiAiKyAgCQkJCQkJCW9DbGFzc2VzLnNTb3J0SlVJICsiICIrIG9DbGFzc2VzLnNTb3J0SlVJQXNjQWxsb3dlZCArIiAiKyBvQ2xhc3Nlcy5zU29ydEpVSURlc2NBbGxvd2VkICk7IAkJCQkJCSAJCQkJCQl2YXIgc1NwYW5DbGFzczsgCQkJCQkJaWYgKCBpRm91bmQgPT0gLTEgKSAJCQkJCQl7IAkJCQkJCSAJc1NwYW5DbGFzcyA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc1NvcnRpbmdDbGFzc0pVSTsgCQkJCQkJfSAJCQkJCQllbHNlIGlmICggYWFTb3J0W2lGb3VuZF1bMV0gPT0gImFzYyIgKSAJCQkJCQl7IAkJCQkJCQlzU3BhbkNsYXNzID0gb0NsYXNzZXMuc1NvcnRKVUlBc2M7IAkJCQkJCX0gCQkJCQkJZWxzZSAJCQkJCQl7IAkJCQkJCQlzU3BhbkNsYXNzID0gb0NsYXNzZXMuc1NvcnRKVUlEZXNjOyAJCQkJCQl9IAkJCQkJCSAJCQkJCQlqcVNwYW4uYWRkQ2xhc3MoIHNTcGFuQ2xhc3MgKTsgCQkJCQl9IAkJCQl9IAkJCQllbHNlIAkJCQl7IAkJCQkJLyogTm8gc29ydGluZyBvbiB0aGlzIGNvbHVtbiwgc28gYWRkIHRoZSBiYXNlIGNsYXNzLiBUaGlzIHdpbGwgaGF2ZSBiZWVuIGFzc2lnbmVkIGJ5IAkJCQkJICogX2ZuQWRkQ29sdW1uIAkJCQkJICovIAkJCQkJJChvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLm5UaCkuYWRkQ2xhc3MoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc1NvcnRpbmdDbGFzcyApOyAJCQkJfSAJCQl9IAkJCSAJCQkvKiAgCQkJICogQXBwbHkgdGhlIHJlcXVpcmVkIGNsYXNzZXMgdG8gdGhlIHRhYmxlIGJvZHkgCQkJICogTm90ZSB0aGF0IHRoaXMgaXMgZ2l2ZW4gYXMgYSBmZWF0dXJlIHN3aXRjaCBzaW5jZSBpdCBjYW4gc2lnbmlmaWNhbnRseSBzbG93IGRvd24gYSBzb3J0IAkJCSAqIG9uIGxhcmdlIGRhdGEgc2V0cyAoYWRkaW5nIGFuZCByZW1vdmluZyBvZiBjbGFzc2VzIGlzIGFsd2F5cyBzbG93IGF0IHRoZSBiZXN0IG9mIHRpbWVzLi4pIAkJCSAqIEZ1cnRoZXIgdG8gdGhpcywgbm90ZSB0aGF0IHRoaXMgY29kZSBpcyBhZG1pdGFkbHkgZmFpcmx5IHVnbHkuIEl0IGNvdWxkIGJlIG1hZGUgYSBsb3QgIAkJCSAqIHNpbXBpbGVyIHVzaW5nIGpRdWVyeSBzZWxlY3RvcnMgYW5kIGFkZC9yZW1vdmVDbGFzcywgYnV0IHRoYXQgaXMgc2lnbmlmaWNhbnRseSBzbG93ZXIgCQkJICogKG9uIHRoZSBvcmRlciBvZiA1IHRpbWVzIHNsb3dlcikgLSBoZW5jZSB0aGUgZGlyZWN0IERPTSBtYW5pcHVsYXRpb24gaGVyZS4gCQkJICovIAkJCXNDbGFzcyA9IG9DbGFzc2VzLnNTb3J0Q29sdW1uOyAJCQkgCQkJaWYgKCBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJTb3J0ICYmIG9TZXR0aW5ncy5vRmVhdHVyZXMuYlNvcnRDbGFzc2VzICkgCQkJeyAJCQkJdmFyIG5UZHMgPSBfZm5HZXRUZE5vZGVzKCBvU2V0dGluZ3MgKTsgCQkJCSAJCQkJLyogUmVtb3ZlIHRoZSBvbGQgY2xhc3NlcyAqLyAJCQkJaWYgKCBuVGRzLmxlbmd0aCA+PSBpQ29sdW1ucyApIAkJCQl7IAkJCQkJZm9yICggaT0wIDsgaTxpQ29sdW1ucyA7IGkrKyApIAkJCQkJeyAJCQkJCQlpZiAoIG5UZHNbaV0uY2xhc3NOYW1lLmluZGV4T2Yoc0NsYXNzKyIxIikgIT0gLTEgKSAJCQkJCQl7IAkJCQkJCQlmb3IgKCBqPTAsIGpMZW49KG5UZHMubGVuZ3RoL2lDb2x1bW5zKSA7IGo8akxlbiA7IGorKyApIAkJCQkJCQl7IAkJCQkJCQkJblRkc1soaUNvbHVtbnMqaikraV0uY2xhc3NOYW1lID0gIAkJCQkJCQkJCSQudHJpbSggblRkc1soaUNvbHVtbnMqaikraV0uY2xhc3NOYW1lLnJlcGxhY2UoIHNDbGFzcysiMSIsICIiICkgKTsgCQkJCQkJCX0gCQkJCQkJfSAJCQkJCQllbHNlIGlmICggblRkc1tpXS5jbGFzc05hbWUuaW5kZXhPZihzQ2xhc3MrIjIiKSAhPSAtMSApIAkJCQkJCXsgCQkJCQkJCWZvciAoIGo9MCwgakxlbj0oblRkcy5sZW5ndGgvaUNvbHVtbnMpIDsgajxqTGVuIDsgaisrICkgCQkJCQkJCXsgCQkJCQkJCQluVGRzWyhpQ29sdW1ucypqKStpXS5jbGFzc05hbWUgPSAgCQkJCQkJCQkJJC50cmltKCBuVGRzWyhpQ29sdW1ucypqKStpXS5jbGFzc05hbWUucmVwbGFjZSggc0NsYXNzKyIyIiwgIiIgKSApOyAJCQkJCQkJfSAJCQkJCQl9IAkJCQkJCWVsc2UgaWYgKCBuVGRzW2ldLmNsYXNzTmFtZS5pbmRleE9mKHNDbGFzcysiMyIpICE9IC0xICkgCQkJCQkJeyAJCQkJCQkJZm9yICggaj0wLCBqTGVuPShuVGRzLmxlbmd0aC9pQ29sdW1ucykgOyBqPGpMZW4gOyBqKysgKSAJCQkJCQkJeyAJCQkJCQkJCW5UZHNbKGlDb2x1bW5zKmopK2ldLmNsYXNzTmFtZSA9ICAJCQkJCQkJCQkkLnRyaW0oIG5UZHNbKGlDb2x1bW5zKmopK2ldLmNsYXNzTmFtZS5yZXBsYWNlKCAiICIrc0NsYXNzKyIzIiwgIiIgKSApOyAJCQkJCQkJfSAJCQkJCQl9IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQkvKiBBZGQgdGhlIG5ldyBjbGFzc2VzIHRvIHRoZSB0YWJsZSAqLyAJCQkJdmFyIGlDbGFzcyA9IDEsIGlUYXJnZXRDb2w7IAkJCQlmb3IgKCBpPTAgOyBpPGFhU29ydC5sZW5ndGggOyBpKysgKSAJCQkJeyAJCQkJCWlUYXJnZXRDb2wgPSBwYXJzZUludCggYWFTb3J0W2ldWzBdLCAxMCApOyAJCQkJCWZvciAoIGo9MCwgakxlbj0oblRkcy5sZW5ndGgvaUNvbHVtbnMpIDsgajxqTGVuIDsgaisrICkgCQkJCQl7IAkJCQkJCW5UZHNbKGlDb2x1bW5zKmopK2lUYXJnZXRDb2xdLmNsYXNzTmFtZSArPSAiICIrc0NsYXNzK2lDbGFzczsgCQkJCQl9IAkJCQkJIAkJCQkJaWYgKCBpQ2xhc3MgPCAzICkgCQkJCQl7IAkJCQkJCWlDbGFzcysrOyAJCQkJCX0gCQkJCX0gCQkJfSAJCX0gCQkgCQkgCQkvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAJCSAqIFNlY3Rpb24gLSBGZWF0dXJlOiBQYWdpbmF0aW9uLiBOb3RlIHRoYXQgbW9zdCBvZiB0aGUgcGFnaW5nIGxvZ2ljIGlzIGRvbmUgaW4gIAkJICogX29FeHQub1BhZ2luYXRpb24gCQkgKi8gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5GZWF0dXJlSHRtbFBhZ2luYXRlIAkJICogUHVycG9zZTogIEdlbmVyYXRlIHRoZSBub2RlIHJlcXVpcmVkIGZvciBkZWZhdWx0IHBhZ2luYXRpb24gCQkgKiBSZXR1cm5zOiAgbm9kZSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5GZWF0dXJlSHRtbFBhZ2luYXRlICggb1NldHRpbmdzICkgCQl7IAkJCWlmICggb1NldHRpbmdzLm9TY3JvbGwuYkluZmluaXRlICkgCQkJeyAJCQkJcmV0dXJuIG51bGw7IAkJCX0gCQkJIAkJCXZhciBuUGFnaW5hdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApOyAJCQluUGFnaW5hdGUuY2xhc3NOYW1lID0gb1NldHRpbmdzLm9DbGFzc2VzLnNQYWdpbmcrb1NldHRpbmdzLnNQYWdpbmF0aW9uVHlwZTsgCQkJIAkJCV9vRXh0Lm9QYWdpbmF0aW9uWyBvU2V0dGluZ3Muc1BhZ2luYXRpb25UeXBlIF0uZm5Jbml0KCBvU2V0dGluZ3MsIG5QYWdpbmF0ZSwgIAkJCQlmdW5jdGlvbiggb1NldHRpbmdzICkgeyAJCQkJCV9mbkNhbGN1bGF0ZUVuZCggb1NldHRpbmdzICk7IAkJCQkJX2ZuRHJhdyggb1NldHRpbmdzICk7IAkJCQl9IAkJCSk7IAkJCSAJCQkvKiBBZGQgYSBkcmF3IGNhbGxiYWNrIGZvciB0aGUgcGFnaW5hdGlvbiBvbiBmaXJzdCBpbnN0YW5jZSwgdG8gdXBkYXRlIHRoZSBwYWdpbmcgZGlzcGxheSAqLyAJCQlpZiAoIHR5cGVvZiBvU2V0dGluZ3MuYWFuRmVhdHVyZXMucCA9PSAidW5kZWZpbmVkIiApIAkJCXsgCQkJCW9TZXR0aW5ncy5hb0RyYXdDYWxsYmFjay5wdXNoKCB7IAkJCQkJImZuIjogZnVuY3Rpb24oIG9TZXR0aW5ncyApIHsgCQkJCQkJX29FeHQub1BhZ2luYXRpb25bIG9TZXR0aW5ncy5zUGFnaW5hdGlvblR5cGUgXS5mblVwZGF0ZSggb1NldHRpbmdzLCBmdW5jdGlvbiggb1NldHRpbmdzICkgeyAJCQkJCQkJX2ZuQ2FsY3VsYXRlRW5kKCBvU2V0dGluZ3MgKTsgCQkJCQkJCV9mbkRyYXcoIG9TZXR0aW5ncyApOyAJCQkJCQl9ICk7IAkJCQkJfSwgCQkJCQkic05hbWUiOiAicGFnaW5hdGlvbiIgCQkJCX0gKTsgCQkJfSAJCQlyZXR1cm4gblBhZ2luYXRlOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5QYWdlQ2hhbmdlIAkJICogUHVycG9zZTogIEFsdGVyIHRoZSBkaXNwbGF5IHNldHRpbmdzIHRvIGNoYW5nZSB0aGUgcGFnZSAJCSAqIFJldHVybnM6ICBib29sOnRydWUgLSBwYWdlIGhhcyBjaGFuZ2VkLCBmYWxzZSAtIG5vIGNoYW5nZSAobm8gZWZmZWN0KSBlZyAnZmlyc3QnIG9uIHBhZ2UgMSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgc3RyaW5nOnNBY3Rpb24gLSBwYWdpbmcgYWN0aW9uIHRvIHRha2U6ICJmaXJzdCIsICJwcmV2aW91cyIsICJuZXh0IiBvciAibGFzdCIgCQkgKi8gCQlmdW5jdGlvbiBfZm5QYWdlQ2hhbmdlICggb1NldHRpbmdzLCBzQWN0aW9uICkgCQl7IAkJCXZhciBpT2xkU3RhcnQgPSBvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQ7IAkJCSAJCQlpZiAoIHNBY3Rpb24gPT0gImZpcnN0IiApIAkJCXsgCQkJCW9TZXR0aW5ncy5faURpc3BsYXlTdGFydCA9IDA7IAkJCX0gCQkJZWxzZSBpZiAoIHNBY3Rpb24gPT0gInByZXZpb3VzIiApIAkJCXsgCQkJCW9TZXR0aW5ncy5faURpc3BsYXlTdGFydCA9IG9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGg+PTAgPyAJCQkJCW9TZXR0aW5ncy5faURpc3BsYXlTdGFydCAtIG9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGggOiAJCQkJCTA7IAkJCQkgCQkJCS8qIENvcnJlY3QgZm9yIHVuZGVycnVuICovIAkJCQlpZiAoIG9TZXR0aW5ncy5faURpc3BsYXlTdGFydCA8IDAgKSAJCQkJeyAJCQkJICBvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQgPSAwOyAJCQkJfSAJCQl9IAkJCWVsc2UgaWYgKCBzQWN0aW9uID09ICJuZXh0IiApIAkJCXsgCQkJCWlmICggb1NldHRpbmdzLl9pRGlzcGxheUxlbmd0aCA+PSAwICkgCQkJCXsgCQkJCQkvKiBNYWtlIHN1cmUgd2UgYXJlIG5vdCBvdmVyIHJ1bm5pbmcgdGhlIGRpc3BsYXkgYXJyYXkgKi8gCQkJCQlpZiAoIG9TZXR0aW5ncy5faURpc3BsYXlTdGFydCArIG9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGggPCBvU2V0dGluZ3MuZm5SZWNvcmRzRGlzcGxheSgpICkgCQkJCQl7IAkJCQkJCW9TZXR0aW5ncy5faURpc3BsYXlTdGFydCArPSBvU2V0dGluZ3MuX2lEaXNwbGF5TGVuZ3RoOyAJCQkJCX0gCQkJCX0gCQkJCWVsc2UgCQkJCXsgCQkJCQlvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQgPSAwOyAJCQkJfSAJCQl9IAkJCWVsc2UgaWYgKCBzQWN0aW9uID09ICJsYXN0IiApIAkJCXsgCQkJCWlmICggb1NldHRpbmdzLl9pRGlzcGxheUxlbmd0aCA+PSAwICkgCQkJCXsgCQkJCQl2YXIgaVBhZ2VzID0gcGFyc2VJbnQoIChvU2V0dGluZ3MuZm5SZWNvcmRzRGlzcGxheSgpLTEpIC8gb1NldHRpbmdzLl9pRGlzcGxheUxlbmd0aCwgMTAgKSArIDE7IAkJCQkJb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0ID0gKGlQYWdlcy0xKSAqIG9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGg7IAkJCQl9IAkJCQllbHNlIAkJCQl7IAkJCQkJb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0ID0gMDsgCQkJCX0gCQkJfSAJCQllbHNlIAkJCXsgCQkJCV9mbkxvZyggb1NldHRpbmdzLCAwLCAiVW5rbm93biBwYWdpbmcgYWN0aW9uOiAiK3NBY3Rpb24gKTsgCQkJfSAJCQkgCQkJcmV0dXJuIGlPbGRTdGFydCAhPSBvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQ7IAkJfSAJCSAJCSAJCS8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqIAkJICogU2VjdGlvbiAtIEZlYXR1cmU6IEhUTUwgaW5mbyAJCSAqLyAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkZlYXR1cmVIdG1sSW5mbyAJCSAqIFB1cnBvc2U6ICBHZW5lcmF0ZSB0aGUgbm9kZSByZXF1aXJlZCBmb3IgdGhlIGluZm8gZGlzcGxheSAJCSAqIFJldHVybnM6ICBub2RlIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkZlYXR1cmVIdG1sSW5mbyAoIG9TZXR0aW5ncyApIAkJeyAJCQl2YXIgbkluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApOyAJCQluSW5mby5jbGFzc05hbWUgPSBvU2V0dGluZ3Mub0NsYXNzZXMuc0luZm87IAkJCSAJCQkvKiBBY3Rpb25zIHRoYXQgYXJlIHRvIGJlIHRha2VuIG9uY2Ugb25seSBmb3IgdGhpcyBmZWF0dXJlICovIAkJCWlmICggdHlwZW9mIG9TZXR0aW5ncy5hYW5GZWF0dXJlcy5pID09ICJ1bmRlZmluZWQiICkgCQkJeyAJCQkJLyogQWRkIGRyYXcgY2FsbGJhY2sgKi8gCQkJCW9TZXR0aW5ncy5hb0RyYXdDYWxsYmFjay5wdXNoKCB7IAkJCQkJImZuIjogX2ZuVXBkYXRlSW5mbywgCQkJCQkic05hbWUiOiAiaW5mb3JtYXRpb24iIAkJCQl9ICk7IAkJCQkgCQkJCS8qIEFkZCBpZCAqLyAJCQkJaWYgKCBvU2V0dGluZ3Muc1RhYmxlSWQgIT09ICcnICkgCQkJCXsgCQkJCQluSW5mby5zZXRBdHRyaWJ1dGUoICdpZCcsIG9TZXR0aW5ncy5zVGFibGVJZCsnX2luZm8nICk7IAkJCQl9IAkJCX0gCQkJIAkJCXJldHVybiBuSW5mbzsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuVXBkYXRlSW5mbyAJCSAqIFB1cnBvc2U6ICBVcGRhdGUgdGhlIGluZm9ybWF0aW9uIGVsZW1lbnRzIGluIHRoZSBkaXNwbGF5IAkJICogUmV0dXJuczogIC0gCQkgKiBJbnB1dHM6ICAgb2JqZWN0Om9TZXR0aW5ncyAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJICovIAkJZnVuY3Rpb24gX2ZuVXBkYXRlSW5mbyAoIG9TZXR0aW5ncyApIAkJeyAJCQkvKiBTaG93IGluZm9ybWF0aW9uIGFib3V0IHRoZSB0YWJsZSAqLyAJCQlpZiAoICFvU2V0dGluZ3Mub0ZlYXR1cmVzLmJJbmZvIHx8IG9TZXR0aW5ncy5hYW5GZWF0dXJlcy5pLmxlbmd0aCA9PT0gMCApIAkJCXsgCQkJCXJldHVybjsgCQkJfSAJCQkgCQkJdmFyIAkJCQlpU3RhcnQgPSBvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQrMSwgaUVuZCA9IG9TZXR0aW5ncy5mbkRpc3BsYXlFbmQoKSwgCQkJCWlNYXggPSBvU2V0dGluZ3MuZm5SZWNvcmRzVG90YWwoKSwgaVRvdGFsID0gb1NldHRpbmdzLmZuUmVjb3Jkc0Rpc3BsYXkoKSwgCQkJCXNTdGFydCA9IG9TZXR0aW5ncy5mbkZvcm1hdE51bWJlciggaVN0YXJ0ICksIHNFbmQgPSBvU2V0dGluZ3MuZm5Gb3JtYXROdW1iZXIoIGlFbmQgKSwgCQkJCXNNYXggPSBvU2V0dGluZ3MuZm5Gb3JtYXROdW1iZXIoIGlNYXggKSwgc1RvdGFsID0gb1NldHRpbmdzLmZuRm9ybWF0TnVtYmVyKCBpVG90YWwgKSwgCQkJCXNPdXQ7IAkJCSAJCQkvKiBXaGVuIGluZmluaXRlIHNjcm9sbGluZywgd2UgYXJlIGFsd2F5cyBzdGFydGluZyBhdCAxLiBfaURpc3BsYXlTdGFydCBpcyB1c2VkIG9ubHkgCQkJICogaW50ZXJuYWxseSAJCQkgKi8gCQkJaWYgKCBvU2V0dGluZ3Mub1Njcm9sbC5iSW5maW5pdGUgKSAJCQl7IAkJCQlzU3RhcnQgPSBvU2V0dGluZ3MuZm5Gb3JtYXROdW1iZXIoIDEgKTsgCQkJfSAJCQkgCQkJaWYgKCBvU2V0dGluZ3MuZm5SZWNvcmRzRGlzcGxheSgpID09PSAwICYmICAJCQkJICAgb1NldHRpbmdzLmZuUmVjb3Jkc0Rpc3BsYXkoKSA9PSBvU2V0dGluZ3MuZm5SZWNvcmRzVG90YWwoKSApIAkJCXsgCQkJCS8qIEVtcHR5IHJlY29yZCBzZXQgKi8gCQkJCXNPdXQgPSBvU2V0dGluZ3Mub0xhbmd1YWdlLnNJbmZvRW1wdHkrIG9TZXR0aW5ncy5vTGFuZ3VhZ2Uuc0luZm9Qb3N0Rml4OyAJCQl9IAkJCWVsc2UgaWYgKCBvU2V0dGluZ3MuZm5SZWNvcmRzRGlzcGxheSgpID09PSAwICkgCQkJeyAJCQkJLyogUm1wdHkgcmVjb3JkIHNldCBhZnRlciBmaWx0ZXJpbmcgKi8gCQkJCXNPdXQgPSBvU2V0dGluZ3Mub0xhbmd1YWdlLnNJbmZvRW1wdHkgKycgJysgIAkJCQkJb1NldHRpbmdzLm9MYW5ndWFnZS5zSW5mb0ZpbHRlcmVkLnJlcGxhY2UoJ19NQVhfJywgc01heCkrIAkJCQkJCW9TZXR0aW5ncy5vTGFuZ3VhZ2Uuc0luZm9Qb3N0Rml4OyAJCQl9IAkJCWVsc2UgaWYgKCBvU2V0dGluZ3MuZm5SZWNvcmRzRGlzcGxheSgpID09IG9TZXR0aW5ncy5mblJlY29yZHNUb3RhbCgpICkgCQkJeyAJCQkJLyogTm9ybWFsIHJlY29yZCBzZXQgKi8gCQkJCXNPdXQgPSBvU2V0dGluZ3Mub0xhbmd1YWdlLnNJbmZvLiAJCQkJCQlyZXBsYWNlKCdfU1RBUlRfJywgc1N0YXJ0KS4gCQkJCQkJcmVwbGFjZSgnX0VORF8nLCAgIHNFbmQpLiAJCQkJCQlyZXBsYWNlKCdfVE9UQUxfJywgc1RvdGFsKSsgIAkJCQkJb1NldHRpbmdzLm9MYW5ndWFnZS5zSW5mb1Bvc3RGaXg7IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQkvKiBSZWNvcmQgc2V0IGFmdGVyIGZpbHRlcmluZyAqLyAJCQkJc091dCA9IG9TZXR0aW5ncy5vTGFuZ3VhZ2Uuc0luZm8uIAkJCQkJCXJlcGxhY2UoJ19TVEFSVF8nLCBzU3RhcnQpLiAJCQkJCQlyZXBsYWNlKCdfRU5EXycsICAgc0VuZCkuIAkJCQkJCXJlcGxhY2UoJ19UT1RBTF8nLCBzVG90YWwpICsnICcrICAJCQkJCW9TZXR0aW5ncy5vTGFuZ3VhZ2Uuc0luZm9GaWx0ZXJlZC5yZXBsYWNlKCdfTUFYXycsICAJCQkJCQlvU2V0dGluZ3MuZm5Gb3JtYXROdW1iZXIob1NldHRpbmdzLmZuUmVjb3Jkc1RvdGFsKCkpKSsgIAkJCQkJb1NldHRpbmdzLm9MYW5ndWFnZS5zSW5mb1Bvc3RGaXg7IAkJCX0gCQkJIAkJCWlmICggb1NldHRpbmdzLm9MYW5ndWFnZS5mbkluZm9DYWxsYmFjayAhPT0gbnVsbCApIAkJCXsgCQkJCXNPdXQgPSBvU2V0dGluZ3Mub0xhbmd1YWdlLmZuSW5mb0NhbGxiYWNrKCBvU2V0dGluZ3MsIGlTdGFydCwgaUVuZCwgaU1heCwgaVRvdGFsLCBzT3V0ICk7IAkJCX0gCQkJIAkJCXZhciBuID0gb1NldHRpbmdzLmFhbkZlYXR1cmVzLmk7IAkJCWZvciAoIHZhciBpPTAsIGlMZW49bi5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQl7IAkJCQkkKG5baV0pLmh0bWwoIHNPdXQgKTsgCQkJfSAJCX0gCQkgCQkgCQkvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqIAkJICogU2VjdGlvbiAtIEZlYXR1cmU6IExlbmd0aCBjaGFuZ2UgCQkgKi8gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5GZWF0dXJlSHRtbExlbmd0aCAJCSAqIFB1cnBvc2U6ICBHZW5lcmF0ZSB0aGUgbm9kZSByZXF1aXJlZCBmb3IgdXNlciBkaXNwbGF5IGxlbmd0aCBjaGFuZ2luZyAJCSAqIFJldHVybnM6ICBub2RlIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkZlYXR1cmVIdG1sTGVuZ3RoICggb1NldHRpbmdzICkgCQl7IAkJCWlmICggb1NldHRpbmdzLm9TY3JvbGwuYkluZmluaXRlICkgCQkJeyAJCQkJcmV0dXJuIG51bGw7IAkJCX0gCQkJIAkJCS8qIFRoaXMgY2FuIGJlIG92ZXJydWxlZCBieSBub3QgdXNpbmcgdGhlIF9NRU5VXyB2YXIvbWFjcm8gaW4gdGhlIGxhbmd1YWdlIHZhcmlhYmxlICovIAkJCXZhciBzTmFtZSA9IChvU2V0dGluZ3Muc1RhYmxlSWQgPT09ICIiKSA/ICIiIDogJ25hbWU9Iicrb1NldHRpbmdzLnNUYWJsZUlkKydfbGVuZ3RoIic7IAkJCXZhciBzU3RkTWVudSA9ICc8c2VsZWN0IHNpemU9IjEiICcrc05hbWUrJz4nOyAJCQl2YXIgaSwgaUxlbjsgCQkJIAkJCWlmICggb1NldHRpbmdzLmFMZW5ndGhNZW51Lmxlbmd0aCA9PSAyICYmIHR5cGVvZiBvU2V0dGluZ3MuYUxlbmd0aE1lbnVbMF0gPT0gJ29iamVjdCcgJiYgIAkJCQkJdHlwZW9mIG9TZXR0aW5ncy5hTGVuZ3RoTWVudVsxXSA9PSAnb2JqZWN0JyApIAkJCXsgCQkJCWZvciAoIGk9MCwgaUxlbj1vU2V0dGluZ3MuYUxlbmd0aE1lbnVbMF0ubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJCXsgCQkJCQlzU3RkTWVudSArPSAnPG9wdGlvbiB2YWx1ZT0iJytvU2V0dGluZ3MuYUxlbmd0aE1lbnVbMF1baV0rJyI+JysgCQkJCQkJb1NldHRpbmdzLmFMZW5ndGhNZW51WzFdW2ldKyc8L29wdGlvbj4nOyAJCQkJfSAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJZm9yICggaT0wLCBpTGVuPW9TZXR0aW5ncy5hTGVuZ3RoTWVudS5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJeyAJCQkJCXNTdGRNZW51ICs9ICc8b3B0aW9uIHZhbHVlPSInK29TZXR0aW5ncy5hTGVuZ3RoTWVudVtpXSsnIj4nKyAJCQkJCQlvU2V0dGluZ3MuYUxlbmd0aE1lbnVbaV0rJzwvb3B0aW9uPic7IAkJCQl9IAkJCX0gCQkJc1N0ZE1lbnUgKz0gJzwvc2VsZWN0Pic7IAkJCSAJCQl2YXIgbkxlbmd0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7IAkJCWlmICggb1NldHRpbmdzLnNUYWJsZUlkICE9PSAnJyAmJiB0eXBlb2Ygb1NldHRpbmdzLmFhbkZlYXR1cmVzLmwgPT0gInVuZGVmaW5lZCIgKSAJCQl7IAkJCQluTGVuZ3RoLnNldEF0dHJpYnV0ZSggJ2lkJywgb1NldHRpbmdzLnNUYWJsZUlkKydfbGVuZ3RoJyApOyAJCQl9IAkJCW5MZW5ndGguY2xhc3NOYW1lID0gb1NldHRpbmdzLm9DbGFzc2VzLnNMZW5ndGg7IAkJCW5MZW5ndGguaW5uZXJIVE1MID0gb1NldHRpbmdzLm9MYW5ndWFnZS5zTGVuZ3RoTWVudS5yZXBsYWNlKCAnX01FTlVfJywgc1N0ZE1lbnUgKTsgCQkJIAkJCS8qIAkJCSAqIFNldCB0aGUgbGVuZ3RoIHRvIHRoZSBjdXJyZW50IGRpc3BsYXkgbGVuZ3RoIC0gdGhhbmtzIHRvIEFuZHJlYSBQYXZsb3ZpYyBmb3IgdGhpcyBmaXgsIAkJCSAqIGFuZCBTdGVmYW4gU2tvcG5payBmb3IgZml4aW5nIHRoZSBmaXghIAkJCSAqLyAJCQkkKCdzZWxlY3Qgb3B0aW9uW3ZhbHVlPSInK29TZXR0aW5ncy5faURpc3BsYXlMZW5ndGgrJyJdJyxuTGVuZ3RoKS5hdHRyKCJzZWxlY3RlZCIsdHJ1ZSk7IAkJCSAJCQkkKCdzZWxlY3QnLCBuTGVuZ3RoKS5jaGFuZ2UoIGZ1bmN0aW9uKGUpIHsgCQkJCXZhciBpVmFsID0gJCh0aGlzKS52YWwoKTsgCQkJCSAJCQkJLyogVXBkYXRlIGFsbCBvdGhlciBsZW5ndGggb3B0aW9ucyBmb3IgdGhlIG5ldyBkaXNwbGF5ICovIAkJCQl2YXIgbiA9IG9TZXR0aW5ncy5hYW5GZWF0dXJlcy5sOyAJCQkJZm9yICggaT0wLCBpTGVuPW4ubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJCXsgCQkJCQlpZiAoIG5baV0gIT0gdGhpcy5wYXJlbnROb2RlICkgCQkJCQl7IAkJCQkJCSQoJ3NlbGVjdCcsIG5baV0pLnZhbCggaVZhbCApOyAJCQkJCX0gCQkJCX0gCQkJCSAJCQkJLyogUmVkcmF3IHRoZSB0YWJsZSAqLyAJCQkJb1NldHRpbmdzLl9pRGlzcGxheUxlbmd0aCA9IHBhcnNlSW50KGlWYWwsIDEwKTsgCQkJCV9mbkNhbGN1bGF0ZUVuZCggb1NldHRpbmdzICk7IAkJCQkgCQkJCS8qIElmIHdlIGhhdmUgc3BhY2UgdG8gc2hvdyBleHRyYSByb3dzIChiYWNraW5nIHVwIGZyb20gdGhlIGVuZCBwb2ludCAtIHRoZW4gZG8gc28gKi8gCQkJCWlmICggb1NldHRpbmdzLmZuRGlzcGxheUVuZCgpID09IG9TZXR0aW5ncy5mblJlY29yZHNEaXNwbGF5KCkgKSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5faURpc3BsYXlTdGFydCA9IG9TZXR0aW5ncy5mbkRpc3BsYXlFbmQoKSAtIG9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGg7IAkJCQkJaWYgKCBvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQgPCAwICkgCQkJCQl7IAkJCQkJCW9TZXR0aW5ncy5faURpc3BsYXlTdGFydCA9IDA7IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQlpZiAoIG9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGggPT0gLTEgKSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5faURpc3BsYXlTdGFydCA9IDA7IAkJCQl9IAkJCQkgCQkJCV9mbkRyYXcoIG9TZXR0aW5ncyApOyAJCQl9ICk7IAkJCSAJCQlyZXR1cm4gbkxlbmd0aDsgCQl9IAkJIAkJIAkJLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAJCSAqIFNlY3Rpb24gLSBGZWF0dXJlOiBQcm9jZXNzaW5nIGluY2lkYXRvciAJCSAqLyAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkZlYXR1cmVIdG1sUHJvY2Vzc2luZyAJCSAqIFB1cnBvc2U6ICBHZW5lcmF0ZSB0aGUgbm9kZSByZXF1aXJlZCBmb3IgdGhlIHByb2Nlc3Npbmcgbm9kZSAJCSAqIFJldHVybnM6ICBub2RlIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkZlYXR1cmVIdG1sUHJvY2Vzc2luZyAoIG9TZXR0aW5ncyApIAkJeyAJCQl2YXIgblByb2Nlc3NpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApOyAJCQkgCQkJaWYgKCBvU2V0dGluZ3Muc1RhYmxlSWQgIT09ICcnICYmIHR5cGVvZiBvU2V0dGluZ3MuYWFuRmVhdHVyZXMuciA9PSAidW5kZWZpbmVkIiApIAkJCXsgCQkJCW5Qcm9jZXNzaW5nLnNldEF0dHJpYnV0ZSggJ2lkJywgb1NldHRpbmdzLnNUYWJsZUlkKydfcHJvY2Vzc2luZycgKTsgCQkJfSAJCQluUHJvY2Vzc2luZy5pbm5lckhUTUwgPSBvU2V0dGluZ3Mub0xhbmd1YWdlLnNQcm9jZXNzaW5nOyAJCQluUHJvY2Vzc2luZy5jbGFzc05hbWUgPSBvU2V0dGluZ3Mub0NsYXNzZXMuc1Byb2Nlc3Npbmc7IAkJCW9TZXR0aW5ncy5uVGFibGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIG5Qcm9jZXNzaW5nLCBvU2V0dGluZ3MublRhYmxlICk7IAkJCSAJCQlyZXR1cm4gblByb2Nlc3Npbmc7IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mblByb2Nlc3NpbmdEaXNwbGF5IAkJICogUHVycG9zZTogIERpc3BsYXkgb3IgaGlkZSB0aGUgcHJvY2Vzc2luZyBpbmRpY2F0b3IgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgYm9vbDogCQkgKiAgIHRydWUgLSBzaG93IHRoZSBwcm9jZXNzaW5nIGluZGljYXRvciAJCSAqICAgZmFsc2UgLSBkb24ndCBzaG93IAkJICovIAkJZnVuY3Rpb24gX2ZuUHJvY2Vzc2luZ0Rpc3BsYXkgKCBvU2V0dGluZ3MsIGJTaG93ICkgCQl7IAkJCWlmICggb1NldHRpbmdzLm9GZWF0dXJlcy5iUHJvY2Vzc2luZyApIAkJCXsgCQkJCXZhciBhbiA9IG9TZXR0aW5ncy5hYW5GZWF0dXJlcy5yOyAJCQkJZm9yICggdmFyIGk9MCwgaUxlbj1hbi5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJeyAJCQkJCWFuW2ldLnN0eWxlLnZpc2liaWxpdHkgPSBiU2hvdyA/ICJ2aXNpYmxlIiA6ICJoaWRkZW4iOyAJCQkJfSAJCQl9IAkJfSAJCSAJCSAJCS8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqIAkJICogU2VjdGlvbiAtIFN1cHBvcnQgZnVuY3Rpb25zIAkJICovIAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuVmlzaWJsZVRvQ29sdW1uSW5kZXggCQkgKiBQdXJwb3NlOiAgQ292ZXJ0IHRoZSBpbmRleCBvZiBhIHZpc2libGUgY29sdW1uIHRvIHRoZSBpbmRleCBpbiB0aGUgZGF0YSBhcnJheSAodGFrZSBhY2NvdW50IAkJICogICBvZiBoaWRkZW4gY29sdW1ucykgCQkgKiBSZXR1cm5zOiAgaW50OmkgLSB0aGUgZGF0YSBpbmRleCAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5WaXNpYmxlVG9Db2x1bW5JbmRleCggb1NldHRpbmdzLCBpTWF0Y2ggKSAJCXsgCQkJdmFyIGlDb2x1bW4gPSAtMTsgCQkJIAkJCWZvciAoIHZhciBpPTAgOyBpPG9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaSsrICkgCQkJeyAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmJWaXNpYmxlID09PSB0cnVlICkgCQkJCXsgCQkJCQlpQ29sdW1uKys7IAkJCQl9IAkJCQkgCQkJCWlmICggaUNvbHVtbiA9PSBpTWF0Y2ggKSAJCQkJeyAJCQkJCXJldHVybiBpOyAJCQkJfSAJCQl9IAkJCSAJCQlyZXR1cm4gbnVsbDsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQ29sdW1uSW5kZXhUb1Zpc2libGUgCQkgKiBQdXJwb3NlOiAgQ292ZXJ0IHRoZSBpbmRleCBvZiBhbiBpbmRleCBpbiB0aGUgZGF0YSBhcnJheSBhbmQgY29udmVydCBpdCB0byB0aGUgdmlzaWJsZSAJCSAqICAgY29sdW1uIGluZGV4ICh0YWtlIGFjY291bnQgb2YgaGlkZGVuIGNvbHVtbnMpIAkJICogUmV0dXJuczogIGludDppIC0gdGhlIGRhdGEgaW5kZXggCQkgKiBJbnB1dHM6ICAgb2JqZWN0Om9TZXR0aW5ncyAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJICovIAkJZnVuY3Rpb24gX2ZuQ29sdW1uSW5kZXhUb1Zpc2libGUoIG9TZXR0aW5ncywgaU1hdGNoICkgCQl7IAkJCXZhciBpVmlzaWJsZSA9IC0xOyAJCQlmb3IgKCB2YXIgaT0wIDsgaTxvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA7IGkrKyApIAkJCXsgCQkJCWlmICggb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5iVmlzaWJsZSA9PT0gdHJ1ZSApIAkJCQl7IAkJCQkJaVZpc2libGUrKzsgCQkJCX0gCQkJCSAJCQkJaWYgKCBpID09IGlNYXRjaCApIAkJCQl7IAkJCQkJcmV0dXJuIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uYlZpc2libGUgPT09IHRydWUgPyBpVmlzaWJsZSA6IG51bGw7IAkJCQl9IAkJCX0gCQkJIAkJCXJldHVybiBudWxsOyAJCX0gCQkgCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5Ob2RlVG9EYXRhSW5kZXggCQkgKiBQdXJwb3NlOiAgVGFrZSBhIFRSIGVsZW1lbnQgYW5kIGNvbnZlcnQgaXQgdG8gYW4gaW5kZXggaW4gYW9EYXRhIAkJICogUmV0dXJuczogIGludDppIC0gaW5kZXggaWYgZm91bmQsIG51bGwgaWYgbm90IAkJICogSW5wdXRzOiAgIG9iamVjdDpzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgbm9kZTpuIC0gdGhlIFRSIGVsZW1lbnQgdG8gZmluZCAJCSAqLyAJCWZ1bmN0aW9uIF9mbk5vZGVUb0RhdGFJbmRleCggcywgbiApIAkJeyAJCQl2YXIgaSwgaUxlbjsgCQkJIAkJCS8qIE9wdGltaXNhdGlvbiAtIHNlZSBpZiB0aGUgbm9kZXMgd2hpY2ggYXJlIGN1cnJlbnRseSB2aXNpYmxlIG1hdGNoLCBzaW5jZSB0aGF0IGlzIAkJCSAqIHRoZSBtb3N0IGxpa2VseSBub2RlIHRvIGJlIGFza2VkIGZvciAoYSBzZWxlY3RvciBvciBldmVudCBmb3IgZXhhbXBsZSkgCQkJICovIAkJCWZvciAoIGk9cy5faURpc3BsYXlTdGFydCwgaUxlbj1zLl9pRGlzcGxheUVuZCA7IGk8aUxlbiA7IGkrKyApIAkJCXsgCQkJCWlmICggcy5hb0RhdGFbIHMuYWlEaXNwbGF5W2ldIF0ublRyID09IG4gKSAJCQkJeyAJCQkJCXJldHVybiBzLmFpRGlzcGxheVtpXTsgCQkJCX0gCQkJfSAJCQkgCQkJLyogT3RoZXJ3aXNlIHdlIGFyZSBpbiBmb3IgYSBzbG9nIHRocm91Z2ggdGhlIHdob2xlIGRhdGEgY2FjaGUgKi8gCQkJZm9yICggaT0wLCBpTGVuPXMuYW9EYXRhLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCXsgCQkJCWlmICggcy5hb0RhdGFbaV0ublRyID09IG4gKSAJCQkJeyAJCQkJCXJldHVybiBpOyAJCQkJfSAJCQl9IAkJCXJldHVybiBudWxsOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5WaXNibGVDb2x1bW5zIAkJICogUHVycG9zZTogIEdldCB0aGUgbnVtYmVyIG9mIHZpc2libGUgY29sdW1ucyAJCSAqIFJldHVybnM6ICBpbnQ6aSAtIHRoZSBudW1iZXIgb2YgdmlzaWJsZSBjb2x1bW5zIAkJICogSW5wdXRzOiAgIG9iamVjdDpvUyAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJICovIAkJZnVuY3Rpb24gX2ZuVmlzYmxlQ29sdW1ucyggb1MgKSAJCXsgCQkJdmFyIGlWaXMgPSAwOyAJCQlmb3IgKCB2YXIgaT0wIDsgaTxvUy5hb0NvbHVtbnMubGVuZ3RoIDsgaSsrICkgCQkJeyAJCQkJaWYgKCBvUy5hb0NvbHVtbnNbaV0uYlZpc2libGUgPT09IHRydWUgKSAJCQkJeyAJCQkJCWlWaXMrKzsgCQkJCX0gCQkJfSAJCQlyZXR1cm4gaVZpczsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQ2FsY3VsYXRlRW5kIAkJICogUHVycG9zZTogIFJjYWxjdWxhdGUgdGhlIGVuZCBwb2ludCBiYXNlZCBvbiB0aGUgc3RhcnQgcG9pbnQgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5DYWxjdWxhdGVFbmQoIG9TZXR0aW5ncyApIAkJeyAJCQlpZiAoIG9TZXR0aW5ncy5vRmVhdHVyZXMuYlBhZ2luYXRlID09PSBmYWxzZSApIAkJCXsgCQkJCW9TZXR0aW5ncy5faURpc3BsYXlFbmQgPSBvU2V0dGluZ3MuYWlEaXNwbGF5Lmxlbmd0aDsgCQkJfSAJCQllbHNlIAkJCXsgCQkJCS8qIFNldCB0aGUgZW5kIHBvaW50IG9mIHRoZSBkaXNwbGF5IC0gYmFzZWQgb24gaG93IG1hbnkgZWxlbWVudHMgdGhlcmUgYXJlIAkJCQkgKiBzdGlsbCB0byBkaXNwbGF5IAkJCQkgKi8gCQkJCWlmICggb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0ICsgb1NldHRpbmdzLl9pRGlzcGxheUxlbmd0aCA+IG9TZXR0aW5ncy5haURpc3BsYXkubGVuZ3RoIHx8IAkJCQkJICAgb1NldHRpbmdzLl9pRGlzcGxheUxlbmd0aCA9PSAtMSApIAkJCQl7IAkJCQkJb1NldHRpbmdzLl9pRGlzcGxheUVuZCA9IG9TZXR0aW5ncy5haURpc3BsYXkubGVuZ3RoOyAJCQkJfSAJCQkJZWxzZSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5faURpc3BsYXlFbmQgPSBvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQgKyBvU2V0dGluZ3MuX2lEaXNwbGF5TGVuZ3RoOyAJCQkJfSAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkNvbnZlcnRUb1dpZHRoIAkJICogUHVycG9zZTogIENvbnZlcnQgYSBDU1MgdW5pdCB3aWR0aCB0byBwaXhlbHMgKGUuZy4gMmVtKSAJCSAqIFJldHVybnM6ICBpbnQ6aVdpZHRoIC0gd2lkdGggaW4gcGl4ZWxzIAkJICogSW5wdXRzOiAgIHN0cmluZzpzV2lkdGggLSB3aWR0aCB0byBiZSBjb252ZXJ0ZWQgCQkgKiAgICAgICAgICAgbm9kZTpuUGFyZW50IC0gcGFyZW50IHRvIGdldCB0aGUgd2l0aCBmb3IgKHJlcXVpcmVkIGZvciAJCSAqICAgICAgICAgICAgIHJlbGF0aXZlIHdpZHRocykgLSBvcHRpb25hbCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkNvbnZlcnRUb1dpZHRoICggc1dpZHRoLCBuUGFyZW50ICkgCQl7IAkJCWlmICggIXNXaWR0aCB8fCBzV2lkdGggPT09IG51bGwgfHwgc1dpZHRoID09PSAnJyApIAkJCXsgCQkJCXJldHVybiAwOyAJCQl9IAkJCSAJCQlpZiAoIHR5cGVvZiBuUGFyZW50ID09ICJ1bmRlZmluZWQiICkgCQkJeyAJCQkJblBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07IAkJCX0gCQkJIAkJCXZhciBpV2lkdGg7IAkJCXZhciBuVG1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsgCQkJblRtcC5zdHlsZS53aWR0aCA9IHNXaWR0aDsgCQkJIAkJCW5QYXJlbnQuYXBwZW5kQ2hpbGQoIG5UbXAgKTsgCQkJaVdpZHRoID0gblRtcC5vZmZzZXRXaWR0aDsgCQkJblBhcmVudC5yZW1vdmVDaGlsZCggblRtcCApOyAJCQkgCQkJcmV0dXJuICggaVdpZHRoICk7IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkNhbGN1bGF0ZUNvbHVtbldpZHRocyAJCSAqIFB1cnBvc2U6ICBDYWxjdWxhdGUgdGhlIHdpZHRoIG9mIGNvbHVtbnMgZm9yIHRoZSB0YWJsZSAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkNhbGN1bGF0ZUNvbHVtbldpZHRocyAoIG9TZXR0aW5ncyApIAkJeyAJCQl2YXIgaVRhYmxlV2lkdGggPSBvU2V0dGluZ3MublRhYmxlLm9mZnNldFdpZHRoOyAJCQl2YXIgaVVzZXJJbnB1dHMgPSAwOyAJCQl2YXIgaVRtcFdpZHRoOyAJCQl2YXIgaVZpc2libGVDb2x1bW5zID0gMDsgCQkJdmFyIGlDb2x1bXMgPSBvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aDsgCQkJdmFyIGk7IAkJCXZhciBvSGVhZGVycyA9ICQoJ3RoJywgb1NldHRpbmdzLm5USGVhZCk7IAkJCSAJCQkvKiBDb252ZXJ0IGFueSB1c2VyIGlucHV0IHNpemVzIGludG8gcGl4ZWwgc2l6ZXMgKi8gCQkJZm9yICggaT0wIDsgaTxpQ29sdW1zIDsgaSsrICkgCQkJeyAJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmJWaXNpYmxlICkgCQkJCXsgCQkJCQlpVmlzaWJsZUNvbHVtbnMrKzsgCQkJCQkgCQkJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc1dpZHRoICE9PSBudWxsICkgCQkJCQl7IAkJCQkJCWlUbXBXaWR0aCA9IF9mbkNvbnZlcnRUb1dpZHRoKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLnNXaWR0aE9yaWcsICAJCQkJCQkJb1NldHRpbmdzLm5UYWJsZS5wYXJlbnROb2RlICk7IAkJCQkJCWlmICggaVRtcFdpZHRoICE9PSBudWxsICkgCQkJCQkJeyAJCQkJCQkJb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5zV2lkdGggPSBfZm5TdHJpbmdUb0NzcyggaVRtcFdpZHRoICk7IAkJCQkJCX0gCQkJCQkJCSAJCQkJCQlpVXNlcklucHV0cysrOyAJCQkJCX0gCQkJCX0gCQkJfSAJCQkgCQkJLyogSWYgdGhlIG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBET00gZXF1YWxzIHRoZSBudW1iZXIgdGhhdCB3ZSBoYXZlIHRvIHByb2Nlc3MgaW4gIAkJCSAqIERhdGFUYWJsZXMsIHRoZW4gd2UgY2FuIHVzZSB0aGUgb2Zmc2V0cyB0aGF0IGFyZSBjcmVhdGVkIGJ5IHRoZSB3ZWItYnJvd3Nlci4gTm8gY3VzdG9tICAJCQkgKiBzaXplcyBjYW4gYmUgc2V0IGluIG9yZGVyIGZvciB0aGlzIHRvIGhhcHBlbiwgbm9yIHNjcm9sbGluZyB1c2VkIAkJCSAqLyAJCQlpZiAoIGlDb2x1bXMgPT0gb0hlYWRlcnMubGVuZ3RoICYmIGlVc2VySW5wdXRzID09PSAwICYmIGlWaXNpYmxlQ29sdW1ucyA9PSBpQ29sdW1zICYmIAkJCQlvU2V0dGluZ3Mub1Njcm9sbC5zWCA9PT0gIiIgJiYgb1NldHRpbmdzLm9TY3JvbGwuc1kgPT09ICIiICkgCQkJeyAJCQkJZm9yICggaT0wIDsgaTxvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA7IGkrKyApIAkJCQl7IAkJCQkJaVRtcFdpZHRoID0gJChvSGVhZGVyc1tpXSkud2lkdGgoKTsgCQkJCQlpZiAoIGlUbXBXaWR0aCAhPT0gbnVsbCApIAkJCQkJeyAJCQkJCQlvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLnNXaWR0aCA9IF9mblN0cmluZ1RvQ3NzKCBpVG1wV2lkdGggKTsgCQkJCQl9IAkJCQl9IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQkvKiBPdGhlcndpc2Ugd2UgYXJlIGdvaW5nIHRvIGhhdmUgdG8gZG8gc29tZSBjYWxjdWxhdGlvbnMgdG8gZ2V0IHRoZSB3aWR0aCBvZiBlYWNoIGNvbHVtbi4gCQkJCSAqIENvbnN0cnVjdCBhIDEgcm93IHRhYmxlIHdpdGggdGhlIHdpZGVzdCBub2RlIGluIHRoZSBkYXRhLCBhbmQgYW55IHVzZXIgZGVmaW5lZCB3aWR0aHMsIAkJCQkgKiB0aGVuIGluc2VydCBpdCBpbnRvIHRoZSBET00gYW5kIGFsbG93IHRoZSBicm93c2VyIHRvIGRvIGFsbCB0aGUgaGFyZCB3b3JrIG9mIAkJCQkgKiBjYWxjdWxhdGluZyB0YWJsZSB3aWR0aHMuIAkJCQkgKi8gCQkJCXZhciAJCQkJCW5DYWxjVG1wID0gb1NldHRpbmdzLm5UYWJsZS5jbG9uZU5vZGUoIGZhbHNlICksIAkJCQkJbkJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndGJvZHknICksIAkJCQkJblRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApLCAJCQkJCW5EaXZTaXppbmc7IAkJCQkgCQkJCW5DYWxjVG1wLnJlbW92ZUF0dHJpYnV0ZSggImlkIiApOyAJCQkJbkNhbGNUbXAuYXBwZW5kQ2hpbGQoIG9TZXR0aW5ncy5uVEhlYWQuY2xvbmVOb2RlKHRydWUpICk7IAkJCQlpZiAoIG9TZXR0aW5ncy5uVEZvb3QgIT09IG51bGwgKSAJCQkJeyAJCQkJCW5DYWxjVG1wLmFwcGVuZENoaWxkKCBvU2V0dGluZ3MublRGb290LmNsb25lTm9kZSh0cnVlKSApOyAJCQkJCV9mbkFwcGx5VG9DaGlsZHJlbiggZnVuY3Rpb24obikgeyAJCQkJCQluLnN0eWxlLndpZHRoID0gIiI7IAkJCQkJfSwgbkNhbGNUbXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RyJykgKTsgCQkJCX0gCQkJCSAJCQkJbkNhbGNUbXAuYXBwZW5kQ2hpbGQoIG5Cb2R5ICk7IAkJCQluQm9keS5hcHBlbmRDaGlsZCggblRyICk7IAkJCQkgCQkJCS8qIFJlbW92ZSBhbnkgc2l6aW5nIHRoYXQgd2FzIHByZXZpb3VzbHkgYXBwbGllZCBieSB0aGUgc3R5bGVzICovIAkJCQl2YXIganFDb2xTaXppbmcgPSAkKCd0aGVhZCB0aCcsIG5DYWxjVG1wKTsgCQkJCWlmICgganFDb2xTaXppbmcubGVuZ3RoID09PSAwICkgCQkJCXsgCQkJCQlqcUNvbFNpemluZyA9ICQoJ3Rib2R5IHRyOmVxKDApPnRkJywgbkNhbGNUbXApOyAJCQkJfSAJCQkJanFDb2xTaXppbmcuZWFjaCggZnVuY3Rpb24gKGkpIHsgCQkJCQl0aGlzLnN0eWxlLndpZHRoID0gIiI7IAkJCQkJIAkJCQkJdmFyIGlJbmRleCA9IF9mblZpc2libGVUb0NvbHVtbkluZGV4KCBvU2V0dGluZ3MsIGkgKTsgCQkJCQlpZiAoIGlJbmRleCAhPT0gbnVsbCAmJiBvU2V0dGluZ3MuYW9Db2x1bW5zW2lJbmRleF0uc1dpZHRoT3JpZyAhPT0gIiIgKSAJCQkJCXsgCQkJCQkJdGhpcy5zdHlsZS53aWR0aCA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaUluZGV4XS5zV2lkdGhPcmlnOyAJCQkJCX0gCQkJCX0gKTsgCQkJCSAJCQkJLyogRmluZCB0aGUgYmlnZ2VzdCB0ZCBmb3IgZWFjaCBjb2x1bW4gYW5kIHB1dCBpdCBpbnRvIHRoZSB0YWJsZSAqLyAJCQkJZm9yICggaT0wIDsgaTxpQ29sdW1zIDsgaSsrICkgCQkJCXsgCQkJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uYlZpc2libGUgKSAJCQkJCXsgCQkJCQkJdmFyIG5UZCA9IF9mbkdldFdpZGVzdE5vZGUoIG9TZXR0aW5ncywgaSApOyAJCQkJCQlpZiAoIG5UZCAhPT0gbnVsbCApIAkJCQkJCXsgCQkJCQkJCW5UZCA9IG5UZC5jbG9uZU5vZGUodHJ1ZSk7IAkJCQkJCQluVHIuYXBwZW5kQ2hpbGQoIG5UZCApOyAJCQkJCQl9IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQkvKiBCdWlsZCB0aGUgdGFibGUgYW5kICdkaXNwbGF5JyBpdCAqLyAJCQkJdmFyIG5XcmFwcGVyID0gb1NldHRpbmdzLm5UYWJsZS5wYXJlbnROb2RlOyAJCQkJbldyYXBwZXIuYXBwZW5kQ2hpbGQoIG5DYWxjVG1wICk7IAkJCQkgCQkJCS8qIFdoZW4gc2Nyb2xsaW5nIChYIG9yIFkpIHdlIHdhbnQgdG8gc2V0IHRoZSB3aWR0aCBvZiB0aGUgdGFibGUgYXMgYXBwcm9wcmlhdGUuIEhvd2V2ZXIsIAkJCQkgKiB3aGVuIG5vdCBzY3JvbGxpbmcgbGVhdmUgdGhlIHRhYmxlIHdpZHRoIGFzIGl0IGlzLiBUaGlzIHJlc3VsdHMgaW4gc2xpZ2h0bHkgZGlmZmVyZW50LCAJCQkJICogYnV0IEkgdGhpbmsgY29ycmVjdCBiZWhhdmlvdXIgCQkJCSAqLyAJCQkJaWYgKCBvU2V0dGluZ3Mub1Njcm9sbC5zWCAhPT0gIiIgJiYgb1NldHRpbmdzLm9TY3JvbGwuc1hJbm5lciAhPT0gIiIgKSAJCQkJeyAJCQkJCW5DYWxjVG1wLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3Mob1NldHRpbmdzLm9TY3JvbGwuc1hJbm5lcik7IAkJCQl9IAkJCQllbHNlIGlmICggb1NldHRpbmdzLm9TY3JvbGwuc1ggIT09ICIiICkgCQkJCXsgCQkJCQluQ2FsY1RtcC5zdHlsZS53aWR0aCA9ICIiOyAJCQkJCWlmICggJChuQ2FsY1RtcCkud2lkdGgoKSA8IG5XcmFwcGVyLm9mZnNldFdpZHRoICkgCQkJCQl7IAkJCQkJCW5DYWxjVG1wLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3MoIG5XcmFwcGVyLm9mZnNldFdpZHRoICk7IAkJCQkJfSAJCQkJfSAJCQkJZWxzZSBpZiAoIG9TZXR0aW5ncy5vU2Nyb2xsLnNZICE9PSAiIiApIAkJCQl7IAkJCQkJbkNhbGNUbXAuc3R5bGUud2lkdGggPSBfZm5TdHJpbmdUb0NzcyggbldyYXBwZXIub2Zmc2V0V2lkdGggKTsgCQkJCX0gCQkJCW5DYWxjVG1wLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsgCQkJCSAJCQkJLyogU2Nyb2xsaW5nIGNvbnNpZGVyYXRpb25zICovIAkJCQlfZm5TY3JvbGxpbmdXaWR0aEFkanVzdCggb1NldHRpbmdzLCBuQ2FsY1RtcCApOyAJCQkJIAkJCQkvKiBSZWFkIHRoZSB3aWR0aCdzIGNhbGN1bGF0ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIHN0b3JlIHRoZW0gZm9yIHVzZSBieSB0aGUgY2FsbGVyLiBXZSAJCQkJICogZmlyc3Qgb2YgYWxsIHRyeSB0byB1c2UgdGhlIGVsZW1lbnRzIGluIHRoZSBib2R5LCBidXQgaXQgaXMgcG9zc2libGUgdGhhdCB0aGVyZSBhcmUgCQkJCSAqIG5vIGVsZW1lbnRzIHRoZXJlLCB1bmRlciB3aGljaCBjaXJjdW1zdGFuY2VzIHdlIHVzZSB0aGUgaGVhZGVyIGVsZW1lbnRzIAkJCQkgKi8gCQkJCXZhciBvTm9kZXMgPSAkKCJ0Ym9keSB0cjplcSgwKT50ZCIsIG5DYWxjVG1wKTsgCQkJCWlmICggb05vZGVzLmxlbmd0aCA9PT0gMCApIAkJCQl7IAkJCQkJb05vZGVzID0gJCgidGhlYWQgdHI6ZXEoMCk+dGgiLCBuQ2FsY1RtcCk7IAkJCQl9IAkJCQkgCQkJCXZhciBpSW5kZXgsIGlDb3JyZWN0b3IgPSAwLCBpV2lkdGg7IAkJCQlmb3IgKCBpPTAgOyBpPG9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaSsrICkgCQkJCXsgCQkJCQlpZiAoIG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uYlZpc2libGUgKSAJCQkJCXsgCQkJCQkJaVdpZHRoID0gJChvTm9kZXNbaUNvcnJlY3Rvcl0pLndpZHRoKCk7IAkJCQkJCWlmICggaVdpZHRoICE9PSBudWxsICYmIGlXaWR0aCA+IDAgKSAJCQkJCQl7IAkJCQkJCQlvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLnNXaWR0aCA9IF9mblN0cmluZ1RvQ3NzKCBpV2lkdGggKTsgCQkJCQkJfSAJCQkJCQlpQ29ycmVjdG9yKys7IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQlvU2V0dGluZ3MublRhYmxlLnN0eWxlLndpZHRoID0gX2ZuU3RyaW5nVG9Dc3MoICQobkNhbGNUbXApLm91dGVyV2lkdGgoKSApOyAJCQkJbkNhbGNUbXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggbkNhbGNUbXAgKTsgCQkJfSAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5TY3JvbGxpbmdXaWR0aEFkanVzdCAJCSAqIFB1cnBvc2U6ICBBZGp1c3QgYSB0YWJsZSdzIHdpZHRoIHRvIHRha2UgYWNjb3VudCBvZiBzY3JvbGxpbmcgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgbm9kZTpuIC0gdGFibGUgbm9kZSAJCSAqLyAJCWZ1bmN0aW9uIF9mblNjcm9sbGluZ1dpZHRoQWRqdXN0ICggb1NldHRpbmdzLCBuICkgCQl7IAkJCWlmICggb1NldHRpbmdzLm9TY3JvbGwuc1ggPT09ICIiICYmIG9TZXR0aW5ncy5vU2Nyb2xsLnNZICE9PSAiIiApIAkJCXsgCQkJCS8qIFdoZW4geS1zY3JvbGxpbmcgb25seSwgd2Ugd2FudCB0byByZW1vdmUgdGhlIHdpZHRoIG9mIHRoZSBzY3JvbGwgYmFyIHNvIHRoZSB0YWJsZSAJCQkJICogKyBzY3JvbGwgYmFyIHdpbGwgZml0IGludG8gdGhlIGFyZWEgYXZhaWFsYmxlLiAJCQkJICovIAkJCQl2YXIgaU9yaWdXaWR0aCA9ICQobikud2lkdGgoKTsgCQkJCW4uc3R5bGUud2lkdGggPSBfZm5TdHJpbmdUb0NzcyggJChuKS5vdXRlcldpZHRoKCktb1NldHRpbmdzLm9TY3JvbGwuaUJhcldpZHRoICk7IAkJCX0gCQkJZWxzZSBpZiAoIG9TZXR0aW5ncy5vU2Nyb2xsLnNYICE9PSAiIiApIAkJCXsgCQkJCS8qIFdoZW4geC1zY3JvbGxpbmcgYm90aCB3YXlzLCBmaXggdGhlIHRhYmxlIGF0IGl0J3MgY3VycmVudCBzaXplLCB3aXRob3V0IGFkanVzdGluZyAqLyAJCQkJbi5zdHlsZS53aWR0aCA9IF9mblN0cmluZ1RvQ3NzKCAkKG4pLm91dGVyV2lkdGgoKSApOyAJCQl9IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkdldFdpZGVzdE5vZGUgCQkgKiBQdXJwb3NlOiAgR2V0IHRoZSB3aWRlc3Qgbm9kZSAJCSAqIFJldHVybnM6ICBzdHJpbmc6IC0gbWF4IHN0cmxlbnMgZm9yIGVhY2ggY29sdW1uIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqICAgICAgICAgICBpbnQ6aUNvbCAtIGNvbHVtbiBvZiBpbnRlcmVzdCAJCSAqICAgICAgICAgICBib29sZWFuOmJGYXN0IC0gU2hvdWxkIHdlIHVzZSBmYXN0IChidXQgbm9uLWFjY3VyYXRlKSBjYWxjdWxhdGlvbiAtIG9wdGlvbmFsLCAJCSAqICAgICAgICAgICAgIGRlZmF1bHQgdHJ1ZSAJCSAqIE5vdGVzOiAgICBUaGlzIG9wZXJhdGlvbiBpcyBfZXhwZW5zaXZlXyAoISEhKS4gSXQgcmVxdWlyZXMgYSBsb3Qgb2YgRE9NIGludGVyYWN0aW9uLCBidXQgCQkgKiAgIHRoaXMgaXMgdGhlIG9ubHkgd2F5IHRvIHJlbGlhYmx5IGdldCB0aGUgd2lkZXN0IHN0cmluZy4gRm9yIGV4YW1wbGUgJ21tbScgd291bGQgYmUgd2lkZXIgCQkgKiAgIHRoYW4gJ2lpaWknIHNvIHdlIGNhbid0IGp1c3Qgb2N1bnQgY2hhcmFjdGVycy4gSWYgdGhpcyBjYW4gYmUgb3B0aW1pc2VkIGl0IHdvdWxkIGJlIGdvb2QgCQkgKiAgIHRvIGRvIHNvISAJCSAqLyAJCWZ1bmN0aW9uIF9mbkdldFdpZGVzdE5vZGUoIG9TZXR0aW5ncywgaUNvbCwgYkZhc3QgKSAJCXsgCQkJLyogVXNlIGZhc3Qgbm90IG5vbi1hY2N1cmF0ZSBjYWxjdWxhdGUgYmFzZWQgb24gdGhlIHN0cmxlbiAqLyAJCQlpZiAoIHR5cGVvZiBiRmFzdCA9PSAndW5kZWZpbmVkJyB8fCBiRmFzdCApIAkJCXsgCQkJCXZhciBpTWF4TGVuID0gX2ZuR2V0TWF4TGVuU3RyaW5nKCBvU2V0dGluZ3MsIGlDb2wgKTsgCQkJCXZhciBpRmFzdFZpcyA9IF9mbkNvbHVtbkluZGV4VG9WaXNpYmxlKCBvU2V0dGluZ3MsIGlDb2wpOyAJCQkJaWYgKCBpTWF4TGVuIDwgMCApIAkJCQl7IAkJCQkJcmV0dXJuIG51bGw7IAkJCQl9IAkJCQlyZXR1cm4gb1NldHRpbmdzLmFvRGF0YVtpTWF4TGVuXS5uVHIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RkJylbaUZhc3RWaXNdOyAJCQl9IAkJCSAJCQkvKiBVc2UgdGhlIHNsb3cgYXBwcm9hY2gsIGJ1dCBnZXQgaGlnaCBxdWFsaXR5IGFuc3dlcnMgLSBub3RlIHRoYXQgdGhpcyBjb2RlIGlzIG5vdCBhY3R1YWxseSAJCQkgKiB1c2VkIGJ5IERhdGFUYWJsZXMgYnkgZGVmYXVsdC4gSWYgeW91IHdhbnQgdG8gdXNlIGl0IHlvdSBjYW4gYWx0ZXIgdGhlIGNhbGwgdG8gIAkJCSAqIF9mbkdldFdpZGVzdE5vZGUgdG8gcGFzcyAnZmFsc2UnIGFzIHRoZSB0aGlyZCBhcmd1bWVudCAJCQkgKi8gCQkJdmFyIAkJCQlpTWF4ID0gLTEsIGksIGlMZW4sIAkJCQlpTWF4SW5kZXggPSAtMSwgCQkJCW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgCQkJIAkJCW4uc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOyAJCQluLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsgCQkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggbiApOyAJCQkgCQkJZm9yICggaT0wLCBpTGVuPW9TZXR0aW5ncy5hb0RhdGEubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJbi5pbm5lckhUTUwgPSBvU2V0dGluZ3MuYW9EYXRhW2ldLl9hRGF0YVtpQ29sXTsgCQkJCWlmICggbi5vZmZzZXRXaWR0aCA+IGlNYXggKSAJCQkJeyAJCQkJCWlNYXggPSBuLm9mZnNldFdpZHRoOyAJCQkJCWlNYXhJbmRleCA9IGk7IAkJCQl9IAkJCX0gCQkJZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCggbiApOyAJCQkgCQkJaWYgKCBpTWF4SW5kZXggPj0gMCApIAkJCXsgCQkJCXZhciBpVmlzID0gX2ZuQ29sdW1uSW5kZXhUb1Zpc2libGUoIG9TZXR0aW5ncywgaUNvbCk7IAkJCQl2YXIgblJldCA9IG9TZXR0aW5ncy5hb0RhdGFbaU1heEluZGV4XS5uVHIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RkJylbaVZpc107IAkJCQlpZiAoIG5SZXQgKSAJCQkJeyAJCQkJCXJldHVybiBuUmV0OyAJCQkJfSAJCQl9IAkJCXJldHVybiBudWxsOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5HZXRNYXhMZW5TdHJpbmcgCQkgKiBQdXJwb3NlOiAgR2V0IHRoZSBtYXhpbXVtIHN0cmxlbiBmb3IgZWFjaCBkYXRhIGNvbHVtbiAJCSAqIFJldHVybnM6ICBzdHJpbmc6IC0gbWF4IHN0cmxlbnMgZm9yIGVhY2ggY29sdW1uIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqICAgICAgICAgICBpbnQ6aUNvbCAtIGNvbHVtbiBvZiBpbnRlcmVzdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkdldE1heExlblN0cmluZyggb1NldHRpbmdzLCBpQ29sICkgCQl7IAkJCXZhciBpTWF4ID0gLTE7IAkJCXZhciBpTWF4SW5kZXggPSAtMTsgCQkJIAkJCWZvciAoIHZhciBpPTAgOyBpPG9TZXR0aW5ncy5hb0RhdGEubGVuZ3RoIDsgaSsrICkgCQkJeyAJCQkJdmFyIHMgPSBvU2V0dGluZ3MuYW9EYXRhW2ldLl9hRGF0YVtpQ29sXTsgCQkJCWlmICggcy5sZW5ndGggPiBpTWF4ICkgCQkJCXsgCQkJCQlpTWF4ID0gcy5sZW5ndGg7IAkJCQkJaU1heEluZGV4ID0gaTsgCQkJCX0gCQkJfSAJCQkgCQkJcmV0dXJuIGlNYXhJbmRleDsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuU3RyaW5nVG9Dc3MgCQkgKiBQdXJwb3NlOiAgQXBwZW5kIGEgQ1NTIHVuaXQgKG9ubHkgaWYgcmVxdWlyZWQpIHRvIGEgc3RyaW5nIAkJICogUmV0dXJuczogIDAgaWYgbWF0Y2gsIDEgaWYgbGVuZ3RoIGlzIGRpZmZlcmVudCwgMiBpZiBubyBtYXRjaCAJCSAqIElucHV0czogICBhcnJheTphQXJyYXkxIC0gZmlyc3QgYXJyYXkgCQkgKiAgICAgICAgICAgYXJyYXk6YUFycmF5MiAtIHNlY29uZCBhcnJheSAJCSAqLyAJCWZ1bmN0aW9uIF9mblN0cmluZ1RvQ3NzKCBzICkgCQl7IAkJCWlmICggcyA9PT0gbnVsbCApIAkJCXsgCQkJCXJldHVybiAiMHB4IjsgCQkJfSAJCQkgCQkJaWYgKCB0eXBlb2YgcyA9PSAnbnVtYmVyJyApIAkJCXsgCQkJCWlmICggcyA8IDAgKSAJCQkJeyAJCQkJCXJldHVybiAiMHB4IjsgCQkJCX0gCQkJCXJldHVybiBzKyJweCI7IAkJCX0gCQkJIAkJCS8qIENoZWNrIGlmIHRoZSBsYXN0IGNoYXJhY3RlciBpcyBub3QgMC05ICovIAkJCXZhciBjID0gcy5jaGFyQ29kZUF0KCBzLmxlbmd0aC0xICk7IAkJCWlmIChjIDwgMHgzMCB8fCBjID4gMHgzOSkgCQkJeyAJCQkJcmV0dXJuIHM7IAkJCX0gCQkJcmV0dXJuIHMrInB4IjsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQXJyYXlDbXAgCQkgKiBQdXJwb3NlOiAgQ29tcGFyZSB0d28gYXJyYXlzIAkJICogUmV0dXJuczogIDAgaWYgbWF0Y2gsIDEgaWYgbGVuZ3RoIGlzIGRpZmZlcmVudCwgMiBpZiBubyBtYXRjaCAJCSAqIElucHV0czogICBhcnJheTphQXJyYXkxIC0gZmlyc3QgYXJyYXkgCQkgKiAgICAgICAgICAgYXJyYXk6YUFycmF5MiAtIHNlY29uZCBhcnJheSAJCSAqLyAJCWZ1bmN0aW9uIF9mbkFycmF5Q21wKCBhQXJyYXkxLCBhQXJyYXkyICkgCQl7IAkJCWlmICggYUFycmF5MS5sZW5ndGggIT0gYUFycmF5Mi5sZW5ndGggKSAJCQl7IAkJCQlyZXR1cm4gMTsgCQkJfSAJCQkgCQkJZm9yICggdmFyIGk9MCA7IGk8YUFycmF5MS5sZW5ndGggOyBpKysgKSAJCQl7IAkJCQlpZiAoIGFBcnJheTFbaV0gIT0gYUFycmF5MltpXSApIAkJCQl7IAkJCQkJcmV0dXJuIDI7IAkJCQl9IAkJCX0gCQkJIAkJCXJldHVybiAwOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5EZXRlY3RUeXBlIAkJICogUHVycG9zZTogIEdldCB0aGUgc29ydCB0eXBlIGJhc2VkIG9uIGFuIGlucHV0IHN0cmluZyAJCSAqIFJldHVybnM6ICBzdHJpbmc6IC0gdHlwZSAoZGVmYXVsdHMgdG8gJ3N0cmluZycgaWYgbm8gdHlwZSBjYW4gYmUgZGV0ZWN0ZWQpIAkJICogSW5wdXRzOiAgIHN0cmluZzpzRGF0YSAtIGRhdGEgd2Ugd2lzaCB0byBrbm93IHRoZSB0eXBlIG9mIAkJICogTm90ZXM6ICAgIFRoaXMgZnVuY3Rpb24gbWFrZXMgdXNlIG9mIHRoZSBEYXRhVGFibGVzIHBsdWdpbiBvYmpjdCBfb0V4dCAgCQkgKiAgICguYVR5cGVzKSBzdWNoIHRoYXQgbmV3IHR5cGVzIGNhbiBlYXNpbHkgYmUgYWRkZWQuIAkJICovIAkJZnVuY3Rpb24gX2ZuRGV0ZWN0VHlwZSggc0RhdGEgKSAJCXsgCQkJdmFyIGFUeXBlcyA9IF9vRXh0LmFUeXBlczsgCQkJdmFyIGlMZW4gPSBhVHlwZXMubGVuZ3RoOyAJCQkgCQkJZm9yICggdmFyIGk9MCA7IGk8aUxlbiA7IGkrKyApIAkJCXsgCQkJCXZhciBzVHlwZSA9IGFUeXBlc1tpXSggc0RhdGEgKTsgCQkJCWlmICggc1R5cGUgIT09IG51bGwgKSAJCQkJeyAJCQkJCXJldHVybiBzVHlwZTsgCQkJCX0gCQkJfSAJCQkgCQkJcmV0dXJuICdzdHJpbmcnOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5TZXR0aW5nc0Zyb21Ob2RlIAkJICogUHVycG9zZTogIFJldHVybiB0aGUgc2V0dGluZ3Mgb2JqZWN0IGZvciBhIHBhcnRpY3VsYXIgdGFibGUgCQkgKiBSZXR1cm5zOiAgb2JqZWN0OiBTZXR0aW5ncyBvYmplY3QgLSBvciBudWxsIGlmIG5vdCBmb3VuZCAJCSAqIElucHV0czogICBub2RlOm5UYWJsZSAtIHRhYmxlIHdlIGFyZSB1c2luZyBhcyBhIGRhdGFUYWJsZSAJCSAqLyAJCWZ1bmN0aW9uIF9mblNldHRpbmdzRnJvbU5vZGUgKCBuVGFibGUgKSAJCXsgCQkJZm9yICggdmFyIGk9MCA7IGk8X2FvU2V0dGluZ3MubGVuZ3RoIDsgaSsrICkgCQkJeyAJCQkJaWYgKCBfYW9TZXR0aW5nc1tpXS5uVGFibGUgPT0gblRhYmxlICkgCQkJCXsgCQkJCQlyZXR1cm4gX2FvU2V0dGluZ3NbaV07IAkJCQl9IAkJCX0gCQkJIAkJCXJldHVybiBudWxsOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5HZXREYXRhTWFzdGVyIAkJICogUHVycG9zZTogIFJldHVybiBhbiBhcnJheSB3aXRoIHRoZSBmdWxsIHRhYmxlIGRhdGEgCQkgKiBSZXR1cm5zOiAgYXJyYXkgYXJyYXk6YURhdGEgLSBNYXN0ZXIgZGF0YSBhcnJheSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5HZXREYXRhTWFzdGVyICggb1NldHRpbmdzICkgCQl7IAkJCXZhciBhRGF0YSA9IFtdOyAJCQl2YXIgaUxlbiA9IG9TZXR0aW5ncy5hb0RhdGEubGVuZ3RoOyAJCQlmb3IgKCB2YXIgaT0wIDsgaTxpTGVuOyBpKysgKSAJCQl7IAkJCQlhRGF0YS5wdXNoKCBvU2V0dGluZ3MuYW9EYXRhW2ldLl9hRGF0YSApOyAJCQl9IAkJCXJldHVybiBhRGF0YTsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuR2V0VHJOb2RlcyAJCSAqIFB1cnBvc2U6ICBSZXR1cm4gYW4gYXJyYXkgd2l0aCB0aGUgVFIgbm9kZXMgZm9yIHRoZSB0YWJsZSAJCSAqIFJldHVybnM6ICBhcnJheTogLSBUUiBhcnJheSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5HZXRUck5vZGVzICggb1NldHRpbmdzICkgCQl7IAkJCXZhciBhTm9kZXMgPSBbXTsgCQkJdmFyIGlMZW4gPSBvU2V0dGluZ3MuYW9EYXRhLmxlbmd0aDsgCQkJZm9yICggdmFyIGk9MCA7IGk8aUxlbiA7IGkrKyApIAkJCXsgCQkJCWFOb2Rlcy5wdXNoKCBvU2V0dGluZ3MuYW9EYXRhW2ldLm5UciApOyAJCQl9IAkJCXJldHVybiBhTm9kZXM7IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mbkdldFRkTm9kZXMgCQkgKiBQdXJwb3NlOiAgUmV0dXJuIGFuIGFycmF5IHdpdGggdGhlIFREIG5vZGVzIGZvciB0aGUgdGFibGUgCQkgKiBSZXR1cm5zOiAgYXJyYXk6IC0gVEQgYXJyYXkgCQkgKiBJbnB1dHM6ICAgb2JqZWN0Om9TZXR0aW5ncyAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJICovIAkJZnVuY3Rpb24gX2ZuR2V0VGROb2RlcyAoIG9TZXR0aW5ncyApIAkJeyAJCQl2YXIgblRycyA9IF9mbkdldFRyTm9kZXMoIG9TZXR0aW5ncyApOyAJCQl2YXIgblRkcyA9IFtdLCBuVGQ7IAkJCXZhciBhblJldHVybiA9IFtdOyAJCQl2YXIgaUNvcnJlY3RvcjsgCQkJdmFyIGlSb3csIGlSb3dzLCBpQ29sdW1uLCBpQ29sdW1uczsgCQkJIAkJCWZvciAoIGlSb3c9MCwgaVJvd3M9blRycy5sZW5ndGggOyBpUm93PGlSb3dzIDsgaVJvdysrICkgCQkJeyAJCQkJblRkcyA9IFtdOyAJCQkJZm9yICggaUNvbHVtbj0wLCBpQ29sdW1ucz1uVHJzW2lSb3ddLmNoaWxkTm9kZXMubGVuZ3RoIDsgaUNvbHVtbjxpQ29sdW1ucyA7IGlDb2x1bW4rKyApIAkJCQl7IAkJCQkJblRkID0gblRyc1tpUm93XS5jaGlsZE5vZGVzW2lDb2x1bW5dOyAJCQkJCWlmICggblRkLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIlREIiApIAkJCQkJeyAJCQkJCQluVGRzLnB1c2goIG5UZCApOyAJCQkJCX0gCQkJCX0gCQkJCSAJCQkJaUNvcnJlY3RvciA9IDA7IAkJCQlmb3IgKCBpQ29sdW1uPTAsIGlDb2x1bW5zPW9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaUNvbHVtbjxpQ29sdW1ucyA7IGlDb2x1bW4rKyApIAkJCQl7IAkJCQkJaWYgKCBvU2V0dGluZ3MuYW9Db2x1bW5zW2lDb2x1bW5dLmJWaXNpYmxlICkgCQkJCQl7IAkJCQkJCWFuUmV0dXJuLnB1c2goIG5UZHNbaUNvbHVtbi1pQ29ycmVjdG9yXSApOyAJCQkJCX0gCQkJCQllbHNlIAkJCQkJeyAJCQkJCQlhblJldHVybi5wdXNoKCBvU2V0dGluZ3MuYW9EYXRhW2lSb3ddLl9hbkhpZGRlbltpQ29sdW1uXSApOyAJCQkJCQlpQ29ycmVjdG9yKys7IAkJCQkJfSAJCQkJfSAJCQl9IAkJCXJldHVybiBhblJldHVybjsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuRXNjYXBlUmVnZXggCQkgKiBQdXJwb3NlOiAgc2NhcGUgYSBzdHJpbmcgc3R1Y2ggdGhhdCBpdCBjYW4gYmUgdXNlZCBpbiBhIHJlZ3VsYXIgZXhwcmVzc2lvbiAJCSAqIFJldHVybnM6ICBzdHJpbmc6IC0gZXNjYXBlZCBzdHJpbmcgCQkgKiBJbnB1dHM6ICAgc3RyaW5nOnNWYWwgLSBzdHJpbmcgdG8gZXNjYXBlIAkJICovIAkJZnVuY3Rpb24gX2ZuRXNjYXBlUmVnZXggKCBzVmFsICkgCQl7IAkJCXZhciBhY0VzY2FwZSA9IFsgJy8nLCAnLicsICcqJywgJysnLCAnPycsICd8JywgJygnLCAnKScsICdbJywgJ10nLCAneycsICd9JywgJ1xcJywgJyQnLCAnXicgXTsgCQkgIHZhciByZVJlcGxhY2UgPSBuZXcgUmVnRXhwKCAnKFxcJyArIGFjRXNjYXBlLmpvaW4oJ3xcXCcpICsgJyknLCAnZycgKTsgCQkgIHJldHVybiBzVmFsLnJlcGxhY2UocmVSZXBsYWNlLCAnXFwkMScpOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5EZWxldGVJbmRleCAJCSAqIFB1cnBvc2U6ICBUYWtlIGFuIGFycmF5IG9mIGludGVnZXJzIChpbmRleCBhcnJheSkgYW5kIHJlbW92ZSBhIHRhcmdldCBpbnRlZ2VyICh2YWx1ZSAtIG5vdCAgCQkgKiAgICAgICAgICAgICB0aGUga2V5ISkgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBhOmFycmF5IGludCAtIEluZGV4IGFycmF5IHRvIHRhcmdldCAJCSAqICAgICAgICAgICBpbnQ6aVRhcmdldCAtIHZhbHVlIHRvIGZpbmQgCQkgKi8gCQlmdW5jdGlvbiBfZm5EZWxldGVJbmRleCggYSwgaVRhcmdldCApIAkJeyAJCQl2YXIgaVRhcmdldEluZGV4ID0gLTE7IAkJCSAJCQlmb3IgKCB2YXIgaT0wLCBpTGVuPWEubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJaWYgKCBhW2ldID09IGlUYXJnZXQgKSAJCQkJeyAJCQkJCWlUYXJnZXRJbmRleCA9IGk7IAkJCQl9IAkJCQllbHNlIGlmICggYVtpXSA+IGlUYXJnZXQgKSAJCQkJeyAJCQkJCWFbaV0tLTsgCQkJCX0gCQkJfSAJCQkgCQkJaWYgKCBpVGFyZ2V0SW5kZXggIT0gLTEgKSAJCQl7IAkJCQlhLnNwbGljZSggaVRhcmdldEluZGV4LCAxICk7IAkJCX0gCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuUmVPcmRlckluZGV4IAkJICogUHVycG9zZTogIEZpZ3VyZSBvdXQgaG93IHRvIHJlb3JkZXIgYSBkaXNwbGF5IGxpc3QgCQkgKiBSZXR1cm5zOiAgYXJyYXkgaW50OmFpUmV0dXJuIC0gaW5kZXggbGlzdCBmb3IgcmVvcmRlcmluZyAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKi8gCQlmdW5jdGlvbiBfZm5SZU9yZGVySW5kZXggKCBvU2V0dGluZ3MsIHNDb2x1bW5zICkgCQl7IAkJCXZhciBhQ29sdW1ucyA9IHNDb2x1bW5zLnNwbGl0KCcsJyk7IAkJCXZhciBhaVJldHVybiA9IFtdOyAJCQkgCQkJZm9yICggdmFyIGk9MCwgaUxlbj1vU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCXsgCQkJCWZvciAoIHZhciBqPTAgOyBqPGlMZW4gOyBqKysgKSAJCQkJeyAJCQkJCWlmICggb1NldHRpbmdzLmFvQ29sdW1uc1tpXS5zTmFtZSA9PSBhQ29sdW1uc1tqXSApIAkJCQkJeyAJCQkJCQlhaVJldHVybi5wdXNoKCBqICk7IAkJCQkJCWJyZWFrOyAJCQkJCX0gCQkJCX0gCQkJfSAJCQkgCQkJcmV0dXJuIGFpUmV0dXJuOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5Db2x1bW5PcmRlcmluZyAJCSAqIFB1cnBvc2U6ICBHZXQgdGhlIGNvbHVtbiBvcmRlcmluZyB0aGF0IERhdGFUYWJsZXMgZXhwZWN0cyAJCSAqIFJldHVybnM6ICBzdHJpbmc6IC0gY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgbmFtZXMgCQkgKiBJbnB1dHM6ICAgb2JqZWN0Om9TZXR0aW5ncyAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJICovIAkJZnVuY3Rpb24gX2ZuQ29sdW1uT3JkZXJpbmcgKCBvU2V0dGluZ3MgKSAJCXsgCQkJdmFyIHNOYW1lcyA9ICcnOyAJCQlmb3IgKCB2YXIgaT0wLCBpTGVuPW9TZXR0aW5ncy5hb0NvbHVtbnMubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJc05hbWVzICs9IG9TZXR0aW5ncy5hb0NvbHVtbnNbaV0uc05hbWUrJywnOyAJCQl9IAkJCWlmICggc05hbWVzLmxlbmd0aCA9PSBpTGVuICkgCQkJeyAJCQkJcmV0dXJuICIiOyAJCQl9IAkJCXJldHVybiBzTmFtZXMuc2xpY2UoMCwgLTEpOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5Mb2cgCQkgKiBQdXJwb3NlOiAgTG9nIGFuIGVycm9yIG1lc3NhZ2UgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBpbnQ6aUxldmVsIC0gbG9nIGVycm9yIG1lc3NhZ2VzLCBvciBkaXNwbGF5IHRoZW0gdG8gdGhlIHVzZXIgCQkgKiAgICAgICAgICAgc3RyaW5nOnNNZXNnIC0gZXJyb3IgbWVzc2FnZSAJCSAqLyAJCWZ1bmN0aW9uIF9mbkxvZyggb1NldHRpbmdzLCBpTGV2ZWwsIHNNZXNnICkgCQl7IAkJCXZhciBzQWxlcnQgPSBvU2V0dGluZ3Muc1RhYmxlSWQgPT09ICIiID8gCQkJIAkiRGF0YVRhYmxlcyB3YXJuaW5nOiAiICtzTWVzZyA6IAkJCSAJIkRhdGFUYWJsZXMgd2FybmluZyAodGFibGUgaWQgPSAnIitvU2V0dGluZ3Muc1RhYmxlSWQrIicpOiAiICtzTWVzZzsgCQkJIAkJCWlmICggaUxldmVsID09PSAwICkgCQkJeyAJCQkJaWYgKCBfb0V4dC5zRXJyTW9kZSA9PSAnYWxlcnQnICkgCQkJCXsgCQkJCQlhbGVydCggc0FsZXJ0ICk7IAkJCQl9IAkJCQllbHNlIAkJCQl7IAkJCQkJdGhyb3cgc0FsZXJ0OyAJCQkJfSAJCQkJcmV0dXJuOyAJCQl9IAkJCWVsc2UgaWYgKCB0eXBlb2YgY29uc29sZSAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5sb2cgIT0gJ3VuZGVmaW5lZCcgKSAJCQl7IAkJCQljb25zb2xlLmxvZyggc0FsZXJ0ICk7IAkJCX0gCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQ2xlYXJUYWJsZSAJCSAqIFB1cnBvc2U6ICBOdWtlIHRoZSB0YWJsZSAJCSAqIFJldHVybnM6ICAtIAkJICogSW5wdXRzOiAgIG9iamVjdDpvU2V0dGluZ3MgLSBkYXRhVGFibGVzIHNldHRpbmdzIG9iamVjdCAJCSAqLyAJCWZ1bmN0aW9uIF9mbkNsZWFyVGFibGUoIG9TZXR0aW5ncyApIAkJeyAJCQlvU2V0dGluZ3MuYW9EYXRhLnNwbGljZSggMCwgb1NldHRpbmdzLmFvRGF0YS5sZW5ndGggKTsgCQkJb1NldHRpbmdzLmFpRGlzcGxheU1hc3Rlci5zcGxpY2UoIDAsIG9TZXR0aW5ncy5haURpc3BsYXlNYXN0ZXIubGVuZ3RoICk7IAkJCW9TZXR0aW5ncy5haURpc3BsYXkuc3BsaWNlKCAwLCBvU2V0dGluZ3MuYWlEaXNwbGF5Lmxlbmd0aCApOyAJCQlfZm5DYWxjdWxhdGVFbmQoIG9TZXR0aW5ncyApOyAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5TYXZlU3RhdGUgCQkgKiBQdXJwb3NlOiAgU2F2ZSB0aGUgc3RhdGUgb2YgYSB0YWJsZSBpbiBhIGNvb2tpZSBzdWNoIHRoYXQgdGhlIHBhZ2UgY2FuIGJlIHJlbG9hZGVkIAkJICogUmV0dXJuczogIC0gCQkgKiBJbnB1dHM6ICAgb2JqZWN0Om9TZXR0aW5ncyAtIGRhdGFUYWJsZXMgc2V0dGluZ3Mgb2JqZWN0IAkJICovIAkJZnVuY3Rpb24gX2ZuU2F2ZVN0YXRlICggb1NldHRpbmdzICkgCQl7IAkJCWlmICggIW9TZXR0aW5ncy5vRmVhdHVyZXMuYlN0YXRlU2F2ZSB8fCB0eXBlb2Ygb1NldHRpbmdzLmJEZXN0cm95aW5nICE9ICd1bmRlZmluZWQnICkgCQkJeyAJCQkJcmV0dXJuOyAJCQl9IAkJCSAJCQkvKiBTdG9yZSB0aGUgaW50ZXJlc3RpbmcgdmFyaWFibGVzICovIAkJCXZhciBpLCBpTGVuLCBzVG1wOyAJCQl2YXIgc1ZhbHVlID0gInsiOyAJCQlzVmFsdWUgKz0gJyJpQ3JlYXRlIjonKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSsnLCc7IAkJCXNWYWx1ZSArPSAnImlTdGFydCI6Jysgb1NldHRpbmdzLl9pRGlzcGxheVN0YXJ0KycsJzsgCQkJc1ZhbHVlICs9ICciaUVuZCI6Jysgb1NldHRpbmdzLl9pRGlzcGxheUVuZCsnLCc7IAkJCXNWYWx1ZSArPSAnImlMZW5ndGgiOicrIG9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGgrJywnOyAJCQlzVmFsdWUgKz0gJyJzRmlsdGVyIjoiJysgZW5jb2RlVVJJQ29tcG9uZW50KG9TZXR0aW5ncy5vUHJldmlvdXNTZWFyY2guc1NlYXJjaCkrJyIsJzsgCQkJc1ZhbHVlICs9ICcic0ZpbHRlckVzYyI6JysgIW9TZXR0aW5ncy5vUHJldmlvdXNTZWFyY2guYlJlZ2V4KycsJzsgCQkJIAkJCXNWYWx1ZSArPSAnImFhU29ydGluZyI6WyAnOyAJCQlmb3IgKCBpPTAgOyBpPG9TZXR0aW5ncy5hYVNvcnRpbmcubGVuZ3RoIDsgaSsrICkgCQkJeyAJCQkJc1ZhbHVlICs9ICdbJytvU2V0dGluZ3MuYWFTb3J0aW5nW2ldWzBdKycsIicrb1NldHRpbmdzLmFhU29ydGluZ1tpXVsxXSsnIl0sJzsgCQkJfSAJCQlzVmFsdWUgPSBzVmFsdWUuc3Vic3RyaW5nKDAsIHNWYWx1ZS5sZW5ndGgtMSk7IAkJCXNWYWx1ZSArPSAiXSwiOyAJCQkgCQkJc1ZhbHVlICs9ICciYWFTZWFyY2hDb2xzIjpbICc7IAkJCWZvciAoIGk9MCA7IGk8b1NldHRpbmdzLmFvUHJlU2VhcmNoQ29scy5sZW5ndGggOyBpKysgKSAJCQl7IAkJCQlzVmFsdWUgKz0gJ1siJytlbmNvZGVVUklDb21wb25lbnQob1NldHRpbmdzLmFvUHJlU2VhcmNoQ29sc1tpXS5zU2VhcmNoKSsgCQkJCQknIiwnKyFvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzW2ldLmJSZWdleCsnXSwnOyAJCQl9IAkJCXNWYWx1ZSA9IHNWYWx1ZS5zdWJzdHJpbmcoMCwgc1ZhbHVlLmxlbmd0aC0xKTsgCQkJc1ZhbHVlICs9ICJdLCI7IAkJCSAJCQlzVmFsdWUgKz0gJyJhYlZpc0NvbHMiOlsgJzsgCQkJZm9yICggaT0wIDsgaTxvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA7IGkrKyApIAkJCXsgCQkJCXNWYWx1ZSArPSBvU2V0dGluZ3MuYW9Db2x1bW5zW2ldLmJWaXNpYmxlKyIsIjsgCQkJfSAJCQlzVmFsdWUgPSBzVmFsdWUuc3Vic3RyaW5nKDAsIHNWYWx1ZS5sZW5ndGgtMSk7IAkJCXNWYWx1ZSArPSAiXSI7IAkJCSAJCQkvKiBTYXZlIHN0YXRlIGZyb20gYW55IHBsdWctaW5zICovIAkJCWZvciAoIGk9MCwgaUxlbj1vU2V0dGluZ3MuYW9TdGF0ZVNhdmUubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJc1RtcCA9IG9TZXR0aW5ncy5hb1N0YXRlU2F2ZVtpXS5mbiggb1NldHRpbmdzLCBzVmFsdWUgKTsgCQkJCWlmICggc1RtcCAhPT0gIiIgKSAJCQkJeyAJCQkJCXNWYWx1ZSA9IHNUbXA7IAkJCQl9IAkJCX0gCQkJIAkJCXNWYWx1ZSArPSAifSI7IAkJCSAJCQlfZm5DcmVhdGVDb29raWUoIG9TZXR0aW5ncy5zQ29va2llUHJlZml4K29TZXR0aW5ncy5zSW5zdGFuY2UsIHNWYWx1ZSwgIAkJCQlvU2V0dGluZ3MuaUNvb2tpZUR1cmF0aW9uLCBvU2V0dGluZ3Muc0Nvb2tpZVByZWZpeCwgb1NldHRpbmdzLmZuQ29va2llQ2FsbGJhY2sgKTsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuTG9hZFN0YXRlIAkJICogUHVycG9zZTogIEF0dGVtcHQgdG8gbG9hZCBhIHNhdmVkIHRhYmxlIHN0YXRlIGZyb20gYSBjb29raWUgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBvYmplY3Q6b1NldHRpbmdzIC0gZGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QgCQkgKiAgICAgICAgICAgb2JqZWN0Om9Jbml0IC0gRGF0YVRhYmxlcyBpbml0IG9iamVjdCBzbyB3ZSBjYW4gb3ZlcnJpZGUgc2V0dGluZ3MgCQkgKi8gCQlmdW5jdGlvbiBfZm5Mb2FkU3RhdGUgKCBvU2V0dGluZ3MsIG9Jbml0ICkgCQl7IAkJCWlmICggIW9TZXR0aW5ncy5vRmVhdHVyZXMuYlN0YXRlU2F2ZSApIAkJCXsgCQkJCXJldHVybjsgCQkJfSAJCQkgCQkJdmFyIG9EYXRhLCBpLCBpTGVuOyAJCQl2YXIgc0RhdGEgPSBfZm5SZWFkQ29va2llKCBvU2V0dGluZ3Muc0Nvb2tpZVByZWZpeCtvU2V0dGluZ3Muc0luc3RhbmNlICk7IAkJCWlmICggc0RhdGEgIT09IG51bGwgJiYgc0RhdGEgIT09ICcnICkgCQkJeyAJCQkJLyogVHJ5L2NhdGNoIHRoZSBKU09OIGV2YWwgLSBpZiBpdCBpcyBiYWQgdGhlbiB3ZSBpZ25vcmUgaXQgLSBub3RlIHRoYXQgMS43LjAgYW5kIGJlZm9yZSAJCQkJICogaW5jb3JyZWN0bHkgdXNlZCBzaW5nbGUgcXVvdGVzIGZvciBzb21lIHN0cmluZ3MgLSBoZW5jZSB0aGUgcmVwbGFjZSBiZWxvdyAJCQkJICovIAkJCQl0cnkgCQkJCXsgCQkJCQlvRGF0YSA9ICh0eXBlb2YgJC5wYXJzZUpTT04gPT0gJ2Z1bmN0aW9uJykgPyAgCQkJCQkJJC5wYXJzZUpTT04oIHNEYXRhLnJlcGxhY2UoLycvZywgJyInKSApIDogZXZhbCggJygnK3NEYXRhKycpJyApOyAJCQkJfSAJCQkJY2F0Y2goIGUgKSAJCQkJeyAJCQkJCXJldHVybjsgCQkJCX0gCQkJCSAJCQkJLyogQWxsb3cgY3VzdG9tIGFuZCBwbHVnLWluIG1hbmlwdWxhdGlvbiBmdW5jdGlvbnMgdG8gYWx0ZXIgdGhlIGRhdGEgc2V0IHdoaWNoIHdhcyAJCQkJICogc2F2ZWQsIGFuZCBhbHNvIHJlamVjdCBhbnkgc2F2ZWQgc3RhdGUgYnkgcmV0dXJuaW5nIGZhbHNlIAkJCQkgKi8gCQkJCWZvciAoIGk9MCwgaUxlbj1vU2V0dGluZ3MuYW9TdGF0ZUxvYWQubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJCXsgCQkJCQlpZiAoICFvU2V0dGluZ3MuYW9TdGF0ZUxvYWRbaV0uZm4oIG9TZXR0aW5ncywgb0RhdGEgKSApIAkJCQkJeyAJCQkJCQlyZXR1cm47IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQkvKiBTdG9yZSB0aGUgc2F2ZWQgc3RhdGUgc28gaXQgbWlnaHQgYmUgYWNjZXNzZWQgYXQgYW55IHRpbWUgKHBhcnRpY3VhbHJseSBhIHBsdWctaW4gKi8gCQkJCW9TZXR0aW5ncy5vTG9hZGVkU3RhdGUgPSAkLmV4dGVuZCggdHJ1ZSwge30sIG9EYXRhICk7IAkJCQkgCQkJCS8qIFJlc3RvcmUga2V5IGZlYXR1cmVzICovIAkJCQlvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQgPSBvRGF0YS5pU3RhcnQ7IAkJCQlvU2V0dGluZ3MuaUluaXREaXNwbGF5U3RhcnQgPSBvRGF0YS5pU3RhcnQ7IAkJCQlvU2V0dGluZ3MuX2lEaXNwbGF5RW5kID0gb0RhdGEuaUVuZDsgCQkJCW9TZXR0aW5ncy5faURpc3BsYXlMZW5ndGggPSBvRGF0YS5pTGVuZ3RoOyAJCQkJb1NldHRpbmdzLm9QcmV2aW91c1NlYXJjaC5zU2VhcmNoID0gZGVjb2RlVVJJQ29tcG9uZW50KG9EYXRhLnNGaWx0ZXIpOyAJCQkJb1NldHRpbmdzLmFhU29ydGluZyA9IG9EYXRhLmFhU29ydGluZy5zbGljZSgpOyAJCQkJb1NldHRpbmdzLnNhdmVkX2FhU29ydGluZyA9IG9EYXRhLmFhU29ydGluZy5zbGljZSgpOyAJCQkJIAkJCQkvKiAJCQkJICogU2VhcmNoIGZpbHRlcmluZyAtIGdsb2JhbCByZWZlcmVuY2UgYWRkZWQgaW4gMS40LjEgCQkJCSAqIE5vdGUgdGhhdCB3ZSB1c2UgYSAnbm90JyBmb3IgdGhlIHZhbHVlIG9mIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gaW5kaWNhdG9yIHRvIG1haW50YWluIAkJCQkgKiBjb21wYXRpYmlsaXR5IHdpdGggcHJlIDEuNyB2ZXJzaW9ucywgd2hlcmUgdGhpcyB3YXMgYmFzaWNhbGx5IGludmVydGVkLiBBZGRlZCBpbiAxLjcuMCAJCQkJICovIAkJCQlpZiAoIHR5cGVvZiBvRGF0YS5zRmlsdGVyRXNjICE9ICd1bmRlZmluZWQnICkgCQkJCXsgCQkJCQlvU2V0dGluZ3Mub1ByZXZpb3VzU2VhcmNoLmJSZWdleCA9ICFvRGF0YS5zRmlsdGVyRXNjOyAJCQkJfSAJCQkJIAkJCQkvKiBDb2x1bW4gZmlsdGVyaW5nIC0gYWRkZWQgaW4gMS41LjAgYmV0YSA2ICovIAkJCQlpZiAoIHR5cGVvZiBvRGF0YS5hYVNlYXJjaENvbHMgIT0gJ3VuZGVmaW5lZCcgKSAJCQkJeyAJCQkJCWZvciAoIGk9MCA7IGk8b0RhdGEuYWFTZWFyY2hDb2xzLmxlbmd0aCA7IGkrKyApIAkJCQkJeyAJCQkJCQlvU2V0dGluZ3MuYW9QcmVTZWFyY2hDb2xzW2ldID0geyAJCQkJCQkJInNTZWFyY2giOiBkZWNvZGVVUklDb21wb25lbnQob0RhdGEuYWFTZWFyY2hDb2xzW2ldWzBdKSwgCQkJCQkJCSJiUmVnZXgiOiAhb0RhdGEuYWFTZWFyY2hDb2xzW2ldWzFdIAkJCQkJCX07IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQkvKiBDb2x1bW4gdmlzaWJpbGl0eSBzdGF0ZSAtIGFkZGVkIGluIDEuNS4wIGJldGEgMTAgKi8gCQkJCWlmICggdHlwZW9mIG9EYXRhLmFiVmlzQ29scyAhPSAndW5kZWZpbmVkJyApIAkJCQl7IAkJCQkJLyogUGFzcyBiYWNrIHZpc2liaWxpeSBzZXR0aW5ncyB0byB0aGUgaW5pdCBoYW5kbGVyLCBidXQgdG8gZG8gbm90IGhlcmUgb3ZlcnJpZGUgCQkJCQkgKiB0aGUgaW5pdCBvYmplY3QgdGhhdCB0aGUgdXNlciBtaWdodCBoYXZlIHBhc3NlZCBpbiAJCQkJCSAqLyAJCQkJCW9Jbml0LnNhdmVkX2FvQ29sdW1ucyA9IFtdOyAJCQkJCWZvciAoIGk9MCA7IGk8b0RhdGEuYWJWaXNDb2xzLmxlbmd0aCA7IGkrKyApIAkJCQkJeyAJCQkJCQlvSW5pdC5zYXZlZF9hb0NvbHVtbnNbaV0gPSB7fTsgCQkJCQkJb0luaXQuc2F2ZWRfYW9Db2x1bW5zW2ldLmJWaXNpYmxlID0gb0RhdGEuYWJWaXNDb2xzW2ldOyAJCQkJCX0gCQkJCX0gCQkJfSAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5DcmVhdGVDb29raWUgCQkgKiBQdXJwb3NlOiAgQ3JlYXRlIGEgbmV3IGNvb2tpZSB3aXRoIGEgdmFsdWUgdG8gc3RvcmUgdGhlIHN0YXRlIG9mIGEgdGFibGUgCQkgKiBSZXR1cm5zOiAgLSAJCSAqIElucHV0czogICBzdHJpbmc6c05hbWUgLSBuYW1lIG9mIHRoZSBjb29raWUgdG8gY3JlYXRlIAkJICogICAgICAgICAgIHN0cmluZzpzVmFsdWUgLSB0aGUgdmFsdWUgdGhlIGNvb2tpZSBzaG91bGQgdGFrZSAJCSAqICAgICAgICAgICBpbnQ6aVNlY3MgLSBkdXJhdGlvbiBvZiB0aGUgY29va2llIAkJICogICAgICAgICAgIHN0cmluZzpzQmFzZU5hbWUgLSBzTmFtZSBpcyBtYWRlIHVwIG9mIHRoZSBiYXNlICsgZmlsZSBuYW1lIC0gdGhpcyBpcyB0aGUgYmFzZSAJCSAqICAgICAgICAgICBmdW5jdGlvbjpmbkNhbGxiYWNrIC0gVXNlciBkZWZpbmFibGUgZnVuY3Rpb24gdG8gbW9kaWZ5IHRoZSBjb29raWUgCQkgKi8gCQlmdW5jdGlvbiBfZm5DcmVhdGVDb29raWUgKCBzTmFtZSwgc1ZhbHVlLCBpU2Vjcywgc0Jhc2VOYW1lLCBmbkNhbGxiYWNrICkgCQl7IAkJCXZhciBkYXRlID0gbmV3IERhdGUoKTsgCQkJZGF0ZS5zZXRUaW1lKCBkYXRlLmdldFRpbWUoKSsoaVNlY3MqMTAwMCkgKTsgCQkJIAkJCS8qICAJCQkgKiBTaG9ja2luZyBidXQgdHJ1ZSAtIGl0IHdvdWxkIGFwcGVhciBJRSBoYXMgbWFqb3IgaXNzdWVzIHdpdGggaGF2aW5nIHRoZSBwYXRoIG5vdCBoYXZpbmcgCQkJICogYSB0cmFpbGluZyBzbGFzaCBvbiBpdC4gV2UgbmVlZCB0aGUgY29va2llIHRvIGJlIGF2YWlsYWJsZSBiYXNlZCBvbiB0aGUgcGF0aCwgc28gd2UgCQkJICogaGF2ZSB0byBhcHBlbmQgdGhlIGZpbGUgbmFtZSB0byB0aGUgY29va2llIG5hbWUuIEFwcGFsbGluZy4gVGhhbmtzIHRvIHZleCBmb3IgYWRkaW5nIHRoZSAJCQkgKiBwYXRjaCB0byB1c2UgYXQgbGVhc3Qgc29tZSBvZiB0aGUgcGF0aCAJCQkgKi8gCQkJdmFyIGFQYXJ0cyA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpOyAJCQl2YXIgc05hbWVGaWxlID0gc05hbWUgKyAnXycgKyBhUGFydHMucG9wKCkucmVwbGFjZSgvW1wvOl0vZywiIikudG9Mb3dlckNhc2UoKTsgCQkJdmFyIHNGdWxsQ29va2llLCBvRGF0YTsgCQkJIAkJCWlmICggZm5DYWxsYmFjayAhPT0gbnVsbCApIAkJCXsgCQkJCW9EYXRhID0gKHR5cGVvZiAkLnBhcnNlSlNPTiA9PSAnZnVuY3Rpb24nKSA/ICAJCQkJCSQucGFyc2VKU09OKCBzVmFsdWUgKSA6IGV2YWwoICcoJytzVmFsdWUrJyknICk7IAkJCQlzRnVsbENvb2tpZSA9IGZuQ2FsbGJhY2soIHNOYW1lRmlsZSwgb0RhdGEsIGRhdGUudG9HTVRTdHJpbmcoKSwgCQkJCQlhUGFydHMuam9pbignLycpKyIvIiApOyAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJc0Z1bGxDb29raWUgPSBzTmFtZUZpbGUgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQoc1ZhbHVlKSArIAkJCQkJIjsgZXhwaXJlcz0iICsgZGF0ZS50b0dNVFN0cmluZygpICsiOyBwYXRoPSIgKyBhUGFydHMuam9pbignLycpKyIvIjsgCQkJfSAJCQkgCQkJLyogQXJlIHdlIGdvaW5nIHRvIGdvIG92ZXIgdGhlIGNvb2tpZSBsaW1pdCBvZiA0S2lCPyBJZiBzbywgdHJ5IHRvIGRlbGV0ZSBhIGNvb2tpZXMgCQkJICogYmVsb25naW5nIHRvIERhdGFUYWJsZXMuIFRoaXMgaXMgRkFSIGZyb20gYnVsbGV0IHByb29mIAkJCSAqLyAJCQl2YXIgc09sZE5hbWU9IiIsIGlPbGRUaW1lPTk5OTk5OTk5OTk5OTk7IAkJCXZhciBpTGVuZ3RoID0gX2ZuUmVhZENvb2tpZSggc05hbWVGaWxlICkhPT1udWxsID8gZG9jdW1lbnQuY29va2llLmxlbmd0aCA6ICAJCQkJc0Z1bGxDb29raWUubGVuZ3RoICsgZG9jdW1lbnQuY29va2llLmxlbmd0aDsgCQkJIAkJCWlmICggaUxlbmd0aCsxMCA+IDQwOTYgKSAvKiBNYWdpYyAxMCBmb3IgcGFkZGluZyAqLyAJCQl7IAkJCQl2YXIgYUNvb2tpZXMgPWRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpOyAJCQkJZm9yICggdmFyIGk9MCwgaUxlbj1hQ29va2llcy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJeyAJCQkJCWlmICggYUNvb2tpZXNbaV0uaW5kZXhPZiggc0Jhc2VOYW1lICkgIT0gLTEgKSAJCQkJCXsgCQkJCQkJLyogSXQncyBhIERhdGFUYWJsZXMgY29va2llLCBzbyBldmFsIGl0IGFuZCBjaGVjayB0aGUgdGltZSBzdGFtcCAqLyAJCQkJCQl2YXIgYVNwbGl0Q29va2llID0gYUNvb2tpZXNbaV0uc3BsaXQoJz0nKTsgCQkJCQkJdHJ5IHsgb0RhdGEgPSBldmFsKCAnKCcrZGVjb2RlVVJJQ29tcG9uZW50KGFTcGxpdENvb2tpZVsxXSkrJyknICk7IH0gCQkJCQkJY2F0Y2goIGUgKSB7IGNvbnRpbnVlOyB9IAkJCQkJCSAJCQkJCQlpZiAoIHR5cGVvZiBvRGF0YS5pQ3JlYXRlICE9ICd1bmRlZmluZWQnICYmIG9EYXRhLmlDcmVhdGUgPCBpT2xkVGltZSApIAkJCQkJCXsgCQkJCQkJCXNPbGROYW1lID0gYVNwbGl0Q29va2llWzBdOyAJCQkJCQkJaU9sZFRpbWUgPSBvRGF0YS5pQ3JlYXRlOyAJCQkJCQl9IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQlpZiAoIHNPbGROYW1lICE9PSAiIiApIAkJCQl7IAkJCQkJZG9jdW1lbnQuY29va2llID0gc09sZE5hbWUrIj07IGV4cGlyZXM9VGh1LCAwMS1KYW4tMTk3MCAwMDowMDowMSBHTVQ7IHBhdGg9IisgCQkJCQkJYVBhcnRzLmpvaW4oJy8nKSArICIvIjsgCQkJCX0gCQkJfSAJCQkgCQkJZG9jdW1lbnQuY29va2llID0gc0Z1bGxDb29raWU7IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mblJlYWRDb29raWUgCQkgKiBQdXJwb3NlOiAgUmVhZCBhbiBvbGQgY29va2llIHRvIGdldCBhIGNvb2tpZSB3aXRoIGFuIG9sZCB0YWJsZSBzdGF0ZSAJCSAqIFJldHVybnM6ICBzdHJpbmc6IC0gY29udGVudHMgb2YgdGhlIGNvb2tpZSAtIG9yIG51bGwgaWYgbm8gY29va2llIHdpdGggdGhhdCBuYW1lIGZvdW5kIAkJICogSW5wdXRzOiAgIHN0cmluZzpzTmFtZSAtIG5hbWUgb2YgdGhlIGNvb2tpZSB0byByZWFkIAkJICovIAkJZnVuY3Rpb24gX2ZuUmVhZENvb2tpZSAoIHNOYW1lICkgCQl7IAkJCXZhciAJCQkJYVBhcnRzID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJyksIAkJCQlzTmFtZUVRID0gc05hbWUgKyAnXycgKyBhUGFydHNbYVBhcnRzLmxlbmd0aC0xXS5yZXBsYWNlKC9bXC86XS9nLCIiKS50b0xvd2VyQ2FzZSgpICsgJz0nLCAJCQkgCXNDb29raWVDb250ZW50cyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpOyAJCQkgCQkJZm9yKCB2YXIgaT0wIDsgaTxzQ29va2llQ29udGVudHMubGVuZ3RoIDsgaSsrICkgCQkJeyAJCQkJdmFyIGMgPSBzQ29va2llQ29udGVudHNbaV07IAkJCQkgCQkJCXdoaWxlIChjLmNoYXJBdCgwKT09JyAnKSAJCQkJeyAJCQkJCWMgPSBjLnN1YnN0cmluZygxLGMubGVuZ3RoKTsgCQkJCX0gCQkJCSAJCQkJaWYgKGMuaW5kZXhPZihzTmFtZUVRKSA9PT0gMCkgCQkJCXsgCQkJCQlyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KCBjLnN1YnN0cmluZyhzTmFtZUVRLmxlbmd0aCxjLmxlbmd0aCkgKTsgCQkJCX0gCQkJfSAJCQlyZXR1cm4gbnVsbDsgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuR2V0VW5pcXVlVGhzIAkJICogUHVycG9zZTogIEdldCBhbiBhcnJheSBvZiB1bmlxdWUgdGggZWxlbWVudHMsIG9uZSBmb3IgZWFjaCBjb2x1bW4gCQkgKiBSZXR1cm5zOiAgYXJyYXkgbm9kZTphUmV0dXJuIC0gbGlzdCBvZiB1bmlxdWUgdGhzIAkJICogSW5wdXRzOiAgIG5vZGU6blRoZWFkIC0gVGhlIHRoZWFkIGVsZW1lbnQgZm9yIHRoZSB0YWJsZSAJCSAqLyAJCWZ1bmN0aW9uIF9mbkdldFVuaXF1ZVRocyAoIG5UaGVhZCApIAkJeyAJCQl2YXIgblRycyA9IG5UaGVhZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKTsgCQkJIAkJCS8qIE5pY2Ugc2ltcGxlIGNhc2UgKi8gCQkJaWYgKCBuVHJzLmxlbmd0aCA9PSAxICkgCQkJeyAJCQkJcmV0dXJuIG5UcnNbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RoJyk7IAkJCX0gCQkJIAkJCS8qIE90aGVyd2lzZSB3ZSBuZWVkIHRvIGZpZ3VyZSBvdXQgdGhlIGxheW91dCBhcnJheSB0byBnZXQgdGhlIG5vZGVzICovIAkJCXZhciBhTGF5b3V0ID0gW10sIGFSZXR1cm4gPSBbXTsgCQkJdmFyIFJPV1NQQU4gPSAyLCBDT0xTUEFOID0gMywgVERFTEVNID0gNDsgCQkJdmFyIGksIGosIGssIGlMZW4sIGpMZW4sIGlDb2x1bW5TaGlmdGVkOyAJCQl2YXIgZm5TaGlmdENvbCA9IGZ1bmN0aW9uICggYSwgaSwgaiApIHsgCQkJCXdoaWxlICggdHlwZW9mIGFbaV1bal0gIT0gJ3VuZGVmaW5lZCcgKSB7IAkJCQkJaisrOyAJCQkJfSAJCQkJcmV0dXJuIGo7IAkJCX07IAkJCXZhciBmbkFkZFJvdyA9IGZ1bmN0aW9uICggaSApIHsgCQkJCWlmICggdHlwZW9mIGFMYXlvdXRbaV0gPT0gJ3VuZGVmaW5lZCcgKSB7IAkJCQkJYUxheW91dFtpXSA9IFtdOyAJCQkJfSAJCQl9OyAJCQkgCQkJLyogQ2FsY3VsYXRlIGEgbGF5b3V0IGFycmF5ICovIAkJCWZvciAoIGk9MCwgaUxlbj1uVHJzLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCXsgCQkJCWZuQWRkUm93KCBpICk7IAkJCQl2YXIgaUNvbHVtbiA9IDA7IAkJCQl2YXIgblRkcyA9IFtdOyAJCQkJIAkJCQlmb3IgKCBqPTAsIGpMZW49blRyc1tpXS5jaGlsZE5vZGVzLmxlbmd0aCA7IGo8akxlbiA7IGorKyApIAkJCQl7IAkJCQkJaWYgKCBuVHJzW2ldLmNoaWxkTm9kZXNbal0ubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PSAiVEQiIHx8IAkJCQkJICAgICBuVHJzW2ldLmNoaWxkTm9kZXNbal0ubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PSAiVEgiICkgCQkJCQl7IAkJCQkJCW5UZHMucHVzaCggblRyc1tpXS5jaGlsZE5vZGVzW2pdICk7IAkJCQkJfSAJCQkJfSAJCQkJIAkJCQlmb3IgKCBqPTAsIGpMZW49blRkcy5sZW5ndGggOyBqPGpMZW4gOyBqKysgKSAJCQkJeyAJCQkJCXZhciBpQ29sc3BhbiA9IG5UZHNbal0uZ2V0QXR0cmlidXRlKCdjb2xzcGFuJykgKiAxOyAJCQkJCXZhciBpUm93c3BhbiA9IG5UZHNbal0uZ2V0QXR0cmlidXRlKCdyb3dzcGFuJykgKiAxOyAJCQkJCSAJCQkJCWlmICggIWlDb2xzcGFuIHx8IGlDb2xzcGFuPT09MCB8fCBpQ29sc3Bhbj09PTEgKSAJCQkJCXsgCQkJCQkJaUNvbHVtblNoaWZ0ZWQgPSBmblNoaWZ0Q29sKCBhTGF5b3V0LCBpLCBpQ29sdW1uICk7IAkJCQkJCWFMYXlvdXRbaV1baUNvbHVtblNoaWZ0ZWRdID0gKG5UZHNbal0ubm9kZU5hbWUudG9VcHBlckNhc2UoKT09IlREIikgPyBUREVMRU0gOiBuVGRzW2pdOyAJCQkJCQlpZiAoIGlSb3dzcGFuIHx8IGlSb3dzcGFuPT09MCB8fCBpUm93c3Bhbj09PTEgKSAJCQkJCQl7IAkJCQkJCQlmb3IgKCBrPTEgOyBrPGlSb3dzcGFuIDsgaysrICkgCQkJCQkJCXsgCQkJCQkJCQlmbkFkZFJvdyggaStrICk7IAkJCQkJCQkJYUxheW91dFtpK2tdW2lDb2x1bW5TaGlmdGVkXSA9IFJPV1NQQU47IAkJCQkJCQl9IAkJCQkJCX0gCQkJCQkJaUNvbHVtbisrOyAJCQkJCX0gCQkJCQllbHNlIAkJCQkJeyAJCQkJCQlpQ29sdW1uU2hpZnRlZCA9IGZuU2hpZnRDb2woIGFMYXlvdXQsIGksIGlDb2x1bW4gKTsgCQkJCQkJZm9yICggaz0wIDsgazxpQ29sc3BhbiA7IGsrKyApIAkJCQkJCXsgCQkJCQkJCWFMYXlvdXRbaV1baUNvbHVtblNoaWZ0ZWQra10gPSBDT0xTUEFOOyAJCQkJCQl9IAkJCQkJCWlDb2x1bW4gKz0gaUNvbHNwYW47IAkJCQkJfSAJCQkJfSAJCQl9IAkJCSAJCQkvKiBDb252ZXJ0IHRoZSBsYXlvdXQgYXJyYXkgaW50byBhIG5vZGUgYXJyYXkgKi8gCQkJZm9yICggaT0wLCBpTGVuPWFMYXlvdXQubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJZm9yICggaj0wLCBqTGVuPWFMYXlvdXRbaV0ubGVuZ3RoIDsgajxqTGVuIDsgaisrICkgCQkJCXsgCQkJCQlpZiAoIHR5cGVvZiBhTGF5b3V0W2ldW2pdID09ICdvYmplY3QnICYmIHR5cGVvZiBhUmV0dXJuW2pdID09ICd1bmRlZmluZWQnICkgCQkJCQl7IAkJCQkJCWFSZXR1cm5bal0gPSBhTGF5b3V0W2ldW2pdOyAJCQkJCX0gCQkJCX0gCQkJfSAJCQkgCQkJcmV0dXJuIGFSZXR1cm47IAkJfSAJCSAJCS8qIAkJICogRnVuY3Rpb246IF9mblNjcm9sbEJhcldpZHRoIAkJICogUHVycG9zZTogIEdldCB0aGUgd2lkdGggb2YgYSBzY3JvbGwgYmFyIGluIHRoaXMgYnJvd3NlciBiZWluZyB1c2VkIAkJICogUmV0dXJuczogIGludDogLSB3aWR0aCBpbiBwaXhlbHMgCQkgKiBJbnB1dHM6ICAgLSAJCSAqIE5vdGVzOiAgICBBbGwgY3JlZGl0IGZvciB0aGlzIGZ1bmN0aW9uIGJlbG9uZ3MgdG8gQWxleGFuZHJlIEdvbWVzLiBUaGFua3MgZm9yIHNoYXJpbmchIAkJICogICBodHRwOi8vd3d3LmFsZXhhbmRyZS1nb21lcy5jb20vP3A9MTE1IAkJICovIAkJZnVuY3Rpb24gX2ZuU2Nyb2xsQmFyV2lkdGggKCkgCQl7ICAgCQkJdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOyAgIAkJCXZhciBzdHlsZSA9IGlubmVyLnN0eWxlOyAJCQlzdHlsZS53aWR0aCA9ICIxMDAlIjsgICAJCQlzdHlsZS5oZWlnaHQgPSAiMjAwcHgiOyAgIAkJCSAJCQl2YXIgb3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgICAJCQlzdHlsZSA9IG91dGVyLnN0eWxlOyAJCQlzdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7ICAgCQkJc3R5bGUudG9wID0gIjBweCI7ICAgCQkJc3R5bGUubGVmdCA9ICIwcHgiOyAgIAkJCXN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsgICAJCQlzdHlsZS53aWR0aCA9ICIyMDBweCI7ICAgCQkJc3R5bGUuaGVpZ2h0ID0gIjE1MHB4IjsgICAJCQlzdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOyAgIAkJCW91dGVyLmFwcGVuZENoaWxkKGlubmVyKTsgICAJCQkgCQkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7ICAgCQkJdmFyIHcxID0gaW5uZXIub2Zmc2V0V2lkdGg7ICAgCQkJb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJzsgICAJCQl2YXIgdzIgPSBpbm5lci5vZmZzZXRXaWR0aDsgICAJCQlpZiAoIHcxID09IHcyICkgCQkJeyAJCQkJdzIgPSBvdXRlci5jbGllbnRXaWR0aDsgICAJCQl9IAkJCSAJCQlkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG91dGVyKTsgIAkJCXJldHVybiAodzEgLSB3Mik7ICAgCQl9IAkJIAkJLyogCQkgKiBGdW5jdGlvbjogX2ZuQXBwbHlUb0NoaWxkcmVuIAkJICogUHVycG9zZTogIEFwcGx5IGEgZ2l2ZW4gZnVuY3Rpb24gdG8gdGhlIGRpc3BsYXkgY2hpbGQgbm9kZXMgb2YgYW4gZWxlbWVudCBhcnJheSAodHlwaWNhbGx5IAkJICogICBURCBjaGlsZHJlbiBvZiBUUiByb3dzIAkJICogUmV0dXJuczogIC0gKGRvbmUgYnkgcmVmZXJlbmNlKSAJCSAqIElucHV0czogICBmdW5jdGlvbjpmbiAtIE1ldGhvZCB0byBhcHBseSB0byB0aGUgb2JqZWN0cyAJCSAqICAgICAgICAgICBhcnJheSBub2RlczphbjEgLSBMaXN0IG9mIGVsZW1lbnRzIHRvIGxvb2sgdGhyb3VnaCBmb3IgZGlzcGxheSBjaGlsZHJlbiAJCSAqICAgICAgICAgICBhcnJheSBub2RlczphbjIgLSBBbm90aGVyIGxpc3QgKGlkZW50aWNhbCBzdHJ1Y3R1cmUgdG8gdGhlIGZpcnN0KSAtIG9wdGlvbmFsIAkJICovIAkJZnVuY3Rpb24gX2ZuQXBwbHlUb0NoaWxkcmVuKCBmbiwgYW4xLCBhbjIgKSAJCXsgCQkJZm9yICggdmFyIGk9MCwgaUxlbj1hbjEubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkgCQkJeyAJCQkJZm9yICggdmFyIGo9MCwgakxlbj1hbjFbaV0uY2hpbGROb2Rlcy5sZW5ndGggOyBqPGpMZW4gOyBqKysgKSAJCQkJeyAJCQkJCWlmICggYW4xW2ldLmNoaWxkTm9kZXNbal0ubm9kZVR5cGUgPT0gMSApIAkJCQkJeyAJCQkJCQlpZiAoIHR5cGVvZiBhbjIgIT0gJ3VuZGVmaW5lZCcgKSAJCQkJCQl7IAkJCQkJCQlmbiggYW4xW2ldLmNoaWxkTm9kZXNbal0sIGFuMltpXS5jaGlsZE5vZGVzW2pdICk7IAkJCQkJCX0gCQkJCQkJZWxzZSAJCQkJCQl7IAkJCQkJCQlmbiggYW4xW2ldLmNoaWxkTm9kZXNbal0gKTsgCQkJCQkJfSAJCQkJCX0gCQkJCX0gCQkJfSAJCX0gCQkgCQkvKiAJCSAqIEZ1bmN0aW9uOiBfZm5NYXAgCQkgKiBQdXJwb3NlOiAgU2VlIGlmIGEgcHJvcGVydHkgaXMgZGVmaW5lZCBvbiBvbmUgb2JqZWN0LCBpZiBzbyBhc3NpZ24gaXQgdG8gdGhlIG90aGVyIG9iamVjdCAJCSAqIFJldHVybnM6ICAtIChkb25lIGJ5IHJlZmVyZW5jZSkgCQkgKiBJbnB1dHM6ICAgb2JqZWN0Om9SZXQgLSB0YXJnZXQgb2JqZWN0IAkJICogICAgICAgICAgIG9iamVjdDpvU3JjIC0gc291cmNlIG9iamVjdCAJCSAqICAgICAgICAgICBzdHJpbmc6c05hbWUgLSBwcm9wZXJ0eSAJCSAqICAgICAgICAgICBzdHJpbmc6c01hcHBlZE5hbWUgLSBuYW1lIHRvIG1hcCB0b28gLSBvcHRpb25hbCwgc05hbWUgdXNlZCBpZiBub3QgZ2l2ZW4gCQkgKi8gCQlmdW5jdGlvbiBfZm5NYXAoIG9SZXQsIG9TcmMsIHNOYW1lLCBzTWFwcGVkTmFtZSApIAkJeyAJCQlpZiAoIHR5cGVvZiBzTWFwcGVkTmFtZSA9PSAndW5kZWZpbmVkJyApIAkJCXsgCQkJCXNNYXBwZWROYW1lID0gc05hbWU7IAkJCX0gCQkJaWYgKCB0eXBlb2Ygb1NyY1tzTmFtZV0gIT0gJ3VuZGVmaW5lZCcgKSAJCQl7IAkJCQlvUmV0W3NNYXBwZWROYW1lXSA9IG9TcmNbc05hbWVdOyAJCQl9IAkJfSAJCSAJCS8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqIAkJICogU2VjdGlvbiAtIEFQSSAJCSAqICAJCSAqIEknbSBub3Qgb3Zlcmx5IGhhcHB5IHdpdGggdGhpcyBzb2x1dGlvbiAtIEknZCBtdWNoIHJhdGhlciB0aGF0IHRoZXJlIHdhcyBhIHdheSBvZiBnZXR0aW5nIAkJICogYSBsaXN0IG9mIGFsbCB0aGUgcHJpdmF0ZSBmdW5jdGlvbnMgYW5kIGRvIHdoYXQgd2UgbmVlZCB0byBkeW5hbWljYWxseSAtIGJ1dCB0aGF0IGRvZXNuJ3QgCQkgKiBhcHBlYXIgdG8gYmUgcG9zc2libGUuIEJvbmtlcnMuIEEgYmV0dGVyIHNvbHV0aW9uIHdvdWxkIGJlIHRvIHByb3ZpZGUgYSAnYmluZCcgdHlwZSBvYmplY3QgCQkgKiBUbyBkbyAtIGJpbmQgdHlwZSBtZXRob2QgaW4gRFRzIDIueC4gCQkgKi8gCQl0aGlzLm9BcGkuX2ZuRXh0ZXJuQXBpRnVuYyA9IF9mbkV4dGVybkFwaUZ1bmM7IAkJdGhpcy5vQXBpLl9mbkluaXRhbGlzZSA9IF9mbkluaXRhbGlzZTsgCQl0aGlzLm9BcGkuX2ZuTGFuZ3VhZ2VQcm9jZXNzID0gX2ZuTGFuZ3VhZ2VQcm9jZXNzOyAJCXRoaXMub0FwaS5fZm5BZGRDb2x1bW4gPSBfZm5BZGRDb2x1bW47IAkJdGhpcy5vQXBpLl9mbkNvbHVtbk9wdGlvbnMgPSBfZm5Db2x1bW5PcHRpb25zOyAJCXRoaXMub0FwaS5fZm5BZGREYXRhID0gX2ZuQWRkRGF0YTsgCQl0aGlzLm9BcGkuX2ZuR2F0aGVyRGF0YSA9IF9mbkdhdGhlckRhdGE7IAkJdGhpcy5vQXBpLl9mbkRyYXdIZWFkID0gX2ZuRHJhd0hlYWQ7IAkJdGhpcy5vQXBpLl9mbkRyYXcgPSBfZm5EcmF3OyAJCXRoaXMub0FwaS5fZm5SZURyYXcgPSBfZm5SZURyYXc7IAkJdGhpcy5vQXBpLl9mbkFqYXhVcGRhdGUgPSBfZm5BamF4VXBkYXRlOyAJCXRoaXMub0FwaS5fZm5BamF4VXBkYXRlRHJhdyA9IF9mbkFqYXhVcGRhdGVEcmF3OyAJCXRoaXMub0FwaS5fZm5BZGRPcHRpb25zSHRtbCA9IF9mbkFkZE9wdGlvbnNIdG1sOyAJCXRoaXMub0FwaS5fZm5GZWF0dXJlSHRtbFRhYmxlID0gX2ZuRmVhdHVyZUh0bWxUYWJsZTsgCQl0aGlzLm9BcGkuX2ZuU2Nyb2xsRHJhdyA9IF9mblNjcm9sbERyYXc7IAkJdGhpcy5vQXBpLl9mbkFqdXN0Q29sdW1uU2l6aW5nID0gX2ZuQWp1c3RDb2x1bW5TaXppbmc7IAkJdGhpcy5vQXBpLl9mbkZlYXR1cmVIdG1sRmlsdGVyID0gX2ZuRmVhdHVyZUh0bWxGaWx0ZXI7IAkJdGhpcy5vQXBpLl9mbkZpbHRlckNvbXBsZXRlID0gX2ZuRmlsdGVyQ29tcGxldGU7IAkJdGhpcy5vQXBpLl9mbkZpbHRlckN1c3RvbSA9IF9mbkZpbHRlckN1c3RvbTsgCQl0aGlzLm9BcGkuX2ZuRmlsdGVyQ29sdW1uID0gX2ZuRmlsdGVyQ29sdW1uOyAJCXRoaXMub0FwaS5fZm5GaWx0ZXIgPSBfZm5GaWx0ZXI7IAkJdGhpcy5vQXBpLl9mbkJ1aWxkU2VhcmNoQXJyYXkgPSBfZm5CdWlsZFNlYXJjaEFycmF5OyAJCXRoaXMub0FwaS5fZm5CdWlsZFNlYXJjaFJvdyA9IF9mbkJ1aWxkU2VhcmNoUm93OyAJCXRoaXMub0FwaS5fZm5GaWx0ZXJDcmVhdGVTZWFyY2ggPSBfZm5GaWx0ZXJDcmVhdGVTZWFyY2g7IAkJdGhpcy5vQXBpLl9mbkRhdGFUb1NlYXJjaCA9IF9mbkRhdGFUb1NlYXJjaDsgCQl0aGlzLm9BcGkuX2ZuU29ydCA9IF9mblNvcnQ7IAkJdGhpcy5vQXBpLl9mblNvcnRBdHRhY2hMaXN0ZW5lciA9IF9mblNvcnRBdHRhY2hMaXN0ZW5lcjsgCQl0aGlzLm9BcGkuX2ZuU29ydGluZ0NsYXNzZXMgPSBfZm5Tb3J0aW5nQ2xhc3NlczsgCQl0aGlzLm9BcGkuX2ZuRmVhdHVyZUh0bWxQYWdpbmF0ZSA9IF9mbkZlYXR1cmVIdG1sUGFnaW5hdGU7IAkJdGhpcy5vQXBpLl9mblBhZ2VDaGFuZ2UgPSBfZm5QYWdlQ2hhbmdlOyAJCXRoaXMub0FwaS5fZm5GZWF0dXJlSHRtbEluZm8gPSBfZm5GZWF0dXJlSHRtbEluZm87IAkJdGhpcy5vQXBpLl9mblVwZGF0ZUluZm8gPSBfZm5VcGRhdGVJbmZvOyAJCXRoaXMub0FwaS5fZm5GZWF0dXJlSHRtbExlbmd0aCA9IF9mbkZlYXR1cmVIdG1sTGVuZ3RoOyAJCXRoaXMub0FwaS5fZm5GZWF0dXJlSHRtbFByb2Nlc3NpbmcgPSBfZm5GZWF0dXJlSHRtbFByb2Nlc3Npbmc7IAkJdGhpcy5vQXBpLl9mblByb2Nlc3NpbmdEaXNwbGF5ID0gX2ZuUHJvY2Vzc2luZ0Rpc3BsYXk7IAkJdGhpcy5vQXBpLl9mblZpc2libGVUb0NvbHVtbkluZGV4ID0gX2ZuVmlzaWJsZVRvQ29sdW1uSW5kZXg7IAkJdGhpcy5vQXBpLl9mbkNvbHVtbkluZGV4VG9WaXNpYmxlID0gX2ZuQ29sdW1uSW5kZXhUb1Zpc2libGU7IAkJdGhpcy5vQXBpLl9mbk5vZGVUb0RhdGFJbmRleCA9IF9mbk5vZGVUb0RhdGFJbmRleDsgCQl0aGlzLm9BcGkuX2ZuVmlzYmxlQ29sdW1ucyA9IF9mblZpc2JsZUNvbHVtbnM7IAkJdGhpcy5vQXBpLl9mbkNhbGN1bGF0ZUVuZCA9IF9mbkNhbGN1bGF0ZUVuZDsgCQl0aGlzLm9BcGkuX2ZuQ29udmVydFRvV2lkdGggPSBfZm5Db252ZXJ0VG9XaWR0aDsgCQl0aGlzLm9BcGkuX2ZuQ2FsY3VsYXRlQ29sdW1uV2lkdGhzID0gX2ZuQ2FsY3VsYXRlQ29sdW1uV2lkdGhzOyAJCXRoaXMub0FwaS5fZm5TY3JvbGxpbmdXaWR0aEFkanVzdCA9IF9mblNjcm9sbGluZ1dpZHRoQWRqdXN0OyAJCXRoaXMub0FwaS5fZm5HZXRXaWRlc3ROb2RlID0gX2ZuR2V0V2lkZXN0Tm9kZTsgCQl0aGlzLm9BcGkuX2ZuR2V0TWF4TGVuU3RyaW5nID0gX2ZuR2V0TWF4TGVuU3RyaW5nOyAJCXRoaXMub0FwaS5fZm5TdHJpbmdUb0NzcyA9IF9mblN0cmluZ1RvQ3NzOyAJCXRoaXMub0FwaS5fZm5BcnJheUNtcCA9IF9mbkFycmF5Q21wOyAJCXRoaXMub0FwaS5fZm5EZXRlY3RUeXBlID0gX2ZuRGV0ZWN0VHlwZTsgCQl0aGlzLm9BcGkuX2ZuU2V0dGluZ3NGcm9tTm9kZSA9IF9mblNldHRpbmdzRnJvbU5vZGU7IAkJdGhpcy5vQXBpLl9mbkdldERhdGFNYXN0ZXIgPSBfZm5HZXREYXRhTWFzdGVyOyAJCXRoaXMub0FwaS5fZm5HZXRUck5vZGVzID0gX2ZuR2V0VHJOb2RlczsgCQl0aGlzLm9BcGkuX2ZuR2V0VGROb2RlcyA9IF9mbkdldFRkTm9kZXM7IAkJdGhpcy5vQXBpLl9mbkVzY2FwZVJlZ2V4ID0gX2ZuRXNjYXBlUmVnZXg7IAkJdGhpcy5vQXBpLl9mbkRlbGV0ZUluZGV4ID0gX2ZuRGVsZXRlSW5kZXg7IAkJdGhpcy5vQXBpLl9mblJlT3JkZXJJbmRleCA9IF9mblJlT3JkZXJJbmRleDsgCQl0aGlzLm9BcGkuX2ZuQ29sdW1uT3JkZXJpbmcgPSBfZm5Db2x1bW5PcmRlcmluZzsgCQl0aGlzLm9BcGkuX2ZuTG9nID0gX2ZuTG9nOyAJCXRoaXMub0FwaS5fZm5DbGVhclRhYmxlID0gX2ZuQ2xlYXJUYWJsZTsgCQl0aGlzLm9BcGkuX2ZuU2F2ZVN0YXRlID0gX2ZuU2F2ZVN0YXRlOyAJCXRoaXMub0FwaS5fZm5Mb2FkU3RhdGUgPSBfZm5Mb2FkU3RhdGU7IAkJdGhpcy5vQXBpLl9mbkNyZWF0ZUNvb2tpZSA9IF9mbkNyZWF0ZUNvb2tpZTsgCQl0aGlzLm9BcGkuX2ZuUmVhZENvb2tpZSA9IF9mblJlYWRDb29raWU7IAkJdGhpcy5vQXBpLl9mbkdldFVuaXF1ZVRocyA9IF9mbkdldFVuaXF1ZVRoczsgCQl0aGlzLm9BcGkuX2ZuU2Nyb2xsQmFyV2lkdGggPSBfZm5TY3JvbGxCYXJXaWR0aDsgCQl0aGlzLm9BcGkuX2ZuQXBwbHlUb0NoaWxkcmVuID0gX2ZuQXBwbHlUb0NoaWxkcmVuOyAJCXRoaXMub0FwaS5fZm5NYXAgPSBfZm5NYXA7IAkJIAkJIAkJLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogCQkgKiBTZWN0aW9uIC0gQ29uc3RydWN0b3IgCQkgKi8gCQkgCQkvKiBXYW50IHRvIGJlIGFibGUgdG8gcmVmZXJlbmNlICJ0aGlzIiBpbnNpZGUgdGhlIHRoaXMuZWFjaCBmdW5jdGlvbiAqLyAJCXZhciBfdGhhdCA9IHRoaXM7IAkJcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIAkJeyAJCQl2YXIgaT0wLCBpTGVuLCBqLCBqTGVuLCBrLCBrTGVuOyAJCQkgCQkJLyogQ2hlY2sgdG8gc2VlIGlmIHdlIGFyZSByZS1pbml0YWxpc2luZyBhIHRhYmxlICovIAkJCWZvciAoIGk9MCwgaUxlbj1fYW9TZXR0aW5ncy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQl7IAkJCQkvKiBCYXNlIGNoZWNrIG9uIHRhYmxlIG5vZGUgKi8gCQkJCWlmICggX2FvU2V0dGluZ3NbaV0ublRhYmxlID09IHRoaXMgKSAJCQkJeyAJCQkJCWlmICggdHlwZW9mIG9Jbml0ID09ICd1bmRlZmluZWQnIHx8ICAJCQkJCSAgICggdHlwZW9mIG9Jbml0LmJSZXRyaWV2ZSAhPSAndW5kZWZpbmVkJyAmJiBvSW5pdC5iUmV0cmlldmUgPT09IHRydWUgKSApIAkJCQkJeyAJCQkJCQlyZXR1cm4gX2FvU2V0dGluZ3NbaV0ub0luc3RhbmNlOyAJCQkJCX0gCQkJCQllbHNlIGlmICggdHlwZW9mIG9Jbml0LmJEZXN0cm95ICE9ICd1bmRlZmluZWQnICYmIG9Jbml0LmJEZXN0cm95ID09PSB0cnVlICkgCQkJCQl7IAkJCQkJCV9hb1NldHRpbmdzW2ldLm9JbnN0YW5jZS5mbkRlc3Ryb3koKTsgCQkJCQkJYnJlYWs7IAkJCQkJfSAJCQkJCWVsc2UgCQkJCQl7IAkJCQkJCV9mbkxvZyggX2FvU2V0dGluZ3NbaV0sIDAsICJDYW5ub3QgcmVpbml0aWFsaXNlIERhdGFUYWJsZS5cblxuIisgCQkJCQkJCSJUbyByZXRyaWV2ZSB0aGUgRGF0YVRhYmxlcyBvYmplY3QgZm9yIHRoaXMgdGFibGUsIHBsZWFzZSBwYXNzIGVpdGhlciBubyBhcmd1bWVudHMgIisgCQkJCQkJCSJ0byB0aGUgZGF0YVRhYmxlKCkgZnVuY3Rpb24sIG9yIHNldCBiUmV0cmlldmUgdG8gdHJ1ZS4gQWx0ZXJuYXRpdmVseSwgdG8gZGVzdG9yeSAiKyAJCQkJCQkJInRoZSBvbGQgdGFibGUgYW5kIGNyZWF0ZSBhIG5ldyBvbmUsIHNldCBiRGVzdHJveSB0byB0cnVlIChub3RlIHRoYXQgYSBsb3Qgb2YgIisgCQkJCQkJCSJjaGFuZ2VzIHRvIHRoZSBjb25maWd1cmF0aW9uIGNhbiBiZSBtYWRlIHRocm91Z2ggdGhlIEFQSSB3aGljaCBpcyB1c3VhbGx5IG11Y2ggIisgCQkJCQkJCSJmYXN0ZXIpLiIgKTsgCQkJCQkJcmV0dXJuOyAJCQkJCX0gCQkJCX0gCQkJCSAJCQkJLyogSWYgdGhlIGVsZW1lbnQgd2UgYXJlIGluaXRpYWxpc2luZyBoYXMgdGhlIHNhbWUgSUQgYXMgYSB0YWJsZSB3aGljaCB3YXMgcHJldmlvdXNseSAJCQkJICogaW5pdGlhbGlzZWQsIGJ1dCB0aGUgdGFibGUgbm9kZXMgZG9uJ3QgbWF0Y2ggKGZyb20gYmVmb3JlKSB0aGVuIHdlIGRlc3RvcnkgdGhlIG9sZCAJCQkJICogaW5zdGFuY2UgYnkgc2ltcGx5IGRlbGV0aW5nIGl0LiBUaGlzIGlzIHVuZGVyIHRoZSBhc3N1bXB0aW9uIHRoYXQgdGhlIHRhYmxlIGhhcyBiZWVuIAkJCQkgKiBkZXN0cm95ZWQgYnkgb3RoZXIgbWV0aG9kcy4gQW55b25lIHVzaW5nIG5vbi1pZCBzZWxlY3RvcnMgd2lsbCBuZWVkIHRvIGRvIHRoaXMgbWFudWFsbHkgCQkJCSAqLyAJCQkJaWYgKCBfYW9TZXR0aW5nc1tpXS5zVGFibGVJZCAhPT0gIiIgJiYgX2FvU2V0dGluZ3NbaV0uc1RhYmxlSWQgPT0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2lkJykgKSAJCQkJeyAJCQkJCV9hb1NldHRpbmdzLnNwbGljZSggaSwgMSApOyAJCQkJCWJyZWFrOyAJCQkJfSAJCQl9IAkJCSAJCQkvKiBNYWtlIGEgY29tcGxldGUgYW5kIGluZGVwZW5kZW50IGNvcHkgb2YgdGhlIHNldHRpbmdzIG9iamVjdCAqLyAJCQl2YXIgb1NldHRpbmdzID0gbmV3IGNsYXNzU2V0dGluZ3MoKTsgCQkJX2FvU2V0dGluZ3MucHVzaCggb1NldHRpbmdzICk7IAkJCSAJCQl2YXIgYkluaXRIYW5kZWRPZmYgPSBmYWxzZTsgCQkJdmFyIGJVc2VQYXNzZWREYXRhID0gZmFsc2U7IAkJCSAJCQkvKiBTZXQgdGhlIGlkICovIAkJCXZhciBzSWQgPSB0aGlzLmdldEF0dHJpYnV0ZSggJ2lkJyApOyAJCQlpZiAoIHNJZCAhPT0gbnVsbCApIAkJCXsgCQkJCW9TZXR0aW5ncy5zVGFibGVJZCA9IHNJZDsgCQkJCW9TZXR0aW5ncy5zSW5zdGFuY2UgPSBzSWQ7IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQlvU2V0dGluZ3Muc0luc3RhbmNlID0gX29FeHQuX29FeHRlcm5Db25maWcuaU5leHRVbmlxdWUgKys7IAkJCX0gCQkJIAkJCS8qIFNhbml0eSBjaGVjayAqLyAJCQlpZiAoIHRoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPSAndGFibGUnICkgCQkJeyAJCQkJX2ZuTG9nKCBvU2V0dGluZ3MsIDAsICJBdHRlbXB0ZWQgdG8gaW5pdGlhbGlzZSBEYXRhVGFibGVzIG9uIGEgbm9kZSB3aGljaCBpcyBub3QgYSAiKyAJCQkJCSJ0YWJsZTogIit0aGlzLm5vZGVOYW1lICk7IAkJCQlyZXR1cm47IAkJCX0gCQkJIAkJCS8qIFN0b3JlICd0aGlzJyBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0IGZvciBsYXRlciByZXRyaWV2YWwgKi8gCQkJb1NldHRpbmdzLm9JbnN0YW5jZSA9IF90aGF0OyAJCQkgCQkJLyogU2V0IHRoZSB0YWJsZSBub2RlICovIAkJCW9TZXR0aW5ncy5uVGFibGUgPSB0aGlzOyAJCQkgCQkJLyogQmluZCB0aGUgQVBJIGZ1bmN0aW9ucyB0byB0aGUgc2V0dGluZ3MsIHNvIHdlIGNhbiBwZXJmb3JtIGFjdGlvbnMgd2hlbmV2ZXIgb1NldHRpbmdzIGlzIAkJCSAqIGF2YWlsYWJsZSAJCQkgKi8gCQkJb1NldHRpbmdzLm9BcGkgPSBfdGhhdC5vQXBpOyAJCQkgCQkJLyogU3RhdGUgdGhlIHRhYmxlJ3Mgd2lkdGggZm9yIGlmIGEgZGVzdHJveSBpcyBjYWxsZWQgYXQgYSBsYXRlciB0aW1lICovIAkJCW9TZXR0aW5ncy5zRGVzdHJveVdpZHRoID0gJCh0aGlzKS53aWR0aCgpOyAJCQkgCQkJLyogU3RvcmUgdGhlIGZlYXR1cmVzIHRoYXQgd2UgaGF2ZSBhdmFpbGFibGUgKi8gCQkJaWYgKCB0eXBlb2Ygb0luaXQgIT0gJ3VuZGVmaW5lZCcgJiYgb0luaXQgIT09IG51bGwgKSAJCQl7IAkJCQlvU2V0dGluZ3Mub0luaXQgPSBvSW5pdDsgCQkJCV9mbk1hcCggb1NldHRpbmdzLm9GZWF0dXJlcywgb0luaXQsICJiUGFnaW5hdGUiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncy5vRmVhdHVyZXMsIG9Jbml0LCAiYkxlbmd0aENoYW5nZSIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLm9GZWF0dXJlcywgb0luaXQsICJiRmlsdGVyIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub0ZlYXR1cmVzLCBvSW5pdCwgImJTb3J0IiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub0ZlYXR1cmVzLCBvSW5pdCwgImJJbmZvIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub0ZlYXR1cmVzLCBvSW5pdCwgImJQcm9jZXNzaW5nIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub0ZlYXR1cmVzLCBvSW5pdCwgImJBdXRvV2lkdGgiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncy5vRmVhdHVyZXMsIG9Jbml0LCAiYlNvcnRDbGFzc2VzIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub0ZlYXR1cmVzLCBvSW5pdCwgImJTZXJ2ZXJTaWRlIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub1Njcm9sbCwgb0luaXQsICJzU2Nyb2xsWCIsICJzWCIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLm9TY3JvbGwsIG9Jbml0LCAic1Njcm9sbFhJbm5lciIsICJzWElubmVyIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3Mub1Njcm9sbCwgb0luaXQsICJzU2Nyb2xsWSIsICJzWSIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLm9TY3JvbGwsIG9Jbml0LCAiYlNjcm9sbENvbGxhcHNlIiwgImJDb2xsYXBzZSIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLm9TY3JvbGwsIG9Jbml0LCAiYlNjcm9sbEluZmluaXRlIiwgImJJbmZpbml0ZSIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLm9TY3JvbGwsIG9Jbml0LCAiaVNjcm9sbExvYWRHYXAiLCAiaUxvYWRHYXAiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncy5vU2Nyb2xsLCBvSW5pdCwgImJTY3JvbGxBdXRvQ3NzIiwgImJBdXRvQ3NzIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3MsIG9Jbml0LCAiYXNTdHJpcENsYXNzZXMiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncywgb0luaXQsICJmblJvd0NhbGxiYWNrIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3MsIG9Jbml0LCAiZm5IZWFkZXJDYWxsYmFjayIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLCBvSW5pdCwgImZuRm9vdGVyQ2FsbGJhY2siICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncywgb0luaXQsICJmbkNvb2tpZUNhbGxiYWNrIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3MsIG9Jbml0LCAiZm5Jbml0Q29tcGxldGUiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncywgb0luaXQsICJmblNlcnZlckRhdGEiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncywgb0luaXQsICJmbkZvcm1hdE51bWJlciIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLCBvSW5pdCwgImFhU29ydGluZyIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLCBvSW5pdCwgImFhU29ydGluZ0ZpeGVkIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3MsIG9Jbml0LCAiYUxlbmd0aE1lbnUiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncywgb0luaXQsICJzUGFnaW5hdGlvblR5cGUiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncywgb0luaXQsICJzQWpheFNvdXJjZSIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLCBvSW5pdCwgImlDb29raWVEdXJhdGlvbiIgKTsgCQkJCV9mbk1hcCggb1NldHRpbmdzLCBvSW5pdCwgInNDb29raWVQcmVmaXgiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncywgb0luaXQsICJzRG9tIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3MsIG9Jbml0LCAib1NlYXJjaCIsICJvUHJldmlvdXNTZWFyY2giICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncywgb0luaXQsICJhb1NlYXJjaENvbHMiLCAiYW9QcmVTZWFyY2hDb2xzIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3MsIG9Jbml0LCAiaURpc3BsYXlMZW5ndGgiLCAiX2lEaXNwbGF5TGVuZ3RoIiApOyAJCQkJX2ZuTWFwKCBvU2V0dGluZ3MsIG9Jbml0LCAiYkpRdWVyeVVJIiwgImJKVUkiICk7IAkJCQlfZm5NYXAoIG9TZXR0aW5ncy5vTGFuZ3VhZ2UsIG9Jbml0LCAiZm5JbmZvQ2FsbGJhY2siICk7IAkJCQkgCQkJCS8qIENhbGxiYWNrIGZ1bmN0aW9ucyB3aGljaCBhcmUgYXJyYXkgZHJpdmVuICovIAkJCQlpZiAoIHR5cGVvZiBvSW5pdC5mbkRyYXdDYWxsYmFjayA9PSAnZnVuY3Rpb24nICkgCQkJCXsgCQkJCQlvU2V0dGluZ3MuYW9EcmF3Q2FsbGJhY2sucHVzaCggeyAJCQkJCQkiZm4iOiBvSW5pdC5mbkRyYXdDYWxsYmFjaywgCQkJCQkJInNOYW1lIjogInVzZXIiIAkJCQkJfSApOyAJCQkJfSAJCQkJIAkJCQlpZiAoIHR5cGVvZiBvSW5pdC5mblN0YXRlU2F2ZUNhbGxiYWNrID09ICdmdW5jdGlvbicgKSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5hb1N0YXRlU2F2ZS5wdXNoKCB7IAkJCQkJCSJmbiI6IG9Jbml0LmZuU3RhdGVTYXZlQ2FsbGJhY2ssIAkJCQkJCSJzTmFtZSI6ICJ1c2VyIiAJCQkJCX0gKTsgCQkJCX0gCQkJCSAJCQkJaWYgKCB0eXBlb2Ygb0luaXQuZm5TdGF0ZUxvYWRDYWxsYmFjayA9PSAnZnVuY3Rpb24nICkgCQkJCXsgCQkJCQlvU2V0dGluZ3MuYW9TdGF0ZUxvYWQucHVzaCggeyAJCQkJCQkiZm4iOiBvSW5pdC5mblN0YXRlTG9hZENhbGxiYWNrLCAJCQkJCQkic05hbWUiOiAidXNlciIgCQkJCQl9ICk7IAkJCQl9IAkJCQkgCQkJCWlmICggb1NldHRpbmdzLm9GZWF0dXJlcy5iU2VydmVyU2lkZSAmJiBvU2V0dGluZ3Mub0ZlYXR1cmVzLmJTb3J0ICYmIAkJCQkJICAgb1NldHRpbmdzLm9GZWF0dXJlcy5iU29ydENsYXNzZXMgKSAJCQkJeyAJCQkJCS8qIEVuYWJsZSBzb3J0IGNsYXNzZXMgZm9yIHNlcnZlci1zaWRlIHByb2Nlc3NpbmcuIFNhZmUgdG8gZG8gaXQgaGVyZSwgc2luY2Ugc2VydmVyLXNpZGUgCQkJCQkgKiBwcm9jZXNzaW5nIG11c3QgYmUgZW5hYmxlZCBieSB0aGUgZGV2ZWxvcGVyIAkJCQkJICovIAkJCQkJb1NldHRpbmdzLmFvRHJhd0NhbGxiYWNrLnB1c2goIHsgCQkJCQkJImZuIjogX2ZuU29ydGluZ0NsYXNzZXMsIAkJCQkJCSJzTmFtZSI6ICJzZXJ2ZXJfc2lkZV9zb3J0X2NsYXNzZXMiIAkJCQkJfSApOyAJCQkJfSAJCQkJIAkJCQlpZiAoIHR5cGVvZiBvSW5pdC5iSlF1ZXJ5VUkgIT0gJ3VuZGVmaW5lZCcgJiYgb0luaXQuYkpRdWVyeVVJICkgCQkJCXsgCQkJCQkvKiBVc2UgdGhlIEpVSSBjbGFzc2VzIG9iamVjdCBmb3IgZGlzcGxheS4gWW91IGNvdWxkIGNsb25lIHRoZSBvU3RkQ2xhc3NlcyBvYmplY3QgaWYgIAkJCQkJICogeW91IHdhbnQgdG8gaGF2ZSBtdWx0aXBsZSB0YWJsZXMgd2l0aCBtdWx0aXBsZSBpbmRlcGVuZGVudCBjbGFzc2VzICAJCQkJCSAqLyAJCQkJCW9TZXR0aW5ncy5vQ2xhc3NlcyA9IF9vRXh0Lm9KVUlDbGFzc2VzOyAJCQkJCSAJCQkJCWlmICggdHlwZW9mIG9Jbml0LnNEb20gPT0gJ3VuZGVmaW5lZCcgKSAJCQkJCXsgCQkJCQkJLyogU2V0IHRoZSBET00gdG8gdXNlIGEgbGF5b3V0IHN1aXRhYmxlIGZvciBqUXVlcnkgVUkncyB0aGVtaW5nICovIAkJCQkJCW9TZXR0aW5ncy5zRG9tID0gJzwiSCJsZnI+dDwiRiJpcD4nOyAJCQkJCX0gCQkJCX0gCQkJCSAJCQkJLyogQ2FsY3VsYXRlIHRoZSBzY3JvbGwgYmFyIHdpZHRoIGFuZCBjYWNoZSBpdCBmb3IgdXNlIGxhdGVyIG9uICovIAkJCQlpZiAoIG9TZXR0aW5ncy5vU2Nyb2xsLnNYICE9PSAiIiB8fCBvU2V0dGluZ3Mub1Njcm9sbC5zWSAhPT0gIiIgKSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5vU2Nyb2xsLmlCYXJXaWR0aCA9IF9mblNjcm9sbEJhcldpZHRoKCk7IAkJCQl9IAkJCQkgCQkJCWlmICggdHlwZW9mIG9Jbml0LmlEaXNwbGF5U3RhcnQgIT0gJ3VuZGVmaW5lZCcgJiYgIAkJCQkgICAgIHR5cGVvZiBvU2V0dGluZ3MuaUluaXREaXNwbGF5U3RhcnQgPT0gJ3VuZGVmaW5lZCcgKSAJCQkJeyAJCQkJCS8qIERpc3BsYXkgc3RhcnQgcG9pbnQsIHRha2luZyBpbnRvIGFjY291bnQgdGhlIHNhdmUgc2F2aW5nICovIAkJCQkJb1NldHRpbmdzLmlJbml0RGlzcGxheVN0YXJ0ID0gb0luaXQuaURpc3BsYXlTdGFydDsgCQkJCQlvU2V0dGluZ3MuX2lEaXNwbGF5U3RhcnQgPSBvSW5pdC5pRGlzcGxheVN0YXJ0OyAJCQkJfSAJCQkJIAkJCQkvKiBNdXN0IGJlIGRvbmUgYWZ0ZXIgZXZlcnl0aGluZyB3aGljaCBjYW4gYmUgb3ZlcnJpZGRlbiBieSBhIGNvb2tpZSEgKi8gCQkJCWlmICggdHlwZW9mIG9Jbml0LmJTdGF0ZVNhdmUgIT0gJ3VuZGVmaW5lZCcgKSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5vRmVhdHVyZXMuYlN0YXRlU2F2ZSA9IG9Jbml0LmJTdGF0ZVNhdmU7IAkJCQkJX2ZuTG9hZFN0YXRlKCBvU2V0dGluZ3MsIG9Jbml0ICk7IAkJCQkJb1NldHRpbmdzLmFvRHJhd0NhbGxiYWNrLnB1c2goIHsgCQkJCQkJImZuIjogX2ZuU2F2ZVN0YXRlLCAJCQkJCQkic05hbWUiOiAic3RhdGVfc2F2ZSIgCQkJCQl9ICk7IAkJCQl9IAkJCQkgCQkJCWlmICggdHlwZW9mIG9Jbml0LmFhRGF0YSAhPSAndW5kZWZpbmVkJyApIAkJCQl7IAkJCQkJYlVzZVBhc3NlZERhdGEgPSB0cnVlOyAJCQkJfSAJCQkJIAkJCQkvKiBCYWNrd2FyZHMgY29tcGF0YWJpbGl0eSAqLyAJCQkJLyogYW9Db2x1bW5zIC8gYW9EYXRhIC0gcmVtb3ZlIGF0IHNvbWUgcG9pbnQuLi4gKi8gCQkJCWlmICggdHlwZW9mIG9Jbml0ICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiBvSW5pdC5hb0RhdGEgIT0gJ3VuZGVmaW5lZCcgKSAJCQkJeyAJCQkJCW9Jbml0LmFvQ29sdW1ucyA9IG9Jbml0LmFvRGF0YTsgCQkJCX0gCQkJCSAJCQkJLyogTGFuZ3VhZ2UgZGVmaW5pdGlvbnMgKi8gCQkJCWlmICggdHlwZW9mIG9Jbml0Lm9MYW5ndWFnZSAhPSAndW5kZWZpbmVkJyApIAkJCQl7IAkJCQkJaWYgKCB0eXBlb2Ygb0luaXQub0xhbmd1YWdlLnNVcmwgIT0gJ3VuZGVmaW5lZCcgJiYgb0luaXQub0xhbmd1YWdlLnNVcmwgIT09ICIiICkgCQkJCQl7IAkJCQkJCS8qIEdldCB0aGUgbGFuZ3VhZ2UgZGVmaW5pdGlvbnMgZnJvbSBhIGZpbGUgKi8gCQkJCQkJb1NldHRpbmdzLm9MYW5ndWFnZS5zVXJsID0gb0luaXQub0xhbmd1YWdlLnNVcmw7IAkJCQkJCSQuZ2V0SlNPTiggb1NldHRpbmdzLm9MYW5ndWFnZS5zVXJsLCBudWxsLCBmdW5jdGlvbigganNvbiApIHsgIAkJCQkJCQlfZm5MYW5ndWFnZVByb2Nlc3MoIG9TZXR0aW5ncywganNvbiwgdHJ1ZSApOyB9ICk7IAkJCQkJCWJJbml0SGFuZGVkT2ZmID0gdHJ1ZTsgCQkJCQl9IAkJCQkJZWxzZSAJCQkJCXsgCQkJCQkJX2ZuTGFuZ3VhZ2VQcm9jZXNzKCBvU2V0dGluZ3MsIG9Jbml0Lm9MYW5ndWFnZSwgZmFsc2UgKTsgCQkJCQl9IAkJCQl9IAkJCQkvKiBXYXJuaW5nOiBUaGUgX2ZuTGFuZ3VhZ2VQcm9jZXNzIGZ1bmN0aW9uIGlzIGFzeW5jIHRvIHRoZSByZW1haW5kZXIgb2YgdGhpcyBmdW5jdGlvbiBkdWUgCQkJCSAqIHRvIHRoZSBYSFIuIFdlIHVzZSBfYkluaXRpYWxpc2VkIGluIF9mbkxhbmd1YWdlUHJvY2VzcygpIHRvIGNoZWNrIHRoaXMgdGhlIHByb2Nlc3NpbmcgIAkJCQkgKiBiZWxvdyBpcyBjb21wbGV0ZS4gVGhlIHJlYXNvbiBmb3Igc3BsaXRpbmcgaXQgbGlrZSB0aGlzIGlzIG9wdGltaXNhdGlvbiAtIHdlIGNhbiBmaXJlIAkJCQkgKiBvZmYgdGhlIFhIUiAoaWYgbmVlZGVkKSBhbmQgdGhlbiBjb250aW51ZSBwcm9jZXNzaW5nIHRoZSBkYXRhLiAJCQkJICovIAkJCX0gCQkJZWxzZSAJCQl7IAkJCQkvKiBDcmVhdGUgYSBkdW1teSBvYmplY3QgZm9yIHF1aWNrIG1hbmlwdWxhdGlvbiBsYXRlciBvbi4gKi8gCQkJCW9Jbml0ID0ge307IAkJCX0gCQkJIAkJCS8qIAkJCSAqIFN0cmlwZXMgCQkJICogQWRkIHRoZSBzdHJpcCBjbGFzc2VzIG5vdyB0aGF0IHdlIGtub3cgd2hpY2ggY2xhc3NlcyB0byBhcHBseSAtIHVubGVzcyBvdmVycnVsZWQgCQkJICovIAkJCWlmICggdHlwZW9mIG9Jbml0LmFzU3RyaXBDbGFzc2VzID09ICd1bmRlZmluZWQnICkgCQkJeyAJCQkJb1NldHRpbmdzLmFzU3RyaXBDbGFzc2VzLnB1c2goIG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU3RyaXBPZGQgKTsgCQkJCW9TZXR0aW5ncy5hc1N0cmlwQ2xhc3Nlcy5wdXNoKCBvU2V0dGluZ3Mub0NsYXNzZXMuc1N0cmlwRXZlbiApOyAJCQl9IAkJCSAJCQkvKiBSZW1vdmUgcm93IHN0cmlwZSBjbGFzc2VzIGlmIHRoZXkgYXJlIGFscmVhZHkgb24gdGhlIHRhYmxlIHJvdyAqLyAJCQl2YXIgYlN0cmlwZVJlbW92ZSA9IGZhbHNlOyAJCQl2YXIgYW5Sb3dzID0gJCgndGJvZHk+dHInLCB0aGlzKTsgCQkJZm9yICggaT0wLCBpTGVuPW9TZXR0aW5ncy5hc1N0cmlwQ2xhc3Nlcy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQl7IAkJCQlpZiAoIGFuUm93cy5maWx0ZXIoIjpsdCgyKSIpLmhhc0NsYXNzKCBvU2V0dGluZ3MuYXNTdHJpcENsYXNzZXNbaV0pICkgCQkJCXsgCQkJCQliU3RyaXBlUmVtb3ZlID0gdHJ1ZTsgCQkJCQlicmVhazsgCQkJCX0gCQkJfSAJCQkJCSAJCQlpZiAoIGJTdHJpcGVSZW1vdmUgKSAJCQl7IAkJCQkvKiBTdG9yZSB0aGUgY2xhc3NlcyB3aGljaCB3ZSBhcmUgYWJvdXQgdG8gcmVtb3ZlIHNvIHRoZXkgY2FuIGJlIHJlYWRkZWQgb24gZGVzdG9yeSAqLyAJCQkJb1NldHRpbmdzLmFzRGVzdG9yeVN0cmlwcyA9IFsgJycsICcnIF07IAkJCQlpZiAoICQoYW5Sb3dzWzBdKS5oYXNDbGFzcyhvU2V0dGluZ3Mub0NsYXNzZXMuc1N0cmlwT2RkKSApIAkJCQl7IAkJCQkJb1NldHRpbmdzLmFzRGVzdG9yeVN0cmlwc1swXSArPSBvU2V0dGluZ3Mub0NsYXNzZXMuc1N0cmlwT2RkKyIgIjsgCQkJCX0gCQkJCWlmICggJChhblJvd3NbMF0pLmhhc0NsYXNzKG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU3RyaXBFdmVuKSApIAkJCQl7IAkJCQkJb1NldHRpbmdzLmFzRGVzdG9yeVN0cmlwc1swXSArPSBvU2V0dGluZ3Mub0NsYXNzZXMuc1N0cmlwRXZlbjsgCQkJCX0gCQkJCWlmICggJChhblJvd3NbMV0pLmhhc0NsYXNzKG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU3RyaXBPZGQpICkgCQkJCXsgCQkJCQlvU2V0dGluZ3MuYXNEZXN0b3J5U3RyaXBzWzFdICs9IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU3RyaXBPZGQrIiAiOyAJCQkJfSAJCQkJaWYgKCAkKGFuUm93c1sxXSkuaGFzQ2xhc3Mob1NldHRpbmdzLm9DbGFzc2VzLnNTdHJpcEV2ZW4pICkgCQkJCXsgCQkJCQlvU2V0dGluZ3MuYXNEZXN0b3J5U3RyaXBzWzFdICs9IG9TZXR0aW5ncy5vQ2xhc3Nlcy5zU3RyaXBFdmVuOyAJCQkJfSAJCQkJIAkJCQlhblJvd3MucmVtb3ZlQ2xhc3MoIG9TZXR0aW5ncy5hc1N0cmlwQ2xhc3Nlcy5qb2luKCcgJykgKTsgCQkJfSAJCQkgCQkJLyogCQkJICogQ29sdW1ucyAJCQkgKiBTZWUgaWYgd2Ugc2hvdWxkIGxvYWQgY29sdW1ucyBhdXRvbWF0aWNhbGx5IG9yIHVzZSBkZWZpbmVkIG9uZXMgCQkJICovIAkJCXZhciBuVGhlYWQgPSB0aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0aGVhZCcpOyAJCQl2YXIgYW5UaHMgPSBuVGhlYWQubGVuZ3RoPT09MCA/IFtdIDogX2ZuR2V0VW5pcXVlVGhzKCBuVGhlYWRbMF0gKTsgCQkJdmFyIGFvQ29sdW1uc0luaXQ7IAkJCSAJCQkvKiBJZiBub3QgZ2l2ZW4gYSBjb2x1bW4gYXJyYXksIGdlbmVyYXRlIG9uZSB3aXRoIG51bGxzICovIAkJCWlmICggdHlwZW9mIG9Jbml0LmFvQ29sdW1ucyA9PSAndW5kZWZpbmVkJyApIAkJCXsgCQkJCWFvQ29sdW1uc0luaXQgPSBbXTsgCQkJCWZvciAoIGk9MCwgaUxlbj1hblRocy5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJeyAJCQkJCWFvQ29sdW1uc0luaXQucHVzaCggbnVsbCApOyAJCQkJfSAJCQl9IAkJCWVsc2UgCQkJeyAJCQkJYW9Db2x1bW5zSW5pdCA9IG9Jbml0LmFvQ29sdW1uczsgCQkJfSAJCQkgCQkJLyogQWRkIHRoZSBjb2x1bW5zICovIAkJCWZvciAoIGk9MCwgaUxlbj1hb0NvbHVtbnNJbml0Lmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCXsgCQkJCS8qIENoZWNrIGlmIHdlIGhhdmUgY29sdW1uIHZpc2liaWx0eSBzdGF0ZSB0byByZXN0b3JlICovIAkJCQlpZiAoIHR5cGVvZiBvSW5pdC5zYXZlZF9hb0NvbHVtbnMgIT0gJ3VuZGVmaW5lZCcgJiYgb0luaXQuc2F2ZWRfYW9Db2x1bW5zLmxlbmd0aCA9PSBpTGVuICkgCQkJCXsgCQkJCQlpZiAoIGFvQ29sdW1uc0luaXRbaV0gPT09IG51bGwgKSAJCQkJCXsgCQkJCQkJYW9Db2x1bW5zSW5pdFtpXSA9IHt9OyAJCQkJCX0gCQkJCQlhb0NvbHVtbnNJbml0W2ldLmJWaXNpYmxlID0gb0luaXQuc2F2ZWRfYW9Db2x1bW5zW2ldLmJWaXNpYmxlOyAJCQkJfSAJCQkJIAkJCQlfZm5BZGRDb2x1bW4oIG9TZXR0aW5ncywgYW5UaHMgPyBhblRoc1tpXSA6IG51bGwgKTsgCQkJfSAJCQkgCQkJLyogQWRkIG9wdGlvbnMgZnJvbSBjb2x1bW4gZGVmaW5hdGlvbnMgKi8gCQkJaWYgKCB0eXBlb2Ygb0luaXQuYW9Db2x1bW5EZWZzICE9ICd1bmRlZmluZWQnICkgCQkJeyAJCQkJLyogTG9vcCBvdmVyIHRoZSBjb2x1bW4gZGVmcyBhcnJheSAtIGxvb3AgaW4gcmV2ZXJzZSBzbyBmaXJzdCBpbnN0YWNlIGhhcyBwcmlvcml0eSAqLyAJCQkJZm9yICggaT1vSW5pdC5hb0NvbHVtbkRlZnMubGVuZ3RoLTEgOyBpPj0wIDsgaS0tICkgCQkJCXsgCQkJCQkvKiBFYWNoIGNvbHVtbiBkZWYgY2FuIHRhcmdldCBtdWx0aXBsZSBjb2x1bW5zLCBhcyBpdCBpcyBhbiBhcnJheSAqLyAJCQkJCXZhciBhVGFyZ2V0cyA9IG9Jbml0LmFvQ29sdW1uRGVmc1tpXS5hVGFyZ2V0czsgCQkJCQlpZiAoICEkLmlzQXJyYXkoIGFUYXJnZXRzICkgKSAJCQkJCXsgCQkJCQkJX2ZuTG9nKCBvU2V0dGluZ3MsIDEsICdhVGFyZ2V0cyBtdXN0IGJlIGFuIGFycmF5IG9mIHRhcmdldHMsIG5vdCBhICcrKHR5cGVvZiBhVGFyZ2V0cykgKTsgCQkJCQl9IAkJCQkJZm9yICggaj0wLCBqTGVuPWFUYXJnZXRzLmxlbmd0aCA7IGo8akxlbiA7IGorKyApIAkJCQkJeyAJCQkJCQlpZiAoIHR5cGVvZiBhVGFyZ2V0c1tqXSA9PSAnbnVtYmVyJyAmJiBhVGFyZ2V0c1tqXSA+PSAwICkgCQkJCQkJeyAJCQkJCQkJLyogMCsgaW50ZWdlciwgbGVmdCB0byByaWdodCBjb2x1bW4gY291bnRpbmcuIFdlIGFkZCBjb2x1bW5zIHdoaWNoIGFyZSB1bmtub3duIAkJCQkJCQkgKiBhdXRvbWF0aWNhbGx5LiBJcyB0aGlzIHRoZSByaWdodCBiZWhhdmlvdXIgZm9yIHRoaXM/IFdlIHNob3VsZCBhdCBsZWFzdCAJCQkJCQkJICogbG9nIGl0IGluIGZ1dHVyZS4gV2UgY2Fubm90IGRvIHRoaXMgZm9yIHRoZSBuZWdhdGl2ZSBvciBjbGFzcyB0YXJnZXRzLCBvbmx5IGhlcmUuIAkJCQkJCQkgKi8gCQkJCQkJCXdoaWxlKCBvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA8PSBhVGFyZ2V0c1tqXSApIAkJCQkJCQl7IAkJCQkJCQkJX2ZuQWRkQ29sdW1uKCBvU2V0dGluZ3MgKTsgCQkJCQkJCX0gCQkJCQkJCV9mbkNvbHVtbk9wdGlvbnMoIG9TZXR0aW5ncywgYVRhcmdldHNbal0sIG9Jbml0LmFvQ29sdW1uRGVmc1tpXSApOyAJCQkJCQl9IAkJCQkJCWVsc2UgaWYgKCB0eXBlb2YgYVRhcmdldHNbal0gPT0gJ251bWJlcicgJiYgYVRhcmdldHNbal0gPCAwICkgCQkJCQkJeyAJCQkJCQkJLyogTmVnYXRpdmUgaW50ZWdlciwgcmlnaHQgdG8gbGVmdCBjb2x1bW4gY291bnRpbmcgKi8gCQkJCQkJCV9mbkNvbHVtbk9wdGlvbnMoIG9TZXR0aW5ncywgb1NldHRpbmdzLmFvQ29sdW1ucy5sZW5ndGgrYVRhcmdldHNbal0sICAJCQkJCQkJCW9Jbml0LmFvQ29sdW1uRGVmc1tpXSApOyAJCQkJCQl9IAkJCQkJCWVsc2UgaWYgKCB0eXBlb2YgYVRhcmdldHNbal0gPT0gJ3N0cmluZycgKSAJCQkJCQl7IAkJCQkJCQkvKiBDbGFzcyBuYW1lIG1hdGNoaW5nIG9uIFRIIGVsZW1lbnQgKi8gCQkJCQkJCWZvciAoIGs9MCwga0xlbj1vU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCA7IGs8a0xlbiA7IGsrKyApIAkJCQkJCQl7IAkJCQkJCQkJaWYgKCBhVGFyZ2V0c1tqXSA9PSAiX2FsbCIgfHwgCQkJCQkJCQkgICAgIG9TZXR0aW5ncy5hb0NvbHVtbnNba10ublRoLmNsYXNzTmFtZS5pbmRleE9mKCBhVGFyZ2V0c1tqXSApICE9IC0xICkgCQkJCQkJCQl7IAkJCQkJCQkJCV9mbkNvbHVtbk9wdGlvbnMoIG9TZXR0aW5ncywgaywgb0luaXQuYW9Db2x1bW5EZWZzW2ldICk7IAkJCQkJCQkJfSAJCQkJCQkJfSAJCQkJCQl9IAkJCQkJfSAJCQkJfSAJCQl9IAkJCSAJCQkvKiBBZGQgb3B0aW9ucyBmcm9tIGNvbHVtbiBhcnJheSAtIGFmdGVyIHRoZSBkZWZzIGFycmF5IHNvIHRoaXMgaGFzIHByaW9yaXR5ICovIAkJCWlmICggdHlwZW9mIGFvQ29sdW1uc0luaXQgIT0gJ3VuZGVmaW5lZCcgKSAJCQl7IAkJCQlmb3IgKCBpPTAsIGlMZW49YW9Db2x1bW5zSW5pdC5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSAJCQkJeyAJCQkJCV9mbkNvbHVtbk9wdGlvbnMoIG9TZXR0aW5ncywgaSwgYW9Db2x1bW5zSW5pdFtpXSApOyAJCQkJfSAJCQl9IAkJCSAJCQkvKiAJCQkgKiBTb3J0aW5nIAkJCSAqIENoZWNrIHRoZSBhYVNvcnRpbmcgYXJyYXkgCQkJICovIAkJCWZvciAoIGk9MCwgaUxlbj1vU2V0dGluZ3MuYWFTb3J0aW5nLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApIAkJCXsgCQkJCWlmICggb1NldHRpbmdzLmFhU29ydGluZ1tpXVswXSA+PSBvU2V0dGluZ3MuYW9Db2x1bW5zLmxlbmd0aCApIAkJCQl7IAkJCQkJb1NldHRpbmdzLmFhU29ydGluZ1tpXVswXSA9IDA7IAkJCQl9IAkJCQl2YXIgb0NvbHVtbiA9IG9TZXR0aW5ncy5hb0NvbHVtbnNbIG9TZXR0aW5ncy5hYVNvcnRpbmdbaV1bMF0gXTsgCQkJCSAJCQkJLyogQWRkIGEgZGVmYXVsdCBzb3J0aW5nIGluZGV4ICovIAkJCQlpZiAoIHR5cGVvZiBvU2V0dGluZ3MuYWFTb3J0aW5nW2ldWzJdID09ICd1bmRlZmluZWQnICkgCQkJCXsgCQkJCQlvU2V0dGluZ3MuYWFTb3J0aW5nW2ldWzJdID0gMDsgCQkJCX0gCQkJCSAJCQkJLyogSWYgYWFTb3J0aW5nIGlzIG5vdCBkZWZpbmVkLCB0aGVuIHdlIHVzZSB0aGUgZmlyc3QgaW5kaWNhdG9yIGluIGFzU29ydGluZyAqLyAJCQkJaWYgKCB0eXBlb2Ygb0luaXQuYWFTb3J0aW5nID09ICJ1bmRlZmluZWQiICYmICAJCQkJCQkgdHlwZW9mIG9TZXR0aW5ncy5zYXZlZF9hYVNvcnRpbmcgPT0gInVuZGVmaW5lZCIgKSAJCQkJeyAJCQkJCW9TZXR0aW5ncy5hYVNvcnRpbmdbaV1bMV0gPSBvQ29sdW1uLmFzU29ydGluZ1swXTsgCQkJCX0gCQkJCSAJCQkJLyogU2V0IHRoZSBjdXJyZW50IHNvcnRpbmcgaW5kZXggYmFzZWQgb24gYW9Db2x1bW5zLmFzU29ydGluZyAqLyAJCQkJZm9yICggaj0wLCBqTGVuPW9Db2x1bW4uYXNTb3J0aW5nLmxlbmd0aCA7IGo8akxlbiA7IGorKyApIAkJCQl7IAkJCQkJaWYgKCBvU2V0dGluZ3MuYWFTb3J0aW5nW2ldWzFdID09IG9Db2x1bW4uYXNTb3J0aW5nW2pdICkgCQkJCQl7IAkJCQkJCW9TZXR0aW5ncy5hYVNvcnRpbmdbaV1bMl0gPSBqOyAJCQkJCQlicmVhazsgCQkJCQl9IAkJCQl9IAkJCX0gCQkJCSAJCQkvKiBEbyBhIGZpcnN0IHBhc3Mgb24gdGhlIHNvcnRpbmcgY2xhc3NlcyAoYWxsb3dzIGFueSBzaXplIGNoYW5nZXMgdG8gYmUgdGFrZW4gaW50byAJCQkgKiBhY2NvdW50LCBhbmQgYWxzbyB3aWxsIGFwcGx5IHNvcnRpbmcgZGlzYWJsZWQgY2xhc3NlcyBpZiBkaXNhYmxlZCAJCQkgKi8gCQkJX2ZuU29ydGluZ0NsYXNzZXMoIG9TZXR0aW5ncyApOyAJCQkgCQkJLyogCQkJICogRmluYWwgaW5pdCAJCQkgKiBTYW5pdHkgY2hlY2sgdGhhdCB0aGVyZSBpcyBhIHRoZWFkIGFuZCB0Ym9keS4gSWYgbm90IGxldCdzIGp1c3QgY3JlYXRlIHRoZW0gCQkJICovIAkJCWlmICggdGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGhlYWQnKS5sZW5ndGggPT09IDAgKSAJCQl7IAkJCQl0aGlzLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndGhlYWQnICkgKTsgCQkJfSAJCQkgCQkJaWYgKCB0aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0Ym9keScpLmxlbmd0aCA9PT0gMCApIAkJCXsgCQkJCXRoaXMuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0Ym9keScgKSApOyAJCQl9IAkJCSAJCQlvU2V0dGluZ3MublRIZWFkID0gdGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGhlYWQnKVswXTsgCQkJb1NldHRpbmdzLm5UQm9keSA9IHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3Rib2R5JylbMF07IAkJCWlmICggdGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGZvb3QnKS5sZW5ndGggPiAwICkgCQkJeyAJCQkJb1NldHRpbmdzLm5URm9vdCA9IHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3Rmb290JylbMF07IAkJCX0gCQkJIAkJCS8qIENoZWNrIGlmIHRoZXJlIGlzIGRhdGEgcGFzc2luZyBpbnRvIHRoZSBjb25zdHJ1Y3RvciAqLyAJCQlpZiAoIGJVc2VQYXNzZWREYXRhICkgCQkJeyAJCQkJZm9yICggaT0wIDsgaTxvSW5pdC5hYURhdGEubGVuZ3RoIDsgaSsrICkgCQkJCXsgCQkJCQlfZm5BZGREYXRhKCBvU2V0dGluZ3MsIG9Jbml0LmFhRGF0YVsgaSBdICk7IAkJCQl9IAkJCX0gCQkJZWxzZSAJCQl7IAkJCQkvKiBHcmFiIHRoZSBkYXRhIGZyb20gdGhlIHBhZ2UgKi8gCQkJCV9mbkdhdGhlckRhdGEoIG9TZXR0aW5ncyApOyAJCQl9IAkJCSAJCQkvKiBDb3B5IHRoZSBkYXRhIGluZGV4IGFycmF5ICovIAkJCW9TZXR0aW5ncy5haURpc3BsYXkgPSBvU2V0dGluZ3MuYWlEaXNwbGF5TWFzdGVyLnNsaWNlKCk7IAkJCSAJCQkvKiBJbml0aWFsaXNhdGlvbiBjb21wbGV0ZSAtIHRhYmxlIGNhbiBiZSBkcmF3biAqLyAJCQlvU2V0dGluZ3MuYkluaXRpYWxpc2VkID0gdHJ1ZTsgCQkJIAkJCS8qIENoZWNrIGlmIHdlIG5lZWQgdG8gaW5pdGlhbGlzZSB0aGUgdGFibGUgKGl0IG1pZ2h0IG5vdCBoYXZlIGJlZW4gaGFuZGVkIG9mZiB0byB0aGUgCQkJICogbGFuZ3VhZ2UgcHJvY2Vzc29yKSAJCQkgKi8gCQkJaWYgKCBiSW5pdEhhbmRlZE9mZiA9PT0gZmFsc2UgKSAJCQl7IAkJCQlfZm5Jbml0YWxpc2UoIG9TZXR0aW5ncyApOyAJCQl9IAkJfSk7IAl9OyB9KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpOw=='
	$jQuery=[system.text.encoding]::utf8.getstring( [system.convert]::FromBase64String($base64JQuery))
	$jqueryUICustom      =[system.text.encoding]::utf8.getstring( [system.convert]::FromBase64String($base64JQueryUICustom))
	$demoTableJUICSS   =[system.text.encoding]::utf8.getstring( [system.convert]::FromBase64String($base64DemoTableJUICSS))
	$demoTableCSS	   =[system.text.encoding]::utf8.getstring( [system.convert]::FromBase64String($base64DemoTableCSS))
	$demoPageCSS       = [system.text.encoding]::utf8.getstring( [system.convert]::FromBase64String($base64DemoPageCSS))
	$jQueryDataTables=[system.text.encoding]::utf8.getstring( [system.convert]::FromBase64String($base64JQueryDataTables))

@"
<html>
	<head>
		<style type="text/css" title="currentStyle">
			$demoPageCSS
			$demoTableCSS
			$demoTableJUICSS
			$jqueryUICustom
		</style>

		<script type="text/javascript" >
				$jQuery
		</script>
		<script type="text/javascript" >
				$jQueryDataTables
		</script>

        <script type="text/javascript" charset="utf-8">
			`$( function() {
				`$('#example').dataTable({
                    "bJQueryUI": true,
                    "sPaginationType": "full_numbers"
                });
			} );
		</script>

	</head>
<body>
"@
}

Function Out-DataTableView {
    param(
        [string[]]$Properties,
        [switch]$view
    )

    begin {
		$r = ""
		$Global:HeadingsExported = $null 
        $result = @()
    }

    process {
        if(!$Global:HeadingsExported) {
            if(!$Properties) {
                $Properties = $_ |Get-Member -MemberType *Property | Select -ExpandProperty Name
            }

            $r += Get-DataTableHtml

            $r += '<table cellpadding="0" cellspacing="0" border="0" id="example" class="display">'
            $r += "`r`n<thead><tr>"
            ForEach($property in $Properties) {
                $r += "`r`n<th>$property</th>"
            }
            $r += "</tr></thead><tbody>"

            $Global:HeadingsExported = "finished"
        }

        $r += "<tr>"
        ForEach($property in $Properties) {
            $r += "<td>$($_.$Property)</td>"
        }
        $r += "</tr>"
    }

    end {

        $r += "</tbody></table></body></html>"
        $r
    }
}



#$req_query_channel = 'powershell'
#$req_query_count = 5
if ($req_query_channel -and $req_query_count){
    $channel = $req_query_channel
    $count = $req_query_count
    $rawPosts = (Invoke-RestMethod "https://www.reddit.com/r/$channel.json?limit=100" -Verbose).data.children.data
    $redditPosts = foreach ($post in $rawPosts){
        [PSCustomObject]@{
            Name        = $post.Name
            UPS         = $post.UPS
            NumComments = $post.num_comments
            Author      = $post.Author
            Flair       = $post.link_flair_text
            Created     = [timezone]::CurrentTimeZone.ToLocalTime(([datetime]'1/1/1970').AddSeconds($post.created_utc))
            Title       = $post.Title
            Url         = $post.Url
        }
    }

    $html = $redditPosts |
        where {$_.Created -gt (Get-Date).AddDays(-1)} |
        sort UPS, NumComments -Descending |
        select -First $count |
        Out-DataTableView
    
    @{
    headers = @{ "content-type" = "text/html" }
    body    = $html
    } | ConvertTo-Json -Depth 5 > $res

}